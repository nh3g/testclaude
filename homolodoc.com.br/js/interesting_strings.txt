 a ativa:",this.tabId)},logoutAndReload:function(){D.logoutSession(),sessionStorage.removeItem("token"),sessionStorage.removeItem("session_token"),this.$router.push("/login").then(()=>{window.location.reload()})},startSessionWatcher:function(){console.log("[Session] Iniciando watcher de sess
 anexos a serem exibidos. ")])])])},hm=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"out-title-text brick-title"},[t("span",{staticClass:"font-weight-bold brick-title"},[e._v("Triagem")]),e._v(" Chatbot ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"out-title-text brick-title"},[t("span",{staticClass:"font-weight-bold brick-title"},[e._v("Arquivos")]),e._v(" Enviados ")])}],Om={loadChat(e){return new Promise((t,a)=>{let n=sessionStorage.getItem("token"),i={token:n,attendance_id:e,limit:200,offset:0};C.a.post(R.ENDPOINTS.GET_CHAT,i,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(e=>{t(e.data)})})}},pm={props:["item"],mixins:[ve],components:{},data(){return{chatList:[],updateTimeout:null,cancelTimeout:!1,caseAttendanceId:null,attachmentImg:[],attachmentImgIds:[],attachmentPdf:[],attachmentPdfIds:[],attachs:!1,numberOfColumns:9}},created(){this.caseAttendanceId=null!=this.$store.state.Data.CaseAttendance.info.case_attendance_id?this.$store.state.Data.CaseAttendance.info.case_attendance_id:this.$store.state.Data.CaseAttendance.info.id,this.cancelTimeout=!1,this.loadChat(),this.$bus.on("restart-queue-update",this.stopChat)},destroyed(){this.stopChat()},methods:{stopChat(){clearTimeout(this.updateTimeout),this.cancelTimeout=!0},loadChat(e){Om.loadChat(this.caseAttendanceId).then(e=>{this.cancelTimeout||(this.updateTimeout=setTimeout(this.loadChat,1e4),null!=e.data.messages&&(this.chatList=e.data.messages.reverse(),this.chatList.map(e=>(e.message&&0==e.message.indexOf("bot")?(e.isBot=!0,e.message=e.message.replace("bot","")):e.isBot=!1,e.attachment?-1!=e.attachment.indexOf(".jpg")?(e.isImage=!0,this.attachmentImg.includes(e.attachment)||this.attachmentImgIds.includes(e.id)||(this.attachs=!0,this.attachmentImg.push(e.attachment),this.attachmentImgIds.push(e.id))):(e.isPDF=!0,this.attachmentPdf.includes(e.attachment)||this.attachmentPdfIds.includes(e.id)||(this.attachs=!0,this.attachmentPdf.push(e.attachment),this.attachmentPdfIds.push(e.id))):e.isImage=!1,e))))})},formatDate(e){let t=Ot.a.tz(e,"utc");return t.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("HH:mm")}},computed:{gridStyle(){return{gridTemplateColumns:`repeat(${this.numberOfColumns}, minmax(10px, 1fr))`}}}},Sm=pm,Cm=(a("ae3e"),Object(I["a"])(Sm,Im,hm,!1,null,null,null)),Tm=Cm.exports,Rm=function(){var e=this,t=e._self._c;return t("div",[e._m(0),e.attachs?t("div",[t("ul",{staticClass:"card-list text-center",style:e.gridStyle},[e._l(e.attachmentImg,(function(a,n){return t("li",{key:n},[t("a",{on:{click:function(t){return e.showModal("img",n+1,a)}}},[t("img",{staticClass:"image-att",attrs:{src:a}}),t("span",{staticClass:"text"},[e._v(" image"+e._s(n+1)+" ")])])])})),e._l(e.attachmentPdf,(function(n,i){return t("li",{key:i+"pdf"},[t("a",{on:{click:function(t){return e.showModal("pdf",i+1,n)}}},[t("img",{staticClass:"image-att",attrs:{src:a("ed1f")}}),t("span",{},[e._v(" upload"+e._s(i+1)+" ")])])])}))],2)]):e._e(),e.attachs?e._e():t("div",[t("p",{staticClass:"thick"},[e._v(" N
 anexos a serem exibidos. ")])]),t(d["a"],{attrs:{persistent:"",width:"60%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"text-h5 mb-3"},[t(te["a"],{attrs:{flat:"",dark:"",color:"primary"}},[t(r["a"],{staticClass:"ml-3",attrs:{icon:"",white:""},on:{click:function(t){e.dialog=!1}}},[t(at["a"],[e._v("close")])],1),"img"==e.imagemModal.type?t(ae["b"],[e._v(e._s("Imagem "+e.imagemModal.index))]):t(ae["b"],[e._v(" "+e._s("Upload "+e.imagemModal.index)+" ")])],1)],1),t(c["b"],{staticClass:"mt-1"},["img"==e.imagemModal.type?t("div",[t("img",{staticClass:"img-modal",attrs:{height:"700",src:e.imagemModal.doc}})]):t("div",[t("object",{staticStyle:{width:"100%"},attrs:{data:e.imagemModal.doc,height:"700",type:"application/pdf"}})])])],1)],1)],1)},Dm=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"out-title-text brick-title"},[t("span",{staticClass:"font-weight-bold brick-title"},[e._v("Arquivos")]),e._v(" Enviados ")])}],gm={props:["brickDetails"],mixins:[ve],components:{},data(){return{brickName:"case_attendance_attachment_member",dialog:!1,imagemModal:{type:null,doc:null,index:0},pdf:null,src:null,numPages:void 0,chatList:[],updateTimeout:null,cancelTimeout:!1,caseAttendanceId:null,attachmentImg:[],attachmentPdf:[],attachs:!1,numberOfColumns:9}},created(){this.caseAttendanceId=null!=this.$store.state.Data.CaseAttendance.info.case_attendance_id?this.$store.state.Data.CaseAttendance.info.case_attendance_id:this.$store.state.Data.CaseAttendance.info.id,this.cancelTimeout=!1,this.init(),this.$bus.on("restart-queue-update",this.stopChat)},destroyed(){this.stopChat()},methods:{showModal(e,t,a){this.dialog=!0,this.imagemModal.index=t,this.imagemModal.type=e,this.imagemModal.doc=a,a=a.replace("/download",""),a=a.split("?"),"pdf"==e&&C.a.get(a[0]).then(e=>{let t="/"+e.data.generation,a=e.data.id;this.imagemModal.doc="https://"+a.replace(t,"")})},stopChat(){clearTimeout(this.updateTimeout),this.cancelTimeout=!0},init(){this.brickDetails.case_attendance_attachment_member.map(e=>(e.attachment?-1!=e.attachment.indexOf(".jpg")?(e.isImage=!0,this.attachmentImg.includes(e.attachment)||(this.attachs=!0,this.attachmentImg.push(e.attachment))):(e.isPDF=!0,this.attachmentPdf.includes(e.attachment)||(this.attachs=!0,this.attachmentPdf.push(e.attachment))):e.isImage=!1,e))},formatDate(e){let t=Ot.a.tz(e,"utc");return t.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("HH:mm")}},computed:{gridStyle(){return{gridTemplateColumns:`repeat(${this.numberOfColumns}, minmax(10px, 1fr))`}}}},Lm=gm,fm=(a("8943"),Object(I["a"])(Lm,Rm,Dm,!1,null,null,null)),Nm=fm.exports,km=function(){var e=this,t=e._self._c;return t("div",{staticClass:"outcome mb-6"},[t("div",{staticClass:"out-title"},[t("div",{staticClass:"out-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.conclusion")))]),e._v("\n      "+e._s(e.$t("patient.attendance"))+"\n    ")])]),t("div",{staticClass:"radios mb-3 ml-2"},[t(Qs["a"],{attrs:{disabled:e.disabled,row:""},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},e._l(e.orientation,(function(e,a){return t(Zs["a"],{key:a,staticClass:"rows pa-2",attrs:{label:e.name,value:e.value,height:"37px"}})})),1)],1),t("div",{staticClass:"mb-n3 ml-2"},[t(Ni["a"],{staticClass:"textarea-data",attrs:{disabled:e.disabled,height:"100px",label:e.$t("patient.observations"),outlined:"","no-resize":""},model:{value:e.observation,callback:function(t){e.observation="string"===typeof t?t.trim():t},expression:"observation"}})],1)])},vm=[],bm={props:["brickDetails"],mixins:[ve],data(){return{orientation:[{name:this.$t("patient.attendance_completed_successfully"),value:!0},{name:this.$t("patient.attendance_completed_without_success"),value:!1}],success:null,disabled:!1,isValid:!0,message:"",observation:""}},created(){if(this.disabled=this.$store.state.Data.CaseAttendance.history_mode,this.brickDetails&&this.brickDetails.conclusao_atendimento&&this.brickDetails.conclusao_atendimento.length>0&&this.$store.state.Data.CaseAttendance.history_mode){let e={};if(this.$store.state.Data.CaseAttendance.history_mode){let t=this.brickDetails.conclusao_atendimento[0].program_step;(t||2==this.$store.state.Data.CaseAttendance.info.program_step)&&(e=this.brickDetails.conclusao_atendimento[0])}else e=this.brickDetails.conclusao_atendimento[0];this.success=1==e.attendance_complete_successfully,this.observation=e.observation}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{sendSaveData(){this.isValid=!0,this.message="",this.validateBeforeSave();let e={brick_key:"conclusao_atendimento",brick_data:{attendance_complete_successfully:this.success,observation:this.observation},isValid:this.isValid,message:this.message};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)},validateBeforeSave(){null!==this.success&&void 0!==this.success||(this.isValid=!1,this.message="A Conclus
as da polpa e dos tecidos periapicais","created_at":"2020-04-03 23:48:57.224578","updated_at":"2020-04-03 23:48:57.227045"},{"id":777,"cid_group_id":11,"code":"K05","name":"Gengivite e doen
as dos capilares","created_at":"2020-04-03 23:48:57.224578","updated_at":"2020-04-03 23:48:57.227045"},{"id":693,"cid_group_id":9,"code":"I79","name":"Transtornos das art
as extrapiramidais e transtornos dos movimentos","created_at":"2020-04-03 23:48:57.224578","updated_at":"2020-04-03 23:48:57.227045"},{"id":513,"cid_group_id":6,"code":"G26","name":"Doen
as extrapiramidais e transtornos dos movimentos em doen
a"):this.form.child_height.replace(".",",")}},computed:{responsibleNameeErrors(){const e=[];return this.$v.form.responsible_name?(!this.$v.form.responsible_name.required&&e.push(this.$t("nutritional.required")),e):e},weightErrors(){const e=[];return this.$v.form.child_weight?(!this.$v.form.child_weight.required&&e.push(this.$t("nutritional.required")),e):e},heightErrors(){const e=[];return this.$v.form.child_height?(!this.$v.form.child_height.required&&e.push(this.$t("nutritional.required")),e):e}},watch:{},validations:{form:{responsible_name:{required:Object(Ae["requiredIf"])((function(){return null==this.form.responsible_name}))},child_weight:{required:Object(Ae["requiredIf"])((function(){return null==this.form.child_weight}))},child_height:{required:Object(Ae["requiredIf"])((function(){return null==this.form.child_height}))}}}},sc=ic,oc=(a("4b6d"),Object(I["a"])(sc,ac,nc,!1,null,"1dbbcc0e",null)),rc=oc.exports,lc=a("8860"),cc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emr-prescription mb-12"},[t("h2",{staticClass:"mt-6 mb-3 secondary--text font-weight-bold"},[t(at["a"],{staticClass:"mr-2",attrs:{color:"blue"}},[e._v("\n      mdi-book-cross\n    ")]),e._v("\n    "+e._s(e.$t("prescription.prescription"))+"\n  ")],1),t(re["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("h4",{staticClass:"mt-6 mb-3 davygrey--text font-weight-bold"},[e._v("\n          "+e._s(e.$t("prescription.certificates"))+" / "+e._s(e.$t("prescription.exams"))+" / "+e._s(e.$t("prescription.medications"))+"\n        ")])]),e.disabled?e._e():t(oe["a"],{attrs:{cols:"12",md:"3"}},[e.prescription.id?e._e():t(r["a"],{attrs:{loading:e.prescription.loading,disabled:e.prescription.error,color:"primary",outlined:"",width:"100%"},on:{click:e.initCasePrescription}},[t(at["a"],{staticClass:"mr-2",attrs:{color:"blue",small:""}},[e._v("\n            mdi-plus\n          ")]),t("span",{staticClass:"davygrey--text"},[e._v("\n            "+e._s(e.$t("prescription.prescription_iframe_button"))+"\n          ")])],1),e.prescription.id?t(r["a"],{attrs:{color:"red",outlined:"",width:"100%"},on:{click:e.cancelPrescription}},[e._v("\n          "+e._s(e.$t("prescription.prescription_cancel_button"))+"\n        ")]):e._e(),t("ModalInformPatientPhone"),e.prescription.attendanceUrl?t("ModalPrescription",{attrs:{url:e.prescription.attendanceUrl}}):e._e(),e.prescription.id?t("TwoButtonsConfirmationModal",{attrs:{header:e.$t("prescription.cancel_prescription_header"),body:e.$t("prescription.cancel_prescription_body"),yesText:e.$t("prescription.cancel_prescription_yes_text")},on:{onConfirm:e.resetPrescription}}):e._e(),e.prescription.error?t("div",{staticClass:"d-flex align-center ml-4"},[t("img",{staticClass:"mr-1",attrs:{src:a("dfbb")}}),t("span",{staticClass:"red--text"},[e._v("\n            "+e._s(e.$t("prescription.prescription_invalid"))+"\n          ")])]):e._e()],1),e.hasUnimedSus?t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(r["a"],{staticClass:"unimed-btn",attrs:{disabled:e.disabled,color:"primary",outlined:"",width:"100%"},on:{click:e.openUnimedSus}},[t(at["a"],{staticClass:"mr-2",attrs:{color:"blue",small:""}},[e._v("\n            mdi-plus\n          ")]),t("span",{staticClass:"davygrey--text"},[e._v("\n            "+e._s(e.$t("prescription.unimed_sol"))+"\n          ")])],1)],1):e._e()],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("h4",{staticClass:"davygrey--text font-weight-bold mt-6 mb-3 text-uppercase"},[t(at["a"],{staticClass:"mr-2",attrs:{color:"blue"}},[e._v("\n            mdi-file-outline\n          ")]),e._v("\n          "+e._s(e.$t("prescription.certificate_plural"))+"\n        ")],1),e.prescription.certificate?e._e():t("span",{staticClass:"davygrey--text"},[e._v("\n          "+e._s(e.$t("prescription.certificate_not_included"))+"\n        ")]),e.prescription.certificate?t(lc["a"],{staticClass:"pt-0 pb-0",attrs:{disabled:""}},[t(Ct["a"],{staticClass:"pl-0 pr-0"},[t("span",{staticClass:"davygrey--text mr-2"},[e._v("
 Conselho",disabled:e.loading,"error-messages":e.registrationErrors,height:"48",outlined:""},on:{blur:function(t){return e.$v.registration.$touch()}},model:{value:e.registration,callback:function(t){e.registration="string"===typeof t?t.trim():t},expression:"registration"}})],1),t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(se["a"],{attrs:{label:e.$t("access_controls.state"),items:e.statesList,disabled:e.loading,"error-messages":e.stateErrors,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"48",outlined:""},on:{blur:function(t){return e.$v.state.$touch()}},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("access_controls.leader"),items:e.leaderUsers,"search-input":e.searchLeaderUsers,"item-value":"id","item-text":"name",loading:e.loadingLeaders,disabled:e.loading,"no-data-text":e.$t("controls.noDataAvailable"),"item-name":"name",height:"48",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchLeaderUsers=t},"update:search-input":function(t){e.searchLeaderUsers=t}},model:{value:e.leader_id,callback:function(t){e.leader_id=t},expression:"leader_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{staticClass:"smaller-fields",attrs:{label:e.$t("access_controls.status"),items:e.statusList,loading:e.loadingStatus,disabled:e.loading||e.loadingStatus,"error-messages":e.statusErrors,"item-text":"status","return-object":"",height:"48",outlined:""},on:{blur:function(t){return e.$v.status.$touch()}},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{staticClass:"smaller-fields",attrs:{label:e.$t("access_controls.role"),items:e.roleList,loading:e.loadingRoles,disabled:e.loading||e.loadingRoles,"error-messages":e.roleErrors,"item-text":"role","return-object":"",height:"48",outlined:""},on:{blur:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{staticClass:"smaller-fields",attrs:{label:e.$t("access_controls.speciality"),items:e.specialtyList,loading:e.loadingSpecialties,disabled:e.loading||e.loadingSpecialties,"item-text":"name","item-value":"id","return-object":"",height:"48",outlined:""},model:{value:e.specialty,callback:function(t){e.specialty=t},expression:"specialty"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{staticClass:"smaller-fields",attrs:{items:e.occupation,label:e.$t("schedule.occupation"),"hide-no-data":e.loadingOccupation,loading:e.loadingOccupation,disabled:e.loading||e.loadingOccupation,"item-text":"name","item-value":"id","return-object":"",height:"48",multiple:"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function({item:a,index:n}){return[0===n?t("span",[e._v(e._s(a.name))]):e._e(),1===n?t("span",{staticClass:"grey--text text-caption"},[e._v("\n                +"+e._s(e.chosenOccupation.length-1)+" "+e._s(e.$t("patient_modal.others"))+"\n              ")]):e._e()]}}]),model:{value:e.chosenOccupation,callback:function(t){e.chosenOccupation=t},expression:"chosenOccupation"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{staticClass:"smaller-fields",attrs:{label:e.$t("access_controls.department"),items:e.departmentList,loading:e.loadingDepartments,disabled:e.loading||e.loadingDepartments,"error-messages":e.departmentErrors,"item-text":"name","return-object":"",height:"48",outlined:""},on:{blur:function(t){return e.$v.department.$touch()}},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("access_controls.tuss_codes"),items:e.tussCodesList,loading:e.loadingTussCode,"item-text":"name","item-value":"id",height:"48","return-object":"",outlined:"","error-messages":e.tussCodeErrors},on:{blur:function(t){return e.$v.tussCode.$touch()}},model:{value:e.tussCode,callback:function(t){e.tussCode=t},expression:"tussCode"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(de["a"],{attrs:{label:e.$t("access_controls.about_me"),disabled:e.loading,"error-messages":e.aboutMeErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.about_me.$touch()}},model:{value:e.about_me,callback:function(t){e.about_me=t},expression:"about_me"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("access_controls.graduation"),disabled:e.loading,"error-messages":e.graduationErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.graduation.$touch()}},model:{value:e.graduation,callback:function(t){e.graduation=t},expression:"graduation"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("access_controls.institution"),disabled:e.loading,"error-messages":e.institutionErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.institution.$touch()}},model:{value:e.institution,callback:function(t){e.institution=t},expression:"institution"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("access_controls.institution_state"),items:e.statesList,disabled:e.loading,"error-messages":e.institutionStateErrors,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"37px",outlined:""},on:{blur:function(t){return e.$v.institution_state.$touch()}},model:{value:e.institution_state,callback:function(t){e.institution_state=t},expression:"institution_state"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("profile.graduation.registration_code_id"),items:e.registrationCodeList,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"37px",outlined:""},model:{value:e.registrationCodeId,callback:function(t){e.registrationCodeId=t},expression:"registrationCodeId"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{attrs:{label:e.$t("profile.graduation.registration_code"),height:"37px",outlined:""},model:{value:e.graduationRegistrationCode,callback:function(t){e.graduationRegistrationCode=t},expression:"graduationRegistrationCode"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("profile.graduation.registration_code_state"),items:e.statesList,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"37px",outlined:""},model:{value:e.graduationRegistrationCodeState,callback:function(t){e.graduationRegistrationCodeState=t},expression:"graduationRegistrationCodeState"}})],1)],1)],1)],1),t("NavigationConfirmationModal",{on:{onConfirm:e.removePhoto}})],1)},UL=[],yL={props:["item"],components:{NavigationConfirmationModal:dg},data(){return{loading:!1,loadingCpf:!1,loadingLeaders:!1,loadingStatus:!1,loadingRoles:!1,loadingSpecialties:!1,loadingOccupation:!1,loadingDepartments:!1,searchLeaderUsersTimeout:null,searchLeaderUsers:"",name:"",email:"",cpf:"",hover:!1,file:null,path:"",preview:"",leader_id:null,registration:"",role:"",specialty:"",status:"",department:"",about_me:"",graduation:"",institution:"",institution_state:"",leaderUsers:[],statusList:[],roleList:[],specialtyList:[],occupation:[],departmentList:[],info:"",isEdit:!1,newCpf:!1,programData:[],themesData:[],rawCpf:null,lineData:[],user_id:null,roleId:null,validCpf:!0,chosenOccupation:[],programQueue:[],statesList:this.$consts.MEDICAL_CONTROL_USER_STATES,councilList:[],registrationCodeList:[],professionalCouncil:"",registrationCodeId:"",graduationRegistrationCode:"",graduationRegistrationCodeState:"",state:null,tussCodesList:[],tussCodesGeneralList:[],loadingTussCode:!1,tussCode:null}},created(){this.getTussCodes(),this.listStatus(),this.listRoles(),this.listSpecialties(),this.listOccupations(),this.listDepartments(),this.getUserCouncil(),this.getRegistrationCode(),this.$bus.on("check-component",()=>{this.checkProgramData(),this.checkLineData(),this.sendComponentInfo()}),this.$bus.on("prepare-operational-data",()=>{this.prepareData()}),this.$bus.on("update-operational",()=>{this.getLineData(),this.getProgramData(),this.updateData()}),this.$bus.on("operational-program-data",e=>{this.programData=e,this.getProgramData()}),this.$bus.on("operational-queue-data",e=>{this.lineData=e,this.getLineData()}),this.$bus.on("update-successful",()=>{this.getUserData(this.user_id)}),this.item&&(this.getUserData(this.item.id),this.isEdit=!0),this.$bus.on("new-program-ids",e=>{this.programData=e}),this.$bus.on("new-queue-ids",e=>{this.lineData=e}),this.$bus.on("new-themes",e=>{this.themesData=e})},beforeDestroy(){clearTimeout(this.searchLeaderUsersTimeout),this.$bus.off("update-operational"),this.$bus.off("prepare-operational-data"),this.$bus.off("check-component"),this.$bus.off("operational-program-data"),this.$bus.off("new-themes")},methods:{listStatus(){this.loadingStatus=!0,be.listStatus().then(e=>{this.statusList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingStatus=!1})},getUserCouncil(){be.listCouncil().then(e=>{this.councilList=e.data}).catch(e=>{console.error(e)})},getRegistrationCode(){Me.list().then(e=>{this.registrationCodeList=e.data}).catch(e=>{console.error(e)})},listRoles(){this.loadingRoles=!0,be.listOperationRoles().then(e=>{this.roleList=e.data.sort((e,t)=>e.role.localeCompare(t.role))}).catch(e=>{console.error(e)}).finally(()=>{this.loadingRoles=!1})},listSpecialties(){this.loadingSpecialties=!0,be.listSpecialties().then(e=>{this.specialtyList=e.data.sort((e,t)=>e.name.localeCompare(t.name)),this.specialtyList.unshift({id:null,name:"Sem escolha"})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingSpecialties=!1})},listOccupations(){this.loadingOccupation=!0,be.listOccupations().then(e=>{this.occupation=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingOccupation=!1})},listDepartments(){this.loadingDepartments=!0,be.listDepartments().then(e=>{this.departmentList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingDepartments=!1})},sendComponentInfo(){this.item?(this.info="edit-operational",this.$bus.emit("component-info",this.info)):(this.info="operational",this.$bus.emit("component-info",this.info))},openNavigationConfirmationModal(){this.$bus.emit("open-navigation-confirmation-modal",this.$t("access_controls.remove_photo_question"))},uploadImage(e){this.file=e.target.files[0],this.file&&(this.path="",this.preview=URL.createObjectURL(this.file))},removePhoto(){this.hover=!1,this.file=null,this.path="",this.preview=""},createImageUrl(e=null){if(!e)return;let t={token:this.$store.state.Data.User.token,file:this.file};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,t).then(t=>{this.path=t.data[this.file.name].completeUrl,this.preview=this.path,this.file=null,e()}).catch(e=>{this.loading=!1,console.error(e)})},prepareData(){if(this.$v.$touch(),this.$v.$invalid)this.loading=!1;else{if(this.file)return this.createImageUrl(this.prepareData);if(this.newCpf&&this.validCpf){this.handleLineData(),this.handleProgramData(),this.programQueue=this.programQueue.filter((e,t,a)=>a.indexOf(e)===t);let e={name:this.name,email:this.email,password:123456,cpf:this.rawCpf,image_path:this.path,registration:this.registration,leader_id:this.leader_id,user_role_id:this.role.id,speciality_id:this.specialty.id,occupation:this.chosenOccupation,user_status:this.status.status,user_department_id:this.department.id,user_type:"OPERATIONAL",line_data:this.lineData,program_ids:this.programQueue,checkCpf:this.newCpf,about_me:this.about_me,user_graduation:{},professional_council_id:this.professionalCouncil,state:this.state,themes:this.themesData,tuss_code:this.tussCodesGeneralList.find(e=>e.term===this.tussCode)?this.tussCodesGeneralList.find(e=>e.term===this.tussCode).code:null};this.graduation&&(e.user_graduation.name=this.graduation),this.institution&&(e.user_graduation.institution=this.institution),this.institution_state&&(e.user_graduation.institution_state=this.institution_state),this.registrationCodeId&&(e.user_graduation.registration_code=this.graduationRegistrationCode,e.user_graduation.registration_code_id=this.registrationCodeId,e.user_graduation.registration_code_state=this.graduationRegistrationCodeState),0===Object.keys(e.user_graduation).length&&delete e["user_graduation"],this.$bus.emit("send-data",e)}}},updateData(){if(this.$v.$touch(),this.$v.$invalid||!this.item)return void(this.loading=!1);if(this.file)return this.createImageUrl(this.updateData);this.handleLineData(),this.handleProgramData(),this.programQueue=this.programQueue.filter((e,t,a)=>a.indexOf(e)===t);let e=this.role.id||this.roleList.find(e=>e.role==this.role).id,t={image_path:this.path,registration:this.registration,professional_council_id:this.professionalCouncil,leader_id:this.leader_id,user_role_id:e,speciality_id:null==this.specialty?null:this.specialty.id,occupation:this.chosenOccupation,user_status:this.status.status,user_department_id:this.department.id,line_data:this.lineData?this.lineData.toString():null,program_ids:this.programQueue.toString(),about_me:this.about_me,user_graduation:{},state:this.state,themes:this.themesData,tuss_code:this.tussCodesGeneralList.find(e=>e.term===this.tussCode)?this.tussCodesGeneralList.find(e=>e.term===this.tussCode).code:null};this.graduation&&(t.user_graduation.name=this.graduation),this.institution&&(t.user_graduation.institution=this.institution),this.institution_state&&(t.user_graduation.institution_state=this.institution_state),this.registrationCodeId&&(t.user_graduation.registration_code_id=this.registrationCodeId),this.graduationRegistrationCodeState&&(t.user_graduation.registration_code_state=this.graduationRegistrationCodeState),t.user_graduation.registration_code=this.graduationRegistrationCode,0===Object.keys(t.user_graduation).length&&delete t["user_graduation"];let a={token:this.$store.state.Data.User.token,user_id:this.user_id,user_info:t};this.$bus.emit("send-update-operational",a)},checkIfUserExists(){this.rawCpf=this.cpf.replace(/[-.\s]/g,""),this.rawCpf&&(this.loadingCpf=!0,this.validCpf=!0,be.checkDuplicatedCpf(this.rawCpf).then(e=>{this.newCpf=!0,this.validCpf=!0}).catch(e=>{this.newCpf=!1,this.validCpf=!1}).finally(()=>{this.loadingCpf=!1,this.$v.cpf.$touch()}))},getProgramData(){return this.programData},checkProgramData(){this.$bus.emit("check-program-data")},checkLineData(){this.$bus.emit("check-line-data")},getLineData(){return this.lineData},getTussCodes(){this.loadingTussCode=!0,be.getTussCodes().then(e=>{this.tussCodesList=e.data.map(e=>e.term),this.tussCodesGeneralList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingTussCode=!1})},getUserData(e){this.loading=!0,be.getUser(e).then(e=>{let t=e.data.user_info,a=e.data.role_info,n=e.data.user_graduation;this.roleList.find(e=>e.id==a.role_id)||this.roleList.push({id:a.role_id,role:a.role}),this.user_id=t.id,this.name=t.name,this.email=t.email,this.cpf=t.cpf,this.path=t.image_path,this.registration=t.registration,this.leader_id=t.leader_id,this.searchLeaderUsers=t.leader_name,this.status=t.user_status,this.role=a.role,this.specialty=t.speciality_id,this.chosenOccupation=e.data.user_occupation,this.department=e.data.department_info,this.roleId=a.role_id,this.program_ids=t.programs.map(e=>e.id),this.professionalCouncil=t.professional_council_id,this.queue_ids=t.queues.map(e=>e.id),this.about_me=t.about_me,this.graduation=n.name,this.institution=n.institution,this.state=t.state,this.institution_state=n.institution_state?this.statesList[n.institution_state-1]:null,this.registrationCodeId=n.registration_code_id,this.graduationRegistrationCodeState=n.registration_code_state_name,this.graduationRegistrationCode=n.registration_code,this.formatCpf(),this.sendProgramData(),this.sendQueueData(),this.sendThemesData(t.themes,this.roleId),this.preview=this.path,this.tussCode=this.tussCodesGeneralList.find(e=>e.code===t.tuss_code)?this.tussCodesGeneralList.find(e=>e.code===t.tuss_code).term:null}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},formatCpf(){let e=this.cpf.substr(0,3),t=this.cpf.substr(3,3),a=this.cpf.substr(6,3),n=this.cpf.substr(9,2),i=`${e}.${t}.${a}-${n}`;return this.cpf=i,this.cpf},sendProgramData(){this.$bus.emit("get-op-program-data",this.program_ids)},sendQueueData(){this.$bus.emit("get-queue-data",this.queue_ids)},handleLineData(){this.lineData&&this.lineData.length>0&&this.lineData.forEach(e=>{this.programQueue.push(e)})},handleProgramData(){this.programData&&this.programData.length>0&&this.programData.forEach(e=>{this.programQueue.push(e)})},sendThemesData(e,t){this.$bus.emit("get-themes-by-user",e,t)}},computed:{nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),!this.$v.name.minLength&&e.push(this.$t("access_controls.min_length")),e):e},emailErrors(){const e=[];return this.$v.email.$dirty?(!this.$v.email.email&&e.push(this.$t("access_controls.invalid_email")),!this.$v.email.required&&e.push(this.$t("access_controls.required")),e):e},cpfErrors(){const e=[];return this.$v.cpf.$dirty?(!this.$v.cpf.required&&e.push(this.$t("access_controls.required")),!this.$v.cpf.minLength&&e.push(this.$t("access_controls.invalid_cpf")),!this.validCpf&&e.push(this.$t("access_controls.user_exists")),e):e},registrationErrors(){const e=[];return this.$v.registration.$dirty?(!this.$v.registration.alphaNum&&e.push(this.$t("access_controls.invalid_registration")),e):e},statusErrors(){const e=[];return this.$v.status.$dirty?(!this.$v.status.required&&e.push(this.$t("access_controls.required")),e):e},departmentErrors(){const e=[];return this.$v.department.$dirty?(!this.$v.department.required&&e.push(this.$t("access_controls.required")),e):e},roleErrors(){const e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push(this.$t("access_controls.required")),e):e},aboutMeErrors(){const e=[];return this.$v.about_me.$dirty?(!this.$v.about_me.required&&e.push(this.$t("access_controls.required")),e):e},graduationErrors(){const e=[];return this.$v.graduation.$dirty?(!this.$v.graduation.required&&e.push(this.$t("access_controls.required")),e):e},institutionErrors(){const e=[];return this.$v.institution.$dirty?(!this.$v.institution.required&&e.push(this.$t("access_controls.required")),e):e},institutionStateErrors(){const e=[];return this.$v.institution_state.$dirty?(!this.$v.institution_state.required&&e.push(this.$t("access_controls.required")),e):e},stateErrors(){const e=[];return this.$v.state.$dirty?(!this.$v.state.required&&e.push(this.$t("access_controls.required")),e):e},tussCodeErrors(){const e=[];return this.$v.tussCode.$dirty?(!this.$v.tussCode.required&&e.push(this.$t("access_controls.required")),e):e}},watch:{searchLeaderUsers(e){clearTimeout(this.searchLeaderUsersTimeout);let t={limit:10,offset:0};e?(t.token=this.$store.state.Data.User.token,t.name=e,this.searchLeaderUsersTimeout=setTimeout(()=>{this.loadingLeaders=!0,this.$store.dispatch(this.$consts.USER_ACTIONS.SEARCH_USERS,t).then(e=>{this.leaderUsers=e.data.user_list.filter(e=>e.id!==this.user_id)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingLeaders=!1})},400)):(t.user_type=null,this.searchLeaderUsersTimeout=setTimeout(()=>{this.loadingLeaders=!0,be.listUsers(t).then(e=>{this.leaderUsers=e.data.user_list.filter(e=>e.id!==this.user_id)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingLeaders=!1})},400))},role(e){this.$bus.emit("select-role",e)}},validations:{name:{required:Ae["required"],minLength:Object(Ae["minLength"])(3)},email:{required:Ae["required"],email:Ae["email"]},cpf:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},registration:{alphaNum:Ae["alphaNum"]},status:{required:Ae["required"]},department:{required:Ae["required"]},role:{required:Ae["required"]},about_me:{required:Ae["required"]},state:{required:Ae["required"]},graduation:{required:Object(Ae["requiredIf"])((function(){return this.institution||this.institution_state}))},institution:{required:Object(Ae["requiredIf"])((function(){return this.graduation||this.institution_state}))},institution_state:{required:Object(Ae["requiredIf"])((function(){return this.graduation||this.institution}))},tussCode:{required:Ae["required"]}}},$L=yL,xL=(a("65c6"),Object(I["a"])($L,PL,UL,!1,null,null,null)),VL=xL.exports,GL=function(){var e=this,t=e._self._c;return t("div",{staticClass:"program-control"},[t(re["a"],[t(Xn["a"],[t("div",{staticClass:"title my-5"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("access_controls.select")))]),e._v(" "+e._s(e.$t("access_controls.programs"))+"\n        ")])]),t(ce["a"],e._l(e.programs,(function(a,n){return t(oe["a"],{key:n,staticClass:"checkboxes",attrs:{cols:"12",md:"3"}},[t(St["a"],{staticClass:"q-checkbox",attrs:{value:a.id,label:a.name},on:{change:function(t){return e.getData()},blur:function(t){return e.getData()}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)})),1)],1)],1),e.success?t("div",{staticClass:"mt-3 mb-n6"},[t("span",{staticClass:"green--text"},[e._v(e._s(e.$t("access_controls.update_successful")))])]):e._e()],1)},FL=[],BL={data(){return{selected:[],invalid:!1,programs:[],success:!1}},created(){this.$bus.on("get-op-program-data",e=>{this.selected=e,this.sendPrograms()}),this.$bus.on("update-successful",()=>{this.success=!0,setTimeout(()=>{this.success=!1},3e3)}),this.listPrograms()},beforeDestroy(){this.$bus.off("check-program-data"),this.$bus.off("get-op-program-data")},methods:{getData(){this.$bus.emit("operational-program-data",this.selected)},listPrograms(){let e=this.$store.state.Data.User.token,t={token:e,program_types:["EXTERNAL","INTERNAL"]};this.$store.dispatch(this.$consts.USER_ACTIONS.PROGRAM_LIST,t).then(e=>{this.programs=e.data.programs}).catch(e=>{})},sendPrograms(){this.$bus.emit("new-program-ids",this.selected)}}},wL=BL,HL=(a("48e2"),Object(I["a"])(wL,GL,FL,!1,null,null,null)),qL=HL.exports,YL=function(){var e=this,t=e._self._c;return t("div",{staticClass:"line-control"},[t(re["a"],[t(Xn["a"],[t("div",{staticClass:"title my-5"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("access_controls.select")))]),e._v("\n          "+e._s(e.$t("access_controls.queues"))+"\n        ")])]),t(ce["a"],e._l(e.lines,(function(a,n){return t(oe["a"],{key:n,staticClass:"checkboxes",attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"q-checkbox",attrs:{label:a.name,value:a.id,multiple:""},on:{change:function(t){return e.getData()},blur:function(t){return e.getData()}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)})),1)],1)],1)],1)},jL=[],KL={data(){return{invalid:!1,selected:[],lines:[]}},created(){this.$bus.on("check-line-data",()=>{this.selectedErrors}),this.$bus.on("get-queue-data",e=>{this.selected=e,this.sendQueue()}),this.$bus.on("invalid-line-data",e=>{this.invalid=e}),this.queueEnumerate()},beforeDestroy(){this.$bus.off("check-line-data")},methods:{queueEnumerate(){let e=this.$store.state.Data.User.token,t={token:e,program_types:["QUEUE"]};this.$store.dispatch(this.$consts.USER_ACTIONS.PROGRAM_LIST,t).then(e=>{this.lines=e.data.programs}).catch(e=>{})},getData(){this.$bus.emit("operational-queue-data",this.selected)},sendQueue(){this.$v.selected.$touch(),this.$v.selected.$invalid||this.$bus.emit("new-queue-ids",this.selected)}},validations:{selected:{required:Ae["required"]}},computed:{selectedErrors(){const e=[];return this.$v.selected.$dirty?(!this.$v.selected.required&&e.push(this.$t("access_controls.required")),e):e}}},ZL=KL,QL=(a("6816"),Object(I["a"])(ZL,YL,jL,!1,null,null,null)),JL=QL.exports,WL=function(){var e=this,t=e._self._c;return e.themes.length>0?t("div",{staticClass:"control"},[t(re["a"],[t(Xn["a"],[t("div",{staticClass:"title my-5"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("access_controls.select")))]),e._v("\n          "+e._s(e.$t("access_controls.themes"))+"\n        ")])]),t(ce["a"],e._l(e.themes,(function(a,n){return t(oe["a"],{key:n,staticClass:"checkboxes",attrs:{cols:"12",md:"3"}},[t(St["a"],{staticClass:"q-checkbox",attrs:{label:a.theme_name,value:a.theme_id,multiple:""},on:{click:function(t){return e.selectTheme(a.theme_id)}},model:{value:e.selectedThemes,callback:function(t){e.selectedThemes=t},expression:"selectedThemes"}}),e.openAffinitySelection!==a.theme_id?t("div",[t(r["a"],{staticClass:"affinity-button btn-sm col-1",class:{"background-white":!e.selectedAffinities[a.theme_id]},attrs:{disabled:!e.selectedThemes.includes(a.theme_id)||3==e.selectAffinitiesOptions.length&&!e.selectedAffinities[a.theme_id]},on:{click:function(t){return e.selectAffinityForTheme(a.theme_id)}}},[e._v("\n              "+e._s(e.selectedAffinities[a.theme_id]?e.selectedAffinities[a.theme_id].affinity:"")+"\n            ")])],1):t("div",[e._l(e.getAffinities,(function(n,i){return t(r["a"],{key:i,staticClass:"affinity-button btn-sm col-1",on:{click:function(t){return e.selectAffinity(a.theme_id,n)}}},[e._v("\n              "+e._s(n.affinity)+"\n            ")])})),t(r["a"],{staticClass:"affinity-button background-gray btn-sm col-1",on:{click:function(t){return e.removeAffinity(a.theme_id)}}},[e._v("x")])],2)],1)})),1)],1)],1)],1):e._e()},XL=[],zL={data(){return{themes:[],affinities:[],selectAffinitiesOptions:[],selectedThemes:[],selectedAffinities:{},openAffinitySelection:null,userThemes:[]}},created(){this.$bus.on("select-role",e=>{this.getThemes(e)}),this.$bus.on("get-themes-by-user",(e,t)=>{this.userThemes=e,this.getThemes({id:t}),this.sendThemes()})},beforeDestroy(){this.$bus.off("select-role"),this.$bus.off("get-themes-by-user")},methods:{getThemes(e){e.id&&this.$store.dispatch(this.$consts.USER_ACTIONS.GET_THEMES,{role_id:e.id}).then(e=>{this.themes=e.data.themes,this.affinities=e.data.affinities,this.setUserThemes()}).catch(e=>{console.error(e),this.themes=[]})},selectTheme(e){this.removeAffinity(e),this.selectedAffinities[e]=null},selectAffinityForTheme(e){this.openAffinitySelection=e},selectAffinity(e,t){this.openAffinitySelection=null,this.selectedAffinities[e]=t,this.selectAffinitiesOptions.push(t.affinity),this.sendThemes()},removeAffinity(e){this.selectedAffinities[e]&&(this.selectAffinitiesOptions=this.selectAffinitiesOptions.filter(t=>t!=this.selectedAffinities[e].affinity)),this.$delete(this.selectedAffinities,e),this.openAffinitySelection=null,this.sendThemes()},sendThemes(){const e=this.selectedThemes.map(e=>({theme_id:e,theme_affinity_id:this.selectedAffinities[e]?this.selectedAffinities[e].affinity:null}));this.$bus.emit("new-themes",e)},setUserThemes(){this.userThemes&&(this.selectedThemes=[],this.selectedAffinities={},this.userThemes.forEach(e=>{this.selectedThemes.push(e.theme_id),e.affinity&&(this.selectedAffinities[e.theme_id]={affinity:e.affinity},this.selectAffinitiesOptions.push(e.affinity))}))}},computed:{getAffinities(){return this.affinities.filter(e=>!this.selectAffinitiesOptions.includes(e.affinity))}}},ef=zL,tf=(a("2f6c"),Object(I["a"])(ef,WL,XL,!1,null,null,null)),af=tf.exports,nf={props:["item"],components:{OperationControl:VL,ProgramControl:qL,LineControl:JL,ThemesControl:af}},sf=nf,of=Object(I["a"])(sf,bL,ML,!1,null,null,null),rf=of.exports,lf=function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"edit-company mb-10"},[t("EditCompanyData",{attrs:{item:e.item}}),t("EnableExternalCompanyToken",{attrs:{item:e.item}}),t("EditCompanyContract",{attrs:{item:e.item}}),t("EditProductsList",{attrs:{company:e.item}}),t("SaveComponent"),t("EditCompanyVouchers",{attrs:{company:e.item}}),t("EditCompanyGroups",{attrs:{item:e.item}}),t("DeleteComponent")],1)},cf=[],df=function(){var e=this,t=e._self._c;return e.dataLoaded?t("div",{staticClass:"company"},[t("snackbar"),e.dataLoaded?e._e():t("div",{staticClass:"text-center"},[t(nt["a"],{attrs:{color:"primary",indeterminate:""}})],1),t("div",{staticClass:"company-title"},[t("div",{staticClass:"company-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.companyInfo.name))])])]),t("div",{staticClass:"company-sub"},[t("span",{staticClass:"company-subtitle"},[e._v(e._s(e.$t("external_controls.foreign")))])]),t("div",{staticClass:"radio-btns",class:{"disabled-events":e.item}},[t(Qs["a"],{attrs:{row:""},model:{value:e.foreign,callback:function(t){e.foreign=t},expression:"foreign"}},[t(Zs["a"],{attrs:{label:e.$t("external_controls.no"),value:0}}),t(Zs["a"],{attrs:{label:e.$t("external_controls.yes"),value:1}})],1)],1),t(re["a"],[t(Xn["a"],[t(ce["a"],[0==e.foreign?t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##.###.###/####-##",expression:"'##.###.###/####-##'"}],class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.cnpj"),height:"37px",id:"cnpj",loading:e.loading,outlined:""},model:{value:e.cnpj,callback:function(t){e.cnpj=t},expression:"cnpj"}})],1):e._e(),1==e.foreign?t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##############",expression:"'##############'"}],class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.registry_number"),height:"37px",outlined:""},model:{value:e.registry,callback:function(t){e.registry=t},expression:"registry"}})],1):e._e(),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.fantasy_name"),height:"37px",outlined:""},model:{value:e.fantasia,callback:function(t){e.fantasia=t},expression:"fantasia"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.country"),height:"37px",outlined:""},model:{value:e.country,callback:function(t){e.country=t},expression:"country"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.social"),height:"37px",outlined:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(oe["a"],{directives:[{name:"show",rawName:"v-show",value:e.isValid,expression:"isValid"}],attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.ie"),height:"37px",outlined:""},model:{value:e.ie,callback:function(t){e.ie=t},expression:"ie"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.main_address"),height:"37px",outlined:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"enabled-events":e.item},attrs:{label:e.$t("external_controls.nick_name"),height:"37px",outlined:""},on:{change:function(t){return e.changeNickName()}},model:{value:e.nickName,callback:function(t){e.nickName=t},expression:"nickName"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.activity"),height:"37px",outlined:""},model:{value:e.activity,callback:function(t){e.activity=t},expression:"activity"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.legal"),height:"37px",outlined:""},model:{value:e.juridica,callback:function(t){e.juridica=t},expression:"juridica"}})],1)],1)],1)],1),t("div",{staticClass:"mb-3"},[t("span",{staticClass:"company-subtitle"},[e._v(e._s(e.$t("external_controls.additional_info")))])]),t(re["a"],[t(Xn["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.payer"),height:"37px",outlined:""},model:{value:e.selected_payer,callback:function(t){e.selected_payer=t},expression:"selected_payer"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[e.selected_payer_info?t("p",{staticClass:"subtitle"},[e._v(e._s(e.selected_payer_info))]):e._e()])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.intern_manager"),height:"37px",outlined:""},model:{value:e.internal_manager_name,callback:function(t){e.internal_manager_name=t},expression:"internal_manager_name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(+#####) ####-####","(+####) #####-####"],expression:"['(+#####) ####-####', '(+####) #####-####']"}],class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.phone"),height:"37px",outlined:""},model:{value:e.internal_manager_phone,callback:function(t){e.internal_manager_phone=t},expression:"internal_manager_phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.company_manager"),height:"37px",maxlength:"50",outlined:""},model:{value:e.company_manager_name,callback:function(t){e.company_manager_name=t},expression:"company_manager_name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(+####) ####-####","(+####) #####-####"],expression:"['(+####) ####-####', '(+####) #####-####']"}],class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.phone"),height:"37px",outlined:""},model:{value:e.company_manager_phone,callback:function(t){e.company_manager_phone=t},expression:"company_manager_phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.hr_contact"),height:"37px",maxlength:"50",outlined:""},model:{value:e.hr_contact,callback:function(t){e.hr_contact=t},expression:"hr_contact"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(+####) ####-####","(+####) #####-####"],expression:"['(+####) ####-####', '(+####) #####-####']"}],class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.phone"),height:"37px",outlined:""},model:{value:e.hr_contact_phone,callback:function(t){e.hr_contact_phone=t},expression:"hr_contact_phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox mt-0",class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.contractee")},model:{value:e.companyInfo.contractee,callback:function(t){e.$set(e.companyInfo,"contractee",t)},expression:"companyInfo.contractee"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox mt-0",class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.benefit_sponsor")},model:{value:e.companyInfo.benefit_sponsor,callback:function(t){e.$set(e.companyInfo,"benefit_sponsor",t)},expression:"companyInfo.benefit_sponsor"}})],1)],1),t(ce["a"],{staticClass:"mt-12"},[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("p",{staticClass:"subtitle"},[e._v(e._s(e.$t("external_controls.tiss")))]),t(St["a"],{attrs:{label:e.$t("external_controls.flag_tiss")},model:{value:e.flag_tiss,callback:function(t){e.flag_tiss=t},expression:"flag_tiss"}})],1)],1),t(ce["a"],{staticClass:"mt-4"},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"######",expression:"'######'"}],attrs:{label:e.$t("external_controls.code_ans"),disabled:!e.flag_tiss,error:e.flag_tiss&&(!e.code_ans||!/^\d{1,6}$/.test(e.code_ans)),"error-messages":!e.flag_tiss||e.code_ans&&/^\d{1,6}$/.test(e.code_ans)?[]:[e.$t("external_controls.required_field"),e.$t("external_controls.invalid_format")],height:"37px",outlined:""},model:{value:e.code_ans,callback:function(t){e.code_ans="string"===typeof t?t.trim():t},expression:"code_ans"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.operator_code"),disabled:!e.flag_tiss,error:e.flag_tiss&&!e.operator_code,"error-messages":e.flag_tiss&&!e.operator_code?[e.$t("external_controls.required_field")]:[],height:"37px",outlined:""},model:{value:e.operator_code,callback:function(t){e.operator_code="string"===typeof t?t.trim():t},expression:"operator_code"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.webservice"),disabled:!e.flag_tiss,error:e.flag_tiss&&!e.webservice,"error-messages":e.flag_tiss&&!e.webservice?[e.$t("external_controls.required_field")]:[],height:"37px",outlined:""},model:{value:e.webservice,callback:function(t){e.webservice="string"===typeof t?t.trim():t},expression:"webservice"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.credentials"),disabled:!e.flag_tiss,error:e.flag_tiss&&!e.credentials,"error-messages":e.flag_tiss&&!e.credentials?[e.$t("external_controls.required_field")]:[],height:"37px",outlined:""},model:{value:e.credentials,callback:function(t){e.credentials="string"===typeof t?t.trim():t},expression:"credentials"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(r["a"],{attrs:{color:"primary",loading:e.loading,disabled:!e.flag_tiss||!e.code_ans||!e.operator_code||!e.webservice||!e.credentials},on:{click:e.saveTissInfo}},[e._v("\n            "+e._s(e.$t("external_controls.save_tiss"))+"\n          ")]),e.successMessage?t("span",{staticClass:"ml-3"},[e._v(e._s(e.successMessage))]):e._e(),e.errorMessage?t("span",{staticClass:"ml-3 text-danger"},[e._v(e._s(e.errorMessage))]):e._e()],1)],1),t(ce["a"],{staticClass:"mt-8"},[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("p",{staticClass:"subtitle"},[e._v(e._s(e.$t("external_controls.hierarchy")))])])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox mt-0",class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.is_mother")},model:{value:e.mother,callback:function(t){e.mother=t},expression:"mother"}})],1),t(oe["a"],{attrs:{cols:"12",md:"8"}},[t(de["a"],{class:{"disabled-events":e.item},attrs:{label:e.$t("external_controls.mother_company_name"),height:"37px",outlined:""},model:{value:e.selected_mother,callback:function(t){e.selected_mother=t},expression:"selected_mother"}})],1)],1),e.selected_mother_info?t(ce["a"],{staticClass:"mt-2"},[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("p",{staticClass:"subtitle"},[e._v(e._s(e.selected_mother_info))])])],1):e._e(),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox mt-0",attrs:{label:e.$t("external_controls.inheritance_company")},on:{change:function(t){return e.changeFlavourInheritance()}},model:{value:e.inheritanceFlavour,callback:function(t){e.inheritanceFlavour=t},expression:"inheritanceFlavour"}})],1),t(oe["a"],{attrs:{cols:"12",md:"8"}},[t(se["a"],{attrs:{label:e.$t("external_controls.flavour"),items:e.flavourList,"item-text":"flavour_code","item-value":"flavour_id","return-object":"",height:"37px",outlined:""},on:{change:function(t){return e.changeFlavour()}},model:{value:e.selected_flavour,callback:function(t){e.selected_flavour=t},expression:"selected_flavour"}})],1)],1)],1)],1)],1):e._e()},mf=[],uf={components:{snackbar:GO},props:["item"],data(){return{foreign:0,mother:!1,cnpj:"",isValid:!1,loading:!1,country:"Brasil",ie:"",address:"",nickName:"",activity:"",payers:[],selectedPayer:[],internal_manager_name:"",internal_manager_phone:"",company_manager_name:"",company_manager_phone:"",hr_contact:"",hr_contact_phone:"",contractee:"",sponsor:"",error:"",dataLoaded:!1,company:null,companyInfo:null,trading_name:"",name:"",juridica:"",payer_id:null,payer:null,mother_id:null,selected_mother_info:null,selected_payer_info:null,selected_company:null,selected_payer:null,selected_mother:null,selected_flavour:null,previousFlavour:null,flavourList:[{flavour_id:null,flavour_code:"Sem Flavor"}],companyList:[],comp:"",program_info:null,foreignCompany:null,registry:null,inheritanceFlavour:!1,flavourPagination:{limit:10,offset:0,total:0},flag_tiss:!1,safeTiss:!this.flag_tiss,code_ans:null,operator_code:null,webservice:null,credentials:null,successMessage:null,errorMessage:null}},created(){this.flavourPagination.limit=10,this.flavourPagination.offset=0,this.item?this.getCompany(this.item):this.listFlavour()},methods:{loadMoreFlavour(){this.flavourPagination.offset+=10,this.listFlavour()},changeFlavour(){if(-1==this.selected_flavour.flavour_id)return this.selected_flavour=this.previousFlavour,this.loadMoreFlavour();this.previousFlavour=this.selected_flavour?{...this.selected_flavour}:null,this.$store.dispatch(this.$consts.COMPANY_ACTIONS.CHANGE_FLAVOUR,this.selected_flavour),this.$bus.emit("sync_selected_programs"),this.$bus.emit("edit-company-contract")},changeNickName(){this.$store.dispatch(this.$consts.COMPANY_ACTIONS.CHANGE_NICK_NAME,this.nickName),this.$bus.emit("edit-company-contract")},changeFlavourInheritance(){this.$store.dispatch(this.$consts.COMPANY_ACTIONS.CHANGE_FLAVOUR_INHERITANCE,this.inheritanceFlavour),this.$bus.emit("sync_selected_programs"),this.$bus.emit("edit-company-contract")},listFlavour(){let e=this.$store.state.Data.User.token,t={token:e,limit:this.flavourPagination.limit,offset:this.flavourPagination.offset,statuses:["active"]};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_FLAVOUR,t).then(e=>{this.flavourPagination.total=e.data.total;let t=this.flavourList.findIndex(e=>-1==e.flavour_id);this.flavourList.splice(t,1),this.flavourList=this.flavourList.concat(e.data.flavour_information);const a=[...this.flavourList];this.flavourList=Array.from(new Set(a.map(e=>e.flavour_id))).map(e=>a.find(t=>t.flavour_id===e)),this.selected_flavour&&!this.flavourList.find(e=>e.flavour_id==this.selected_flavour.flavour_id)&&this.flavourList.push(this.selected_flavour),this.hasMoreFlavours&&this.flavourList.push({flavour_id:-1,flavour_code:"Mostrar mais"})}).catch(e=>{console.log("error",e)})},getPayerInfo(e){let t=this.$store.state.Data.User.token,a={token:t,payer_id:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PAYER,a).then(e=>{this.selected_payer=e.data.payer_info.document,this.selected_payer_info=e.data.payer_info.name}).catch(e=>{console.log("error",e)})},getCompany(e){this.company=this.$store.state.Data.Company.info,this.companyInfo=this.company.company_info,this.cnpj=this.$store.state.Data.Company.info.company_info.document,this.fantasia=this.companyInfo.trading_name,this.name=this.companyInfo.name,this.address=this.companyInfo.address,this.nickName=this.companyInfo.nick_name,this.activity=this.companyInfo.economic_activity,this.internal_manager_name=this.companyInfo.internal_manager_name,this.internal_manager_phone=this.companyInfo.internal_manager_phone,this.company_manager_name=this.companyInfo.company_manager_name,this.company_manager_phone=this.companyInfo.company_manager_phone,this.hr_contact=this.companyInfo.hr_contact_name,this.hr_contact_phone=this.companyInfo.hr_contact_phone,this.dataLoaded=!0,this.payer_id=this.companyInfo.payer_id,this.mother_id=this.companyInfo.mother_company_id,this.mother=this.companyInfo.mother_company,this.ie=this.companyInfo.ie,this.juridica=this.companyInfo.legal_nature,this.foreignCompany=this.companyInfo.foreign_company,this.registry=this.cnpj,this.selected_flavour={flavour_id:this.companyInfo.flavour_id,flavour_code:this.companyInfo.flavour_code},this.previousFlavour={...this.selected_flavour},this.inheritanceFlavour=this.companyInfo.flavour_inheritance,this.webservice=this.companyInfo.webservice,this.credentials=this.companyInfo.credentials,this.code_ans=this.companyInfo.code_ans,this.operator_code=this.companyInfo.operator_code,this.flag_tiss=this.companyInfo.flag_tiss,this.checkForeignCompany(),this.listFlavour(),this.mother_id&&this.getMotherInfo(this.mother_id),this.getPayerInfo(this.payer_id)},checkForeignCompany(){this.foreignCompany?this.foreign=1:this.foreign=0},getCompanyName(e){let t={company_id:e};ti.getCompany(t).then(e=>{this.selected_company=e.data.company_info}).catch(e=>{console.error(e)})},getMotherInfo(e){let t={company_id:e};ti.getCompany(t).then(e=>{this.selected_mother=e.data.company_info.document,this.selected_mother_info=e.data.company_info.name}).catch(e=>{console.error(e)})},getPayerName(e){let t=this.$store.state.Data.User.token,a={company_id:e,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PAYER,a).then(e=>{this.selected_payer=e.data.payer_info.document,this.selected_payer_info=e.data.payer_info.name}).catch(e=>{})},saveTissInfo(){this.loading=!0;let e=this.$store.state.Data.User.token,t={token:e,company_id:this.companyInfo.id,company_info:{tiss:{}}};t.company_info.tiss={flag_tiss:this.flag_tiss,code_ans:this.code_ans,operator_code:this.operator_code,webservice:this.webservice,credentials:this.credentials},this.$store.dispatch(this.$consts.USER_ACTIONS.COMPANY_UPDATE,t).then(()=>{this.$bus.emit("open-snackbar",{message:"success_updated_tiss"}),this.errorMessage=null,this.loading=!1}).catch(()=>{this.errorMessage=this.$t("external_controls.save_tiss_error"),this.successMessage=null,this.loading=!1})}},filters:{phoneMask:function(e){if(isNaN(e))return null;if(11==e.length){let t=e.substr(0,2),a=e.substr(2,5),n=e.substr(7,4);return`(${t})${a}-${n}`}if(10==e.length){let t=e.substr(0,2),a=e.substr(2,4),n=e.substr(6,4);return`(${t})${a}-${n}`}return e.length<10?e:void 0},cnpjMask:function(e){if(isNaN(e))return null;if(14==e.length){let t=e.substr(0,2),a=e.substr(2,3),n=e.substr(5,3),i=e.substr(8,4),s=e.substr(12,2);return`${t}.${a}.${n}/${i}-${s}`}return e&&e.length<14?e:void 0}},computed:{hasMoreFlavours(){return this.flavourPagination.total>this.flavourList.length},isForeign(){if(1==this.foreign)return this.companyData="",this.country="",this.address="",this.nickName="",this.activity="",this.isValid=!0,!0;0!=this.foreign||(this.isValid=!1)}}},Af=uf,_f=(a("0eb2"),Object(I["a"])(Af,df,mf,!1,null,null,null)),Ef=_f.exports,If=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cc2"},[t("div",{staticClass:"company-contract-title"},[t("div",{staticClass:"company-contract-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.contract")))]),e._v("\n      "+e._s(e.$t("external_controls.from_company"))+"\n    ")])]),t("div",{staticClass:"data d-flex"},[t($t["a"],{staticClass:"i-data",attrs:{label:e.$t("external_controls.frequency"),height:"37px",items:e.frequency,outlined:""},model:{value:e.selectedFrequency,callback:function(t){e.selectedFrequency=t},expression:"selectedFrequency"}}),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.formattedDate,transition:"scale-transition","offset-y":"","max-width":"217px"},on:{"update:returnValue":function(t){e.formattedDate=t},"update:return-value":function(t){e.formattedDate=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({staticClass:"i-data2",attrs:{label:e.$t("external_controls.due_date"),height:"37px",readonly:"",outlined:""},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},a))]}}]),model:{value:e.due,callback:function(t){e.due=t},expression:"due"}},[t(yt["a"],{attrs:{min:e.today,width:"255px","no-title":"",scrollable:""},model:{value:e.selected_date,callback:function(t){e.selected_date=t},expression:"selected_date"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.due=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueDate()}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1),t($t["a"],{staticClass:"i-data3",attrs:{label:e.$t("external_controls.index_type"),height:"37px",items:e.index_type,"return-object":"","item-text":"name",outlined:""},on:{change:function(t){return e.sendContractData()}},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1),e.upload?e._e():t("div",{staticClass:"no-upload"},[e._v(e._s(e.$t("external_controls.upload_required")))]),t("div",{staticClass:"contract"},[e.visible?t(de["a"],{staticClass:"file",attrs:{height:"37px","prepend-inner-icon":"$vuetify.icons.custom_contract",readonly:"",outlined:""},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}},[t("template",{slot:"append"},[t(r["a"],{staticClass:"edit",attrs:{text:""}},[e.isChrome?t("a",{staticClass:"download",attrs:{href:e.fileUrl,target:"blank",download:e.fileUrl}},[t("span",{staticClass:"download"},[e._v(e._s(e.$t("external_controls.download")))])]):e._e(),e.isChrome?e._e():t("span",{staticClass:"download",on:{click:function(t){return e.downloadFile()}}},[e._v(e._s(e.$t("external_controls.download")))])]),t(r["a"],{staticClass:"edit",attrs:{text:""},on:{click:function(t){return e.prepareRemoveContract()}}},[t("span",{staticClass:"remove"},[e._v(e._s(e.$t("external_controls.remove")))])])],1)],2):e._e()],1),t("div",{staticClass:"up-btn"},[t(r["a"],{staticClass:"ubtn",attrs:{color:"blue",height:"37px",block:"",outlined:""},on:{click:function(t){return e.$refs.uploadContract.click()}}},[t(at["a"],{attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"upload-text"},[e._v(e._s(e.$t("external_controls.contract_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadContract",attrs:{type:"file",accept:"application/pdf"},on:{change:function(t){return e.uploadCompanyContract()}}})],1)],1),t("RemoveContractModal")],1)},hf=[],Of=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"request-section"},[t(l["a"],{staticClass:"contract-card-section"},[t(c["c"],{staticClass:"contract-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("attendance.nav_confirm")))]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),t(c["b"],{staticClass:"contract-card-desc text-justify mb-3"},[e._v(e._s(e.$t("external_controls.delete_contract_confirmation")))]),t(c["a"],{staticClass:"contract-buttons"},[t(r["a"],{staticClass:"primary--text ml-1",attrs:{color:"white",height:"37px",width:"226px",outlined:""},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("external_controls.yes")))]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"226px"},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("external_controls.no")))])],1)],1)],1)])],1)},pf=[],Sf={components:{},data(){return{dialog:!1,data:null,type:""}},created(){this.$bus.on("get-delete-contract-confirmation",e=>{this.type="payer",this.dialog=e}),this.$bus.on("get-delete-company-contract-confirmation",e=>{this.type="company",this.dialog=e})},beforeDestroy(){this.$bus.off("get-delete-contract-confirmation"),this.$bus.off("get-delete-company-contract-confirmation")},methods:{close(){"payer"==this.type&&this.$bus.emit("confirm-delete-contract"),"company"==this.type&&this.$bus.emit("confirm-delete-company-contract"),this.dialog=!1}}},Cf=Sf,Tf=(a("ed1f2"),Object(I["a"])(Cf,Of,pf,!1,null,null,null)),Rf=Tf.exports,Df={props:["item"],components:{RemoveContractModal:Rf},data(){return{foreign:0,index_type:["IGPM","IPCA"],frequency:["ANUAL"],due:!1,selected_date:null,selectedType:"",selectedFrequency:"",file:"",fileName:"",visible:!1,company:null,dataLoaded:!1,companyInfo:null,companyContractInfo:null,today:this.$moment().format("YYYY-MM-DD"),dialog:!1,isChrome:!1,token:this.$store.state.Data.User.token,invalidFile:!1,file:null,fileUrl:null,id:null,upload:!0,products:[],formattedDate:"",unformattedDate:""}},created(){this.$bus.on("confirm-delete-company-contract",()=>{this.removeContract()}),this.$bus.on("edit-company-programs",e=>{this.products=e,this.sendContractData()}),this.getCompany(this.item.id),this.checkBrowser()},beforeDestroy(){this.$bus.off("confirm-delete-company-contract")},methods:{uploadCompanyContract(){this.upload=!0,this.invalidFile=!1,this.file=event.target.files[0];let e=event.target.files[0].size;e>15e6&&(this.visible=!1);let t=this.file.type;if("application/pdf"!=t)return this.invalidFile=!0,!1;this.file&&(this.visible=!0,this.fileName=this.file.name);this.item.id;let a={file:this.file,token:this.token};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,a).then(e=>{this.fileUrl=e.data[this.fileName].completeUrl,this.sendContractData(),this.sendFileUrl(),this.$bus.emit("edit-company-contract")}).catch(e=>{console.error(e)})},saveDueDate(){this.formatDueDate(),this.$refs.menu.save(this.formattedDate),this.sendContractData()},sendContractData(){if(this.fileUrl){let e={expiration_date:this.selected_date,readjustment_frequency:this.selectedFrequency,index_type:this.selectedType,file:this.fileName,company_id:this.item.id,token:this.$store.state.Data.User.token};this.products.length>0&&(e.products=this.products),this.$bus.emit("get-updated-data",e)}else this.upload=!1},prepareRemoveContract(){let e=!0;this.$bus.emit("get-delete-company-contract-confirmation",e)},removeContract(){this.fileUrl=null,this.visible=!1,this.sendFileUrl(),this.$bus.emit("disable-edit-company")},sendFileUrl(){this.$bus.emit("update-file",this.fileUrl)},getCompany(e){this.company=this.$store.state.Data.Company.info,this.companyInfo=this.company.companyInfo,this.companyContractInfo=this.company.company_contract_info,this.selected_date=this.companyContractInfo.expiration_date,this.selectedType=this.companyContractInfo.index_type,this.fileName=this.companyContractInfo.file_path,this.selectedFrequency=this.companyContractInfo.readjustment_frequency,this.visible=!0,this.dataLoaded=!0,this.fileUrl=this.companyContractInfo.file_path,this.getFilename(),this.formatDueDate(),this.$bus.emit("edit-company-contract")},downloadFile(){let e=document.createElement("a");document.body.appendChild(e),e.href=this.fileUrl,e.download=this.fileUrl,e.target="blank",e.click()},checkBrowser(){let e=window;e&&e.chrome&&(this.isChrome=!0)},getFilename(){if(this.fileUrl){let e=this.fileUrl.lastIndexOf("/");this.fileName=this.fileUrl.substr(e+1)}},formatDueDate(){if(this.selected_date){const[e,t,a]=this.selected_date.split("-");return this.formattedDate=`${a}-${t}-${e}`,this.formattedDate}},undoFormatDueDate(){const[e,t,a]=this.formattedDate.split("-");return this.unformattedDate=`${a}-${t}-${e}`,this.unformattedDate}}},gf=Df,Lf=(a("9f02"),Object(I["a"])(gf,If,hf,!1,null,null,null)),ff=Lf.exports,Nf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cc2"},[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.tokenModal,callback:function(t){e.tokenModal=t},expression:"tokenModal"}},[t("div",{staticClass:"request-section"},[t(l["a"],{staticClass:"c-card-section",attrs:{height:"254px"}},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("controls.enable_company_token_title_1"))+" "+e._s(e.$t("controls.enable_company_token_title_2")))]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:e.closeModal}})]),t(c["b"],{staticClass:"card-desc text-justify mb-3 red-text",staticStyle:{color:"red"}},[e._v(e._s(e.$t("controls.token_warning")))]),t(c["a"],{staticClass:"buttons"},[t(r["a"],{staticClass:"white--text margin-low primary",attrs:{outlined:""},on:{click:function(t){return e.toggleToken("true")}}},[e._v(e._s(e.$t("controls.enable")))]),t(r["a"],{staticClass:"margin-low",attrs:{outlined:"",color:"primary"},on:{click:function(t){return e.toggleToken("false")}}},[e._v(e._s(e.$t("controls.disable")))])],1)],1)],1)]),t("div",{staticClass:"company-contract-title",on:{click:e.openModal}},[t("div",{staticClass:"company-contract-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.enable_company_token_title_1")))]),e._v(" "+e._s(e.$t("controls.enable_company_token_title_2"))+"\n    ")])]),t("div",[t("p",{staticClass:"token-message"},[e._v(e._s(e.message))])])],1)},kf=[],vf={props:["item"],name:"EnableExternalCompanyToken",data(){return{id:null,tokenModal:!1,message:"",messageRef:{Tokens_activated_and_generated_for_existing_users:"Tokens foram ATIVADOS e gerados para os m
 Conselho","error-messages":e.numberCouncilErrors,loading:e.loadingUser,height:"48",outlined:""},on:{blur:function(t){return e.$v.numberCouncil.$touch()}},model:{value:e.numberCouncil,callback:function(t){e.numberCouncil="string"===typeof t?t.trim():t},expression:"numberCouncil"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{attrs:{label:e.$t("access_controls.state"),items:e.states,"error-messages":e.stateErrors,loading:e.loadingUser,height:"48",outlined:""},on:{blur:function(t){return e.$v.state.$touch()}},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) #####-####","+## (##) #####-####"],expression:"['+## (##) #####-####', '+## (##) #####-####']"}],attrs:{label:e.$t("profile.phone"),loading:e.loadingUser,"error-messages":e.phoneErrors,height:"48",outlined:""},on:{blur:function(t){return e.$v.phone.$touch()}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) #####-####"],expression:"['+## (##) #####-####']"}],attrs:{label:e.$t("profile.phone_mobile"),placeholder:e.phoneMobile?e.phoneMobile:"",loading:e.loadingUser,"error-messages":e.phoneMobileErrors,height:"48",outlined:""},on:{blur:function(t){return e.$v.phoneMobile.$touch()}},model:{value:e.phoneMobile,callback:function(t){e.phoneMobile=t},expression:"phoneMobile"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{attrs:{label:e.$t("access_controls.status"),items:e.statusList,"error-messages":e.statusErrors,loading:e.loadingStatus||e.loadingUser,"item-text":"status",height:"48",outlined:""},on:{blur:function(t){return e.$v.status.$touch()}},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{attrs:{label:e.$t("access_controls.department"),items:e.departmentList,"error-messages":e.departmentErrors,loading:e.loadingDepartments||e.loadingUser,"item-text":"name",height:"48","return-object":"",outlined:""},on:{blur:function(t){return e.$v.department.$touch()}},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("access_controls.tuss_codes"),items:e.tussCodesList,loading:e.loadingSpecialty,"item-text":"name","item-value":"id",height:"48","return-object":"",outlined:"","error-messages":e.tussCodeErrors},on:{blur:function(t){return e.$v.tussCode.$touch()}},model:{value:e.tussCode,callback:function(t){e.tussCode=t},expression:"tussCode"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{attrs:{label:e.$t("access_controls.role"),items:e.roleList,loading:e.loadingRoles||e.loadingUser,"error-messages":e.roleErrors,"item-text":"role","return-object":"",height:"48",outlined:""},on:{blur:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{attrs:{label:e.$t("access_controls.speciality"),items:e.specialtyList,loading:e.loadingSpecialty||e.loadingUser,"item-text":"name","item-value":"id","return-object":"",height:"48",outlined:""},model:{value:e.specialty,callback:function(t){e.specialty=t},expression:"specialty"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{"return-object":!0,items:e.occupation,label:e.$t("schedule.occupation"),"hide-no-data":e.loadingOccupation,loading:e.loadingOccupation||e.loadingUser,height:0==e.chosenOccupation.length?"48":"auto","item-text":"name","item-value":"id",multiple:"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function({item:a,index:n}){return[0===n?t("span",[e._v(e._s(a.name))]):e._e(),1===n?t("span",{staticClass:"grey--text text-caption"},[e._v("\n                +"+e._s(e.chosenOccupation.length-1)+" "+e._s(e.$t("patient_modal.others"))+"\n              ")]):e._e()]}}]),model:{value:e.chosenOccupation,callback:function(t){e.chosenOccupation=t},expression:"chosenOccupation"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{attrs:{label:e.$t("access_controls.user_type"),items:e.userTypes,loading:e.loadingUser,height:"48",outlined:""},model:{value:e.user_type,callback:function(t){e.user_type=t},expression:"user_type"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{ref:"company_select",attrs:{items:e.companyList,"menu-props":{maxHeight:"400"},loading:e.loadingCompanies||e.loadingUser,height:0==e.company.length?"48":"auto",label:"Companhias","item-text":"name","item-value":"id","persistent-hint":"",multiple:"",outlined:""},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(de["a"],{attrs:{label:e.$t("access_controls.about_me"),disabled:e.loadingUser,"error-messages":e.aboutMeErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.about_me.$touch()}},model:{value:e.about_me,callback:function(t){e.about_me=t},expression:"about_me"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("access_controls.graduation"),disabled:e.loadingUser,"error-messages":e.graduationErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.graduation.$touch()}},model:{value:e.graduation,callback:function(t){e.graduation=t},expression:"graduation"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("access_controls.institution"),disabled:e.loadingUser,"error-messages":e.institutionErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.institution.$touch()}},model:{value:e.institution,callback:function(t){e.institution=t},expression:"institution"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("access_controls.institution_state"),items:e.statesList,disabled:e.loadingUser,"error-messages":e.institutionStateErrors,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"37px",outlined:""},on:{blur:function(t){return e.$v.institution_state.$touch()}},model:{value:e.institution_state,callback:function(t){e.institution_state=t},expression:"institution_state"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("profile.graduation.registration_code_id"),items:e.registrationCodeList,disabled:e.loading,"item-text":"name","item-value":"id",height:"37px",outlined:""},model:{value:e.registrationCodeId,callback:function(t){e.registrationCodeId=t},expression:"registrationCodeId"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{attrs:{label:e.$t("profile.graduation.registration_code"),height:"37px",outlined:""},model:{value:e.graduationRegistrationCode,callback:function(t){e.graduationRegistrationCode=t},expression:"graduationRegistrationCode"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(se["a"],{attrs:{label:e.$t("profile.graduation.registration_code_state"),items:e.statesList,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"37px",outlined:""},model:{value:e.graduationRegistrationCodeState,callback:function(t){e.graduationRegistrationCodeState=t},expression:"graduationRegistrationCodeState"}})],1)],1),t(ce["a"],[e.tokens.length>0?t("div",{staticClass:"med-3"},[t("p",{staticClass:"token-container"},[t("b",[e._v("TOKENS")])])]):e._e(),e.tokens.length>0?t("div",{staticClass:"med-3"},e._l(e.tokens,(function(a){return t("p",{staticClass:"token-display"},[t("b",[e._v(e._s(a.company_name)+":")]),e._v("\n            "+e._s(a.token)+"\n          ")])})),0):e._e()])],1)],1),t("NavigationConfirmationModal",{on:{onConfirm:e.removePhoto}})],1)},ig=[],sg=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("general.navigation_conformation")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e.body?t("p",{staticClass:"davygrey--text px-10 mt-10 mb-0"},[e._v("\n                "+e._s(e.body)+"\n            ")]):e._e(),t("div",{staticClass:"d-flex align-center justify-space-between pa-10"},[t(r["a"],{staticClass:"btn",attrs:{color:"davygrey",outlined:""},on:{click:e.close}},[e._v("\n                    "+e._s(e.no)+"\n                ")]),t(r["a"],{staticClass:"white--text btn",attrs:{color:"davygrey"},on:{click:e.handleConfirm}},[e._v("\n                    "+e._s(e.yes)+"\n                ")])],1)],1)],1)],1)},og=[],rg={data(){return{dialog:!1,body:"",no:this.$t("general.no"),yes:this.$t("general.yes")}},created(){this.$bus.on("open-navigation-confirmation-modal",(e,t,a)=>{e&&(this.body=e),t&&(this.no=t),a&&(this.yes=a),this.dialog=!0})},beforeDestroy(){this.$bus.off("open-navigation-confirmation-modal")},methods:{close(){this.dialog=!1},handleConfirm(){this.$emit("onConfirm"),this.close()}}},lg=rg,cg=(a("896b"),Object(I["a"])(lg,sg,og,!1,null,"d4e98708",null)),dg=cg.exports,mg={props:["item"],mixins:[ve],components:{NavigationConfirmationModal:dg},data(){return{loading:!1,loadingUser:!1,loadingRoles:!1,loadingStatus:!1,loadingCouncil:!1,loadingSpecialty:!1,loadingCompanies:!1,loadingOccupation:!1,loadingDepartments:!1,name:"",email:"",cpf:"",hover:!1,file:null,path:"",preview:"",numberCouncil:"",state:"",status:"",department:"",role:"",user_type:"MEDICAL",userTypes:["MEDICAL","EXTERNAL_MEDICAL"],specialty:"",about_me:"",graduation:"",institution:"",institution_state:"",statusList:[],company:[],companyList:[],departmentList:[],roleList:[],specialtyList:[],newCpf:!0,isEdit:!1,programData:[],rawCpf:null,user_id:null,roleId:null,tokens:[],departmentId:null,phone:"",phoneMobile:"",validCpf:!0,program:[],states:this.$consts.MEDICAL_CONTROL_USER_STATES,programQueue:[],chosenOccupation:[],occupation:[],council:null,numberCouncil:"",tussCodesList:[],tussCodesGeneralList:[],tussCode:null,councilList:[],statesList:this.$consts.MEDICAL_CONTROL_USER_STATES,registrationCodeList:[],professionalCouncil:"",registrationCodeId:"",graduationRegistrationCode:"",graduationRegistrationCodeState:""}},created(){this.getTussCodes(),this.listStatus(),this.listRoles(),this.listDepartments(),this.listCouncil(),this.listSpecialties(),this.listCompanies(),this.listOccupations(),this.getRegistrationCode(),this.$bus.on("prepare-medical-data",()=>{this.prepareData()}),this.$bus.on("update-medical",()=>{this.updateData(this.user_id)}),this.$bus.on("check-component",()=>{this.sendComponentInfo()}),this.$bus.on("medical-program-data",e=>{this.programData=e,this.getProgramData()}),this.$bus.on("medical-new-program-ids",e=>{this.programData=e}),this.item&&(this.getUser(this.item.id),this.isEdit=!0)},beforeDestroy(){this.$bus.off("prepare-medical-data"),this.$bus.off("update-medical"),this.$bus.off("check-component"),this.$bus.off("medical-program-data")},methods:{listOccupations(){this.loadingOccupation=!0,be.listOccupations().then(e=>{this.occupation=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingOccupation=!1})},listCouncil(){this.loadingCouncil=!0,be.listCouncil().then(e=>{this.councilList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingCouncil=!1})},getRegistrationCode(){Me.list().then(e=>{this.registrationCodeList=e.data}).catch(e=>{console.error(e)})},listStatus(){this.loadingStatus=!0,be.listStatus().then(e=>{this.statusList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingStatus=!1})},listRoles(){this.loadingRoles=!0,be.listDoctorRoles().then(e=>{this.roleList=e.data.sort((e,t)=>e.role.localeCompare(t.role))}).catch(e=>{console.error(e)}).finally(()=>{this.loadingRoles=!1})},listCompanies(){this.loadingCompanies=!0,ti.allCompanies().then(e=>{this.companyList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingCompanies=!1})},listSpecialties(){this.loadingSpecialty=!0,be.listSpecialties().then(e=>{this.specialtyList=e.data,this.specialtyList.unshift({id:null,name:"Sem escolha"})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingSpecialty=!1})},listDepartments(){this.loadingDepartments=!0,be.listDepartments().then(e=>{this.departmentList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingDepartments=!1})},getTussCodes(){this.loadingSpecialty=!0,be.getTussCodes().then(e=>{this.tussCodesList=e.data.map(e=>e.term),this.tussCodesGeneralList=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingSpecialty=!1})},generateToken(){this.tokens=[];let e=this.company.length;this.company.forEach(t=>{let a={};a.company_name=t.name;let n={user_id:this.item.id,company_id:t.id,cpf:this.cpf.replace(/[&\/\\#, +()$~%.'":*?<>{}-]/g,"")};be.doctorEnableToken(n).then(t=>{e--,e<=0&&this.getTokens()}).catch(e=>{console.error(e)}).finally(e=>{this.tokenModal=!1})})},getTokens(){this.tokens=[];let e={user_id:this.item.id,cpf:this.cpf.replace(/[&\/\\#, +()$~%.'":*?<>{}-]/g,"")};be.doctorGetToken(e).then(e=>{this.tokens=e.data}).catch(e=>{console.error(e)}).finally(e=>{this.tokenModal=!1})},sendComponentInfo(){if(this.item){let e="edit-medical";this.$bus.emit("component-info",e)}else{let e="medical";this.$bus.emit("component-info",e)}},openNavigationConfirmationModal(){this.$bus.emit("open-navigation-confirmation-modal",this.$t("access_controls.remove_photo_question"))},uploadImage(e){this.file=e.target.files[0],this.file&&(this.path="",this.preview=URL.createObjectURL(this.file))},removePhoto(){this.hover=!1,this.file=null,this.path="",this.preview=""},createImageUrl(e=null){if(!e)return;let t={token:this.$store.state.Data.User.token,file:this.file};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,t).then(t=>{this.path=t.data[this.file.name].completeUrl,this.preview=this.path,this.file=null,e()}).catch(e=>{this.loading=!1,console.error(e)})},prepareData(){if(this.$v.$touch(),this.$v.$invalid)this.loading=!1;else if(this.getProgramData(),this.handleProgramData(),this.programQueue=this.programQueue.filter((e,t,a)=>a.indexOf(e)===t),this.newCpf&&this.validCpf){let e={name:this.name,email:this.email,cpf:this.rawCpf,image_path:this.path,professional_council_id:this.council.id,crm:this.numberCouncil,occupation:this.chosenOccupation,state:this.state,user_status:this.status,user_department_id:this.department.id,user_role_id:this.role.id,speciality_id:this.specialty.id,user_type:this.user_type,program_ids:this.programQueue,phone:this.phone,phone_mobile:this.phoneMobile,about_me:this.about_me,user_graduation:{},tuss_code:this.tussCodesGeneralList.find(e=>e.term===this.tussCode)?this.tussCodesGeneralList.find(e=>e.term===this.tussCode).code:null};this.graduation&&(e.user_graduation.name=this.graduation),this.institution&&(e.user_graduation.institution=this.institution),this.institution_state&&(e.user_graduation.institution_state=this.institution_state),this.registrationCodeId&&(e.user_graduation.registration_code=this.graduationRegistrationCode,e.user_graduation.registration_code_id=this.registrationCodeId,e.user_graduation.registration_code_state=this.graduationRegistrationCodeState),0===Object.keys(e.user_graduation).length&&delete e["user_graduation"],"EXTERNAL_MEDICAL"===this.user_type&&(e.company_ids=this.company.join()),this.$bus.emit("send-data",e)}},updateData(){if(this.$v.$touch(),this.$v.$invalid)return void(this.loading=!1);if(this.file)return this.createImageUrl(this.updateData);this.handleProgramData(),this.programQueue=this.programQueue.filter((e,t,a)=>a.indexOf(e)===t);let e=[];this.company.forEach(t=>{"object"===typeof t?e.push(t.id):e.push(t)});let t=0;"EXTERNAL_MEDICAL"==this.user_type&&(t=5),"MEDICAL"==this.user_type&&(t=3);let a={image_path:this.path,user_role_id:null==this.role.id?this.roleId:this.role.id,user_status:this.status,user_department_id:this.department.id,state:this.state,numberCouncil:this.numberCouncil,program_ids:this.programQueue.toString(),company_ids:e.join(),speciality_id:null==this.specialty?null:this.specialty.id,phone:this.phone,phone_mobile:this.phoneMobile,user_type_id:t,professional_council_id:this.council.id,crm:this.numberCouncil,occupation:this.chosenOccupation,about_me:this.about_me,user_graduation:{},tuss_code:this.tussCodesGeneralList.find(e=>e.term===this.tussCode)?this.tussCodesGeneralList.find(e=>e.term===this.tussCode).code:null};this.graduation&&(a.user_graduation.name=this.graduation),this.institution&&(a.user_graduation.institution=this.institution),this.institution_state&&(a.user_graduation.institution_state=this.institution_state),this.registrationCodeId&&(a.user_graduation.registration_code_id=this.registrationCodeId),this.graduationRegistrationCodeState&&(a.user_graduation.registration_code_state=this.graduationRegistrationCodeState),a.user_graduation.registration_code=this.graduationRegistrationCode,0===Object.keys(a.user_graduation).length&&delete a["user_graduation"];let n={user_id:this.user_id,token:this.$store.state.Data.User.token,user_info:a};this.$bus.emit("send-update-medical",n)},checkIfUserExists(){this.loading=!0,this.newCpf=!0,this.rawCpf=this.cpf.replace(/[-.\s]/g,""),be.checkDuplicatedCpf(this.rawCpf).then(e=>{this.newCpf=!0,this.validCpf=!0}).catch(e=>{this.newCpf=!1,this.validCpf=!1}).finally(()=>{this.$v.cpf.$touch(),this.loading=!1})},handleProgramData(){this.programData&&this.programData.length>0&&this.programData.forEach(e=>{this.programQueue.push(e)})},getProgramData(){return this.program},getUser(e){this.loadingUser=!0,be.getUser(e).then(e=>{let t=e.data.user_info,a=e.data.role_info,n=e.data.department_info,i=e.data.user_occupation,s=e.data.user_graduation;this.roleList.find(e=>e.id==a.role_id)||this.roleList.push({id:a.role_id,role:a.role}),this.user_id=t.id,this.name=t.name,this.email=t.email,this.cpf=t.cpf,this.path=t.image_path,this.status=t.user_status,this.role=a.role,this.specialty=t.speciality_id,this.chosenOccupation=i,this.department=n.name,this.numberCouncil=t.crm,this.council=t.professional_council_id,this.state=t.state,this.departmentId=n.department_id,this.roleId=a.role_id,this.program=t.programs.map(e=>e.id),this.user_type=t.user_type,this.about_me=t.about_me,this.phone=t.phone?this.formatPhoneFilter(t.phone):"",this.phoneMobile=t.phone_mobile?this.formatPhoneFilter(t.phone_mobile):"",t.companies&&t.companies.length>0&&t.companies.forEach(e=>{this.company.push({id:e.id,name:e.name})}),this.about_me=t.about_me,this.graduation=s.name,this.institution=s.institution,this.institution_state=s.institution_state?this.statesList[s.institution_state-1]:null,this.registrationCodeId=s.registration_code_id,this.graduationRegistrationCodeState=s.registration_code_state_name,this.graduationRegistrationCode=s.registration_code,this.formatCpf(),this.sendProgramData(),this.getTokens(),this.preview=this.path,this.tussCode=this.tussCodesGeneralList.find(e=>e.code===t.tuss_code)?this.tussCodesGeneralList.find(e=>e.code===t.tuss_code).term:null}).catch(e=>{console.error(e)}).finally(()=>{this.loadingUser=!1})},formatCpf(){let e=this.cpf.substr(0,3),t=this.cpf.substr(3,3),a=this.cpf.substr(6,3),n=this.cpf.substr(9,2),i=`${e}.${t}.${a}-${n}`;return this.cpf=i,this.cpf},sendProgramData(){this.$bus.emit("get-program-data",this.program)}},computed:{nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),!this.$v.name.minLength&&e.push(this.$t("access_controls.min_length")),e):e},emailErrors(){const e=[];return this.$v.email.$dirty?(!this.$v.email.email&&e.push(this.$t("access_controls.invalid_email")),!this.$v.email.required&&e.push(this.$t("access_controls.required")),e):e},cpfErrors(){const e=[];return this.$v.cpf.$dirty?(!this.$v.cpf.required&&e.push(this.$t("access_controls.required")),!this.$v.cpf.minLength&&e.push(this.$t("access_controls.invalid_cpf")),!this.validCpf&&e.push(this.$t("access_controls.user_exists")),e):e},numberCouncilErrors(){const e=[];return this.$v.numberCouncil.$dirty?(!this.$v.numberCouncil.required&&e.push(this.$t("access_controls.required")),e):e},stateErrors(){const e=[];return this.$v.state.$dirty?(!this.$v.state.required&&e.push(this.$t("access_controls.required")),e):e},phoneErrors(){const e=[];return this.$v.phone.$dirty?(!this.$v.phone.required&&e.push(this.$t("access_controls.required")),!this.$v.phone.minLength&&e.push(this.$t("patient_modal.invalid_phone")),e):e},phoneMobileErrors(){const e=[];return this.$v.phoneMobile.$dirty?(!this.$v.phoneMobile.required&&e.push(this.$t("access_controls.required")),!this.$v.phoneMobile.minLength&&e.push(this.$t("patient_modal.invalid_phone_mobile")),e):e},statusErrors(){const e=[];return this.$v.status.$dirty?(!this.$v.status.required&&e.push(this.$t("access_controls.required")),e):e},departmentErrors(){const e=[];return this.$v.department.$dirty?(!this.$v.department.required&&e.push(this.$t("access_controls.required")),e):e},roleErrors(){const e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push(this.$t("access_controls.required")),e):e},tussCodeErrors(){const e=[];return this.$v.tussCode.$dirty?(!this.$v.tussCode.required&&e.push(this.$t("access_controls.required")),e):e},aboutMeErrors(){const e=[];return this.$v.about_me.$dirty?(!this.$v.about_me.required&&e.push(this.$t("access_controls.required")),e):e},graduationErrors(){const e=[];return this.$v.graduation.$dirty?(!this.$v.graduation.required&&e.push(this.$t("access_controls.required")),e):e},institutionErrors(){const e=[];return this.$v.institution.$dirty?(!this.$v.institution.required&&e.push(this.$t("access_controls.required")),e):e},institutionStateErrors(){const e=[];return this.$v.institution_state.$dirty?(!this.$v.institution_state.required&&e.push(this.$t("access_controls.required")),e):e}},validations:{name:{required:Ae["required"],minLength:Object(Ae["minLength"])(3)},email:{required:Ae["required"],email:Ae["email"]},cpf:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},numberCouncil:{required:Ae["required"]},state:{required:Ae["required"]},phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(18)},phoneMobile:{required:Ae["required"],minLength:Object(Ae["minLength"])(19)},status:{required:Ae["required"]},department:{required:Ae["required"]},role:{required:Ae["required"]},about_me:{required:Ae["required"]},graduation:{required:Object(Ae["requiredIf"])((function(){return this.institution||this.institution_state}))},institution:{required:Object(Ae["requiredIf"])((function(){return this.graduation||this.institution_state}))},institution_state:{required:Object(Ae["requiredIf"])((function(){return this.graduation||this.institution}))},tussCode:{required:Ae["required"]}}},ug=mg,Ag=(a("19f4"),Object(I["a"])(ug,ng,ig,!1,null,null,null)),_g=Ag.exports,Eg=function(){var e=this,t=e._self._c;return t("div",{staticClass:"med-program-control"},[t(re["a"],[t(Xn["a"],[t("div",{staticClass:"title my-5"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("access_controls.select")))]),e._v("\n          "+e._s(e.$t("access_controls.programs"))+"\n          "+e._s(e.$t("access_controls.doctors"))+"\n        ")])]),t(ce["a"],e._l(e.programs,(function(a,n){return t(oe["a"],{key:n,staticClass:"mp-checkboxes",attrs:{cols:"12",md:"3"}},[t(St["a"],{staticClass:"mp-checkbox",attrs:{value:a.id,label:a.name,"hide-details":""},on:{change:function(t){return e.getData()},blur:function(t){return e.getData()}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)})),1)],1)],1),e.success?t("div",{staticClass:"mt-3 mb-n6"},[t("span",{staticClass:"green--text"},[e._v(e._s(e.$t("access_controls.update_successful")))])]):e._e()],1)},Ig=[],hg={data(){return{programs:[],selected:[],invalid:!1,success:!1}},created(){this.listPrograms(),this.$bus.on("get-program-data",e=>{this.selected=e,this.sendPrograms()}),this.$bus.on("update-successful",()=>{this.success=!0,setTimeout(()=>{this.success=!1},3e3)})},beforeDestroy(){this.$bus.off("check-program-data"),this.$bus.off("get-program-data")},methods:{getData(){this.$bus.emit("medical-program-data",this.selected)},listPrograms(){let e=this.$store.state.Data.User.token,t={token:e,program_types:["EXTERNAL","INTERNAL"]};this.$store.dispatch(this.$consts.USER_ACTIONS.PROGRAM_LIST,t).then(e=>{this.programs=e.data.programs}).catch(e=>{})},sendPrograms(){this.$bus.emit("medical-new-program-ids",this.selected)}}},Og=hg,pg=(a("b5aa"),Object(I["a"])(Og,Eg,Ig,!1,null,null,null)),Sg=pg.exports,Cg={props:["item"],components:{MedicalControl:_g,MedProgramControl:Sg}},Tg=Cg,Rg=Object(I["a"])(Tg,tg,ag,!1,null,null,null),Dg=Rg.exports,gg=function(){var e=this,t=e._self._c;return t("div",{staticClass:"new-clients mb-10"},[t("NewCompany"),t("CompanyContract",{attrs:{disabled:e.disabled}}),t("ProductList"),t("SaveComponent"),t("ConfirmUploadComponent")],1)},Lg=[],fg=function(){var e=this,t=e._self._c;return t("div",{staticClass:"company"},[t("div",{staticClass:"company-title"},[t("div",{staticClass:"company-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.new")))]),e._v("\n      "+e._s(e.$t("external_controls.company"))+"\n    ")])]),t("div",{staticClass:"company-sub"},[t("span",{staticClass:"company-subtitle"},[e._v(e._s(e.$t("external_controls.foreign")))])]),t("div",{staticClass:"radio-btns"},[t(Qs["a"],{class:{"disabled-events":e.blocked},attrs:{row:""},on:{change:function(t){return e.changeCnpj(e.foreign)}},model:{value:e.foreign,callback:function(t){e.foreign=t},expression:"foreign"}},[t(Zs["a"],{attrs:{label:e.$t("external_controls.no"),value:0}}),t(Zs["a"],{attrs:{label:e.$t("external_controls.yes"),value:1}})],1)],1),t(re["a"],[t(Xn["a"],[t(ce["a"],[0==e.foreign?t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##.###.###/####-##",expression:"'##.###.###/####-##'"}],class:{"disabled-events":e.blocked},attrs:{loading:e.loading,label:e.$t("external_controls.cnpj"),height:"37px",id:"cnpj",outlined:""},on:{blur:function(t){return e.checkUniqueCnpj()}},model:{value:e.cnpj,callback:function(t){e.cnpj="string"===typeof t?t.trim():t},expression:"cnpj"}})],1):e._e(),1==e.foreign?t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##############",expression:"'##############'"}],class:{"disabled-events":e.blocked},attrs:{label:e.$t("external_controls.registry_number"),"error-messages":e.registryErrors,height:"37px",outlined:""},on:{change:function(t){return e.checkUniqueDocument()},blur:function(t){return e.$v.registry.$touch()}},model:{value:e.registry,callback:function(t){e.registry="string"===typeof t?t.trim():t},expression:"registry"}})],1):e._e(),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.fantasy_name"),height:"37px",outlined:""},model:{value:e.fantasia,callback:function(t){e.fantasia="string"===typeof t?t.trim():t},expression:"fantasia"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.country"),"error-messages":e.countryErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.country.$touch()}},model:{value:e.country,callback:function(t){e.country="string"===typeof t?t.trim():t},expression:"country"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.social"),"error-messages":e.nameErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.ie"),height:"37px",outlined:""},model:{value:e.ie,callback:function(t){e.ie="string"===typeof t?t.trim():t},expression:"ie"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.main_address"),"error-messages":e.addressErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.address.$touch()}},model:{value:e.address,callback:function(t){e.address="string"===typeof t?t.trim():t},expression:"address"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.activity"),"error-messages":e.activityErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.activity.$touch()}},model:{value:e.activity,callback:function(t){e.activity="string"===typeof t?t.trim():t},expression:"activity"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.legal"),"error-messages":e.juridicaErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.juridica.$touch()}},model:{value:e.juridica,callback:function(t){e.juridica="string"===typeof t?t.trim():t},expression:"juridica"}})],1)],1)],1)],1),e.errors?t("div",{staticClass:"invalid-cnpj"},[e._v(e._s(e.error))]):e._e(),e.exists?t("div",{staticClass:"invalid-cnpj"},[e._v("\n    "+e._s(e.$t("external_controls.document_exists"))+"\n  ")]):e._e(),t("div",{staticClass:"mb-3"},[t("span",{staticClass:"company-subtitle"},[e._v(e._s(e.$t("external_controls.additional_info")))])]),t(re["a"],[t(Xn["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.payer"),"return-object":"",height:"37px",outlined:""},on:{change:e.getPayer},model:{value:e.payerDocument,callback:function(t){e.payerDocument=t},expression:"payerDocument"}})],1)],1),t(ce["a"],[e.selectedPayerInfo?t("p",{staticClass:"subtitle"},[e._v("\n          "+e._s(e.selectedPayerInfo)+"\n        ")]):e._e()]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.intern_manager"),"error-messages":e.internalManagerErrors,height:"37px",maxlength:"50",outlined:""},on:{blur:function(t){return e.$v.internal_manager_name.$touch()}},model:{value:e.internal_manager_name,callback:function(t){e.internal_manager_name="string"===typeof t?t.trim():t},expression:"internal_manager_name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(+####) ####-####","(+####) #####-####"],expression:"['(+####) ####-####', '(+####) #####-####']"}],attrs:{label:e.$t("external_controls.phone"),"error-messages":e.internalManagerPhoneErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.internal_manager_phone.$touch()}},model:{value:e.internal_manager_phone,callback:function(t){e.internal_manager_phone="string"===typeof t?t.trim():t},expression:"internal_manager_phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.company_manager"),"error-messages":e.companyManagerErrors,height:"37px",maxlength:"50",outlined:""},on:{blur:function(t){return e.$v.company_manager.$touch()}},model:{value:e.company_manager,callback:function(t){e.company_manager="string"===typeof t?t.trim():t},expression:"company_manager"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(+####) ####-####","(+####) #####-####"],expression:"['(+####) ####-####', '(+####) #####-####']"}],attrs:{label:e.$t("external_controls.phone"),"error-messages":e.companyManagerPhoneErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.company_manager_phone.$touch()}},model:{value:e.company_manager_phone,callback:function(t){e.company_manager_phone="string"===typeof t?t.trim():t},expression:"company_manager_phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.hr_contact"),"error-messages":e.hrContactErrors,height:"37px",maxlength:"50",outlined:""},on:{blur:function(t){return e.$v.hr_contact.$touch()}},model:{value:e.hr_contact,callback:function(t){e.hr_contact="string"===typeof t?t.trim():t},expression:"hr_contact"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(+####) ####-####","(+####) #####-####"],expression:"['(+####) ####-####', '(+####) #####-####']"}],attrs:{label:e.$t("external_controls.phone"),"error-messages":e.hrContactPhoneErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.hr_contact_phone.$touch()}},model:{value:e.hr_contact_phone,callback:function(t){e.hr_contact_phone="string"===typeof t?t.trim():t},expression:"hr_contact_phone"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox mt-0",attrs:{label:e.$t("external_controls.contractee")},model:{value:e.contractee,callback:function(t){e.contractee=t},expression:"contractee"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox mt-0",attrs:{label:e.$t("external_controls.benefit_sponsor")},model:{value:e.sponsor,callback:function(t){e.sponsor=t},expression:"sponsor"}})],1)],1),t(ce["a"],{staticClass:"mt-12"},[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("p",{staticClass:"subtitle"},[e._v(e._s(e.$t("external_controls.tiss")))]),t(St["a"],{attrs:{label:e.$t("external_controls.flag_tiss")},on:{change:function(t){return e.$v.$touch()}},model:{value:e.flag_tiss,callback:function(t){e.flag_tiss=t},expression:"flag_tiss"}})],1)],1),t(ce["a"],{staticClass:"mt-4"},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"######",expression:"'######'"}],attrs:{label:e.$t("external_controls.code_ans"),disabled:!e.flag_tiss,maxlength:"6",height:"37px",outlined:"",type:"number","error-messages":e.flag_tiss&&!e.code_ans?[e.$t("external_controls.required_field")]:[]},on:{blur:function(t){return e.$v.code_ans.$touch()}},model:{value:e.code_ans,callback:function(t){e.code_ans="string"===typeof t?t.trim():t},expression:"code_ans"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.operator_code"),disabled:!e.flag_tiss,height:"37px",outlined:"","error-messages":e.flag_tiss&&!e.operator_code?[e.$t("external_controls.required_field")]:[]},on:{blur:function(t){return e.$v.operator_code.$touch()}},model:{value:e.operator_code,callback:function(t){e.operator_code="string"===typeof t?t.trim():t},expression:"operator_code"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.webservice"),disabled:!e.flag_tiss,height:"37px",outlined:"","error-messages":e.flag_tiss&&!e.webservice?[e.$t("external_controls.required_field")]:[]},on:{blur:function(t){return e.$v.webservice.$touch()}},model:{value:e.webservice,callback:function(t){e.webservice="string"===typeof t?t.trim():t},expression:"webservice"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.credentials"),disabled:!e.flag_tiss,height:"37px",outlined:"","error-messages":e.flag_tiss&&!e.credentials?[e.$t("external_controls.required_field")]:[]},on:{blur:function(t){return e.$v.credentials.$touch()}},model:{value:e.credentials,callback:function(t){e.credentials="string"===typeof t?t.trim():t},expression:"credentials"}})],1)],1),t(ce["a"],{staticClass:"mt-8"},[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("p",{staticClass:"subtitle"},[e._v(e._s(e.$t("external_controls.hierarchy")))])])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox mt-0",attrs:{label:e.$t("external_controls.is_mother")},on:{change:e.verifyMother},model:{value:e.mother,callback:function(t){e.mother=t},expression:"mother"}})],1),t(oe["a"],{attrs:{cols:"12",md:"8"}},[t(de["a"],{staticClass:"input1",class:{"disabled-events":e.mother||e.blocked},attrs:{label:e.$t("external_controls.mother_company_name"),items:e.companyList,"item-text":"name","return-object":"",height:"37px",outlined:""},on:{change:e.getMotherCompany},model:{value:e.mother_cnpj,callback:function(t){e.mother_cnpj=t},expression:"mother_cnpj"}})],1)],1),e.selected_company_info?t(ce["a"],{staticClass:"mt-2"},[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("p",{staticClass:"subtitle"},[e._v(e._s(e.selected_company_info))])])],1):e._e(),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"company-checkbox",attrs:{label:e.$t("external_controls.inheritance_company")},model:{value:e.inheritanceFlavour,callback:function(t){e.inheritanceFlavour=t},expression:"inheritanceFlavour"}})],1),t(oe["a"],{attrs:{cols:"12",md:"8"}},[t(se["a"],{staticClass:"input1 mt-4",attrs:{label:e.$t("external_controls.flavour"),items:e.flavourList,"item-text":"flavour_code","item-value":"flavour_id","return-object":"",height:"37px",outlined:""},on:{change:function(t){return e.changeFlavour()}},model:{value:e.selected_flavour,callback:function(t){e.selected_flavour=t},expression:"selected_flavour"}})],1)],1)],1)],1),t("ForeignCnpjNavegation")],1)},Ng=[],kg=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.cn_dialog,callback:function(t){e.cn_dialog=t},expression:"cn_dialog"}},[t("div",{staticClass:"cnpj-section"},[t(l["a"],{staticClass:"cn-section"},[t(c["c"],{staticClass:"cnpj-title white--text"},[t("span",{staticClass:"cn-title"},[e._v(e._s(e.$t("attendance.nav_confirm")))]),t("img",{staticClass:"cnpj-close",attrs:{src:a("bf37")},on:{click:function(t){return e.cancel()}}})]),t(c["b"],{staticClass:"cnpj-desc text-justify"},[e._v(e._s(e.$t("external_controls.close_dialog")))]),t(c["a"],{staticClass:"cnpj-buttons"},[t(r["a"],{staticClass:"primary--text ml-1",attrs:{color:"white",height:"37px",width:"226px",outlined:""},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("external_controls.yes")))]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"226px"},on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("external_controls.no")))])],1)],1)],1)])],1)},vg=[],bg={components:{},data(){return{cn_dialog:!1,item:null,data:null}},created(){this.$bus.on("cnpj-dialog",e=>{this.cn_dialog=e,this.answer=!1}),this.$bus.on("payer-cnpj-dialog",e=>{this.cn_dialog=e})},beforeDestroy(){this.$bus.off("cnpj-dialog"),this.$bus.off("payer-cnpj-dialog")},methods:{close(){this.cn_dialog=!1,this.$bus.emit("close-cnpj-dialog",this.cn_dialog),this.$bus.emit("close-cnpj-dialog-company",this.cn_dialog)},cancel(){this.cn_dialog=!1,this.$bus.emit("cancel-foreign-cnpj",this.cn_dialog),this.$bus.emit("cancel-foreign-cnpj-company")}}},Mg=bg,Pg=(a("3d06"),Object(I["a"])(Mg,kg,vg,!1,null,null,null)),Ug=Pg.exports,yg={components:{ForeignCnpjNavegation:Ug},data(){return{foreign:0,mother:!1,cnpj:"",phone_mask_intern:"",phone_mask_ext:"",phone_mask_hr:"",isValid:!1,loading:!1,companyList:null,selected_company:null,mother_cnpj:null,companyData:"",country:"Brasil",ie:"",address:"",activity:"",payers:[],selectedPayer:null,selectedPayerInfo:null,selected_company_info:null,payerDocument:"",internal_manager_name:"",internal_manager_phone:"",company_manager:"",company_manager_phone:"",hr_contact:"",hr_contact_phone:"",contractee:null,sponsor:null,error:"",hasError:!1,company:null,errors:[],invalid:!1,name:"",fantasia:"",juridica:"",message:"",disabled:!0,registry:"",document:"",blocked:!1,exists:!1,selected_flavour:null,previousFlavour:null,flavourList:[{flavour_id:null,flavour_code:"Sem Flavor"}],inheritanceFlavour:!1,flavourPagination:{limit:10,offset:0,total:0},flag_tiss:!1,code_ans:null,operator_code:null,webservice:null,credentials:null}},created(){this.listFlavour(),this.$bus.on("get-new-company",()=>{this.sendFormData()}),this.$bus.on("close-cnpj-dialog-company",e=>{this.resetCompanyFields(),this.isValid=!0}),this.$bus.on("cancel-foreign-cnpj-company",e=>{this.foreign=0,this.isValid=!1}),this.$bus.on("company-created",()=>{this.blocked=!0})},beforeDestroy(){this.$bus.off("close-cnpj-dialog-company"),this.$bus.off("cancel-foreign-cnpj-company"),this.$bus.off("get-new-company"),this.$bus.off("company-created")},methods:{changeFlavour(){if(-1==this.selected_flavour.flavour_id)return this.selected_flavour=this.previousFlavour,this.loadMoreFlavour();this.previousFlavour=this.selected_flavour?{...this.selected_flavour}:null},loadMoreFlavour(){this.flavourPagination.offset+=10,this.listFlavour()},listFlavour(){let e=this.$store.state.Data.User.token,t={token:e,limit:this.flavourPagination.limit,offset:this.flavourPagination.offset,statuses:["active"]};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_FLAVOUR,t).then(e=>{this.flavourPagination.total=e.data.total;let t=this.flavourList.findIndex(e=>-1==e.flavour_id);this.flavourList.splice(t,1),this.flavourList=this.flavourList.concat(e.data.flavour_information),this.hasMoreFlavours&&this.flavourList.push({flavour_id:-1,flavour_code:"Mostrar mais"})}).catch(e=>{console.log("error",e)})},changeCnpj(e){1==e?(this.dialog=!0,this.$bus.emit("cnpj-dialog",this.dialog)):(this.resetCompanyFields(),this.foreign=0,this.isValid=!1)},checkCnpj(){if(1==this.foreign)return!1;this.hasError=!1,this.isValid=!1,this.exists=!1;let e=document.getElementById("cnpj").value;if(e=e.replace(".",""),e=e.replace("-",""),e=e.replace("/",""),e=e.replace(".",""),e){let t={type:"cnpj",info:e};this.loading=!0,be.checkCnpj(t).then(e=>{this.companyData=e.data.data,this.address=this.companyData.address.public_place+", "+this.companyData.address.number+" - "+this.companyData.address.neighborhood+", "+this.companyData.address.city+" - "+this.companyData.address.uf,this.activity=this.companyData.cnaes[0].description,this.name=this.companyData.name,this.juridica=this.companyData.legal_nature.description,this.fantasia=this.companyData.fantasy_names[0],this.document=this.companyData.cnpj,this.isValid=!0,this.disabled=!1,this.exists=!1}).catch(e=>{this.isValid=!1,this.exists=!1,console.error(e)}).finally(()=>{this.loading=!1})}},getPayer(){let e={document:this.payerDocument,cnpj:this.payerDocument};this.selectedPayer="...",be.getPayerByDocument(e).then(e=>{e.data.payer_info?(this.selectedPayerInfo=e.data.payer_info.name,this.selectedPayer=e.data.payer_info,this.$bus.emit("enable-company-contract",!1)):(this.selectedPayerInfo="Fonte pagadora n
 da Silva",role:"Nutricionista",image:""},{name:"Maria Helena",role:"Nutricionista",image:""}]}},created(){this.$bus.on("mine-dialog",e=>{this.dialog=e})},methods:{close(){this.dialog=!1}}},Lt=gt,ft=(a("ab20"),Object(I["a"])(Lt,Rt,Dt,!1,null,"641beb7e",null)),Nt=ft.exports,kt=function(){var e=this,t=e._self._c;return e.isEmergency?t(lt["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(at["a"],e._g(e._b({attrs:{size:"16",color:"orange"}},"v-icon",n,!1),a),[e._v("warning")])]}}],null,!1,1385599498)},[t("span",[e._v(e._s(e.$t("attendance.is_emergency_member")))])]):e._e()},vt=[],bt={props:["isEmergency"]},Mt=bt,Pt=Object(I["a"])(Mt,kt,vt,!1,null,null,null),Ut=Pt.exports,yt=a("2e4b"),$t=a("b974"),xt=function(){var e=this,t=e._self._c;return e.collapsedView?e._e():t("div",{staticClass:"tabs-lists-filter-search mb-4 d-flex justify-end"},[t(St["a"],{staticClass:"my-0 py-0 mr-3",attrs:{label:e.$t("attendance.influence"),height:"37px","hide-details":""},on:{change:function(t){return e.handleChangeInfluence(e.influence)}},model:{value:e.influence,callback:function(t){e.influence=t},expression:"influence"}}),t($t["a"],{staticClass:"filter-select my-0 py-0 mr-3",attrs:{label:e.$t("attendance.filter"),items:e.filters,"item-value":"value",height:"37px","hide-details":"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n      "+e._s(e.$t("attendance.tabs_filter."+t.item.str))+"\n    ")]}},{key:"item",fn:function(t){return[e._v("\n      "+e._s(e.$t("attendance.tabs_filter."+t.item.str))+"\n    ")]}}],null,!1,118474460),model:{value:e.selectFilter,callback:function(t){e.selectFilter=t},expression:"selectFilter"}},[e.selectFilter?t(at["a"],{staticClass:"remove-filter icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.clearFilters},slot:"append"},[e._v("\n      $vuetify.icons.delete\n    ")]):e._e()],1),e.selectFilter==e.$store.state.Data.Queue.FILTERS.STATUS?t("div",{staticClass:"att-desc my-0 py-0"},[t($t["a"],{staticClass:"status-select",attrs:{label:e.$t("attendance.status"),items:e.statusList,"item-value":"id","item-text":"status",height:"37px","hide-details":"",outlined:""},on:{change:function(t){return e.handleChangeSearch({field:e.selectFilter,value:e.statusId})}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n        "+e._s(e.$t("attendance."+t.item.status))+"\n      ")]}},{key:"item",fn:function(t){return[e._v("\n        "+e._s(e.$t("attendance."+t.item.status))+"\n      ")]}}],null,!1,4202346812),model:{value:e.statusId,callback:function(t){e.statusId=t},expression:"statusId"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"37px",color:"primary",disabled:!e.statusId},on:{click:function(t){return e.handleChangeSearch({field:e.selectFilter,value:e.statusId})}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e(),e.selectFilter==e.$store.state.Data.Queue.FILTERS.URGENCY?t("div",{staticClass:"att-desc my-0 py-0"},[t($t["a"],{staticClass:"urgency-select",attrs:{label:e.$t("attendance.urgency_level"),items:e.classifications,"item-value":"id",height:"37px","hide-details":"",outlined:""},on:{change:function(t){return e.handleChangeSearch({field:e.selectFilter,value:e.urgencyId})}},scopedSlots:e._u([{key:"selection",fn:function(a){return[a.item.id?t(at["a"],{staticClass:"mr-1",attrs:{color:e.$consts.CLASSIFICATION_COLORS[a.item.urgency_alias.toUpperCase()],size:"20"}},[e._v("fiber_manual_record")]):e._e(),e._v("\n        "+e._s(e.$t("classification."+a.item.urgency_alias))+"\n      ")]}},{key:"item",fn:function(a){return[a.item.id?t(at["a"],{staticClass:"mr-1",attrs:{color:e.$consts.CLASSIFICATION_COLORS[a.item.urgency_alias.toUpperCase()],size:"20"}},[e._v("fiber_manual_record")]):e._e(),e._v("\n        "+e._s(e.$t("classification."+a.item.urgency_alias))+"\n      ")]}}],null,!1,3477781500),model:{value:e.urgencyId,callback:function(t){e.urgencyId=t},expression:"urgencyId"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"37px",color:"primary",disabled:!e.urgencyId},on:{click:function(t){return e.handleChangeSearch({field:e.selectFilter,value:e.urgencyId})}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e(),e.selectFilter==e.$store.state.Data.Queue.FILTERS.DUE_DATE?t("div",{staticClass:"att-desc my-0 py-0"},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"217px","hide-details":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"birthdate f-btns",attrs:{label:e.$t("attendance.tabs_filter.due_date"),placeholder:"DD/MM/YYYY","hide-details":"",height:"37px",readonly:"",outlined:""},on:{click:function(t){e.dueDate=null}},model:{value:e.dueDateFormated,callback:function(t){e.dueDateFormated=t},expression:"dueDateFormated"}},"v-text-field",n,!1),a)),t(r["a"],{staticClass:"search-btn",attrs:{height:"37px",color:"primary",disabled:!e.dueDate},on:{click:function(t){e.handleChangeSearch({field:e.selectFilter,value:e.$moment(e.dueDate).utc().unix()})}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)]}}],null,!1,3422038944),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDueDate,locale:"pt-br"},on:{input:function(t){e.menu=!1}},model:{value:e.dueDate,callback:function(t){e.dueDate=t},expression:"dueDate"}})],1)],1):e._e(),e.selectFilter==e.$store.state.Data.Queue.FILTERS.COMPANY||e.selectFilter==e.$store.state.Data.Queue.FILTERS.NAME||e.selectFilter==e.$store.state.Data.Queue.FILTERS.CASE?t("div",{staticClass:"att-desc my-0 py-0"},[t(de["a"],{staticClass:"search",attrs:{placeholder:e.$t("attendance.search"),height:"37px","hide-details":"",outlined:""},on:{blur:e.adjustTextInput},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"37px",color:"primary",disabled:e.cannotSearchCase},on:{click:function(t){return e.handleChangeSearch({field:e.selectFilter,value:e.search})}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e()],1)},Vt=[],Gt={name:"TabsListsFilterSearch",props:["listName","collapsedView","handleChangeInfluence","handleChangeSearch"],data(){return{menu:!1,filters:this.$store.state.Data.Queue.allowedFilterskey,selectFilter:null,influence:!1,statusId:null,urgencyId:null,search:null,dueDate:""}},created(){this.selectFilter=this.$store.state.Data.Queue.FILTERS.NAME},methods:{formattedDueDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},adjustTextInput(){this.selectFilter==this.$store.state.Data.Queue.FILTERS.CASE&&(this.search=/^\d+$/.test(this.search)?this.search:null)},clearFilters(){this.statusId=null,this.urgencyId=null,this.search=null,this.dueDate="",this.selectFilter=null,this.handleChangeSearch()}},computed:{classifications(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_ALL_CLASSIFICATIONS]||[]},dueDateFormated(){return this.dueDate?this.$moment(this.dueDate).format("DD/MM/YYYY"):""},cannotSearchCase(){return this.selectFilter==this.$store.state.Data.Queue.FILTERS.CASE&&!/^\d+$/.test(this.search)},statusList(){let e=this.listName?this.listName.toUpperCase():"ATTENDANCES";return this.$store.getters[this.$consts.VANELLOPE_ACTIONS[`GET_${e}_STATUS`]]}},watch:{selectFilter(){if(this.statusId=null,this.urgencyId=null,this.search=null,this.dueDate="",this.selectFilter&&this.selectFilter==this.$store.state.Data.Queue.FILTERS.STATUS&&!this.loadingStatus){if(this.statusList&&this.statusList.length>0)return;this.loadingStatus=!0;let e="",t=this.listName?this.listName.toUpperCase():"ATTENDANCES";switch(t){case"ATTENDANCES":e="getAttendanceStatus";break;case"USER_ATTENDANCE":e="getUserAttendanceStatus";break;case"QUEUE_ATTENDANCES":e="getAttendancesInQueueStatus";break;case"EXTERNAL_ATTENDANCES":e="getExternalAttendanceStatus";break;case"USER_EXTERNAL_ATTENDANCE":e="getUserExternalAttendanceStatus";break}je[e]().then(e=>{this.$store.dispatch(this.$consts.VANELLOPE_ACTIONS[`SET_${t}_STATUS`],e.data)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingStatus=!1})}}}},Ft=Gt,Bt=(a("3f93"),Object(I["a"])(Ft,xt,Vt,!1,null,"14dbe19b",null)),wt=Bt.exports,Ht=function(){var e=this,t=e._self._c;return t("div",{staticClass:"deficiency-and-vip-container d-inline-flex"},[e._l(e.deficiencyIdList,(function(a){return 1!==a?t(lt["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:i}){return[t(l["a"],e._g(e._b({staticClass:"bar",attrs:{color:e.$consts.DISABILITY_AND_VIP_COLORS[a]}},"v-card",i,!1),n))]}}],null,!0)},[t("span",[e._v(e._s(e.$t("deficiency_and_vip."+a)))])]):e._e()})),e.isVip?t(lt["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(l["a"],e._g(e._b({staticClass:"bar",attrs:{color:e.$consts.DISABILITY_AND_VIP_COLORS.VIP}},"v-card",n,!1),a))]}}],null,!1,1162158275)},[t("span",[e._v(e._s(e.$t("deficiency_and_vip.vip")))])]):e._e()],2)},qt=[],Yt={props:["isVip","deficiencyIds"],computed:{deficiencyIdList(){if(this.deficiencyIds&&(this.deficiencyIds.length>0||Object.keys(this.deficiencyIds).length>0)){let e=this.deficiencyIds.length>0?this.deficiencyIds:Object.values(this.deficiencyIds);return e.map(e=>e.disability_id||e.id||e)}return[]}}},jt=Yt,Kt=(a("b135"),Object(I["a"])(jt,Ht,qt,!1,null,"3132dd4d",null)),Zt=Kt.exports,Qt={getClassification(){return new Promise((e,t)=>{let a=R.ENDPOINTS.GET_ATTENDANCE_CLASSIFICATIONS;C.a.get(a,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{})})},getPriority(){return new Promise((e,t)=>{let a=R.ENDPOINTS.GET_ATTENDANCE_PRIORITIES;C.a.get(a,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error.message||e.response.data.error.code)})})},getNurseHours(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.GET_NURSE_HOURS,i=e?"?product_id="+e:"";C.a.get(`${n}${i}`,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getAttendanceStatusChengeTimestamp(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.GET_ATT_CHANGE_TIMESTAMP;C.a.get(`${n}?case_attendance_id=${e}`,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getServiceQueueHeader(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SERVICE_QUEUE_HEADERS_GET,i=e?"?program_id="+e:"";C.a.get(`${n}${i}`,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getServiceQueueHeaderLegacy(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SERVICE_QUEUE_HEADERS_GET_LEGACY,i=e?"?program_id="+e:"";C.a.get(`${n}${i}`,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getMedicalCertificates(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.GET_MEDICAL_CERTIFICATES;if(e&&Object.values(e).length>0){let t=new URLSearchParams(e);e.order_by&&(t.delete("order_by"),t.append("order_by[column]",e.order_by.column),t.append("order_by[order]",e.order_by.order)),n=`${n}?${new URLSearchParams(t).toString()}`}C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getLastMedicalCertificate(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.GET_LAST_MEDICAL_CERTIFICATE;if(e&&Object.values(e).length>0){let t=new URLSearchParams(e);n=`${n}?${new URLSearchParams(t).toString()}`}C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},documentCreateAsync(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.DOCUMENT_CREATE_ASYNC,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data?e.response.data.error||e.response.data.error.code:e.response.data)})})}},Jt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"transfer-button"},[this.show?t("button",{staticClass:"transfer-button transfer-button-background",on:{click:function(t){return e.openTransferModal()}}},[t("img",{staticClass:"transfer-icon",attrs:{src:a("ce5a")}})]):e._e()])},Wt=[],Xt={props:["program","case_attendance_id","company_id"],mixins:[ve],data(){return{show:!0}},created(){this.show="schedule care"!==this.program.care_type&&"Not applicable"!==this.program.care_type},methods:{openTransferModal(){let e=!this.case_attendance_id;this.$bus.emit("open-transfer-attendance-professional-modal",{case_attendance_id:this.case_attendance_id,company_id:this.company_id,program_id:this.program.id,in_screening:e})}}},zt=Xt,ea=(a("ec3b"),Object(I["a"])(zt,Jt,Wt,!1,null,"e63c36b2",null)),ta=ea.exports,aa={components:{TransferButton:ta,TransferMine:Nt,EmergencyIcon:Ut,TabsListsFilterSearch:wt,DeficiencyIdentifierBars:Zt},props:["items","program_info"],mixins:[ve],data(){return{loading:!1,loadingAttend:!1,loadingHeaders:!1,data:null,hover:null,increment:!1,columnSafe:null,count:0,specialty:null,order:[],headers:[],attendances:[],pagination:{pages:0,currentPage:1},total:0,pages:0,limit:10,offset:0,influence:!1,filter:null,timeoutRef:null,disableLiveReload:!1,collapsedView:!1,emergency:!1,timerCheckAttend:null,canAttend:!1,canCancel:!1,canReschedule:!1,list:!1,canTransfer:!1}},created(){this.$bus.on("restart-queue-update",()=>{this.resumeQueue()}),this.$bus.on("stop-loading-attend",()=>{this.loadingAttend=!1}),this.$bus.on("stop-queue-update",this.pauseQueue),this.$bus.on("stop-access-attandance-load",()=>{this.loadingAttend=!1,this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}),this.getHeaders()},mounted(){let e=this.$store.state.Data.User.info.user_info.programs;e&&e.length>0&&e.forEach(e=>{this.program_info.id==e.id&&(this.canAttend=e.attend,this.canCancel=e.cancel,this.canReschedule=e.reschedule,this.list=e.list)}),this.canTransfer=this.checkAccessesControlFuncionality(["attendance.doctorTransfer.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canAttend=this.canAttend&&this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update","attendanceQueue.internalAttend.update","attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.list&&(this.listUserAttendance(),this.timerCheckAttend=setInterval(()=>{this.countDown()},6e4))},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),this.$bus.off("stop-loading-attend"),clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingAttend=!1,clearInterval(this.timerCheckAttend)},methods:{getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeaderLegacy(this.program_info.id).then(e=>{this.headers=e.data.map(e=>(e.align="center",e.sortable=e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.SLA||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.STATUS||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION,e))}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},setHeaderHover(e=null){this.hover=e},hasHeaderType(e){return this.headers.find(t=>t.header==e)},countDown(){let e=document.getElementsByClassName("toggleAttend");for(const t of e){let e=t.dataset.attendId,a=this.attendances.findIndex(t=>t.id==e);if(-1==a)return;let n=this.checkAttend(this.attendances[a]);n||(t.disabled=n,t.classList.remove("v-btn--disabled"),t.classList.add("primary"))}},getLastAttemptDate(e){return e.attempts?this.$moment(e.latest_attempt_timestamp).format("DD/MM/YYYY"):""},changeInfluence(e){this.influence=e,this.getPage(1)},changeSearch(e){this.filter=e,this.getPage(1)},resumeQueue(e=!0){clearTimeout(this.timeoutRef),this.disableLiveReload=!1,this.$bus.emit("ended-attendance"),e?this.realTimelistUserAttendance():(this.loadingAttend=!1,this.timeoutRef=setTimeout(()=>{this.realTimelistUserAttendance()},this.$consts.SETTINGS.MYLISTTIMEOUT))},pauseQueue(){clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingAttend=!1},formatDate(e){let t=Number.isInteger(e.due_date)?e.due_date:this.convertUtcOffset(`${e.due_date.split(" ")[0]} ${e.due_time}`).unix();return this.$moment.unix(t).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},transfer(){this.$bus.emit("mine-dialog",!0)},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e)},attend(e){this.loadingAttend=!0,this.data=e,Ge.attend({case_attendance_id:e.case_attendance_id}).then(e=>{e.data.can_attend?this.$bus.emit("open-patient-page",this.data):this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}).catch(e=>{console.error(e),this.loadingAttend=!1}).finally(()=>{})},generateCase(e){if(null==e.bricks||0===e.bricks.length||null==e.bricks.emr_desfecho||0===e.bricks.emr_desfecho.length){if(null==e.bricks.triagem_generica_enfermagem||0===e.bricks.triagem_generica_enfermagem.length)return"";if(e.bricks.triagem_generica_enfermagem.length>0){let t=Object.keys(e.bricks.triagem_generica_enfermagem)[0],a=e.bricks.triagem_generica_enfermagem[t],n=null===a.program_brick_options_id?[]:a.program_brick_options_id[0],i=this.options.find(e=>e.id===n);return null==i||0===i.length?"":i.name}}let t=[];for(let a in e.bricks.emr_desfecho[0])!0===e.bricks.emr_desfecho[0][a]&&t.push(a);return t.length>0?t[0]:"no_prescription"},generateStatus(e){let t=Ot.a.tz(e,"utc"),a=Ot()(t.format("x")-Ot()().format("x"))/1e3/60/60;return a=a.toFixed(2),a>0?"free":a<-.3?"pass_out_30_plus":"pass_out_30_minus"},changePage(){this.getPage(this.pagination.currentPage)},getPage(e){1!=e?this.pauseQueue():this.resumeQueue(!1),this.loading=!0,this.offset=1==e?0:(e-1)*this.limit;let t={limit:this.limit,offset:this.offset,influence:this.influence,user_id:this.$store.state.Data.User.info.user_info.id,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listUserAttendances(t).then(t=>{this.attendances=this.mapAttendButtonStatus(t.data.attendances),this.pagination.currentPage=e,this.total=t.data.total,this.pages=this.totalPages,this.pagination.pages=this.totalPages}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},mapAttendButtonStatus(e){let t=[];return e.forEach(e=>{if(this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))e.enable_attend_button=!0;else if(this.checkAccessesControlFuncionality(["attendanceQueue.internalAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)){let t=this.$store.state.Data.User.info.user_info.companies?this.$store.state.Data.User.info.user_info.companies.map(e=>e.id):null;e.enable_attend_button=!!t&&!!t.includes(e.company_id)}else this.checkAccessesControlFuncionality(["attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)?e.enable_attend_button=this.$store.state.Data.User.info.user_info.id==e.doctor_id||this.$store.state.Data.User.info.user_info.id==e.attendant_id:e.enable_attend_button=!1;if(this.checkAccessesControlFuncionality(["attendance.cancelAttendance.update","attendance.programCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))e.enable_cancel_button=!0;else if(this.checkAccessesControlFuncionality(["attendance.companyCancelAttendance.update","attendance.internalCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))if(null!==this.$store.state.Data.User.info.user_info.companies){let t=this.$store.state.Data.User.info.user_info.companies.map(e=>e.id);e.enable_cancel_button=!!t.includes(e.company_id)}else e.enable_cancel_button=!1;else this.checkAccessesControlFuncionality(["attendance.holderCancelAttendance.update","attendance.userSelfCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)?e.enable_cancel_button=this.$store.state.Data.User.info.user_info.id==e.doctor_id||null==e.doctor_id&&this.$store.state.Data.User.info.user_info.id==e.attendant_id:e.enable_cancel_button=!1;t.push(e)}),t},isExpired(e){e=Number.isInteger(e)?e:this.convertUtcOffset(e).unix();let t=this.$moment.unix(e).tz(Intl.DateTimeFormat().resolvedOptions().timeZone),a=this.$moment.tz(new Date,"utc");return a.isAfter(t)},listUserAttendance(){clearTimeout(this.timeoutRef);var e=this;this.loading=!0;let t={limit:this.limit,offset:0,influence:this.influence,user_id:this.$store.state.Data.User.info.user_info.id,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listUserAttendances(t).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUTSPECIAL))})},realTimelistUserAttendance(){clearTimeout(this.timeoutRef);var e=this;let t={limit:this.limit,offset:this.offset,influence:this.influence,user_id:this.$store.state.Data.User.info.user_info.id,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listUserAttendances(t).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e),401==e.code&&this.$bus.emit("logout")}).finally(()=>{this.loadingAttend=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUTSPECIAL))})},disableButton(e){return e.status_id===this.$consts.QUEUE_ATTENDANCE_STATUS.PROCESSING_PAYMENT||(this.loadingAttend||this.checkAttend(e))},checkAttend(e){let t=Number.isInteger(e.due_date)?e.due_date:this.convertUtcOffset(`${e.due_date.split(" ")[0]} ${e.due_time}`).unix(),a=this.$moment.unix(t).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).subtract(5,"minutes"),n=this.$moment.tz(new Date,"utc");return n.isBefore(a)},orderingAttendancesQueue(e,t){this.columnSafe!=e&&(this.columnSafe=e,this.increment=!1,this.count=0),"ASC"!=t||this.increment?this.increment&&this.count<2?(this.count++,this.orderingQueue(this.columnSafe,"DESC")):(this.count=0,this.order=[],this.hover=null,this.increment=!1,this.listUserAttendance()):(this.increment=!0,this.count++,this.orderingQueue(this.columnSafe,"ASC"))},orderingQueue(e,t){clearTimeout(this.timeoutRef),this.order.column=e,this.order.order_type=t;var a=this;this.loading=!0;let n={influence:this.influence,limit:this.limit,offset:0,program_id:this.program_info.id,user_id:this.$store.state.Data.User.info.user_info.id};this.filter&&(n.filter=JSON.stringify({...this.filter})),this.emergency?n.emergency_member=this.emergency:delete n.emergency_member,this.order.column&&this.order.order_type&&(n.order=this.order),je.listUserAttendances(n).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{a.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},formatContactTimeText(e){e||(e={});let t=e.name?this.$t("patient_modal."+e.name):"",a=e.start_time&&e.end_time?`(${this.$moment(e.start_time).format("HH:mm")} ${this.$t("patient_modal.to")} ${this.$moment(e.end_time).format("HH:mm")})`:"";return`${t} ${a}`}},computed:{patientName(){return e=>{let t=e.patient_info,a=e.member?e.member[0]:null;return t&&t.social_name?t.social_name:a&&a.social_name?a.social_name:t&&t.name?t.name:a&&a.name?a.name:""}},totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total}}},na=aa,ia=(a("70c4"),Object(I["a"])(na,Et,It,!1,null,"4727de09",null)),sa=ia.exports,oa={props:["items"],components:{MeusAtendimentos:sa},data(){return{canAccess:!1,programs:[],collapsedView:!1}},created(){let e=["SUPER_ADMIN","MEDICAL","EXTERNAL_MEDICAL"];if(this.canAccess=e.includes(this.$store.state.Data.User.info.user_info.user_type),!this.canAccess){let e=[this.$consts.USER_ROLE_IDS.NUTRICIONISTA,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER,this.$consts.USER_ROLE_IDS.PSICOLOGO,this.$consts.USER_ROLE_IDS.GERENTE_PSICOLOGO,this.$consts.USER_ROLE_IDS.GERENTE_OPERACOES,this.$consts.USER_ROLE_IDS.LIDER_EQUIPE,this.$consts.USER_ROLE_IDS.SUP_PROGRAM_SAUDE,this.$consts.USER_ROLE_IDS.SUP_TRIAGEM,this.$consts.USER_ROLE_IDS.TEC_ENFERMAGEM,this.$consts.USER_ROLE_IDS.NUTRICIONISTA_RESTRITO,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER_RESTRITO,this.$consts.USER_ROLE_IDS.PSICOLOGO_RESTRITO,this.$consts.USER_ROLE_IDS.ENFERMEIRA_TUW,this.$consts.USER_ROLE_IDS.NUTRICIONISTA_COMPLETO,this.$consts.USER_ROLE_IDS.PSICOLOGO_COMPLETO,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER_COMPLETO,this.$consts.USER_ROLE_IDS.PSICOLOGO_TUTOR,this.$consts.USER_ROLE_IDS.GERENTE_PSICOLOGIA];this.canAccess=e.includes(this.$store.state.Data.User.info.role_info.role_id)}this.canAccess&&this.getPrograms()},methods:{collapseToggle(){this.collapsedView=!this.collapsedView},getPrograms(){let e=[];this.$store.state.Data.User.info.user_info.programs.map(e=>e.id).forEach(t=>{let a={token:this.$store.state.Data.User.token,program_id:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,a).then(t=>{e.push({id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type,care_type:t.data.program_info.care_type}),this.programs=e.sort((e,t)=>e.id-t.id)}).catch(e=>{console.error(e)})})}},computed:{}},ra=oa,la=(a("fd97"),Object(I["a"])(ra,mt,ut,!1,null,null,null)),ca=la.exports,da=function(){var e=this,t=e._self._c;return e.canAccess?t("div",[t("div",{class:{"disabled-events":e.disabled}},[t("CanceledWarning",{attrs:{alertMessage:e.alertMessage,showAlert:e.showAlert}})],1),t("div",{staticClass:"my-attend"},[t("div",{staticClass:"queue-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.queue")))]),e._v("\n      "+e._s(e.$t("attendance.attendances"))+"\n      "),t(r["a"],{staticClass:"collapse-btn",attrs:{height:"22px",color:"primary",tile:""},on:{click:e.collapseToggle}},[e.collapsedView?e._e():t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("015d")}}),e.collapsedView?t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("9360")}}):e._e()])],1)]),e._l(e.programs,(function(a,n){return e.collapsedView?e._e():t("div",{key:a.id},[t("Atendimentos",{attrs:{program_info:a,programId:a.id}})],1)}))],2):e._e()},ma=[],ua=function(){var e=this,t=e._self._c;return e.program_info&&e.program_info.id?t("div",[e.collapsedView?e._e():t("div",[t("div",{staticClass:"pt-1 mt-10 mb-4"},[t("span",{staticClass:"queue-subtitle"},[e._v(e._s(e.$t("attendance.pending")))]),t("span",{staticClass:"speciality"},[e._v("("+e._s(e.program_info.name)+")")])]),t("TabsListsFilterSearch",{attrs:{listName:"ATTENDANCES",collapsedView:e.collapsedView,urgencies:e.urgencies,handleChangeInfluence:e.changeInfluence,handleChangeSearch:e.changeSearch,handleSearchLists:e.listAttendances}}),e.loading||e.loadingHeaders?t("div",{staticClass:"ld-icon"},[t(nt["a"],{attrs:{active:e.loading||e.loadingHeaders,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"queue-table",attrs:{headers:e.headers,items:e.attendances,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function({props:a}){return[t("tr",e._l(a.headers,(function(a){return t("th",[a.sortable?t("button",{staticClass:"header-button d-flex justify-center",class:[e.hover==a.header||e.order.column==a.header?"px-2":"px-4"],on:{click:function(t){return e.orderingAttendancesQueue(a.header,"ASC")},mouseover:function(t){return e.setHeaderHover(a.header)},mouseleave:function(t){return e.setHeaderHover(null)}}},[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:e.hover==a.header||e.order.column==a.header,expression:"hover == itemHeader.header || order.column == itemHeader.header"}],attrs:{small:""}},[e._v("\n                  "+e._s(e.order.order_type&&"DESC"==e.order.order_type?"arrow_downward":"arrow_upward")+"\n                ")]),e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")],1):t("div",{staticClass:"px-2"},[e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")])])})),0)]}},{key:"item",fn:function(n){return[t("tr",{class:{"colored-latercomer":n.item.is_parent,colored:e.isExpired(n.item.sla)&&!n.item.is_parent,normal:!e.isExpired(n.item.sla)&&!n.item.is_parent}},[e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION)?t("td",[t(at["a"],{attrs:{size:"20",color:Object.values(e.$consts.CLASSIFICATION_COLORS)[n.item.urgency_level||0]}},[e._v("\n                fiber_manual_record\n              ")])],1):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME)?t("td",[t("span",{staticClass:"tb-items"},[n.item.company_info&&(n.item.company_info.nick_name||n.item.company_info.name)?t("span",[e._v("\n                  "+e._s(n.item.company_info.nick_name||n.item.company_info.name)+"\n                ")]):n.item.company_name?t("span",[e._v("\n                  "+e._s(n.item.company_name)+"\n                ")]):e._e()])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.PATIENT_NAME)?t("td",[t("span",{staticClass:"tb-items d-flex"},[t("span",{staticClass:"flex-grow-1"},[e._v("\n                  "+e._s(e.patientName(n.item))+"\n                  "),t("EmergencyIcon",{attrs:{isEmergency:n.item.emergency_pass}})],1),t("div",{staticClass:"d-inline-flex"},[e.hasSocialName(n.item)?t("div",{staticClass:"d-inline-flex ml-1"},[t("img",{attrs:{src:a("92a7")}})]):e._e(),n.item.patient_info?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.item.patient_info.vip,deficiencyIds:n.item.patient_info.disabilities}}):e._e()],1)]),n.item.is_new?t("span",{staticClass:"new"},[e._v("\n                ("+e._s(e.$t("attendance.new"))+")\n              ")]):e._e()]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.IS_SCHEDULE)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.is_schedule?e.$t("attendance.yes"):e.$t("attendance.no"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_attendance_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPS_NUMBER)||e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPT_NUMBER)?t("td",{staticClass:"text-center"},[t("p",[e._v(e._s(n.item.attempts))]),t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(e.getLastAttemptDate(n.item))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.SLA)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(e.formatDate(n.item))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.patient_info?e.formatContactTimeText(n.item.patient_info.contact_time):"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.STATUS)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"}),e._v("\n              "+e._s(n.item.status?e.$t("status."+n.item.status.toLowerCase()):"")+"\n            ")]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.REQUEST)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items",class:{free:"expert_referral"===e.generateCase(n.item)||"network_expert_referral"===e.generateCase(n.item),pass_out:"expert_referral"!==e.generateStatus(n.item.sla)&&"network_expert_referral"!==e.generateCase(n.item)}},[e._v(e._s(e.$t("attendance."+e.generateCase(n.item))))])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ORIGIN)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.item.program_information[0].name))])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTENDANT_NAME)?t("td",[n.item.attendant_info?t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.attendant_info.name)+"\n              ")]):t("span",{staticClass:"tb-items blue--text"},[e._v("\n                "+e._s(e.$t("attendance.no_one"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.DOCTOR_NAME)?t("td",[null!=n.item.doctor_id?t("span",{staticClass:"tb-items"},[e._v("\n               "+e._s(n.item.doctor_info.name)+"\n              ")]):e._e(),null==n.item.doctor_id&&null!=n.item.attendant_id?t("span",{staticClass:"tb-items"},[e._v("\n               "+e._s(n.item.attendant_info.name)+"\n              ")]):e._e(),null==n.item.doctor_id&&null==n.item.attendant_id?t("span",{staticClass:"tb-items blue--text"},[e._v("\n                "+e._s(e.$t("attendance.no_one"))+"\n              ")]):e._e()]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ACTION)?t("td",{staticClass:"action-container d-flex py-2"},[t("div",{staticClass:"table-atendimentos-buttons d-flex"},[e.checkAccessEnable(n.item)&&e.canAttend?t(r["a"],{staticClass:"white--text font-btn mb-2",attrs:{width:"100px",height:"26px",color:"primary",loading:e.loadingAttend,disabled:e.disableButton(n.item.status_id)||!n.item.enable_attend||!n.item.enable_attend_button},on:{click:function(t){return e.access(n.item)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("b29e")}}),e._v("\n                  "+e._s(e.$t("attendance.access"))+"\n                ")]):e._e(),e.canCancel?t(r["a"],{staticClass:"font-btn mr-n6",attrs:{width:"100px",height:"26px",color:"primary",loading:e.loadingAttend,disabled:e.loadingAttend||!n.item.enable_cancel_button,outlined:""},on:{click:function(t){return e.cancel(n.item.case_attendance_id)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("d9ed")}}),e._v("\n                  "+e._s(e.$t("attendance.cancel"))+"\n                ")]):e._e()],1),t("div",{staticClass:"ml-2"},[e.canTransfer?t("transfer-button",{attrs:{program:e.program_info,case_attendance_id:n.item.case_attendance_id,company_id:null}}):e._e()],1)]):e._e()])]}}],null,!1,1980313934)})],1),e.totalPages>0?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e(),t("Transfer")],1)]):e._e()},Aa=[],_a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"transfer-modal"},[t(d["a"],{attrs:{width:"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("transfer.title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e._l(e.items,(function(a,n){return t(Ct["a"],{key:n,staticClass:"list-container",attrs:{"two-line":""}},[t(St["a"],{staticClass:"pr-2",attrs:{color:"primary"}}),t(pt["a"],[t(at["a"],{staticClass:"avatar",attrs:{size:"40"}},[e._v("person")])],1),t(Tt["a"],{staticClass:"ml-4"},[t(Tt["c"],{staticClass:"name font-weight-bold"},[e._v(e._s(a.name))]),t(Tt["b"],{staticClass:"role"},[e._v(e._s(a.role))])],1)],1)})),t("div",{staticClass:"cc"},[t(c["a"],{staticClass:"mt-4 actions"},[t(r["a"],{staticClass:"btn mb-4 mr-3",attrs:{color:"primary",width:"252px",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("transfer.continue_btn")))]),t(r["a"],{staticClass:"white--text btn mb-4",attrs:{color:"primary",width:"252px"},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("transfer.transfer")))])],1)],1)],2)],1)],1)},Ea=[],Ia={data(){return{dialog:!1,mdialog:!1,items:[{name:"J
 da Silva",role:"Nutricionista",image:""},{name:"Maria Helena",role:"Nutricionista",image:""}]}},created(){this.$bus.on("transfer-dialog",e=>{this.dialog=e}),this.$bus.on("mine-dialog",e=>{this.mdialog=e})},methods:{close(){this.dialog=!1,this.mdialog=!1}}},ha=Ia,Oa=(a("5ffb"),Object(I["a"])(ha,_a,Ea,!1,null,"6fb08e76",null)),pa=Oa.exports,Sa={name:"Atendimentos",components:{TransferButton:ta,Transfer:pa,EmergencyIcon:Ut,TabsListsFilterSearch:wt,DeficiencyIdentifierBars:Zt},props:["program_info"],mixins:[ve],data(){return{loading:!1,loadingAttend:!1,loadingHeaders:!1,data:null,hover:null,specialty:null,increment:!1,count:0,columnSafe:"urgency",order:[],headers:[],attendances:[],pagination:{pages:0,currentPage:1},limit:10,offset:0,total:0,pages:0,influence:!1,filter:null,message:"Nenhum resultado encontrado",timeoutRef:null,disableLiveReload:!1,collapsedView:!1,emergency:!1,canAttend:!1,canCancel:!1,canReschedule:!1,list:!1,canTransfer:!1}},created(){this.$bus.on("restart-queue-update",()=>{this.resumeQueue()}),this.$bus.on("stop-loading-attend",()=>{this.loadingAttend=!1}),this.$bus.on("stop-queue-update",this.pauseQueue),this.$bus.on("stop-access-attandance-load",()=>{this.loadingAttend=!1,this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}),this.getHeaders()},mounted(){let e=this.$store.state.Data.User.info.user_info.programs;e&&e.length>0&&e.forEach(e=>{this.program_info.id==e.id&&(this.canAttend=e.attend,this.canCancel=e.cancel,this.canReschedule=e.reschedule,this.list=e.list)}),this.list&&this.listAttendances(),this.canTransfer=this.checkAccessesControlFuncionality(["attendance.doctorTransfer.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canAttend=this.canAttend&&this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update","attendanceQueue.internalAttend.update","attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCancel=this.canCancel&&this.checkAccessesControlFuncionality(["attendance.cancelAttendance.update","attendance.companyCancelAttendance.update","attendance.holderCancelAttendance.update","attendance.userSelfCancelAttendance.update","attendance.programCancelAttendance.update","attendance.internalCancelAttendance.update","attendance.cancelAttendance.update","attendance.holderCancelAttendance.update","attendance.userSelfCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),this.$bus.off("stop-loading-attend"),clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingAttend=!1},methods:{disableButton(e){return e===this.$consts.QUEUE_ATTENDANCE_STATUS.PROCESSING_PAYMENT||this.loadingAttend},getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeaderLegacy(this.program_info.id).then(e=>{this.headers=e.data.map(e=>(e.align="center",e.sortable=e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.SLA||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.STATUS||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION,e))}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},setHeaderHover(e=null){this.hover=e},hasHeaderType(e){return this.headers.find(t=>t.header==e)},isScheduled(e){return e.is_schedule?this.$t("attendance.schedule.true"):this.$t("attendance.schedule.false")},getLastAttemptDate(e){return e.attempts?this.$moment(e.latest_attempt_timestamp).format("DD/MM/YYYY"):""},changeInfluence(e){this.influence=e,this.getPage(1)},changeSearch(e){this.filter=e,this.getPage(1)},resumeQueue(e=!0){clearTimeout(this.timeoutRef),this.disableLiveReload=!1,this.$bus.emit("ended-attendance"),e?this.realTimelistUserAttendance():(this.loadingAttend=!1,this.timeoutRef=setTimeout(()=>{this.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))},pauseQueue(){clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingAttend=!1},formatDate(e){let t=Number.isInteger(e.due_date)?e.due_date:this.convertUtcOffset(`${e.due_date.split(" ")[0]} ${e.due_time}`).unix();return this.$moment.unix(t).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},transfer(){this.$bus.emit("transfer-dialog",!0)},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e)},generateCase(e){if(null==e.bricks||0===e.bricks.length||null==e.bricks.emr_desfecho||0===e.bricks.emr_desfecho.length){if(null==e.bricks.triagem_generica_enfermagem||0===e.bricks.triagem_generica_enfermagem.length)return"";if(e.bricks.triagem_generica_enfermagem.length>0){let t=Object.keys(e.bricks.triagem_generica_enfermagem)[0],a=e.bricks.triagem_generica_enfermagem[t],n=null===a.program_brick_options_id?[]:a.program_brick_options_id[0],i=this.options.find(e=>e.id===n);return null==i||0===i.length?"":i.name}}let t=[];for(let a in e.bricks.emr_desfecho[0])!0===e.bricks.emr_desfecho[0][a]&&t.push(a);return t.length>0?t[0]:"no_prescription"},generateStatus(e){let t=Ot.a.tz(e,"utc"),a=Ot()(t.format("x")-Ot()().format("x"))/1e3/60/60;return a=a.toFixed(2),a>0?"free":a<-.3?"pass_out_30_plus":"pass_out_30_minus"},checkAccessEnable(e){let t=Number.isInteger(e.due_date)?e.due_date:e.due_date.replace("00:00:00",e.due_time);Number.isInteger(e.due_date)||-1!=t.indexOf(e.due_time)||(t=this.convertUtcOffset(`${e.due_date} ${e.due_time}`).unix());let a=this.$moment.unix(t).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).subtract(5,"minutes"),n=this.$moment.tz(new Date,"utc");return n.isAfter(a)},access(e){if(this.loadingAttend)return;this.loadingAttend=!0,this.data=e;let t={case_attendance_id:e.case_attendance_id};Ge.attend(t).then(e=>{e.data.can_attend?this.$bus.emit("open-patient-page",this.data):this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}).catch(e=>{console.error(e),this.loadingAttend=!1}).finally(()=>{})},changePage(){this.getPage(this.pagination.currentPage)},getPage(e){1!=e?this.pauseQueue():this.resumeQueue(!1),this.loading=!0,this.offset=1==e?0:(e-1)*this.limit;let t={influence:this.influence,limit:this.limit,offset:this.offset,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listAttendances(t).then(t=>{this.attendances=this.mapAttendButtonStatus(t.data.attendances),this.pagination.currentPage=e,this.total=t.data.total,this.pages=this.totalPages}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},mapAttendButtonStatus(e){let t=[];return e.forEach(e=>{if(this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))e.enable_attend_button=!0;else if(this.checkAccessesControlFuncionality(["attendanceQueue.internalAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))if(null!==this.$store.state.Data.User.info.user_info.companies){let t=this.$store.state.Data.User.info.user_info.companies.map(e=>e.id);e.enable_attend_button=!!t.includes(e.company_id)}else e.enable_attend_button=!1;else this.checkAccessesControlFuncionality(["attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)?e.enable_attend_button=this.$store.state.Data.User.info.user_info.id==e.doctor_id||null==e.doctor_id&&this.$store.state.Data.User.info.user_info.id==e.attendant_id:e.enable_attend_button=!1;if(this.checkAccessesControlFuncionality(["attendance.cancelAttendance.update","attendance.programCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))e.enable_cancel_button=!0;else if(this.checkAccessesControlFuncionality(["attendance.companyCancelAttendance.update","attendance.internalCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))if(null!==this.$store.state.Data.User.info.user_info.companies){let t=this.$store.state.Data.User.info.user_info.companies.map(e=>e.id);e.enable_cancel_button=!!t.includes(e.company_id)}else e.enable_cancel_button=!1;else this.checkAccessesControlFuncionality(["attendance.holderCancelAttendance.update","attendance.userSelfCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)?e.enable_cancel_button=this.$store.state.Data.User.info.user_info.id==e.doctor_id||null==e.doctor_id&&this.$store.state.Data.User.info.user_info.id==e.attendant_id:e.enable_cancel_button=!1;t.push(e)}),t},isExpired(e){e=Number.isInteger(e)?e:this.convertUtcOffset(e).unix();let t=this.$moment.unix(e),a=this.$moment.tz(new Date,"utc");return a.isAfter(t)},listAttendances(){clearTimeout(this.timeoutRef);var e=this;this.loading=!0;let t={influence:this.influence,limit:this.limit,offset:0,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listAttendances(t).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,this.order.column=null,this.order.order_type=null,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},realTimelistUserAttendance(){clearTimeout(this.timeoutRef);var e=this;let t={influence:this.influence,limit:this.limit,offset:this.offset,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listAttendances(t).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAttend=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},transferAttendance(e){Ge.transferAttendance({case_attendance_id:e,user_id:this.$store.state.Data.User.info.user_info.id})},orderingAttendancesQueue(e,t){this.columnSafe!=e&&(this.columnSafe=e,this.increment=!1,this.count=0),"ASC"!=t||this.increment?this.increment&&this.count<2?(this.count++,this.orderingQueue(this.columnSafe,"DESC")):(this.count=0,this.order=[],this.hover=null,this.increment=!1,this.listAttendances()):(this.increment=!0,this.count++,this.orderingQueue(this.columnSafe,"ASC"))},orderingQueue(e,t){clearTimeout(this.timeoutRef),this.order.column=e,this.order.order_type=t;var a=this;this.loading=!0;let n={influence:this.influence,limit:this.limit,offset:0,program_id:this.program_info.id};this.filter&&(n.filter=JSON.stringify({...this.filter})),this.emergency?n.emergency_member=this.emergency:delete n.emergency_member,this.order.column&&this.order.order_type&&(n.order=this.order),je.listAttendances(n).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{a.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},formatContactTimeText(e){let t=e&&e.name?this.$t("patient_modal."+e.name):"",a=e&&e.start_time&&e.end_time?`(${this.$moment(e.start_time).format("HH:mm")} ${this.$t("patient_modal.to")} ${this.$moment(e.end_time).format("HH:mm")})`:"";return`${t} ${a}`}},computed:{patientName(){return e=>{let t=e.patient_info,a=e.member?e.member[0]:null;return t&&t.social_name?t.social_name:a&&a.social_name?a.social_name:t&&t.name?t.name:a&&a.name?a.name:""}},totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total},urgencies(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_URGENCIES]||[]}}},Ca=Sa,Ta=(a("9f92"),Object(I["a"])(Ca,ua,Aa,!1,null,"8a42f754",null)),Ra=Ta.exports,Da=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cancel-attend"},[t(d["a"],{attrs:{"max-width":"636px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"canceled-section"},[t(l["a"],{staticClass:"c-cancel-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.alertMessage?e.alertMessage:e.$t("patient.attendance_patient_canceled")))])]),t(c["a"],{staticClass:"int-button"},[t(r["a"],{staticClass:"ok-bt white--text",attrs:{color:"primary",height:"37px",width:"247px"},on:{click:function(t){return e.close()}}},[e._v(" OK")])],1)],1)],1)])],1)},ga=[],La={props:["alertMessage","showMessage"],components:{},data(){return{dialog:!1}},created(){this.$bus.on("patient-canceled",()=>{this.dialog=!0})},beforeDestroy(){},methods:{close(){this.dialog=!1,setTimeout(()=>{this.$bus.emit("confirm-close-patient-dialog",this.item),this.$bus.emit("ended-attendance"),this.$bus.emit("restart-queue-update"),this.$bus.emit("close-stream")},500)}}},fa=La,Na=(a("5bd3"),Object(I["a"])(fa,Da,ga,!1,null,null,null)),ka=Na.exports,va={name:"FilaAtendimento",components:{Atendimentos:Ra,CanceledWarning:ka},data(){return{dialog:!1,alertMessage:"",showAlert:!1,canAccess:!1,disabled:!0,programs:[],collapsedView:!1}},created(){let e=["SUPER_ADMIN","MEDICAL","EXTERNAL_MEDICAL","OPERATIONAL"];if(this.canAccess=e.includes(this.$store.state.Data.User.info.user_info.user_type),!this.canAccess){let e=[this.$consts.USER_ROLE_IDS.ENFERMEIRA,this.$consts.USER_ROLE_IDS.NUTRICIONISTA,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER,this.$consts.USER_ROLE_IDS.PSICOLOGO,this.$consts.USER_ROLE_IDS.GERENTE_PSICOLOGO,this.$consts.USER_ROLE_IDS.GERENTE_OPERACOES,this.$consts.USER_ROLE_IDS.LIDER_EQUIPE,this.$consts.USER_ROLE_IDS.SUP_PROGRAM_SAUDE,this.$consts.USER_ROLE_IDS.SUP_TRIAGEM,this.$consts.USER_ROLE_IDS.NUTRICIONISTA_RESTRITO,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER_RESTRITO,this.$consts.USER_ROLE_IDS.ENFERMEIRA_ATIVA_COMPLETO,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER_COMPLETO];this.canAccess=e.includes(this.$store.state.Data.User.info.role_info.role_id)}this.canAccess&&this.getPrograms(),this.$bus.on("attendance-inception",e=>{this.showAlert=!0,this.alertMessage=e})},methods:{collapseToggle(){this.collapsedView=!this.collapsedView},getPrograms(){let e=[];this.$store.state.Data.User.info.user_info.programs.map(e=>e.id).forEach(t=>{let a={token:this.$store.state.Data.User.token,program_id:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,a).then(t=>{e.push({id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type,care_type:t.data.program_info.care_type}),this.programs=e.sort((e,t)=>e.id-t.id)}).catch(e=>{console.error(e)})})}}},ba=va,Ma=(a("88a9"),Object(I["a"])(ba,da,ma,!1,null,null,null)),Pa=Ma.exports,Ua=function(){var e=this,t=e._self._c;return e.canAccess?t("div",[t("div",{staticClass:"my-attend"},[t("div",{staticClass:"queue-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.queue_external")))]),e._v("\n      "+e._s(e.$t("attendance.requests"))+"\n      "),t(r["a"],{staticClass:"collapse-btn",attrs:{height:"22px",color:"primary",tile:""},on:{click:e.collapseToggle}},[e.collapsedView?e._e():t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("015d")}}),e.collapsedView?t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("9360")}}):e._e()])],1)]),e._l(e.programs,(function(a,n){return e.collapsedView?e._e():t("div",{key:a.id},[t("AtendimentosExterno",{attrs:{program_info:a}})],1)}))],2):e._e()},ya=[],$a=a("1f4f"),xa=function(){var e=this,t=e._self._c;return e.program_info&&e.program_info.id?t("div",[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.cancelModal,callback:function(t){e.cancelModal=t},expression:"cancelModal"}},[t("div",{staticClass:"request-section"},[t(l["a"],{staticClass:"c-card-section",attrs:{height:"254px"}},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v("\n            "+e._s(e.$t("attendance.confirm_decline_title"))+"\n          ")]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:e.closeDeclineModal}})]),t(c["b"],{staticClass:"card-desc text-justify mb-3"},[e._v(e._s(e.$t("attendance.confirm_decline_warning")))]),t(c["a"],{staticClass:"buttons"},[t(r["a"],{staticClass:"primary--text ml-1",attrs:{color:"white",height:"37px",width:"226px",outlined:""},on:{click:e.closeDeclineModal}},[e._v(e._s(e.$t("attendance.decline_cancel_button")))]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"226px"},on:{click:e.cancel}},[e._v(e._s(e.$t("attendance.decline_confirm_button")))])],1)],1)],1)]),e.collapsedView?e._e():t("div",[t("div",{staticClass:"pt-1 mt-10 mb-4"},[t("span",{staticClass:"queue-subtitle"},[e._v(e._s(e.$t("attendance.pending")))]),t("span",{staticClass:"speciality"},[e._v("("+e._s(e.program_info.name)+")")])]),t("TabsListsFilterSearch",{attrs:{listName:"EXTERNAL_ATTENDANCES",collapsedView:e.collapsedView,handleChangeInfluence:e.changeInfluence,handleChangeSearch:e.changeSearch}}),e.loading?t("div",{staticClass:"ld-icon"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t($a["a"],{staticClass:"queue-table",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left",attrs:{width:"10"}},[e._v(e._s(e.$t("attendance.classification_abbreviation")))]),t("th",{staticClass:"text-left",attrs:{width:"350"}},[e._v(e._s(e.$t("attendance.patient_name")))]),t("th",{staticClass:"text-center",attrs:{width:"80"}},[e._v(e._s(e.$t("attendance.patient_case")))]),t("th",{staticClass:"text-center",attrs:{width:"80"}},[e._v(e._s(e.$t("attendance.patient_case_attendance")))]),t("th",{staticClass:"text-center",attrs:{width:"80"}},[e._v(e._s(e.$t("attendance.attempts")))]),t("th",{staticClass:"text-center",attrs:{width:"160"}},[e._v(e._s(e.$t("attendance.patient_date")))]),t("th",{staticClass:"text-center",attrs:{width:"180"}},[e._v(e._s(e.$t("attendance.sla")))]),t("th",{staticClass:"text-center",attrs:{width:"90"}},[e._v(e._s(e.$t("attendance.action")))])])]),e.loading?e._e():t("tbody",[0===e.attendances.length?t("tr",{staticClass:"mt-3 ml-4"},[t("span",{staticClass:"no-result"},[e._v(e._s(e.message))])]):e._e(),e._l(e.attendances,(function(n,i){return t("tr",{key:i,class:{"colored-latercomer":n.is_parent,colored:e.isExpired(n.sla)&&!n.is_parent,normal:!e.isExpired(n.sla)&&!n.is_parent}},[t("td",[t(at["a"],{attrs:{size:"20",color:Object.values(e.$consts.CLASSIFICATION_COLORS)[n.urgency_level||0]}},[e._v("\n                  fiber_manual_record\n                ")])],1),t("td",[t("span",{staticClass:"tb-items"},[e._v("\n                  "+e._s(e.patientName(n))+"\n                ")]),n.is_new?t("span",{staticClass:"new"},[e._v("("+e._s(e.$t("attendance.new"))+")")]):e._e()]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.case_id))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.case_attendance_id))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.attempts))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(e.formatDate(n)))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(e.generateSla(n.sla)))])]),t("td",{staticClass:"table-atendimentos-externos-buttons d-flex py-2"},[t(r["a"],{staticClass:"cancel-btn font-btn mb-2",attrs:{width:"90px",height:"26px"},on:{click:function(t){return e.displayCancelModal(n)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("d9ed")}}),e._v("\n                  "+e._s(e.$t("attendance.decline_confirm_button"))+"\n                ")]),t(r["a"],{staticClass:"font-btn white--text accepted-btn",attrs:{width:"90px",height:"26px",color:"primary"},on:{click:function(t){return e.accept(n)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("19f1")}}),e._v("\n                  "+e._s(e.$t("attendance.accept"))+"\n                ")])],1)])}))],2)]},proxy:!0}],null,!1,2959445476)})],1),e.totalPages>0?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1)],1):e._e()},Va=[],Ga={name:"AtendimentosExterno",props:["program_info"],components:{TabsListsFilterSearch:wt},mixins:[ve],data(){return{cancelModal:!1,data:null,specialty:null,pagination:{pages:0,currentPage:1},attendances:[],limit:10,offset:0,total:0,pages:0,loading:!1,attendees:null,influence:!1,filter:null,message:"Nenhum resultado encontrado",timeoutRef:null,disableLiveReload:!1,collapsedView:!1}},created(){this.$bus.on("restart-queue-update",this.resumeQueue),this.$bus.on("stop-queue-update",this.pauseQueue)},mounted(){this.listAttendances()},beforeDestroy(){clearTimeout(this.timeoutRef),this.disableLiveReload=!0},methods:{changeInfluence(e){this.influence=e,this.getPage(1)},changeSearch(e){this.filter=e,this.getPage(1)},resumeQueue(e=!0){clearTimeout(this.timeoutRef),this.disableLiveReload=!1,this.$bus.emit("ended-attendance"),e?this.realTimelistUserAttendance():this.timeoutRef=setTimeout(()=>{this.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT)},pauseQueue(){clearTimeout(this.timeoutRef),this.disableLiveReload=!0},transfer(){this.$bus.emit("transfer-dialog",!0)},formatDate(e){let t=e.due_date.split(" ")[0],a=Ot.a.tz(t+" "+e.due_time,"utc");return a.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},checkAccessEnable(e){let t=e.due_date.replace("00:00:00",e.due_time),a=Ot.a.tz(t,"utc"),n=Ot()(a.format("x")-Ot()().format("x"))/1e3/60;return n<=5},cancel(e){this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CANCEL,{case_attendance_id:this.selectedAttendance.case_attendance_id}).then(()=>{Ke.eventEmit({channel_name:this.$consts.CHANNEL_SOCKET_PREFIX+e.case_attendance_id,event_name:this.$consts.SOCKET_EVENTS.CANCELED_ATTENDANCE,event:{status:this.getKeyByValue(this.$consts.QUEUE_ATTENDANCE_STATUS,this.$consts.QUEUE_ATTENDANCE_STATUS.RESERVED)}});const t=this.attendances.indexOf(this.selectedAttendance);t>-1&&this.attendances.splice(t,1)}).catch(e=>{console.error(e)}).finally(e=>{this.closeDeclineModal()})},displayCancelModal(e){this.cancelModal=!0,this.selectedAttendance=e},closeDeclineModal(){this.cancelModal=!1,this.selectedAttendance=null},accept(e){this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ACCEPTED,{case_attendance_id:e.case_attendance_id,user_id:this.$store.state.Data.User.info.user_info.id}).then(()=>{Ke.eventEmit({channel_name:this.$consts.CHANNEL_SOCKET_PREFIX+e.case_attendance_id,event_name:this.$consts.SOCKET_EVENTS.RESERVED_ATTENDANCE,event:{status:this.getKeyByValue(this.$consts.QUEUE_ATTENDANCE_STATUS,this.$consts.QUEUE_ATTENDANCE_STATUS.RESERVED)}});const t=this.attendances.indexOf(e);t>-1&&this.attendances.splice(t,1)}).catch(e=>{console.error(e)})},changePage(){this.getPage(this.pagination.currentPage)},formatOwner(e){let t=null==e.doctor_info.name?e.attendant_info.name:e.doctor_info.name;return null!=t?t:null},getPage(e){1!=e?this.pauseQueue():this.resumeQueue(!1),this.loading=!0,this.offset=1==e?0:(e-1)*this.limit;let t={influence:this.influence,limit:this.limit,offset:this.offset,program_id:this.program_info.id,user_id:this.$store.state.Data.User.info.user_info.id,company_id:this.$store.state.Data.User.info.user_info.companies[0].id};this.filter&&(t.filter=JSON.stringify({...this.filter})),je.listExternalAttendances(t).then(t=>{this.attendances=t.data.attendances,this.pagination.currentPage=e,this.total=t.data.total,this.pages=this.totalPages}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},isExpired(e){let t=Ot.a.tz(e,"utc"),a=Ot()(t.format("x")-Ot()().format("x"))/1e3/60/60;return a=a.toFixed(2),!(a>0)},listAttendances(){clearTimeout(this.timeoutRef);var e=this;this.loading=!0;let t={influence:this.influence,limit:this.limit,offset:0,program_id:this.program_info.id,user_id:this.$store.state.Data.User.info.user_info.id,company_id:this.$store.state.Data.User.info.user_info.companies[0].id};this.filter&&(t.filter=JSON.stringify({...this.filter})),je.listExternalAttendances(t).then(e=>{this.attendances=e.data.attendances,this.attendees=e.data.total,this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},realTimelistUserAttendance(){clearTimeout(this.timeoutRef);var e=this;this.influence,this.limit,this.offset,this.program_info.id,this.$store.state.Data.User.info.user_info.id,this.$store.state.Data.User.info.user_info.companies[0].id;this.filter&&(payload.filter=JSON.stringify({...this.filter})),je.listExternalAttendances(payload).then(e=>{this.attendances=e.data.attendances,this.attendees=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})}},computed:{patientName(){return e=>{let t=e.patient_info,a=e.member?e.member[0]:null;return t&&t.social_name?t.social_name:a&&a.social_name?a.social_name:t&&t.name?t.name:a&&a.name?a.name:""}},totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total}}},Fa=Ga,Ba=(a("8263"),Object(I["a"])(Fa,xa,Va,!1,null,"387bac57",null)),wa=Ba.exports,Ha={name:"FilaAtendimento",components:{AtendimentosExterno:wa},data(){return{dialog:!1,canAccess:!1,programs:[],collapsedView:!1}},created(){let e=["SUPER_ADMIN","MEDICAL","EXTERNAL_MEDICAL"];this.canAccess=e.includes(this.$store.state.Data.User.info.user_info.user_type),this.canAccess&&this.getPrograms()},methods:{collapseToggle(){this.collapsedView=!this.collapsedView},getPrograms(){let e=[];this.$store.state.Data.User.info.user_info.programs.map(e=>e.id).forEach(t=>{let a={token:this.$store.state.Data.User.token,program_id:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,a).then(t=>{e.push({id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type}),this.programs=e.sort((e,t)=>e.id-t.id)}).catch(e=>{console.error(e)})})}}},qa=Ha,Ya=(a("1866"),Object(I["a"])(qa,Ua,ya,!1,null,null,null)),ja=Ya.exports,Ka=function(){var e=this,t=e._self._c;return e.canAccess?t("div",[t("div",{staticClass:"my-attend"},[t("div",{staticClass:"mine-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.my")))]),e._v("\n      "+e._s(e.$t("attendance.attendances"))+"\n      "),t(r["a"],{staticClass:"collapse-btn",attrs:{height:"22px",color:"primary",tile:""},on:{click:e.collapseToggle}},[e.collapsedView?e._e():t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("015d")}}),e.collapsedView?t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("9360")}}):e._e()])],1),e._l(e.programs,(function(a,n){return t("div",{key:n},[e.collapsedView?e._e():t("MeusAtendimentosExterno",{attrs:{program_info:a}})],1)}))],2)]):e._e()},Za=[],Qa=function(){var e=this,t=e._self._c;return e.program_info&&e.program_info.id?t("div",[e.collapsedView?e._e():t("div",[t("div",{staticClass:"pt-1 mt-10 mb-4"},[t("span",{staticClass:"mine-subtitle"},[e._v(e._s(e.$t("attendance.pending_mine")))]),t("span",{staticClass:"speciality"},[e._v("("+e._s(e.program_info.name)+")")])]),t("TabsListsFilterSearch",{attrs:{listName:"USER_EXTERNAL_ATTENDANCE",collapsedView:e.collapsedView,handleChangeInfluence:e.changeInfluence,handleChangeSearch:e.changeSearch}}),e.loading?t("div",{staticClass:"ld-icon"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t($a["a"],{staticClass:"mine-table",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left",attrs:{width:"10"}},[e._v(e._s(e.$t("attendance.classification_abbreviation")))]),t("th",{staticClass:"text-left",attrs:{width:"350"}},[e._v(e._s(e.$t("attendance.patient_name")))]),t("th",{staticClass:"text-center",attrs:{width:"80"}},[e._v(e._s(e.$t("attendance.patient_case")))]),t("th",{staticClass:"text-center",attrs:{width:"80"}},[e._v(e._s(e.$t("attendance.patient_case_attendance")))]),t("th",{staticClass:"text-center",attrs:{width:"80"}},[e._v(e._s(e.$t("attendance.attempts")))]),t("th",{staticClass:"text-center",attrs:{width:"160"}},[e._v(e._s(e.$t("attendance.patient_date")))]),t("th",{staticClass:"text-center",attrs:{width:"180"}},[e._v(e._s(e.$t("attendance.sla")))]),t("th",{staticClass:"text-center",attrs:{width:"90"}},[e._v(e._s(e.$t("attendance.action")))])])]),e.loading?e._e():t("tbody",[0===e.attendances.length?t("tr",{staticClass:"mt-3 ml-4"},[t("span",{staticClass:"no-result"},[e._v(e._s(e.message))])]):e._e(),e._l(e.attendances,(function(n,i){return t("tr",{key:i,class:{"colored-latercomer":n.is_parent,colored:e.isExpired(n.sla)&&!n.is_parent,normal:!e.isExpired(n.sla)&&!n.is_parent}},[t("td",[t(at["a"],{attrs:{size:"20",color:Object.values(e.$consts.CLASSIFICATION_COLORS)[n.urgency_level||0]}},[e._v("\n                  fiber_manual_record\n                ")])],1),t("td",[t("span",{staticClass:"tb-items"},[e._v("\n                  "+e._s(e.patientName(n))+"\n                ")]),n.is_new?t("span",{staticClass:"new"},[e._v("("+e._s(e.$t("attendance.new"))+")")]):e._e()]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.case_id))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.case_attendance_id))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.attempts))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(e.formatDate(n)))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(e.generateSla(n.sla)))])]),t("td",{staticClass:"table-meus-atendimentos-externos-buttons d-flex py-2"},[t(r["a"],{staticClass:"white--text font-btn",class:{disabled:!e.checkAccessEnable(n)},attrs:{width:"90px",height:"26px",color:"primary",loading:e.loadingAttend},on:{click:function(t){return e.attend(n)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("b29e")}}),e._v("\n                  "+e._s(e.$t("attendance.access"))+"\n                ")])],1)])}))],2)]},proxy:!0}],null,!1,1212061831)})],1),e.totalPages>0?t(_t["a"],{staticClass:"pagination mt-2",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e(),t("TransferMine")],1)]):e._e()},Ja=[],Wa={components:{TransferMine:Nt,TabsListsFilterSearch:wt},props:["items","program_info"],mixins:[ve],data(){return{members:[],memberArray:[],data:null,specialty:null,pagination:{pages:0,currentPage:1},loading:!1,loadingAttend:!1,members:[],total:0,pages:0,limit:10,offset:0,influence:!1,filter:null,programArray:[],message:"Nenhum resultado encontrado",timeoutRef:null,disableLiveReload:!1,collapsedView:!1,attendances:[],emergency:!1}},created(){this.$bus.on("restart-queue-update",this.resumeQueue),this.$bus.on("stop-queue-update",this.pauseQueue),this.$bus.on("stop-access-attandance-load",()=>{this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"}),this.loadingAttend=!1})},mounted(){this.listUserAttendance()},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingAttend=!1},methods:{changeInfluence(e){this.influence=e,this.getPage(1)},changeSearch(e){this.filter=e,this.getPage(1)},resumeQueue(e=!0){clearTimeout(this.timeoutRef),this.disableLiveReload=!1,this.loadingAttend=!1,this.$bus.emit("ended-attendance"),e?this.realTimelistUserAttendance():this.timeoutRef=setTimeout(()=>{this.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT)},formatDate(e){let t=e.due_date.split(" ")[0],a=Ot.a.tz(t+" "+e.due_time,"utc");return a.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},pauseQueue(){this.loadingAttend=!1,clearTimeout(this.timeoutRef),this.disableLiveReload=!0},transfer(){this.$bus.emit("mine-dialog",!0)},attend(e){this.loadingAttend=!0,this.$bus.emit("open-patient-page",e)},changePage(){this.getPage(this.pagination.currentPage)},checkAccessEnable(e){let t=e.due_date.replace("00:00:00",e.due_time),a=Ot.a.tz(t,"utc"),n=Ot()(a.format("x")-Ot()().format("x"))/1e3/60;return n<=5},getPage(e){1!=e?this.pauseQueue():this.resumeQueue(!1),this.loading=!0;let t=this.$store.state.Data.User.info.user_info.id,a=this.$store.state.Data.User.info.user_info.companies[0].id;this.offset=1==e?0:(e-1)*this.limit;let n={influence:this.influence,company_id:a,limit:this.limit,offset:this.offset,program_id:this.program_info.id,user_id:t};this.filter&&(n.filter=JSON.stringify({...this.filter})),this.emergency?n.emergency_member=this.emergency:delete n.emergency_member,je.listUserExternalAttendances(n).then(t=>{this.attendances=t.data.attendances,this.programArray=this.members,0==this.programArray.length?this.message="Nenhum resultado encontrado":this.message="",this.pagination.currentPage=e,this.total=t.data.total,this.pages=this.totalPages,this.pagination.pages=this.totalPages}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},isExpired(e){let t=Ot.a.tz(e,"utc"),a=Ot()(t.format("x")-Ot()().format("x"))/1e3/60/60;return a=a.toFixed(2),!(a>0)},listUserAttendance(){clearTimeout(this.timeoutRef);var e=this;this.loading=!0;let t=this.$store.state.Data.User.info.user_info.id,a=this.$store.state.Data.User.info.user_info.companies[0].id,n={influence:this.influence,limit:this.limit,offset:0,company_id:a,user_id:t,program_id:this.program_info.id};this.filter&&(n.filter=JSON.stringify({...this.filter})),this.emergency?n.emergency_member=this.emergency:delete n.emergency_member,je.listUserExternalAttendances(n).then(e=>{this.attendances=e.data.attendances,this.programArray=this.members,0==this.programArray.length?this.message="Nenhum resultado encontrado":this.message="",this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},realTimelistUserAttendance(){clearTimeout(this.timeoutRef);var e=this;let t=this.$store.state.Data.User.info.user_info.id,a=this.$store.state.Data.User.info.user_info.companies[0].id,n={influence:this.influence,limit:this.limit,offset:this.offset,company_id:a,user_id:t,program_id:this.program_info.id};this.filter&&(n.filter=JSON.stringify({...this.filter})),this.emergency?n.emergency_member=this.emergency:delete n.emergency_member,je.listUserExternalAttendances(n).then(e=>{this.attendances=e.data.attendances,this.programArray=this.members,0==this.programArray.length?this.message="Nenhum resultado encontrado":this.message="",this.total=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e),this.loading=!1,401==e.code&&this.$bus.emit("logout")}).finally(()=>{clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})}},computed:{patientName(){return e=>{let t=e.patient_info,a=e.member[0];return t.social_name||a.social_name?t.social_name||a.social_name:t.name||""}},totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total}}},Xa=Wa,za=(a("629c"),Object(I["a"])(Xa,Qa,Ja,!1,null,"46207d88",null)),en=za.exports,tn={props:["items"],components:{MeusAtendimentosExterno:en},data(){return{canAccess:!1,programs:[],collapsedView:!1}},created(){let e=["SUPER_ADMIN","MEDICAL","EXTERNAL_MEDICAL"];this.canAccess=e.includes(this.$store.state.Data.User.info.user_info.user_type),this.canAccess&&this.getPrograms()},methods:{collapseToggle(){this.collapsedView=!this.collapsedView},getPrograms(){this.$store.state.Data.User.info.user_info.programs.map(e=>e.id).forEach(e=>{let t={token:this.$store.state.Data.User.token,program_id:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,t).then(e=>{this.programs.push({id:e.data.program_info.id,name:e.data.program_info.name,type:e.data.program_info.type}),this.programs.sort((e,t)=>e.id>t.id)}).catch(e=>{})})}}},an=tn,nn=(a("45d2"),Object(I["a"])(an,Ka,Za,!1,null,null,null)),sn=nn.exports,on=function(){var e=this,t=e._self._c;return e.canAccess?t("div",[t("div",{staticClass:"my-attend"},[t("div",{staticClass:"queue-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.queue")))]),e._v("\n      "+e._s(e.$t("attendance.attendances"))+"\n      "),t(r["a"],{staticClass:"collapse-btn",attrs:{height:"22px",color:"primary",tile:""},on:{click:e.collapseToggle}},[e.collapsedView?e._e():t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("015d")}}),e.collapsedView?t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("9360")}}):e._e()])],1),e._l(e.queues,(function(a,n){return e.collapsedView?e._e():t("div",{key:a.id},[t("FilaOperacional",{attrs:{program_info:a}})],1)}))],2)]):e._e()},rn=[],ln=function(){var e=this,t=e._self._c;return e.program_info&&e.program_info.id?t("div",[e.collapsedView?e._e():t("div",[t("div",{staticClass:"pt-1 mt-10 mb-4"},[t("span",{staticClass:"queue-subtitle"},[e._v(e._s(e.$t("attendance.pending")))]),e.program_info?t("span",{staticClass:"speciality"},[e._v("("+e._s(e.program_info.name)+")")]):e._e()]),t("TabsListsFilterSearch",{attrs:{listName:"QUEUE_ATTENDANCES",collapsedView:e.collapsedView,handleChangeInfluence:e.changeInfluence,handleChangeSearch:e.changeSearch}}),e.loading||e.loadingHeaders?t("div",{staticClass:"ld-icon"},[t(nt["a"],{attrs:{active:e.loading||e.loadingHeaders,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"queue-table",attrs:{headers:e.headers,items:e.attendances,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function({props:a}){return[t("tr",e._l(a.headers,(function(a){return t("th",[a.sortable?t("button",{staticClass:"header-button d-flex justify-center",class:[e.hover==a.header||e.order.column==a.header?"px-2":"px-4"],on:{click:function(t){return e.orderingAttendancesQueue(a.header,"ASC")},mouseover:function(t){return e.setHeaderHover(a.header)},mouseleave:function(t){return e.setHeaderHover(null)}}},[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:e.hover==a.header||e.order.column==a.header,expression:"hover == itemHeader.header || order.column == itemHeader.header"}],attrs:{small:""}},[e._v("\n                  "+e._s(e.order.order_type&&"DESC"==e.order.order_type?"arrow_downward":"arrow_upward")+"\n                ")]),e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")],1):t("div",{staticClass:"px-2"},[e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")])])})),0)]}},{key:"item",fn:function(n){return[t("tr",{class:{"colored-latercomer":n.item.is_parent,colored:e.isExpired(n.item.sla)&&!n.item.is_parent,normal:!e.isExpired(n.item.sla)&&!n.item.is_parent}},[e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION)?t("td",[t(at["a"],{attrs:{size:"20",color:Object.values(e.$consts.CLASSIFICATION_COLORS)[n.item.urgency_level||0]}},[e._v("\n                fiber_manual_record\n              ")])],1):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME)?t("td",[t("span",{staticClass:"tb-items"},[n.item.company_info&&(n.item.company_info.nick_name||n.item.company_info.name)?t("div",[e._v("\n                  "+e._s(n.item.company_info.nick_name||n.item.company_info.name)+"\n                ")]):n.item.company_name?t("div",[e._v("\n                  "+e._s(n.item.company_name)+"\n                ")]):e._e()])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.PATIENT_NAME)?t("td",[t("span",{staticClass:"tb-items d-flex"},[t("span",{staticClass:"flex-grow-1"},[e._v("\n                  "+e._s(e.patientName(n.item))+"\n                  "),t("EmergencyIcon",{attrs:{isEmergency:n.item.emergency_pass}})],1),t("div",{staticClass:"d-inline-flex"},[e.hasSocialName(n.item)?t("div",{staticClass:"d-inline-flex ml-1"},[t("img",{attrs:{src:a("92a7")}})]):e._e(),n.item.patient_info?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.item.patient_info.vip,deficiencyIds:n.item.patient_info.disabilities}}):e._e()],1)]),n.item.is_new?t("span",{staticClass:"new"},[e._v("\n                ("+e._s(e.$t("attendance.new"))+")\n              ")]):e._e()]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.IS_SCHEDULE)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.is_schedule?e.$t("attendance.yes"):e.$t("attendance.no"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_attendance_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPS_NUMBER)||e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPT_NUMBER)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.attempts)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.SLA)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(e.formatDate(n.item))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.patient_info?n.item.patient_info.contact_time:"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.STATUS)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items",class:{free:"free"===e.generateStatus(n.item.sla),pass_out:"free"!==e.generateStatus(n.item.sla)}},[e._v(e._s(e.$t("attendance."+e.generateStatus(n.item.sla))))])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.REQUEST)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items",class:{free:"with_prescription"==e.requestTranslation(n.item),pass_out:"no_prescription"==e.requestTranslation(n.item)}},[e._v(e._s(e.$t("attendance."+e.requestTranslation(n.item))))])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ORIGIN)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.item.program_information[0].name))])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTENDANT_NAME)?t("td",[n.item.attendant_info?t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.attendant_info.name)+"\n              ")]):t("span",{staticClass:"tb-items blue--text"},[e._v("\n                "+e._s(e.$t("attendance.no_one"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.DOCTOR_NAME)?t("td",[n.item.doctor_info?t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.doctor_info.name)+"\n              ")]):t("span",{staticClass:"tb-items blue--text"},[e._v("\n                "+e._s(e.$t("attendance.no_one"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ACTION)?t("td",{staticClass:"d-flex justify-center align-center py-2 vertical-align"},[e.canAttend?t(r["a"],{staticClass:"white--text font-btn mr-2",attrs:{width:"100px",height:"26px",color:"primary",loading:e.loadingAttend,disabled:e.loadingAttend||!n.item.enable_attend_button},on:{click:function(t){return e.access(n.item)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("b29e")}}),e._v("\n                "+e._s(e.$t("attendance.access"))+"\n              ")]):e._e()],1):e._e()])]}}],null,!1,1851134897)})],1),e.totalPages>0?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1)]):e._e()},cn=[],dn={name:"FilaOperacional",props:["program_info"],components:{TabsListsFilterSearch:wt,DeficiencyIdentifierBars:Zt,EmergencyIcon:Ut},mixins:[ve],data(){return{loading:!0,loadingAttend:!1,loadingHeaders:!1,data:null,hover:null,increment:!1,columnSafe:null,count:0,order:[],headers:[],options:[],attendances:[],pagination:{pages:0,currentPage:1},total:0,pages:0,limit:10,offset:0,influence:!1,filter:null,timeoutRef:null,disableLiveReload:!1,collapsedView:!1,canAttend:!1,canCancel:!1,canReschedule:!1,list:!1,canTransfer:!1}},created(){this.$bus.on("restart-queue-update",()=>{this.resumeQueue()}),this.$bus.on("stop-queue-update",this.pauseQueue),this.$bus.on("stop-access-attandance-load",()=>{this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"}),this.loadingAttend=!1}),this.getHeaders()},mounted(){let e=this.$store.state.Data.User.info.user_info.queues;e&&e.length>0&&e.forEach(e=>{this.program_info.id==e.id&&(this.canAttend=e.attend,this.canCancel=e.cancel,this.canReschedule=e.reschedule,this.list=e.list)}),this.canTransfer=this.checkAccessesControlFuncionality(["attendance.doctorTransfer.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canAttend=this.canAttend&&this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update","attendanceQueue.internalAttend.update","attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.list&&this.listAttendances()},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingAttend=!1},methods:{getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeaderLegacy(this.program_info.id).then(e=>{this.headers=e.data.map(e=>(e.align="center",e.sortable=e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.SLA||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.STATUS||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION,e))}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},setHeaderHover(e=null){this.hover=e},hasHeaderType(e){return this.headers.find(t=>t.header==e)},changeInfluence(e){this.influence=e,this.getPage(1)},changeSearch(e){this.filter=e,this.getPage(1)},resumeQueue(e=!0){clearTimeout(this.timeoutRef),this.disableLiveReload=!1,this.$bus.emit("ended-attendance"),e?this.realTimelistUserAttendance():(this.loadingAttend=!1,this.timeoutRef=setTimeout(()=>{this.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))},pauseQueue(){clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingAttend=!1},formatDate(e){let t=Ot.a.tz(e.sla,"utc");return t.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e)},generateCase(e){if(null==e.bricks||0===e.bricks.length||null==e.bricks.emr_desfecho||0===e.bricks.emr_desfecho.length){if(null==e.bricks.triagem_generica_enfermagem||0===e.bricks.triagem_generica_enfermagem.length)return"";if(e.bricks.triagem_generica_enfermagem.length>0){let t=Object.keys(e.bricks.triagem_generica_enfermagem)[0],a=e.bricks.triagem_generica_enfermagem[t],n=null===a.program_brick_options_id?[]:a.program_brick_options_id[0],i=this.options.find(e=>e.id===n);return null==i||0===i.length?"":i.name}}let t=[];for(let a in Object.keys(e.bricks.emr_desfecho)[0])!0===e.bricks.emr_desfecho[Object.keys(e.bricks.emr_desfecho)[0]][a]&&t.push(a);return t.length>0?t[0]:"no_prescription"},generateStatus(e){let t=Ot.a.tz(e,"utc"),a=Ot()(t.format("x")-Ot()().format("x"))/1e3/60/60;return a=a.toFixed(2),a>0?"free":a<-.3?"pass_out_30_plus":"pass_out_30_minus"},access(e){this.loadingAttend=!0,e.nursequeue=!0,e.program_info=this.program_info,this.loadingAttend=!0,this.data=e,Ge.attend({case_attendance_id:e.case_attendance_id}).then(e=>{e.data.can_attend?this.$bus.emit("open-patient-page",this.data):this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAttend=!1})},changePage(){this.getPage(this.pagination.currentPage)},getPage(e){1!=e?this.pauseQueue():this.resumeQueue(!1),this.loading=!0,this.offset=1==e?0:(e-1)*this.limit;let t={limit:this.limit,offset:this.offset,influence:this.influence,user_id:this.$store.state.Data.User.info.user_info.id,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listQueueAttendances(t).then(t=>{this.attendances=this.mapAttendButtonStatus(t.data.attendances),this.pagination.currentPage=e,this.total=t.data.total,this.pages=this.totalPages,this.pagination.pages=this.totalPages,this.options=t.data.options_information}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},mapAttendButtonStatus(e){let t=[];return e.forEach(e=>{if(this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))e.enable_attend_button=!0;else if(this.checkAccessesControlFuncionality(["attendanceQueue.internalAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)){let t=this.$store.state.Data.User.info.user_info.companies.map(e=>e.id);e.enable_attend_button=!!t.includes(e.company_id)}else this.checkAccessesControlFuncionality(["attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)?e.enable_attend_button=this.$store.state.Data.User.info.user_info.id==e.doctor_id||this.$store.state.Data.User.info.user_info.id==e.attendant_id:e.enable_attend_button=!1;if(this.checkAccessesControlFuncionality(["attendance.cancelAttendance.update","attendance.programCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))e.enable_cancel_button=!0;else if(this.checkAccessesControlFuncionality(["attendance.companyCancelAttendance.update","attendance.internalCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))if(null!==this.$store.state.Data.User.info.user_info.companies){let t=this.$store.state.Data.User.info.user_info.companies.map(e=>e.id);e.enable_cancel_button=!!t.includes(e.company_id)}else e.enable_cancel_button=!1;else this.checkAccessesControlFuncionality(["attendance.holderCancelAttendance.update","attendance.userSelfCancelAttendance.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)?e.enable_cancel_button=this.$store.state.Data.User.info.user_info.id==e.doctor_id||null==e.doctor_id&&this.$store.state.Data.User.info.user_info.id==e.attendant_id:e.enable_cancel_button=!1;t.push(e)}),t},isExpired(e){let t=this.formatDBDate(e),a=Ot()(new Date,"DD/MM/YYYY").diff(Ot()(t,"DD/MM/YYYY"),"days"),n=!1;return a>0&&(n=!0),n},listAttendances(){clearTimeout(this.timeoutRef);var e=this;this.loading=!0;let t={limit:this.limit,offset:0,influence:this.influence,user_id:this.$store.state.Data.User.info.user_info.id,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listQueueAttendances(t).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1,this.options=e.data.options_information,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e),401==e.code&&this.$bus.emit("logout")}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},realTimelistUserAttendance(){clearTimeout(this.timeoutRef);var e=this;let t={limit:this.limit,offset:this.offset,influence:this.influence,user_id:this.$store.state.Data.User.info.user_info.id,program_id:this.program_info.id};this.filter&&(t.filter=JSON.stringify({...this.filter})),this.emergency?t.emergency_member=this.emergency:delete t.emergency_member,je.listQueueAttendances(t).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.options=e.data.options_information,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAttend=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})},orderingAttendancesQueue(e,t){this.columnSafe!=e&&(this.columnSafe=e,this.increment=!1,this.count=0),"ASC"!=t||this.increment?this.increment&&this.count<2?(this.count++,this.orderingQueue(this.columnSafe,"DESC")):(this.count=0,this.order=[],this.hover=null,this.increment=!1,this.listAttendances()):(this.increment=!0,this.count++,this.orderingQueue(this.columnSafe,"ASC"))},orderingQueue(e,t){clearTimeout(this.timeoutRef),this.order.column=e,this.order.order_type=t;var a=this;this.loading=!0;let n={influence:this.influence,limit:this.limit,offset:0,user_id:this.$store.state.Data.User.info.user_info.id,program_id:this.program_info.id};this.filter&&(n.filter=JSON.stringify({...this.filter})),this.emergency?n.emergency_member=this.emergency:delete n.emergency_member,this.order.column&&this.order.order_type&&(n.order=this.order),je.listQueueAttendances(n).then(e=>{this.attendances=this.mapAttendButtonStatus(e.data.attendances),this.total=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{a.realTimelistUserAttendance()},this.$consts.SETTINGS.LISTTIMEOUT))})}},computed:{patientName(){return e=>{let t=e.patient_info,a=e.member?e.member[0]:null;return t&&t.social_name?t.social_name:a&&a.social_name?a.social_name:t&&t.name?t.name:a&&a.name?a.name:""}},totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total},requestTranslation(){return e=>e.bricks.emr_desfecho[Object.keys(e.bricks.emr_desfecho)[0]]&&1==e.bricks.emr_desfecho[Object.keys(e.bricks.emr_desfecho)[0]].prescription?"with_prescription":"no_prescription"}}},mn=dn,un=(a("4764"),Object(I["a"])(mn,ln,cn,!1,null,"a913c77e",null)),An=un.exports,_n={name:"FilaAtendimentosOperacional",props:["items"],mixins:[ve],components:{FilaOperacional:An},data(){return{canAccess:!1,data:null,queues:[],loading:!0,message:"Nenhum resultado encontrado",collapsedView:!1}},created(){let e=["SUPER_ADMIN","OPERATIONAL"];this.canAccess=e.includes(this.$store.state.Data.User.info.user_info.user_type);let t=[this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER,this.$consts.USER_ROLE_IDS.COACH_ESPORTIVO,this.$consts.USER_ROLE_IDS.NUTRICIONISTA,this.$consts.USER_ROLE_IDS.PSICOLOGO,this.$consts.USER_ROLE_IDS.NUTRICIONISTA_RESTRITO,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER_RESTRITO,this.$consts.USER_ROLE_IDS.PSICOLOGO_RESTRITO,this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER_COMPLETO,this.$consts.USER_ROLE_IDS.GERENTE_PSICOLOGIA];t.includes(this.$store.state.Data.User.info.role_info.role_id)&&(this.canAccess=!1),this.canAccess&&this.getQueuesInformation()},methods:{getQueuesInformation(){let e=[];this.$store.state.Data.User.info.user_info.queues&&this.$store.state.Data.User.info.user_info.queues.map(e=>e.id).forEach(t=>{let a={token:this.$store.state.Data.User.token,program_id:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,a).then(t=>{e.push({id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type,care_type:t.data.program_info.care_type}),this.queues=e.sort((e,t)=>e.id-t.id)}).catch(e=>{console.error(e)})})},collapseToggle(){this.collapsedView=!this.collapsedView}}},En=_n,In=(a("9afe"),Object(I["a"])(En,on,rn,!1,null,null,null)),hn=In.exports,On=function(){var e=this,t=e._self._c;return e.canAccess?t("div",[t("div",{staticClass:"my-attend"},[t("div",{staticClass:"mine-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.pending_documents")))]),t(r["a"],{staticClass:"collapse-btn",attrs:{height:"22px",color:"primary",tile:""},on:{click:e.collapseToggle}},[e.collapsedView?e._e():t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("015d")}}),e.collapsedView?t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("9360")}}):e._e()])],1),t("DocumentosPendentes")],1)]):e._e()},pn=[],Sn=function(){var e=this,t=e._self._c;return t("div",[e.collapsedView?e._e():t("div",{staticClass:"pt-1 mt-10"},[e.loading||e.loadingHeaders?t("div",{staticClass:"ld-icon"},[t(nt["a"],{attrs:{active:e.loading||e.loadingHeaders,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"mine-table",attrs:{headers:e.headers,items:e.attendances,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function({props:a}){return[t("tr",e._l(a.headers,(function(a){return t("th",[a.sortable?t("button",{staticClass:"header-button d-flex justify-center",class:[e.hover==a.header||e.order.column==a.header?"px-2":"px-4"],on:{click:function(t){return e.orderingPendingDocuments(a.header,"ASC")},mouseover:function(t){return e.setHeaderHover(a.header)},mouseleave:function(t){return e.setHeaderHover(null)}}},[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:e.hover==a.header||e.order.column==a.header,expression:"\n                    hover == itemHeader.header || order.column == itemHeader.header\n                  "}],attrs:{small:""}},[e._v("\n                  "+e._s(e.order.order_type&&"DESC"==e.order.order_type?"arrow_downward":"arrow_upward")+"\n                ")]),e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")],1):t("div",{staticClass:"px-2"},[e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")])])})),0)]}},{key:"item",fn:function(n){return[t("tr",[e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION)?t("td",[t(at["a"],{attrs:{size:"20",color:Object.values(e.$consts.CLASSIFICATION_COLORS)[n.item.urgency_level||0]}},[e._v("\n                fiber_manual_record\n              ")])],1):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME)?t("td",[t("span",{staticClass:"tb-items"},[n.item.company_info&&(n.item.company_info.nick_name||n.item.company_info.name)?t("div",[e._v("\n                  "+e._s(n.item.company_info.nick_name||n.item.company_info.name)+"\n                ")]):n.item.company_name?t("div",[e._v("\n                  "+e._s(n.item.company_name)+"\n                ")]):e._e()])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.PATIENT_NAME)?t("td",[t("span",{staticClass:"tb-items d-flex"},[t("span",{staticClass:"flex-grow-1"},[e._v("\n                  "+e._s(e.patientName(n.item))+"\n                  "),t("EmergencyIcon",{attrs:{isEmergency:n.item.emergency_pass}})],1),t("div",{staticClass:"d-inline-flex"},[e.hasSocialName(n.item)?t("div",{staticClass:"d-inline-flex ml-1"},[t("img",{attrs:{src:a("92a7")}})]):e._e(),n.item.patient_info?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.item.patient_info.vip,deficiencyIds:n.item.patient_info.disabilities}}):e._e()],1)]),n.item.is_new?t("span",{staticClass:"new"},[e._v("\n                ("+e._s(e.$t("attendance.new"))+")\n              ")]):e._e()]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.IS_SCHEDULE)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.is_schedule?e.$t("attendance.yes"):e.$t("attendance.no"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_attendance_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPS_NUMBER)||e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPT_NUMBER)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.attempts)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.SLA)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(e.formatDate(n.item))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.patient_info?e.formatContactTimeText(n.item.patient_info.contact_time):"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.STATUS)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.status?e.$t("status."+n.item.status.toLowerCase()):"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.REQUEST)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(e.generateCase(n.item)?e.$t("attendance."+e.generateCase(n.item)):"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ORIGIN)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.item.program_information[0].name))])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTENDANT_NAME)?t("td",[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.attendant_info?n.item.attendant_info.name:e.$t("attendance.no_one"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.DOCTOR_NAME)?t("td",[n.item.doctor_info?t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.doctor_info.name)+"\n              ")]):t("span",{staticClass:"tb-items blue--text"},[e._v("\n                "+e._s(e.$t("attendance.no_one"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ACTION)?t("td",{staticClass:"table-meus-atendimentos-buttons d-flex justify-center py-2"},[e.enableButton&&n.item.canCertify?t(r["a"],{staticClass:"caption white--text font-btn toggleAttend bt-lg",attrs:{width:"150",color:"primary",loading:e.loadingGeneration},on:{click:function(t){return e.generateDocuments(n.item)}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_file")]),t("span",{staticClass:"btn-text-span"},[e._v(e._s(e.$t("attendance.generate_documents")))])],1):e._e()],1):e._e()])]}}],null,!1,1666895545)})],1),e.totalPages>0?t(_t["a"],{staticClass:"pagination mt-2",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),t("SaveAttendanceModal",{attrs:{case_id:e.case_id}})],1)},Cn=[],Tn=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{persistent:"",width:"550"},model:{value:e.dialogSaveAttendance,callback:function(t){e.dialogSaveAttendance=t},expression:"dialogSaveAttendance"}},[t(l["a"],{staticClass:"dialog"},[t(c["c"],{staticClass:"dialog-header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"d-flex justify-center align-center"},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("\n              $vuetify.icons.custom_save\n            ")]),e._v("\n            "+e._s(e.$t("patient.save"))+"\n          ")],1)]),t("div",{staticClass:"close"},[e.saveSuccess?t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:e.certifyAttendance}}):t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:e.closeSaveAttendance}})])]),e.saveSuccess?e._e():t("div",{staticClass:"card-body"},[e.saveError?e._e():t(c["b"],{staticClass:"text-justify"},[e._v("\n          "+e._s(e.$t("patient.save_info_modal"))+"\n        ")]),e.saveError?t(c["b"],{staticClass:"text-center",class:{"red--text":e.fieldError}},[e._v("\n          "+e._s(this.brickSaveError)+"\n        ")]):e._e()],1),e.saveSuccess?t("div",{staticClass:"card-body"},[t(c["b"],{staticClass:"text-center"},[e._v("\n          "+e._s(e.$t("patient.success_save"))+"\n        ")])],1):e._e(),t(c["a"],{staticClass:"card-buttons"},[!e.saveSuccess||e.saveError?t(r["a"],{staticClass:"primary--text ml-n2 mr-3",attrs:{color:"white",height:"37px",width:"232px",disabled:e.disabled,outlined:""},on:{click:e.closeSaveAttendance}},[e._v("\n          "+e._s(e.$t("patient.cancel"))+"\n        ")]):e._e(),e.saveSuccess?e._e():t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",disabled:e.disabled,width:"232px",loading:e.loading},on:{click:e.saveAttendance}},[e._v("\n          "+e._s(e.saveError?e.$t("patient.retry"):e.$t("patient.yes_save"))+"\n        ")]),e.saveSuccess?t(r["a"],{staticClass:"primary--text ml-n2 mr-3",attrs:{color:"white",height:"37px",width:"232px",outlined:""},on:{click:e.certifyAttendance}},[e._v("\n          "+e._s(e.$t("patient.continue"))+"\n        ")]):e._e()],1)],1)],1),e.dialogCertification?t("div",{staticClass:"digital-cert-container"}):e._e(),t("CertificationModal"),t(d["a"],{attrs:{persistent:"",width:"550"},model:{value:e.confirmedCloseCertification,callback:function(t){e.confirmedCloseCertification=t},expression:"confirmedCloseCertification"}},[t(l["a"],{staticClass:"dialog"},[t(c["c"],{staticClass:"dialog-header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"d-flex justify-center align-center"},[e._v("\n            "+e._s(e.$t("patient.notice"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:e.returnModalCertification}})])]),e.saveSuccess?t("div",{staticClass:"card-body"},[t(c["b"],{staticClass:"text-center"},[t("b",[e._v(e._s(e.$t("patient.warning")))]),e._v(" "+e._s(e.$t("patient.continue_cancel_certification_info"))+"\n        ")])],1):e._e(),t(c["a"],{staticClass:"card-buttons"},[t(r["a"],{staticClass:"primary--text ml-n2 mr-3",attrs:{color:"white",height:"37px",width:"232px",disabled:e.disabled,outlined:""},on:{click:e.returnModalCertification}},[e._v("\n          "+e._s(e.$t("patient.back"))+"\n        ")]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",disabled:e.disabled,width:"232px",loading:e.loading},on:{click:e.closeCertification}},[e._v("\n          "+e._s(e.$t("patient.confirmed_cancel_certification_yes"))+"\n        ")])],1)],1)],1)],1)},Rn=[],Dn=a("8e36"),gn=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{persistent:"","max-width":"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",[t(l["a"],{staticClass:"certify-section"},[e.loading?t("div",{staticClass:"loading-container"},[t("p",{staticClass:"font-default"},[e._v("\n            "+e._s(e.message?e.$t("attendance."+e.message):"")+"\n          ")]),t(Dn["a"],{attrs:{indeterminate:""}}),e.validCheckTimeout?t("p",{staticClass:"font-default mt-4"},[e._v("\n            "+e._s(this.$moment(this.validTimer).format("mm:ss"))+"\n          ")]):e._e(),e.validCheckTimeout?t("div",{staticClass:"valid-buttons"},[t(r["a"],{staticClass:"mt-4",attrs:{height:"37px",width:"232px"},on:{click:function(t){return e.cancelValid()}}},[e._v(e._s(e.$t("attendance.cancel"))+"\n            ")]),t(r["a"],{staticClass:"white--text mt-4",attrs:{color:"primary",height:"37px",width:"232px"},on:{click:function(t){return e.tryAgainValid()}}},[e._v(e._s(e.$t("attendance.try_again"))+"\n            ")])],1):e._e()],1):e._e(),e.loading||e.success?e._e():t("div",{staticClass:"loading-container"},[t("img",{staticClass:"img",attrs:{src:a("d9ed")}}),t("p",{staticClass:"font-default font-failed mt-4"},[e._v("\n            "+e._s(e.message?e.$t("attendance."+e.message):"")+"\n          ")]),t("div",[t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"232px"},on:{click:e.close}},[e._v("\n              "+e._s(e.$t("attendance.close"))+"\n            ")])],1)]),!e.loading&&e.success?t("div",{staticClass:"loading-container"},[t("img",{staticClass:"img",attrs:{src:a("5dfc")}}),t("p",{staticClass:"font-default font-success mt-4"},[e._v("\n            "+e._s(e.message?e.$t("attendance."+e.message):"")+"\n          ")]),t("div",[t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"232px"},on:{click:e.successMethod}},[e._v("\n              "+e._s(e.$t("attendance.close"))+"\n            ")])],1)]):e._e()])],1)])],1)},Ln=[],fn={mixins:[ve],data(){return{authPayload:{},attendancePayload:{},dialog:!1,loading:!1,success:!1,message:"",token_user:"",provider:"",validTimerLimit:9e5,validTimer:0,validTimeout:null,validCheckTimeout:null,whatsapp:!1,test_failed:!1,phone_number:""}},created(){this.$bus.on("certify-attendance",e=>{this.dialog=!0,this.success=!1,this.loading=!0,this.token_user=e.accessToken,this.authPayload.cpf=e.cpf,this.authPayload.case_attendance_id=e.case_attendance_id,this.attendancePayload=e.attendancePayload,this.provider=e.provider,this.test_failed=e.test_failed,this.phone_number=e.phone_number,this.whatsapp=e.has_whatsapp,this.preSave()})},beforeDestroy(){this.$bus.off("certify-attendance")},methods:{certiSignAuth(){this.message="authentication_certisign",this.authPayload.provider="certisign",this.$store.dispatch(this.$consts.USER_ACTIONS.CERTSIGN_AUTH,this.authPayload).then(e=>{if(!e.data.token_user)return this.message="authentication_fail",this.success=!1,void(this.loading=!1);this.token_user=e.data.token_user,this.documentCertify()}).catch(e=>{this.message="authentication_fail",this.success=!1,this.loading=!1,this.cancelCertificationAttendance()})},validAuth(){this.message="authentication_valid",this.authPayload.provider=this.provider,this.$store.dispatch(this.$consts.USER_ACTIONS.CERTSIGN_AUTH,this.authPayload).then(e=>{this.token_user=e.data.token_user,this.checkerValid()}).catch(e=>{this.message="authentication_fail",this.success=!1,this.loading=!1,this.cancelCertificationAttendance()})},cancelValid(){clearInterval(this.validCheckTimeout),clearTimeout(this.validTimeout),this.validTimeout=null,this.validCheckTimeout=null,this.cancelCertificationAttendance(),this.close()},cancelCertificationAttendance(){this.$bus.emit("cancel-certification-attendance",this.authPayload.case_attendance_id)},tryAgainValid(){this.validAuth()},checkerValid(){clearInterval(this.validCheckTimeout),clearTimeout(this.validTimeout),this.validTimeout=null,this.validCheckTimeout=null;var e=this;this.validTimeout=setTimeout(()=>{e.checkValidAuthorization()},3e3),this.validTimer=this.validTimerLimit,this.validCheckTimeout=setInterval(()=>{e.validTimer-=1e3,e.validTimer<=0&&(clearInterval(e.validCheckTimeout),clearTimeout(e.validTimeout),this.validTimeout=null,this.validCheckTimeout=null,this.message="authentication_fail",this.loading=!1,this.success=!1)},1e3)},checkValidAuthorization(){this.$store.dispatch(this.$consts.USER_ACTIONS.CHECK_CERTIFICATION_AUTH,{token:this.authPayload.token,authorization_code:this.token_user}).then(e=>{e.data.access_token&&e.data.access_token.length?(clearTimeout(this.validCheckTimeout),clearTimeout(this.validTimeout),this.validTimeout=null,this.validCheckTimeout=null,this.token_user=e.data.access_token,this.documentCertify()):this.validTimeout=setTimeout(()=>{var e=this;e.checkValidAuthorization()},3e3)}).catch(e=>{clearTimeout(this.validCheckTimeout),clearTimeout(this.validTimeout),this.validTimeout=null,this.validCheckTimeout=null,this.message="authentication_fail",this.success=!1,this.loading=!1})},preSave(){this.documentCertify()},documentCertify(){this.message="generate_pdf";let e={case_attendance_id:this.authPayload.case_attendance_id,user_document:this.authPayload.cpf,provider:this.provider,certification_token:this.token_user,has_whatsapp:this.whatsapp,test_failed:this.test_failed,phone_number:this.phone_number};Qt.documentCreateAsync(e).then(()=>{this.dialog=!1,this.success=!0,this.$bus.emit("doctor-finish-attendance")}).catch(()=>{this.message="generate_pdf_fail",this.success=!1}).finally(()=>{this.loading=!1})},close(){this.$bus.emit("save-doctor-enable"),this.dialog=!1},successMethod(){this.$bus.emit("socket-doctor-connected-status",!1),this.dialog=!1}}},Nn=fn,kn=(a("9a0f"),Object(I["a"])(Nn,gn,Ln,!1,null,null,null)),vn=kn.exports,bn=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{persistent:"",width:"708px"},model:{value:e.digitalCertificationShow,callback:function(t){e.digitalCertificationShow=t},expression:"digitalCertificationShow"}},[t(l["a"],{staticClass:"dialog"},[t(c["c"],{staticClass:"card-title"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"d-flex justify-center align-center"},[e._v("\n            "+e._s(e.$t("home.digital_certification"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.closeDigitalCertification(!0)}}})])]),e.authenticationError?t("div",[t("div",{staticClass:"card-body"},[t(c["b"],{staticClass:"text-center error-message",staticStyle:{color:"red"}},[e._v("\n            "+e._s(e.$t("home.digital_certification_authentication_error"))+"\n          ")])],1),t(c["a"],{staticClass:"d-flex justify-center"},[t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"232px"},on:{click:e.retryCertification}},[e._v("\n            "+e._s(e.$t("patient.retry"))+"\n          ")])],1)],1):e._e(),e.activeCertification||e.successCertification||e.authenticationError||e.hasToken&&e.actualToken?e._e():t("div",[t("div",{staticClass:"card-body-select-certification"},[t(c["b"],{staticClass:"text-justify select_certification_description"},[e._v("\n            "+e._s(e.$t("home.digital_certification_description"))+"\n          ")])],1),t(c["a"],{staticClass:"card-buttons"},[t("div",{staticClass:"option-with-description"},[t(r["a"],{staticClass:"primary--text",attrs:{color:"white",height:"66px",width:"274px",disabled:e.disabledCertsignCertification&&!e.inAttendance,outlined:""},on:{click:e.certsignCertification}},[t(at["a"],{staticClass:"mr-1",attrs:{color:"blue"}},[e._v("mdi-square-edit-outline")]),e._v("\n              "+e._s(e.$t("home.digital_certification_option_1"))+"\n            ")],1),e.inAttendance?e._e():t("span",{staticClass:"digital-certification-option-1-description"},[e._v("\n              "+e._s(e.$t("home.digital_certification_option_1_description"))+"\n            ")])],1),t("div",{staticClass:"option-with-description"},[t(r["a"],{staticClass:"primary--text",attrs:{color:"white",height:"66px",width:"274px",disabled:e.disabledValidCerttification,outlined:""},on:{click:e.validCertification}},[t(at["a"],{staticClass:"mr-1",attrs:{color:"blue"}},[e._v("mdi-square-edit-outline")]),e._v("\n              "+e._s(e.$t("home.digital_certification_option_2"))+"\n            ")],1)],1)])],1),!e.activeCertification||e.successCertification||e.hasToken&&e.actualToken||e.authenticationError?e._e():t("div",[t("div",{class:{"card-body-valid-select-expiration-time":!e.selectCertisign,"card-body-certisign":e.selectCertisign}},[t(c["b"],{staticClass:"text-center active-certification-title-valid"},[t(at["a"],{staticClass:"mr-1 valid-icon",attrs:{color:"blue"}},[e._v("mdi-square-edit-outline")]),e._v("\n            "+e._s(e.digital_certification_select_option)+"\n          ")],1),e.enableSelectTimeExpirationDropdown?t("div",[t(c["b"],{staticClass:"valid-select-expiration-time-description"},[e._v("\n              "+e._s(e.$t("home.digital_certification_select_time_expiration"))+"\n            ")]),t(c["b"],[t($t["a"],{attrs:{outlined:"",height:"66px",items:e.expirationOptions,"item-text":"text","item-value":"value",label:"Selecione o tempo de expira
dica",coloproctologia:"Coloproctologia",dermatologia:"Dermatologia",endocrinologia:"Endocrinologia",endocrinologia_e_metabologia:"Endocrinologia e Metabologia",endoscopia:"Endoscopia",gastroenterologia:"Gastroenterologia",genetica_medica:"Genetica medica",geriatria:"Geriatria",ginecologia_e_obstetricia:"Ginecologia e obstetricia",hematologia_e_hemoterapia:"Hematologia e hemoterapia",homeopatia:"Homeopatia",infectologia:"Infectologia",mastologia:"Mastologia",medicina_da_familia:"Medicina da Fam
dica",medicina_nuclear:"Medicina nuclear",medicina_preventiva_e_social:"Medicina preventiva e social",nefrologia:"Nefrologia",neurocirurgia:"Neurocirurgia",neurologia:"Neurologia",nutrologia:"Nutrologia",oftalmologia:"Oftalmologia",ortopedia_e_traumatologia:"Ortopedia e traumatologia",otorrinolaringologia:"Otorrinolaringologia",patologia:"Patologia",patologia_clinica_medicina_laboratorial:"Patologia clinica/medicina laboratorial",pediatria:"Pediatria",pneumologia:"Pneumologia",psiquiatria:"Psiquiatria",radiologia_e_diagnostico_por_imagem:"Radiologia e diagnostico por imagem",radioterapia:"Radioterapia",reumatologia:"Reumatologia",urologia:"Urologia",nenhuma:"Nenhuma",psicologia:"Psicologia",fisioterapia:"Fisioterapia",fonoaudiologia:"Fonoaudiologia",enfermagem:"Enfermagem",nutricionista:"Nutricionista",personal_trainer:"Personal Trainer",coach_esportivo:"Coach esportivo",clinico_geral:"Clinico Geral",oncologia_clinica:"Oncologia cl
dico e consulta com finalidades administrativas","created_at":"2020-04-03 23:48:57.224578","updated_at":"2020-04-03 23:48:57.227045"},{"id":1959,"cid_group_id":21,"code":"Z03","name":"Observa
dico na CertiSign",authentication_valid:"Autenticando m
dicos cadastrados nessa companhia",Tokens_disabled_for_all_company_users:"Tokens foram DESATIVADOS."}}},created(){this.id=this.item.id},methods:{toggleToken(e){let t={company_id:this.item.id,active:e.toString()};be.enableToken(t).then(e=>{this.message=this.messageRef[e.data[0]]}).catch(e=>{this.message=this.messageRef[e.data[0]]}).finally(e=>{this.tokenModal=!1})},closeModal(){this.tokenModal=!1},openModal(){this.tokenModal=!0}}},bf=vf,Mf=(a("2ab5"),Object(I["a"])(bf,Nf,kf,!1,null,null,null)),Pf=Mf.exports,Uf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-list"},[t("div",{staticClass:"product-list-title"},[t("div",{staticClass:"product-list-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(e.$t("external_controls.list"))+"\n      ")]),e._v("\n\n      "+e._s(e.$t("external_controls.products"))+"\n    ")])]),t("div",{staticClass:"list"},[t($a["a"],{staticClass:"mb-10"},[t("thead",[t("tr",[t("th",{staticClass:"text-left header-column"},[e._v("\n            "+e._s(e.$t("external_controls.program_name"))+"\n          ")]),t("th",{staticClass:"text-center header-column"},[e._v("\n            "+e._s(e.$t("external_controls.action"))+"\n          ")])])]),t("tbody",e._l(e.programs,(function(a,n){return t("tr",{key:n,staticClass:"table-row"},[t("td",{staticClass:"prog-items d-flex align-baseline"},[t("span",{staticClass:"d-flex align-center"},[e._v("\n              "+e._s(a.name)+"\n            ")]),e.programsWithPhone.includes(a.id)?t("div",{staticClass:"align-center d-flex"},[t(de["a"],{staticClass:"phone-field ml-6 pa-0",attrs:{"background-color":"white",height:"37","hide-details":"","hide-spin-buttons":"",outlined:"",type:"number"},on:{blur:function(t){return e.updateInvalidPhone(n)}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",{key:e.phoneUpdated,class:[a.invalid_phone?"error--text":"primary--text"]},[e._v("\n                    "+e._s(e.$t("external_controls.contact_number"))+"\n                  ")])]},proxy:!0}],null,!0),model:{value:e.programs[n].phone,callback:function(t){e.$set(e.programs[n],"phone",t)},expression:"programs[index].phone"}}),e.programs[n].invalid_phone?t("span",{key:e.phoneUpdated,staticClass:"align-center caption d-flex error--text font-weight-bold pl-6"},[e._v("\n                * "+e._s(e.$t("general.invalid_phone"))+"\n              ")]):e._e()],1):e._e()]),e.loading?e._e():t("td",{staticClass:"text-center"},[a.active?e._e():t(r["a"],{key:e.phoneUpdated,staticClass:"white--text",attrs:{disabled:e.programsWithPhone.includes(a.id)&&(e.programs[n].invalid_phone||!e.programs[n].phone),color:"primary",height:"26px",width:"78px"},on:{click:function(t){return e.activate(a)}}},[t("span",{staticClass:"prod-save"},[e._v("\n                "+e._s(e.$t("external_controls.activate"))+"\n              ")])]),a.active?t(r["a"],{attrs:{color:"primary",height:"26px",outlined:"",width:"78px"},on:{click:function(t){return e.deactivate(a)}}},[t("span",{staticClass:"prod-save"},[e._v("\n                "+e._s(e.$t("external_controls.deactivate"))+"\n              ")])]):e._e()],1)])})),0)])],1)])},yf=[],$f={props:["company"],data(){return{activePrograms:[],loading:!1,phoneMinLength:2,phoneMaxLength:17,phoneRegEx:/[0-9]/,phoneUpdated:this.$moment().unix(),prog:null,programs:[],selectedPrograms:[],programsWithPhone:[67]}},created(){this.listPrograms(),this.$bus.on("sync_selected_programs",()=>{this.sendProgramData(this.selectedPrograms)})},beforeDestroy(){this.$bus.off("sync_selected_programs")},methods:{activate(e){this.loading=!0;const t=this.programs.indexOf(e);this.programs[t].active=!0,this.selectedPrograms.push({id:e.id,company_program_phone:e.phone}),this.$nextTick(()=>{this.sendProgramData(this.selectedPrograms)})},deactivate(e){this.loading=!0;const t=this.programs.indexOf(e);this.programs[t].active=!1;this.selectedPrograms.indexOf({id:e.id,company_program_phone:e.phone});this.selectedPrograms=this.selectedPrograms.filter(t=>t.id!==e.id),this.$nextTick(()=>{this.sendProgramData(this.selectedPrograms)})},listPrograms(){let e=this.$store.state.Data.User.token,t={token:e,program_types:["EXTERNAL","INTERNAL","SYSTEM"]};this.$store.dispatch(this.$consts.USER_ACTIONS.PROGRAM_LIST,t).then(e=>{this.programs=e.data.programs,this.getCompany()}).catch(e=>{})},getCompany(){this.loading=!0;let e={company_id:this.company.id};ti.getCompany(e).then(e=>{if(e.data.program_info)for(let t in this.programs){let a=e.data.program_info.find(e=>e.id===this.programs[t].id);a?(this.programs[t].phone=a.company_program_phone,this.programs[t].invalid_phone=!1,this.programs[t].active=!0,this.selectedPrograms.push({id:this.programs[t].id,company_program_phone:this.programs[t].phone})):(this.programs[t].phone=null,this.programs[t].invalid_phone=!1,this.programs[t].active=!1)}}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},checkProgram(e){let t=this.activePrograms.filter(t=>t.id=e.id);return t.length>0},updateInvalidPhone(e){let t=this.programs[e].phone&&(this.programs[e].phone.length<this.phoneMinLength||this.programs[e].phone.length>this.phoneMaxLength||!this.phoneRegEx.test(this.programs[e].phone)||!+this.programs[e].phone);this.programs[e].phone&&!t||this.deactivate(this.programs[e]),this.programs[e].invalid_phone=!this.programs[e].phone||t;let a=this.selectedPrograms.findIndex(t=>t.id==this.programs[e].id);a>0&&!this.programs[e].invalid_phone&&(this.selectedPrograms[a].company_program_phone=this.programs[e].phone,this.$nextTick(()=>{this.sendProgramData(this.selectedPrograms)})),this.phoneUpdated=this.$moment().unix()},sendProgramData(e){this.loading=!1,this.$bus.emit("edit-company-programs",e),this.$bus.emit("edit-company-contract")}}},xf=$f,Vf=(a("8d22"),Object(I["a"])(xf,Uf,yf,!1,null,null,null)),Gf=Vf.exports,Ff=function(){var e=this,t=e._self._c;return t("div",{staticClass:"save-client-component",class:{"disabled-events":!e.enabled}},[e.message?t("div",{staticClass:"message mb-2"},[e._v(e._s(e.$t("external_controls.edit_register")))]):e._e(),t(r["a"],{attrs:{color:"primary",width:"100%",block:""},on:{click:function(t){return e.updateCompany()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)},Bf=[],wf={data(){return{enabled:!1,companyData:null,products:[],message:!1}},created(){this.$bus.on("edit-company-contract",()=>{this.enabled=!0}),this.$bus.on("get-updated-data",e=>{this.companyData=e}),this.$bus.on("disable-edit-company",()=>{this.enabled=!1}),this.$bus.on("edit-company-programs",e=>{this.products=e})},beforeDestroy(){this.$bus.off("edit-company-contract"),this.$bus.off("get-updated-data"),this.$bus.off("edit-company-programs"),this.$bus.off("disable-edit-company")},methods:{updateCompany(){this.message=!1,this.$bus.emit("sync_selected_programs");let e={company_info:{}};e.company_info={flavour_id:this.$store.state.Data.Company.info.company_info.flavour_id,inheritance:!!this.$store.state.Data.Company.info.company_info.flavour_inheritance,nick_name:this.$store.state.Data.Company.info.company_info.nick_name},e.company_id=this.$store.state.Data.Company.info.company_info.id,e.token=this.$store.state.Data.User.token,this.products&&(e.programs=this.products),this.$store.dispatch(this.$consts.USER_ACTIONS.COMPANY_UPDATE,e).then(e=>{this.message=!0,this.$bus.emit("confirm-close-edit-company-tab",this.$store.state.Data.Company.info.company_info)}).catch(e=>{})}}},Hf=wf,qf=(a("5365"),Object(I["a"])(Hf,Ff,Bf,!1,null,"51f257bf",null)),Yf=qf.exports,jf=a("0789"),Kf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"company-vouchers-tb mt-10 mb-10"},[t("div",{staticClass:"d-flex justify-space-between mb-8"},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.list")))]),e._v(" "+e._s(e.$t("external_controls.vouchers"))+"\n        ")]),e.loading?e._e():t("div",{staticClass:"search"},[t(de["a"],{staticClass:"search-field",attrs:{height:"26px",placeholder:e.$t("controls.search"),disabled:!e.vouchers||0==e.vouchers.length,outlined:""},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}})],1)]),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.vouchers,"items-per-page":e.limit,"hide-default-footer":!e.vouchers||0==e.vouchers.length},scopedSlots:e._u([{key:"item.type",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(e.$t("external_controls.voucher_type_"+a.type)))])]}},{key:"item.expiration_interval",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(a.expiration_interval)+" "+e._s(a.expiration_interval<=1?e.$t("external_controls.day"):e.$t("external_controls.days")))])]}},{key:"item.status_id",fn:function({item:a}){return[t("td",{staticClass:"text-center text-uppercase"},[e._v(e._s(e.getStatusTypeText(a.status_id)))])]}},{key:"item.actions",fn:function({item:a}){return[t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.selectVoucher(a)}}},[t("span",{staticClass:"button-text"},[e._v(e._s(e.$t("controls.edit")))])])]}}])}),t(ce["a"],{attrs:{justify:"center"}},[t(d["a"],{attrs:{transition:"fade-transition","max-width":"600px",persistent:""},model:{value:e.isEditingCompanyVoucher,callback:function(t){e.isEditingCompanyVoucher=t},expression:"isEditingCompanyVoucher"}},[t(l["a"],{staticClass:"pa-10"},[t("FormCompanyVoucher",{attrs:{type:"edit",title:e.$t("external_controls.edit_voucher"),loading:e.loading,statusTypes:e.statusTypes,discountTypes:e.discountTypes,handleSave:e.editVoucher,handleCancel:e.cancelEditVoucher}})],1)],1)],1)],1),e.isAddingVoucher?e._e():t("div",{staticClass:"mt-4"},[t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",outlined:""},on:{click:e.addVoucher}},[e._v("\n            "+e._s(e.$t("external_controls.add_voucher"))+"\n        ")])],1),t(jf["a"],[t("FormCompanyVoucher",{directives:[{name:"show",rawName:"v-show",value:e.isAddingVoucher,expression:"isAddingVoucher"}],staticClass:"mt-4",attrs:{type:"add",title:e.$t("external_controls.adding_new_voucher"),loading:e.loading,discountTypes:e.discountTypes,handleSave:e.addVoucher,handleCancel:e.cancelAddVoucher}})],1)],1)},Zf=[],Qf=function(){var e=this,t=e._self._c;return t("div",[t("h6",{staticClass:"title mb-5"},[e._v(e._s(e.title))]),t(re["a"],[t(Xn["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{items:e.companyGroups,"item-value":"id","item-text":"name",label:e.$t("external_controls.voucher_group"),"error-messages":e.groupErrors,height:"37px",outlined:"",required:""},on:{change:function(t){return e.$v.form.group_id.$touch()},blur:function(t){return e.$v.form.group_id.$touch()}},model:{value:e.form.group_id,callback:function(t){e.$set(e.form,"group_id",t)},expression:"form.group_id"}})],1),"edit"==e.type?t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{items:e.statusTypes,"item-value":"id","item-text":e.getStatusTypeText,label:e.$t("external_controls.status"),height:"37px",outlined:""},model:{value:e.form.status_id,callback:function(t){e.$set(e.form,"status_id",t)},expression:"form.status_id"}})],1):e._e(),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.voucher_amount_per_user"),"error-messages":e.amountPerUserErrors,height:"37px",outlined:"",required:""},on:{input:function(t){return e.$v.form.amount_per_user.$touch()},blur:function(t){return e.$v.form.amount_per_user.$touch()}},model:{value:e.form.amount_per_user,callback:function(t){e.$set(e.form,"amount_per_user",t)},expression:"form.amount_per_user"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.voucher_expiration_interval"),"error-messages":e.expirationIntervalErrors,height:"37px",outlined:"",required:""},on:{input:function(t){return e.$v.form.expiration_interval.$touch()},blur:function(t){return e.$v.form.expiration_interval.$touch()}},model:{value:e.form.expiration_interval,callback:function(t){e.$set(e.form,"expiration_interval",t)},expression:"form.expiration_interval"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{items:e.discountTypes,"item-value":"id","item-text":e.getDiscountTypeText,label:e.$t("external_controls.voucher_discount_type"),"error-messages":e.discountTypeErrors,height:"37px",outlined:"",required:""},on:{change:function(t){return e.$v.form.discount_type_id.$touch()},blur:function(t){return e.$v.form.discount_type_id.$touch()}},model:{value:e.form.discount_type_id,callback:function(t){e.$set(e.form,"discount_type_id",t)},expression:"form.discount_type_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.voucher_discount_value"),"error-messages":e.discountValueErrors,height:"37px",outlined:"",required:""},on:{input:function(t){return e.$v.form.discount_value.$touch()},blur:function(t){return e.$v.form.discount_value.$touch()}},model:{value:e.form.discount_value,callback:function(t){e.$set(e.form,"discount_value",t)},expression:"form.discount_value"}})],1)],1)],1)],1),t(r["a"],{staticClass:"group-text primary mr-4",attrs:{loading:e.loading},on:{click:e.save}},[e._v("\n        "+e._s("edit"==e.type?e.$t("external_controls.save"):e.$t("external_controls.add"))+"\n    ")]),t(r["a"],{attrs:{color:"#primary",loading:e.loading,outlined:""},on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("external_controls.cancel"))+"\n    ")])],1)},Jf=[],Wf={name:"FormCompanyVoucher",props:["type","title","loading","statusTypes","discountTypes","handleSave","handleCancel"],data(){return{companyGroups:[],form:{group_id:"",amount_per_user:"",expiration_interval:"",discount_type_id:"",discount_value:""}}},created(){this.getCompanyGroups(),"edit"==this.type&&this.$bus.on("edit-company-voucher-form",e=>{this.form.voucher_config_id=e.id,this.form.status_id=e.status_id,this.form.group_id=e.group_id,this.form.amount_per_user=e.amount_per_user,this.form.expiration_interval=e.expiration_interval,this.form.discount_type_id=this.discountTypes.find(t=>t.type==e.type).id,this.form.discount_value=e.discount_value}),this.$bus.on("reset-company-voucher-form",()=>{this.resetForm()}),this.$bus.on("adding-new-voucher",()=>{this.getCompanyGroups()})},beforeDestroy(){"edit"==this.type&&this.$bus.off("edit-company-voucher-form"),this.$bus.off("reset-company-voucher-form")},methods:{getCompanyGroups(){this.companyGroups=this.$store.state.Data.Company.info.company_groups||[]},getDiscountTypeText(e){return this.$t("external_controls.voucher_type_"+e.type)},getStatusTypeText(e){return this.$t("status."+e.name)},resetForm(){this.form={group_id:"",amount_per_user:"",expiration_interval:"",discount_type_id:"",discount_value:""}},save(){this.$v.$touch(),this.$v.$invalid||this.handleSave(this.form)},cancel(){this.resetForm(),this.handleCancel()}},computed:{groupErrors(){const e=[];return this.$v.form.group_id.$dirty?(this.$v.form.group_id.required||e.push(this.$t("external_controls.required")),e):e},amountPerUserErrors(){const e=[];return this.$v.form.amount_per_user.$dirty?(this.$v.form.amount_per_user.required||e.push(this.$t("external_controls.required")),this.$v.form.amount_per_user.minValue||e.push(this.$t("external_controls.minValue1")),e):e},expirationIntervalErrors(){const e=[];return this.$v.form.expiration_interval.$dirty?(this.$v.form.expiration_interval.required||e.push(this.$t("external_controls.required")),this.$v.form.expiration_interval.minValue||e.push(this.$t("external_controls.minValue1")),e):e},discountTypeErrors(){const e=[];return this.$v.form.discount_type_id.$dirty?(this.$v.form.discount_type_id.required||e.push(this.$t("external_controls.required")),e):e},discountValueErrors(){const e=[];return this.$v.form.discount_value.$dirty?(this.$v.form.discount_value.required||e.push(this.$t("external_controls.required")),this.$v.form.discount_value.minValue||e.push(this.$t("external_controls.minValue0")),this.$v.form.discount_value.maxValue||e.push(this.$t("external_controls.maxValue100")),e):e}},validations:{form:{group_id:{required:Ae["required"]},amount_per_user:{required:Ae["required"],numeric:Ae["numeric"],minValue:Object(Ae["minValue"])(1)},expiration_interval:{required:Ae["required"],numeric:Ae["numeric"],minValue:Object(Ae["minValue"])(1)},discount_type_id:{required:Ae["required"]},discount_value:{required:Ae["required"],numeric:Ae["numeric"],maxValue:Object(Ae["maxValue"])(100),minValue:Object(Ae["minValue"])(0)}}}},Xf=Wf,zf=(a("7d2e"),Object(I["a"])(Xf,Qf,Jf,!1,null,"4960722a",null)),eN=zf.exports,tN={getStatusTypes(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.STATUS_ENTITY_LIST;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getAddressByZipCode(e){return new Promise((t,a)=>{if(e=e.replace("-",""),!e||8!=e.length)return a({zipCode:e,message:"Invalid Zip Code"});C.a.get(`https://viacep.com.br/ws/${e}/json/`,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n=>{n.data.error?a({zipCode:e,message:"Invalid Zip Code"}):t(n.data)}).catch(e=>a(e))})},checkCpf(e){if(e=e.replace(/\D/g,""),11!=e.toString().length||/^(\d)\1{10}$/.test(e))return!1;var t=!0;return[9,10].forEach(a=>{var n,i=0;e.split(/(?=)/).splice(0,a).forEach((e,t)=>{i+=parseInt(e)*(a+2-(t+1))}),n=i%11,n=n<2?0:11-n,n!=e.substring(a,a+1)&&(t=!1)}),t}},aN={components:{FormCompanyVoucher:eN},props:["company"],data(){return{loading:!1,isAddingVoucher:!1,searchParam:"",limit:10,headers:[{text:this.$t("external_controls.voucher_discount_type"),align:"start",value:"type"},{text:this.$t("external_controls.voucher_discount_value"),align:"start",value:"discount_value"},{text:this.$t("external_controls.voucher_amount_per_user"),align:"start",value:"amount_per_user"},{text:this.$t("external_controls.voucher_expiration_interval"),align:"start",value:"expiration_interval"},{text:this.$t("external_controls.status"),align:"start",value:"status_id"},{text:this.$t("external_controls.action"),align:"center",value:"actions",sortable:!1}],isEditingCompanyVoucher:!1,statusTypes:[],discountTypes:[]}},created(){this.getStatusTypes(),this.getDiscountTypes()},beforeDestroy(){this.$bus.off("company-created")},methods:{getStatusTypes(){let e={entity_name:"vouchers"};tN.getStatusTypes(e).then(e=>{this.statusTypes=e}).catch(e=>{console.error(e)})},getDiscountTypes(){Fs.getDiscountTypes().then(e=>{this.discountTypes=e}).catch(e=>{console.error(e)})},getStatusTypeText(e){let t=this.statusTypes.find(t=>t.id==e);return t?this.$t("status."+t.name):""},addVoucher(e=null){if(!this.isAddingVoucher)return this.$bus.emit("adding-new-voucher"),this.isAddingVoucher=!0;e&&(this.loading=!0,e.company_id=this.company.id,e.description="",Fs.createCompanyVoucher(e).then(t=>{this.isAddingVoucher=!1;let a={id:t.data[0],type:this.discountTypes.find(t=>t.id==e.discount_type_id).type,discount_value:e.discount_value,amount_per_user:e.amount_per_user,expiration_interval:e.expiration_interval},n=this.vouchers;n.push(a),this.$store.dispatch(this.$consts.COMPANY_ACTIONS.SET_COMPANY_VOUCHERS,n),this.$bus.emit("reset-company-voucher-form")}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,this.isAddingVoucher=!1}))},editVoucher(e=null){e&&(this.loading=!0,e.company_id=this.company.id,Fs.changeCompanyVoucherConfig(e).then(t=>{this.isAddingVoucher=!1,this.$store.dispatch(this.$consts.COMPANY_ACTIONS.SET_COMPANY_VOUCHERS,this.vouchers.map(t=>(t.id==e.voucher_config_id&&(e.id=t.id,e.type=this.discountTypes.find(t=>t.id==e.discount_type_id).type,delete e["voucher_config_id"],delete e["discount_type_id"],t=e),t))),this.cancelEditVoucher()}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,this.isAddingVoucher=!1}))},cancelAddVoucher(){this.isAddingVoucher=!1},selectVoucher(e){this.isEditingCompanyVoucher=!0,setTimeout(()=>{this.$bus.emit("edit-company-voucher-form",e)},200)},cancelEditVoucher(){this.isEditingCompanyVoucher=!1,this.$bus.emit("reset-company-voucher-form")}},computed:{vouchers(){return this.$store.state.Data.Company.info.company_voucher_config||[]}}},nN=aN,iN=(a("8cce"),Object(I["a"])(nN,Kf,Zf,!1,null,"363e6a0f",null)),sN=iN.exports,oN=function(){var e=this,t=e._self._c;return t("div",{staticClass:"groups-register"},[t("div",{staticClass:"groups-register-title"},[t("div",{staticClass:"groups-register-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.registry")))]),e._v("\n      "+e._s(e.$t("external_controls.groups"))+"\n    ")])]),t("Groups",{attrs:{item:e.item}}),e.add?t("section",{staticClass:"new-group"},[t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"group",attrs:{label:e.$t("external_controls.group_name"),autocomplete:"off",maxlength:"50",height:"37px","error-messages":e.nameErrors,outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t("div",{staticClass:"delete-icon"},[t(at["a"],{staticClass:"del-icon",attrs:{size:"15",color:"white"},on:{click:function(t){return e.removeGroup()}}},[e._v("close")])],1)],1),e.invalid?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),t("div",{staticClass:"upload-section"},[e.lives&&!e.invalid?t("div",{staticClass:"d-flex mb-4 test"},[t("span",{staticClass:"confirmation"},[e._v(e._s(e.$t("external_controls.file_received")))])]):e._e(),e.processing&&!e.invalid?t("div",{staticClass:"d-flex mb-4 test"},[t("span",{staticClass:"confirmation"},[e._v(e._s(e.$t("external_controls.processing")))])]):e._e(),t(r["a"],{attrs:{color:"blue",height:"37px",width:"100%",block:"",outlined:""},on:{click:function(t){return e.$refs.uploadLives.click()}}},[t(at["a"],{attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"group-text"},[e._v(e._s(e.$t("external_controls.lives_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadLives",attrs:{type:"file",accept:"application/pdf, application/vnd.ms-excel"},on:{change:function(t){return e.assetCreate()}}})],1)],1),t("div",[t(St["a"],{attrs:{label:e.$t("external_controls.is_partner_group")},model:{value:e.is_partner_group,callback:function(t){e.is_partner_group=t},expression:"is_partner_group"}})],1),e.$v.filename.$dirty&&!e.$v.filename.required?t("div",{staticClass:"required"},[e._v(e._s(e.$t("external_controls.lives_required")))]):e._e(),t("div",{staticClass:"save-group mb-4",class:{"disabled-events":!e.enabled}},[t(r["a"],{attrs:{color:"primary",width:"100%",block:""},on:{click:function(t){return e.createGroup()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)]):e._e(),t("div",{staticClass:"mb-4"},[e.saved?t("span",{staticClass:"confirmation"},[e._v(e._s(e.$t("external_controls.create_success")))]):e._e()]),t("div",{staticClass:"mb-4"},[e.duplicated?t("span",{staticClass:"exists"},[e._v(e._s(e.$t("external_controls.group_name_exists")))]):e._e()]),e.add?e._e():t("div",{staticClass:"d-flex mb-8"},[t(r["a"],{staticClass:"group-text",attrs:{color:"blue",width:"252px",outlined:""},on:{click:function(t){return e.addGroup()}}},[e._v(e._s(e.$t("external_controls.add_group")))])],1)],1)},rN=[],lN=function(){var e=this,t=e._self._c;return t("div",{staticClass:"groups-list2"},[e._l(e.groupList,(function(a,n){return t("section",{key:n,staticClass:"section"},[t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"group",attrs:{label:e.$t("external_controls.group_name"),autocomplete:"off",maxlength:"50",height:"37px",id:"name",outlined:"",disabled:""},on:{blur:function(t){return e.checkEmptyName(a)}},model:{value:a.name,callback:function(t){e.$set(a,"name","string"===typeof t?t.trim():t)},expression:"group.name"}}),t(de["a"],{staticClass:"group",attrs:{label:e.$t("external_controls.group_internal_name"),autocomplete:"off",maxlength:"50",height:"37px",id:"name",outlined:""},on:{blur:function(t){return e.checkEmptyName(a)}},model:{value:a.internal_name,callback:function(t){e.$set(a,"internal_name","string"===typeof t?t.trim():t)},expression:"group.internal_name"}})],1),a.name?e._e():t("div",{staticClass:"err-msg red--text mt-n4 mb-2"},[e._v(e._s(e.$t("external_controls.required")))]),t("div",[t(St["a"],{attrs:{disabled:!0,label:e.$t("external_controls.is_partner_group")},model:{value:a.is_partner_group,callback:function(t){e.$set(a,"is_partner_group",t)},expression:"group.is_partner_group"}})],1),t("div",{staticClass:"save-group mb-4"},[t(r["a"],{attrs:{color:"primary",width:"100%",block:""},on:{click:function(t){return e.updateGroup(a)}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)])})),t("div",{staticClass:"mb-4"},[e.saved?t("span",{staticClass:"message"},[e._v(e._s(e.$t("external_controls.edited_success")))]):e._e()]),t("div",{staticClass:"mb-4"},[e.duplicated?t("span",{staticClass:"exists"},[e._v(e._s(e.$t("external_controls.group_name_exists")))]):e._e()])],2)},cN=[],dN={props:["item"],data(){return{groups:[],error:!1,invalid:!1,fileUrl:null,enabled:!1,newGroup:!1,id:null,name:"",token:this.$store.state.Data.User.token,groupList:[],saved:!1,status:null,filtered:null,update:"",processed:!1,divergences:null,total_records:null,duplicated:!1,newFile:!1}},created(){this.item&&this.listGroups(),this.$bus.on("new-group-created",e=>{this.listGroups()}),this.$bus.on("enable-groups",e=>{this.id=e,this.listGroups()}),this.beneficiaryStatus()},beforeDestroy(){this.$bus.off("new-group-created")},methods:{openUp(e){let t=document.getElementById("uploadLives_"+e.id);t.click()},assetCreate(e){this.invalid=!1,this.saved=!1,this.file=event.target.files[0];let t=this.file.name,a=t.substr(t.length-4);this.invalid="xlsx"!=a;let n={token:this.token,file:this.file,path:"contracts",make_unique:"true"};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,n).then(e=>{this.newFile=!0,this.filename=e.data[t].completeUrl,this.data.enabled=!0})},updateGroup(e){if(!this.error){this.saved=!1,this.duplicated=!1;let t={token:this.token,group_id:e.id,group_info:{internal_name:e.internal_name}};!0===this.newFile&&(t.group_info.filepath=this.filename),this.$store.dispatch(this.$consts.USER_ACTIONS.GROUP_UPDATE,t).then(e=>{this.saved=!0,this.newFile=!0,setTimeout(()=>{this.saved=!1},2e3)}).catch(e=>{"group_company_cannot_be_duplicated"==e.message&&(this.duplicated=!0)})}},listGroups(){let e={company_id:this.item.id};ti.getGroups(e).then(e=>{this.groupList=e.group_list,this.$store.dispatch(this.$consts.COMPANY_ACTIONS.SET_GROUPS,this.groupList)}).catch(e=>console.error(e))},checkEmptyName(e){e.name||(this.error=!0),e.enabled=!0},beneficiaryStatus(){let e={token:this.token,company_id:this.item.id};this.$store.dispatch(this.$consts.USER_ACTIONS.BENEFICIARY_STATUS,e).then(e=>{this.status=e.data.createBeneficiary.job_info.status,this.update=e.data.createBeneficiary.job_info.updated_at.substr(0,10),this.divergences=e.data.createBeneficiary.job_info.inconsistencies_found,this.total_records=e.data.createBeneficiary.job_info.total_records,this.status?this.processed=!0:this.processed=!1}).catch(e=>{})}}},mN=dN,uN=(a("44fb"),Object(I["a"])(mN,lN,cN,!1,null,null,null)),AN=uN.exports,_N={props:["item"],components:{Groups:AN},data(){return{error:!1,invalid:!1,name:"",enabled:!0,token:this.$store.state.Data.User.token,file:null,filename:"",saved:!1,add:!1,lives:!1,processing:!1,duplicated:!1,is_partner_group:!1}},created(){},methods:{addGroup(){this.add=!0,this.saved=!1,this.lives=!1},removeGroup(){this.add=!1,this.resetGroupFields()},assetCreate(){this.invalid=!1,this.saved=!1,this.file=event.target.files[0];let e=this.file.name,t=e.substr(e.length-3),a=e.substr(e.length-4);if("xlsx"==a||"xls"==t||"csv"==t){let t={token:this.token,file:this.file,path:"contracts",make_unique:"true"};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,t).then(t=>{this.filename=t.data[e].completeUrl,this.enabled=!0,this.lives=!0})}else this.invalid=!0},createGroup(){if(this.duplicated=!1,this.$v.$touch(),!this.$v.$invalid){let e={token:this.token,company_id:this.item.id,filepath:this.filename,name:this.name,is_partner_group:this.is_partner_group};this.$store.dispatch(this.$consts.USER_ACTIONS.GROUP_CREATE,e).then(e=>{this.saved=!0,this.add=!1,this.processing=!0,this.sendGroupInfo(),this.resetGroupFields(),setTimeout(()=>{this.saved=!1},2e3)}).catch(e=>{"group_company_cannot_be_duplicated"==e.message&&(this.duplicated=!0)})}},sendGroupInfo(){this.$bus.emit("new-group-created")},resetGroupFields(){this.name="",this.filename=null,this.$v.$reset()}},validations:{name:{required:Ae["required"]},filename:{required:Ae["required"]}},computed:{nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),e):e},fileErrors(){const e=[];return this.$v.filename.$dirty?(!this.$v.filename.required&&e.push(this.$t("access_controls.required")),e):e}}},EN=_N,IN=(a("5cac"),Object(I["a"])(EN,oN,rN,!1,null,null,null)),hN=IN.exports,ON={components:{EditCompanyData:Ef,EditCompanyContract:ff,EnableExternalCompanyToken:Pf,EditProductsList:Gf,SaveComponent:Yf,EditCompanyVouchers:sN,EditCompanyGroups:hN,DeleteComponent:SL},props:["item"],data(){return{loading:!0}},created(){this.getCompany()},methods:{getCompany(){this.loading=!0;let e={company_id:this.item.id,redux:!1};ti.getCompany(e).then(e=>{this.$store.state.Data.Company.info=e.data,this.$store.dispatch(this.$consts.COMPANY_ACTIONS.SET,e.data),this.getCompanyGroups()}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})}},getCompanyGroups(){let e={company_id:this.item.id};ti.getGroups(e).then(e=>{this.$store.dispatch(this.$consts.COMPANY_ACTIONS.SET_GROUPS,e.group_list)}).catch(e=>console.error(e))}},pN=ON,SN=(a("5ddc"),Object(I["a"])(pN,lf,cf,!1,null,"5a484298",null)),CN=SN.exports,TN=function(){var e=this,t=e._self._c;return t("div",{staticClass:"test"},[t("CallList",{attrs:{item:e.item}}),t("UploadComponent",{attrs:{item:e.item}}),t("SaveComponent",{attrs:{item:e.item}}),e.isView?t("DeleteComponent",{attrs:{item:e.item}}):e._e()],1)},RN=[],DN=function(){var e=this,t=e._self._c;return t("div",{staticClass:"call-list"},[t("div",{staticClass:"call-title"},[t("div",{staticClass:"call-title-text"},[e.item?e._e():t("span",{staticClass:"font-weight-bold"},[e._v("\n                "+e._s(e.$t("external_controls.new"))+"\n            ")]),e._v(" "+e._s(e.$t("external_controls.list_title"))+"\n        ")])]),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"list-input mr-3",attrs:{label:e.$t("external_controls.list_name"),"error-messages":e.nameErrors,maxlength:"50",height:"37px",outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t(se["a"],{staticClass:"select-company",attrs:{label:e.$t("external_controls.company"),"search-input":e.searchCompanies,items:e.companies,disabled:e.isEdit,"error-messages":e.companyErrors,loading:e.loadingCompanies,"item-text":"name","return-object":"",height:"37px",outlined:""},on:{"update:searchInput":function(t){e.searchCompanies=t},"update:search-input":function(t){e.searchCompanies=t},blur:function(t){return e.$v.selectedCompany.$touch()}},model:{value:e.selectedCompany,callback:function(t){e.selectedCompany=t},expression:"selectedCompany"}})],1),e.success?t("div",{staticClass:"mb-3"},[t("span",{staticClass:"green--text"},[e._v(e._s(e.$t("external_controls.success_create"))+"!")])]):e._e(),e.update?t("div",{staticClass:"mb-3"},[t("span",{staticClass:"green--text"},[e._v(e._s(e.$t("external_controls.success_update"))+"!")])]):e._e(),e.duplicated?t("div",{staticClass:"mb-3"},[t("span",{staticClass:"red--text"},[e._v(e._s(e.$t("external_controls.already_exists"))+"!")])]):e._e()])},gN=[],LN={props:["item"],data(){return{loadingCompanies:!1,searchTimeout:null,searchCompanies:"",name:"",companies:null,selectedCompany:"",success:!1,deleteItem:null,isEdit:!1,id:null,company_id:null,update:!1,duplicated:!1,company:null,path:"",data:null}},created(){setTimeout(()=>{this.listCompanies()},500),this.$bus.on("check-new-call-list",()=>{this.prepareData()}),this.$bus.on("success",()=>{this.item?(this.sucess=!0,this.duplicated=!1,this.updated=!1):(this.$v.$reset(),this.name="",this.selectedCompany="",this.success=!0,this.duplicated=!1)}),this.item&&(this.getCallList(this.item.id),this.$bus.emit("is-view")),this.$bus.on("check-delete-list",()=>{this.deleteList()}),this.item&&(this.isEdit=!0),this.$bus.on("update-done",()=>{this.update=!0,this.success=!1,this.duplicated=!1}),this.$bus.on("update-list",()=>{this.update=!0,this.success=!1,this.duplicated=!1}),this.$bus.on("duplicated-list",()=>{this.duplicated=!0})},beforeDestroy(){this.$bus.off("check-new-call-list"),this.$bus.off("success"),this.$bus.off("check-delete-list"),this.$bus.off("update-done"),this.$bus.off("duplicated-list")},methods:{listCompanies(e=null){this.loadingCompanies=!0;let t={redux:!0};e&&(t.filters={name:e}),this.searchTimeout=setTimeout(()=>{be.listCompany(t).then(e=>{this.companies=e.data.company_list,this.isEdit&&(this.company=this.companies.filter(e=>e.id=this.data.id),this.selectedCompany=this.company[0].name)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingCompanies=!1})},400)},prepareData(){if(this.success=!1,this.update=!1,this.duplicated=!1,this.$v.$touch(),this.$v.$invalid)return!1;{let e={token:this.$store.state.Data.User.token,name:this.name,company_id:this.isEdit?this.company_id:this.selectedCompany.id,id:this.isEdit?this.id:null};this.$bus.emit("save-new-call-list",e)}},getCallList(e){let t={token:this.$store.state.Data.User.token,id:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_LIST,t).then(e=>{this.data=e.data,this.name=this.data.name,this.company_id=this.data.company_id,this.id=this.data.id,this.path=this.data.file_url}).catch(e=>{console.error(e)})},deleteList(){this.deleteItem=this.item,this.$bus.emit("delete-call-list",this.deleteItem)},getUpdateMessage(){this.update=!0}},computed:{nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),e):e},companyErrors(){const e=[];return this.$v.selectedCompany.$dirty?(!this.$v.selectedCompany.required&&e.push(this.$t("access_controls.required")),e):e}},watch:{searchCompanies(e){clearTimeout(this.searchTimeout),this.listCompanies(e)}},validations:{name:{required:Ae["required"],minLength:Object(Ae["minLength"])(3)},selectedCompany:{required:Ae["required"]}}},fN=LN,NN=(a("ec85"),Object(I["a"])(fN,DN,gN,!1,null,null,null)),kN=NN.exports,vN=function(){var e=this,t=e._self._c;return t("div",{staticClass:"save-calls-component"},[t(r["a"],{attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.checkSaveRequests()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)},bN=[],MN={props:["item"],data(){return{file:null,loading:!1,isEdit:!1}},created(){this.$bus.on("save-new-call-list",e=>{this.saveData(e)}),this.$bus.on("file-upload",e=>{this.file=e}),this.item&&(this.isEdit=!0)},beforeDestroy(){this.$bus.off("save-new-call-list"),this.$bus.off("file-upload")},methods:{checkSaveRequests(){this.$bus.emit("check-new-call-list")},saveData(e){if(this.getFileUrl(),this.loading=!0,this.file||this.isEdit){let t=e;t.file=this.file,this.$store.dispatch(this.$consts.USER_ACTIONS.NEW_CALL_LIST,e).then(e=>{this.loading=!1,this.saveSuccessful(),this.updateSuccessful()}).catch(e=>{"list already exists"==e.message&&this.duplicatedList(),this.loading=!1})}else this.$bus.emit("file-missing"),this.loading=!1},getFileUrl(){return this.file},listCallList(){let e=this.$store.state.Data.User.token,t={token:e,limit:10,offset:0};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_CALL_LIST,t).then(e=>{let t=e.data.reason_list;this.$bus.emit("updated-call-list-save",t)}).catch(e=>{})},saveSuccessful(){this.isEdit?this.$bus.emit("update-list"):setTimeout(()=>{this.$bus.emit("confirm-close-call-list")},3e3)},updateSuccessful(){this.isEdit?this.$bus.emit("update-done"):this.$bus.emit("success")},duplicatedList(){this.$bus.emit("duplicated-list")}}},PN=MN,UN=(a("d888"),Object(I["a"])(PN,vN,bN,!1,null,"6de6294d",null)),yN=UN.exports,$N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-calls-component mb-4"},[e.edit&&!e.csvFile?t("div",{attrs:{id:"embedParent"}},[t("embed",{staticClass:"pdfFile",attrs:{src:e.path,id:"embedChild"}})]):e._e(),e.edit||e.csvFile?e._e():t("div",{attrs:{id:"embedNewParent"}},[t("embed",{staticClass:"preview",attrs:{src:e.preview,id:"embedNewChild"}})]),e.item&&e.csvFile||e.path&&e.csvFile?t("CsvData",{attrs:{item:e.item,parsed:e.parsed,index:e.index}}):e._e(),e.path&&e.csvFile?t(r["a"],{staticClass:"file",attrs:{text:""}},[t("a",{staticClass:"download",attrs:{href:"#",download:e.path}},[t("span",{staticClass:"download"},[e._v(e._s(e.$t("external_controls.file"))+": "+e._s(e.filename))])])]):e._e(),t("div",{staticClass:"message"},[e.invalid?t("span",{staticClass:"a-msg red--text"},[e._v(e._s(e.$t("external_controls.invalid_file")))]):e._e(),e.invalidSize?t("span",{staticClass:"a-msg red--text"},[e._v(e._s(e.$t("external_controls.invalid_file_size")))]):e._e(),e.missing?t("span",{staticClass:"a-msg red--text"},[e._v(e._s(e.$t("external_controls.required_file")))]):e._e(),e.success?t("span",{staticClass:"a-msg green--text"},[e._v(e._s(e.$t("external_controls.success_upload")))]):e._e()]),t(r["a"],{attrs:{color:"blue",height:"37px",width:"100%",loading:e.loading,block:"",outlined:""},on:{click:function(t){return e.$refs.listUpload.click()}}},[t(at["a"],{attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"btn-text-up"},[e._v(e._s(e.$t("external_controls.list_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"listUpload",attrs:{type:"file",accept:".csv,application/pdf"},on:{change:function(t){return e.uploadList()}}})],1)],1)},xN=[],VN={props:["item"],components:{CsvData:Qh},data(){return{invalid:!1,path:"",success:!1,invalidSize:!1,missing:!1,loading:!1,uploaded:!1,edit:!1,preview:!1,filename:"",fileType:null,index:[],parsed:[]}},created(){this.$bus.on("check-file-upload",()=>{this.getFileUrl()}),this.$bus.on("success",()=>{this.success=!1}),this.$bus.on("file-missing",()=>{this.missing=!0}),this.$bus.on("duplicated-list",()=>{this.missing=!1,this.success=!1}),this.item&&(this.path=this.item.file_url,this.edit=!0),this.getFilename()},beforeDestroy(){this.$bus.off("success"),this.$bus.off("file-missing"),this.$bus.off("duplicated-list")},methods:{uploadList(){this.invalid=!1,this.missing=!1,this.success=!1,this.invalidSize=!1;let e=event.target.files[0];if(e){let t=e.name;this.fileType=e.type;let a=e.size;e.webkitRelativePath;if(a>15728640)return this.invalidSize=!0,!1;let n=e.name.substr(-3);if("application/pdf"!=this.fileType&&"csv"!=n)return this.invalid=!0,!1;{this.loading=!0,this.invalid=!1;let a=this.$store.state.Data.User.token,n={file:e,token:a};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,n).then(e=>{this.path=e.data[t].completeUrl,this.preview=e.data[t].completeUrl,this.success=!0,this.missing=!1,this.invalid=!1,this.fileSize=!1,e.data.parsed_csv&&(this.index=e.data.parsed_csv.indexes,this.parsed=e.data.parsed_csv.parsed_values,this.sendCsvData()),this.loading=!1,this.getFilename(),this.sendFilePath(),this.edit&&!this.csvFile&&this.previewFiles("embedParent","embedChild"),this.edit||this.csvFile||this.previewFiles("embedNewParent","embedNewChild")}).catch(e=>{console.log("error",e),this.loading=!1})}}},getFilename(){if(this.path){let e=this.path.lastIndexOf("/");this.filename=this.path.substr(e+1)}},sendFilePath(){this.$bus.emit("file-upload",this.preview)},previewFiles(e,t){let a=document.getElementById(e),n=document.getElementById(t);a.removeChild(n);let i=document.createElement("embed");i.width="100%",i.height="600px",i.src=this.path,i.id=t,a.appendChild(i)},sendCsvData(){let e={index:this.index,parsed:this.parsed};this.$bus.emit("new-csv-data",e)}},computed:{csvFile(){let e=this.path.substr(-3);return"csv"==e}}},GN=VN,FN=(a("fd11"),Object(I["a"])(GN,$N,xN,!1,null,"c3d02b24",null)),BN=FN.exports,wN=function(){var e=this,t=e._self._c;return t("div",{staticClass:"delete-calls-component"},[t(r["a"],{attrs:{color:"blue",width:"100%",loading:e.loading,outlined:"",block:""},on:{click:function(t){return e.requestDelete()}}},[t(at["a"],{attrs:{size:"18"}},[e._v("$vuetify.icons.custom_delete")]),t("span",{staticClass:"delete-calls-text"},[e._v(e._s(e.$t("external_controls.delete")))])],1),t("DeleteConfirmation")],1)},HN=[],qN=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"delete-call-section"},[t(l["a"],{staticClass:"del-section"},[t(c["c"],{staticClass:"del-title white--text"},[t("span",{staticClass:"dtitle"},[e._v(e._s(e.$t("attendance.nav_confirm")))]),t("img",{staticClass:"del-close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),t(c["b"],{staticClass:"del-desc text-justify mb-3"},[e._v(e._s(e.$t("external_controls.confirm_delete")))]),t(c["a"],{staticClass:"del-buttons"},[t(r["a"],{staticClass:"primary--text ml-1",attrs:{color:"white",height:"37px",width:"226px",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"226px"},on:{click:function(t){return e.confirmDelete()}}},[e._v(e._s(e.$t("external_controls.confirm")))])],1)],1)],1)])],1)},YN=[],jN={data(){return{dialog:!1,item:null,data:null}},created(){this.$bus.on("request-delete-list",e=>{this.dialog=e.dialog,this.data=e.id})},beforeDestroy(){this.$bus.off("request-delete-list"),this.$bus.off("confirm-delete-call-list")},methods:{confirmDelete(){this.data;this.$bus.emit("confirm-delete-call-list",this.data),this.dialog=!1}}},KN=jN,ZN=(a("6401"),Object(I["a"])(KN,qN,YN,!1,null,null,null)),QN=ZN.exports,JN={props:["item"],components:{DeleteConfirmation:QN},data(){return{data:null,loading:!1,isEdit:!1}},created(){this.$bus.on("delete-call-list",e=>{}),this.item&&(this.isEdit=!0),this.$bus.on("confirm-delete-call-list",e=>{this.deleteCallList()})},beforeDestroy(){this.$bus.off("confirm-delete-call-list"),this.$bus.off("delete-call-list")},beforeUpdate(){this.$bus.off("confirm-delete-call-list"),this.$bus.off("delete-call-list")},methods:{checkDeleteList(){this.$bus.emit("check-delete-list")},deleteCallList(){this.loading=!0;let e=this.$store.state.Data.User.token,t={token:e,id:this.item.id};this.$store.dispatch(this.$consts.USER_ACTIONS.DELETE_CALL_LIST,t).then(e=>{this.loading=!1,this.$bus.off("delete-call-list"),this.$bus.off("confirm-delete-call-list"),this.listCallList(),this.$bus.emit("successfully-deleted-call-list",this.item)}).catch(e=>{this.loading=!1})},listCallList(){let e=this.$store.state.Data.User.token,t={token:e,limit:10,offset:0};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_CALL_LIST,t).then(e=>{let t=e.data.reason_list;this.$bus.emit("updated-call-list",t)}).catch(e=>{})},requestDelete(){let e={dialog:!0,id:this.item[0]};this.$bus.emit("request-delete-list",e)}}},WN=JN,XN=(a("3b0f"),Object(I["a"])(WN,wN,HN,!1,null,"67f37d0c",null)),zN=XN.exports,ek={props:["item"],components:{CallList:kN,SaveComponent:yN,UploadComponent:BN,DeleteComponent:zN},data(){return{isView:!1}},created(){this.$bus.on("is-view",()=>{this.isView=!0})}},tk=ek,ak=(a("3a8b"),Object(I["a"])(tk,TN,RN,!1,null,null,null)),nk=ak.exports,ik=function(){var e=this,t=e._self._c;return t("div",{staticClass:"payer-components mb-8"},[t("NewPayer"),t("PayerContract"),t("SaveComponent"),t("ForeignCnpjNavegation")],1)},sk=[],ok=function(){var e=this,t=e._self._c;return t("div",{staticClass:"payer"},[t("div",{staticClass:"payer-title"},[t("div",{staticClass:"payer-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.new")))]),e._v("\n      "+e._s(e.$t("external_controls.payer2"))+"\n    ")])]),t("div",{staticClass:"payer-sub"},[t("span",{staticClass:"payer-subtitle"},[e._v(e._s(e.$t("external_controls.foreign")))])]),t("div",{staticClass:"radio-btns"},[t(Qs["a"],{attrs:{row:""},on:{change:function(t){return e.changeCnpj(e.foreign)}},model:{value:e.foreign,callback:function(t){e.foreign=t},expression:"foreign"}},[t(Zs["a"],{attrs:{label:e.$t("external_controls.no"),value:0}}),t(Zs["a"],{attrs:{label:e.$t("external_controls.yes"),value:1}})],1)],1),t("div",{staticClass:"cnpj d-flex"},[0==e.foreign?t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##.###.###/####-##",expression:"'##.###.###/####-##'"}],staticClass:"input1 mr-6",attrs:{label:e.$t("external_controls.cnpj"),height:"37px",id:"cnpj",loading:e.loading,outlined:""},on:{blur:function(t){return e.checkUniqueCnpj()}},model:{value:e.cnpj,callback:function(t){e.cnpj=t},expression:"cnpj"}}):e._e(),1==e.foreign?t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"###############",expression:"'###############'"}],staticClass:"input1 mr-6",attrs:{label:e.$t("external_controls.registry_number"),"error-messages":e.registryErrors,loading:e.loading,height:"37px",outlined:""},on:{change:function(t){return e.checkUniqueCnpj()},blur:function(t){return e.$v.registry.$touch()}},model:{value:e.registry,callback:function(t){e.registry=t},expression:"registry"}}):e._e(),t(de["a"],{staticClass:"input2b",attrs:{label:e.$t("external_controls.fantasy_name"),height:"37px",outlined:""},model:{value:e.fantasia,callback:function(t){e.fantasia="string"===typeof t?t.trim():t},expression:"fantasia"}}),t(de["a"],{staticClass:"i-cnpj",attrs:{label:e.$t("external_controls.country"),height:"37px","error-messages":e.countryErrors,outlined:""},on:{blur:function(t){return e.$v.country.$touch()}},model:{value:e.country,callback:function(t){e.country="string"===typeof t?t.trim():t},expression:"country"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input3 mr-6",attrs:{label:e.$t("external_controls.social"),height:"37px","error-messages":e.nameErrors,outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t(de["a"],{staticClass:"input1",attrs:{label:e.$t("external_controls.ie"),height:"37px",outlined:""},model:{value:e.ie,callback:function(t){e.ie="string"===typeof t?t.trim():t},expression:"ie"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input3b",attrs:{label:e.$t("external_controls.main_address"),height:"37px","error-messages":e.addressErrors,outlined:""},on:{blur:function(t){return e.$v.address.$touch()}},model:{value:e.address,callback:function(t){e.address="string"===typeof t?t.trim():t},expression:"address"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input1 mr-6",attrs:{label:e.$t("external_controls.activity"),height:"37px","error-messages":e.activityErrors,outlined:""},on:{blur:function(t){return e.$v.activity.$touch()}},model:{value:e.activity,callback:function(t){e.activity="string"===typeof t?t.trim():t},expression:"activity"}}),t(de["a"],{staticClass:"input1",attrs:{label:e.$t("external_controls.legal"),"error-messages":e.juridicaErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.juridica.$touch()}},model:{value:e.juridica,callback:function(t){e.juridica="string"===typeof t?t.trim():t},expression:"juridica"}})],1),e.errors?t("div",{staticClass:"invalid-cnpj"},[e._v(e._s(e.error))]):e._e(),t("div",{staticClass:"mb-3"},[t("span",{staticClass:"payer-subtitle"},[e._v(e._s(e.$t("external_controls.additional_info")))])]),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input1 mr-6",class:{"disabled-events":!e.isValid},attrs:{label:e.$t("external_controls.intern_manager"),"error-messages":e.internalManagerErrors,height:"37px",maxlength:"50",disabled:!e.isValid,outlined:""},on:{blur:function(t){return e.$v.internal_manager_name.$touch()}},model:{value:e.internal_manager_name,callback:function(t){e.internal_manager_name=t},expression:"internal_manager_name"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],staticClass:"input1",class:{"disabled-events":!e.isValid},attrs:{label:e.$t("external_controls.phone"),"error-messages":e.internalManagerPhoneErrors,height:"37px",disabled:!e.isValid,outlined:""},on:{blur:function(t){return e.$v.internal_manager_phone.$touch()}},model:{value:e.internal_manager_phone,callback:function(t){e.internal_manager_phone=t},expression:"internal_manager_phone"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input1 mr-6",class:{"disabled-events":!e.isValid},attrs:{label:e.$t("external_controls.payer_manager"),"error-messages":e.payerManagerErrors,height:"37px",maxlength:"50",disabled:!e.isValid,outlined:""},on:{blur:function(t){return e.$v.payer_manager_name.$touch()}},model:{value:e.payer_manager_name,callback:function(t){e.payer_manager_name=t},expression:"payer_manager_name"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],staticClass:"input1",class:{"disabled-events":!e.isValid},attrs:{label:e.$t("external_controls.phone"),"error-messages":e.payerManagerPhoneErrors,height:"37px",disabled:!e.isValid,outlined:""},on:{blur:function(t){return e.$v.payer_manager_phone.$touch()}},model:{value:e.payer_manager_phone,callback:function(t){e.payer_manager_phone=t},expression:"payer_manager_phone"}})],1)])},rk=[],lk={props:["item"],mixins:[ve],data(){return{foreign:0,loading:!1,cnpj:"",fantasia:"",country:"Brasil",name:"",ie:"",address:"",activity:"",juridica:"",invalidData:[],index_type:["IGPM","IPCA"],frequency:["ANUAL"],errors:[],isValid:!1,error:"",internal_manager_name:"",internal_manager_phone:"",payer_manager_name:"",payer_manager_phone:"",message:"",dialog:!1,hasError:!1,invalidData:[],payerData:"",contractData:[],registry:"",document:"",exists:!1}},created(){this.$bus.on("close-cnpj-dialog",e=>{this.payerData="",this.country="",this.address="",this.activity="",this.fantasia="",this.name="",this.juridica="",this.cnpj="",this.isValid=!0}),this.$bus.on("cancel-foreign-cnpj",e=>{this.foreign=0,this.isValid=!1}),this.$bus.on("new-payer",()=>{this.getContractData()}),this.$bus.on("new-payer-contract",e=>{this.contractData=e,this.sendData()})},beforeDestroy(){this.$bus.off("cancel-foreign-cnpj"),this.$bus.off("close-cnpj-dialog"),this.$bus.off("new-payer"),this.$bus.off("new-payer-contact")},methods:{changeCnpj(e){1==e?(this.dialog=!0,this.$bus.emit("payer-cnpj-dialog",this.dialog),this.$bus.emit("enable-payer-contract")):(this.foreign=0,this.isValid=!1)},checkCnpj(){if(1==this.foreign)return!1;this.hasError=!1,this.isValid=!1;let e=document.getElementById("cnpj").value;if(e=e.replace(".",""),e=e.replace("-",""),e=e.replace("/",""),e=e.replace(".",""),e){let t={type:"cnpj",info:e};this.loading=!0,be.checkCnpj(t).then(e=>{this.payerData=e.data.data,this.address=this.payerData.address.public_place+", "+this.payerData.address.number+" - "+this.payerData.address.neighborhood+", "+this.payerData.address.city+" - "+this.payerData.address.uf,this.activity=this.payerData.cnaes[0].description,this.name=this.payerData.name,this.juridica=this.payerData.legal_nature.description,this.fantasia=this.payerData.fantasy_names[0],this.document=this.payerData.cnpj,this.isValid=!0,this.disabled=!1,this.exists=!1}).catch(e=>{this.isValid=!1,console.error(e)}).finally(()=>{this.loading=!1})}},sendData(){if(this.$v.$touch(),!this.$v.$invalid&&!this.exists)if(0==this.foreign){let e={name:this.name,payer_status:this.payerData.situacao,document:this.document,trading_name:this.fantasia,country:this.country,address:this.address,economic_activity:this.activity,legal_nature:this.payerData.natureza_juridica,status:this.payerData.situacao,internal_manager_name:this.internal_manager_name,internal_manager_phone:this.getRawPhone(this.internal_manager_phone),company_manager_name:this.payer_manager_name,company_manager_phone:this.getRawPhone(this.payer_manager_phone),dialog:!1,expiration_date:this.contractData.expiration_date,readjustment_frequency:this.contractData.readjustment_frequency,index_type:this.contractData.index_type,ie:this.ie,file:this.contractData.file};this.$bus.emit("new-payer-setup",e)}else{let e={name:this.name,document:this.registry,trading_name:this.fantasia,country:this.country,address:this.address,economic_activity:this.activity,legal_nature:this.payerData.natureza_juridica,internal_manager_name:this.internal_manager_name,internal_manager_phone:this.getRawPhone(this.internal_manager_phone),company_manager_name:this.payer_manager_name,company_manager_phone:this.getRawPhone(this.payer_manager_phone),dialog:!1,expiration_date:this.contractData.expiration_date,readjustment_frequency:this.contractData.readjustment_frequency,index_type:this.contractData.index_type,file:this.contractData.file,ie:this.ie};this.$bus.emit("new-payer-setup",e)}},getRawPhone(e){let t=e.replace(/[-()\s]/g,"");return t},getContractData(){this.$bus.emit("payer-contract")},checkUniqueCnpj(){this.isValid=!0;let e=this.getRawCnpjHelper(this.cnpj);this.error="";let t=this.$store.state.Data.User.token,a={token:t,cnpj:e||this.registry,type:"payer"};this.$store.dispatch(this.$consts.USER_ACTIONS.CHECK_UNIQUE_CNPJ,a).then(e=>{this.situation=e.data.msg,"document not found"==this.situation?(this.exists=!1,this.error=""):(this.exists=!0,this.isValid=!1,this.error="CNPJ/Registro j
dico"),this.$bus.emit("restart-queue-update"),this.$bus.emit("close-stream"),this.$bus.emit("end-session"),this.$bus.emit("confirm-close-patient-dialog",this.$store.state.Data.CaseAttendance),this.$bus.emit("patient-canceled"),this.$store.dispatch(this.$consts.SCREENING_ACTIONS.CLEAR),setTimeout(()=>{this.$bus.emit("toggle-loading",!1)},2e3)}))}).finally(()=>{this.checkingStatusLoading=!1})},openEmergencyTab(e){this.emergencyTabs.push(e),this.filterEmergencyItems(),this.persistEmergencyTabs(),this.getEmergencyTabs(),this.tabClick("emergency",200),this.$bus.emit("stop-queue-update",!0)},getEmergencyPatientName(){let e=JSON.parse(localStorage.getItem("emergencyList"));e&&(this.emergencyPatient=e[0].name)},getAsoPatientName(){let e=JSON.parse(localStorage.getItem("asoList"));e&&(this.asoPatient=e[0].name)},openAsoTab(e){this.asoTabs.push(e),this.filterAsoItems(),this.persistAsoTabs(),this.getAsoTabs(),this.tabClick("aso",200),this.$bus.emit("aso-data",e)},handleCloseAsoTab(e){let t=this.persistentAsoTabs.indexOf(e);this.persistentAsoTabs.splice(t,1),this.persistentAsoTabs.length>0&&localStorage.setItem("asoList",JSON.stringify(this.persistentAsoTabs)),this.clearAsoTabs(),this.active_tab=0,this.active_emergency_tab=null}},computed:{...Object(K["b"])("Data/CaseAttendance",["getCaseAttendanceHeaders"]),patientInfo(){return this.$store.getters[this.$consts.PATIENT_ACTIONS.GET_PATIENT]||{}},featureEnabled(){return this.isFeatureEnabled}}},LT=gT,fT=(a("8bdd"),Object(I["a"])(LT,ct,dt,!1,null,"03a1e304",null)),NT=fT.exports,kT=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabs-controls mt-4"},[[t(ot["a"],{staticClass:"border",model:{value:e.all_tabs,callback:function(t){e.all_tabs=t},expression:"all_tabs"}},[t(it["a"],{on:{click:function(t){return e.changeTab({tab:1,list:"main"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.$t("controls.controls")))])]),e._l(e.controlTabList,(function(a,n){return t(it["a"],{key:"c-"+n,attrs:{id:"access"},on:{click:function(t){return e.changeTab({tab:n+1,list:"access"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.$t("controls.new_access")))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeTab(a)}}},[e._v("x")])])})),e._l(e.persistEditAccessControlList,(function(a,n){return t(it["a"],{key:"ac-"+n,attrs:{id:"editAccess"},on:{click:function(t){return e.changeTab({tab:n+1,list:"editAccess"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.name))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeEditAccessControlTab(a)}}},[e._v("x")])])})),e._l(e.clientTabList,(function(a,n){return t(it["a"],{key:"cl-"+n,attrs:{id:"company"},on:{click:function(t){return e.changeTab({tab:n+1,list:"create"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.title))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeNewCompanyTab(a)}}},[e._v("x")])])})),e._l(e.persistentEditCompanyList,(function(a,n){return t(it["a"],{key:"cr-"+n,attrs:{id:"editCompany"},on:{click:function(t){return e.changeTab({tab:n+1,list:"editCompany"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.name))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeEditCompanyTab(a)}}},[e._v("x")])])})),e._l(e.persistentCallList,(function(a,n){return t(it["a"],{key:"call-"+n,attrs:{id:"callList"},on:{click:function(t){return e.changeTab({tab:n+1,list:"callList"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.title))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeCallList(a)}}},[e._v("x")])])})),e._l(e.persistentViewCallList,(function(a,n){return t(it["a"],{key:"view-call-"+n,attrs:{id:"viewCallList"},on:{click:function(t){return e.changeTab({tab:n+1,list:"viewCallList"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.name))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeViewCallList(a)}}},[e._v("x")])])})),e._l(e.persistentPayerList,(function(a,n){return t(it["a"],{key:"payer-"+n,attrs:{id:"newPayer"},on:{click:function(t){return e.changeTab({tab:n+1,list:"newPayer"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.title))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeNewPayer(a)}}},[e._v("x")])])})),e._l(e.persistentEditPayerList,(function(a,n){return t(it["a"],{key:"edit-payer-"+n,attrs:{id:"editPayer"},on:{click:function(t){return e.changeTab({tab:n+1,list:"editPayer"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.name))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeEditPayer(a)}}},[e._v("x")])])})),e._l(e.persistentReasonList,(function(a,n){return t(it["a"],{key:"reason-"+n,attrs:{id:"newReason"},on:{click:function(t){return e.changeTab({tab:n+1,list:"newReason"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.title))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeNewReason(a)}}},[e._v("x")])])})),e._l(e.persistentEditReasonList,(function(a,n){return t(it["a"],{key:"ed-reason-"+n,attrs:{id:"editReason"},on:{click:function(t){return e.changeTab({tab:n+1,list:"editReason"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.title))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeEditReason(a)}}},[e._v("x")])])})),e._l(e.persistentAttendanceCenterList,(function(a,n){return t(it["a"],{key:"attendance-center-"+n,attrs:{id:"newAttendanceCenter"},on:{click:function(t){return e.changeTab({tab:n+1,list:"newAttendanceCenter"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.title))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeNewAttendanceCenter(a)}}},[e._v("x")])])})),e._l(e.persistentEditAttendanceCenterList,(function(a,n){return t(it["a"],{key:"ed-attendance-center-"+n,attrs:{id:"editAttendanceCenter"},on:{click:function(t){return e.changeTab({tab:n+1,list:"editAttendanceCenter"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.title))]),t("button",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeEditAttendanceCenter(a)}}},[e._v("x")])])})),e._l(e.persistentScheduleExternalAgentList,(function(a,n){return t(it["a"],{key:"schedule-external-agent-"+n,attrs:{id:"newScheduleExternalAgent"},on:{click:function(t){return e.changeTab({tab:n+1,list:"newScheduleExternalAgent"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.title))]),t("span",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeNewScheduleExternalAgent(a)}}},[e._v("x")])])})),e._l(e.persistentEditScheduleExternalAgentList,(function(a,n){return t(it["a"],{key:"ed-schedule-external-agent-"+n,attrs:{id:"editScheduleExternalAgent"},on:{click:function(t){return e.changeTab({tab:n+1,list:"editScheduleExternalAgent"})}}},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.title))]),t("button",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeEditScheduleExternalAgent(a)}}},[e._v("x")])])}))],2),null!=e.active_tab?t(ot["a"],{staticClass:"inner-tabs",model:{value:e.active_tab,callback:function(t){e.active_tab=t},expression:"active_tab"}},[this.access_flags.CONTROLE_ACESSO?t(it["a"],[0!=e.active_tab?t("img",{staticClass:"c-icons mr-2",attrs:{src:a("4b14")}}):e._e(),0==e.active_tab?t("img",{staticClass:"c-icons mr-2",attrs:{src:a("198e")}}):e._e(),t("span",{staticClass:"subtab"},[e._v(e._s(e.$t("controls.access_controls")))])]):e._e(),this.access_flags.OUTROS_CONTROLES?t(it["a"],[1!=e.active_tab?t("img",{staticClass:"c-icons mr-2",attrs:{src:a("9607")}}):e._e(),1==e.active_tab?t("img",{staticClass:"c-icons mr-2",attrs:{src:a("984c")}}):e._e(),t("span",{staticClass:"subtab"},[e._v(e._s(e.$t("controls.other_controls")))])]):e._e(),this.access_flags.OUTROS_CONTROLES&&"Gerente de agendas"!==e.user_role&&e.canAccess?t(it["a"],[2!=e.active_tab?t("img",{staticClass:"c-icons mr-2",attrs:{src:a("9791")}}):e._e(),2==e.active_tab?t("img",{staticClass:"c-icons mr-2",attrs:{src:a("5133")}}):e._e(),t("span",{staticClass:"subtab"},[e._v(e._s(e.$t("controls.backoffice")))])]):e._e(),this.access_flags.ATTENDANCE_CONTROLS&&"Gerente de agendas"!==e.user_role?t(it["a"],[t(at["a"],{attrs:{color:3==e.active_tab?"primary":"grey"}},[e._v("mdi-file-outline")]),t("span",{staticClass:"subtab"},[e._v(e._s(e.$t("controls.attendance_controls")))])],1):e._e()],1):e._e(),t(rt["a"],{model:{value:e.active_tab,callback:function(t){e.active_tab=t},expression:"active_tab"}},[this.access_flags.CONTROLE_ACESSO?t(st["a"],[t("ControleAcessos")],1):e._e(),this.access_flags.OUTROS_CONTROLES?t(st["a"],[t("OutrosControles")],1):e._e(),this.access_flags.OUTROS_CONTROLES?t(st["a"],[t("BackOfficeComponent")],1):e._e(),this.access_flags.ATTENDANCE_CONTROLS?t(st["a"],[t("AttendanceControls")],1):e._e()],1),t(rt["a"],{model:{value:e.active_sub_tab,callback:function(t){e.active_sub_tab=t},expression:"active_sub_tab"}},e._l(e.controlTabList,(function(a,n){return t(st["a"],{key:n},["operation"==a?t("Operation"):e._e(),"external"==a?t("ExternalControl"):e._e(),"doctor"==a?t("Doctor"):e._e(),"doctor"==a||"operation"==a||"external"==a?t("SaveComponent"):e._e()],1)})),1),t(rt["a"],{model:{value:e.active_edit_control_tab,callback:function(t){e.active_edit_control_tab=t},expression:"active_edit_control_tab"}},e._l(e.persistEditAccessControlList,(function(a,n){return t(st["a"],{key:n},["OPERATIONAL"==a.user_type?t("Operation",{attrs:{item:a}}):e._e(),"EXTERNAL"==a.user_type?t("ExternalControl",{attrs:{item:a}}):e._e(),"MEDICAL"==a.user_type||"EXTERNAL_MEDICAL"==a.user_type?t("Doctor",{attrs:{item:a}}):e._e(),"OPERATIONAL"==a.user_type||"EXTERNAL"==a.user_type||"MEDICAL"==a.user_type||"EXTERNAL_MEDICAL"==a.user_type?t("SaveComponent",{attrs:{item:a}}):e._e()],1)})),1),t(rt["a"],{model:{value:e.active_client_tab,callback:function(t){e.active_client_tab=t},expression:"active_client_tab"}},e._l(e.clientTabList,(function(a,n){return t(st["a"],{key:n},["company"==a?t("Company"):e._e()],1)})),1),t(rt["a"],{model:{value:e.active_edit_company_tab,callback:function(t){e.active_edit_company_tab=t},expression:"active_edit_company_tab"}},e._l(e.persistentEditCompanyList,(function(e,a){return t(st["a"],{key:a},[t("EditCompany",{attrs:{item:e}})],1)})),1),t(rt["a"],{model:{value:e.active_payer_tab,callback:function(t){e.active_payer_tab=t},expression:"active_payer_tab"}},e._l(e.persistentPayerList,(function(a,n){return t(st["a"],{key:n},["payer"==a?t("Payer"):e._e()],1)})),1),t(rt["a"],{model:{value:e.active_edit_payer_tab,callback:function(t){e.active_edit_payer_tab=t},expression:"active_edit_payer_tab"}},e._l(e.persistentEditPayerList,(function(e,a){return t(st["a"],{key:a},[t("EditPayer",{attrs:{item:e}})],1)})),1),t(rt["a"],{model:{value:e.active_call_list_tab,callback:function(t){e.active_call_list_tab=t},expression:"active_call_list_tab"}},e._l(e.persistentCallList,(function(e,a){return t(st["a"],{key:a},[t("Call")],1)})),1),t(rt["a"],{model:{value:e.active_view_call_list_tab,callback:function(t){e.active_view_call_list_tab=t},expression:"active_view_call_list_tab"}},e._l(e.persistentViewCallList,(function(e,a){return t(st["a"],{key:a},[t("Call",{attrs:{item:e}})],1)})),1),t(rt["a"],{model:{value:e.active_new_reason_tab,callback:function(t){e.active_new_reason_tab=t},expression:"active_new_reason_tab"}},e._l(e.persistentReasonList,(function(e,a){return t(st["a"],{key:a},[t("Reason")],1)})),1),t(rt["a"],{model:{value:e.active_edit_reason_tab,callback:function(t){e.active_edit_reason_tab=t},expression:"active_edit_reason_tab"}},e._l(e.persistentEditReasonList,(function(e,a){return t(st["a"],{key:a},[t("EditReason",{attrs:{item:e}})],1)})),1),t(rt["a"],{model:{value:e.active_new_attendance_center_tab,callback:function(t){e.active_new_attendance_center_tab=t},expression:"active_new_attendance_center_tab"}},e._l(e.persistentAttendanceCenterList,(function(e,a){return t(st["a"],{key:a},[t("AttendanceCenter")],1)})),1),t(rt["a"],{model:{value:e.active_edit_attendance_center_tab,callback:function(t){e.active_edit_attendance_center_tab=t},expression:"active_edit_attendance_center_tab"}},e._l(e.persistentEditAttendanceCenterList,(function(e,a){return t(st["a"],{key:a},[t("AttendanceCenter",{attrs:{type:"edit",item:e}})],1)})),1),t(rt["a"],{model:{value:e.active_new_schedule_external_agent_tab,callback:function(t){e.active_new_schedule_external_agent_tab=t},expression:"active_new_schedule_external_agent_tab"}},e._l(e.persistentScheduleExternalAgentList,(function(e,a){return t(st["a"],{key:a},[t("ScheduleExternalAgent")],1)})),1),t(rt["a"],{model:{value:e.active_edit_schedule_external_agent_tab,callback:function(t){e.active_edit_schedule_external_agent_tab=t},expression:"active_edit_schedule_external_agent_tab"}},e._l(e.persistentEditScheduleExternalAgentList,(function(e,a){return t(st["a"],{key:a},[t("ScheduleExternalAgent",{attrs:{type:"edit",item:e}})],1)})),1),t("CloseTabConfirmation")]],2)},vT=[],bT=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-8"},[e.access_flags.OPEN_ATTENDANCES?t("OpenAttendanceList"):e._e(),e.access_flags.PROFESSIONAL_ATTENDANCES?t("ProfessionalAttendancesList"):e._e()],1)},MT=[],PT=function(){var e=this,t=e._self._c;return t("div",{staticClass:"open-attendance-list"},[t("div",{staticClass:"title d-flex align-center justify-space-between mb-8"},[t("span",[e._v("\n      "+e._s(e.$t("attendance_controls.attendances"))+"\n      "),t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(e.$t("attendance_controls.oppened"))+"\n      ")])]),t("div",[t("p",{staticClass:"caption ma-0"},[e._v(e._s(e.$t("attendance_controls.last_updated")))]),t("p",{staticClass:"body-1 ma-0"},[e._v(e._s(e.lastUpdatedDate))])])]),e.loading?t("div",{staticClass:"load my-5"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",{staticClass:"table"},[t(At["a"],{staticClass:"mb-2",attrs:{headers:e.headers,items:e.items,"items-per-page":-1,"single-expand":!0,expanded:e.expanded,"show-expand":"","hide-default-footer":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.data-table-expand",fn:function({item:a,isExpanded:n}){return[t("div",{staticClass:"col-size d-flex align-center mt-5"},[t(r["a"],{staticClass:"mr-5",attrs:{color:"blue",dark:"",depressed:"",fab:"",height:"18",width:"18"},on:{click:function(t){return e.handleExpansion(a,n)}}},[t(at["a"],{attrs:{dark:"","x-small":""}},[e._v("\n              "+e._s(n?"mdi-minus":"mdi-plus")+"\n            ")])],1),e._v("\n          "+e._s(a.name)+"\n        ")],1)]}},{key:"item.total",fn:function({item:a}){return[t("div",{staticClass:"col-size col-size--total"},[e._v("\n          "+e._s(e.formatTotal(a.total))+"\n        ")])]}},{key:"expanded-item",fn:function({headers:a,item:n}){return[t("td",{staticClass:"px-1",attrs:{colspan:a.length}},[e.itemsExpandedLoading.includes(n.id)?t("div",{staticClass:"load my-5"},[t(nt["a"],{attrs:{active:e.itemsExpandedLoading.includes(n.id),indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"inner-table",attrs:{headers:e.headersExpanded,items:e.itemsExpanded[n.id],"items-per-page":-1,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.name",fn:function({item:a}){return[t("div",{staticClass:"col-size pl-1"},[t("div",{staticClass:"dotted",class:[e.$t("status."+e.statusesList[e.statusesList.length-1]).toLowerCase()===a.name.toLowerCase()?"dotted--vertical__top":"dotted--vertical"]}),t("div",[t("div",{staticClass:"d-flex align-center mb-1"},[t("div",{staticClass:"dotted dotted--horizontal mr-2"}),t("h3",{staticClass:"text-capitalize ma-0"},[e._v("\n                        "+e._s(a.name)+"\n                      ")])]),t("span",{staticClass:"last-hour-container ml-12 py-1 px-3"},[t("span",{staticClass:"mr-1"},[e._v("\n                        "+e._s(e.$t("attendance_controls.last_hour"))+"\n                      ")]),t("span",{staticClass:"font-weight-bold"},[e._v("\n                        "+e._s(e.formatTotal(a.last_hour))+"\n                      ")])])])])]}},{key:"item.total",fn:function({item:t}){return[e._v("\n                "+e._s(e.formatTotal(t.total)||"-")+"\n              ")]}}],null,!0)})],1)])]}}])})],1)])},UT=[],yT={data(){return{loading:!1,itemsExpandedLoading:[],lastUpdatedDate:"",headers:[{text:this.$t("attendance_controls.program"),align:"center",value:"data-table-expand",sortable:!1},{text:this.$t("attendance_controls.attendances_number"),align:"center",value:"total",sortable:!1}],headersExpanded:[{text:"",align:"left",value:"name",sortable:!1},{text:"",align:"center",value:"total",sortable:!1}],items:[],expanded:[],itemsExpanded:{},programsIdList:[7,16,58,59,60,61,62,63,64,65,66,71],statusesList:["opened","attended","canceled","attending","doctor_pending","reserved","document_creation_failed"]}},created(){this.listPrograms()},methods:{updateLastUpdatedDate(){this.lastUpdatedDate=this.$moment().format("DD/MM/YYYY - HH:mm")},listPrograms(){this.loading=!0;let e={program_types:["INTERNAL","EXTERNAL"]};Bs.getProgramsAttendancesByType(e).then(e=>{this.items=e.data.programs.filter(e=>this.programsIdList.includes(e.id))}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,this.updateLastUpdatedDate()})},listProgramStatus(e){this.itemsExpandedLoading.push(e);let t={program_id:e};Bs.getProgramAttendancesStatus(t).then(t=>{this.itemsExpanded[e]=this.statusesList.map(e=>{let a=t.data.last_your[0][e],n=t.data.total[0][e];return"canceled"==e&&(a=(t.data.last_your[0]["attendant_canceled"]||0)+(t.data.last_your[0]["patient_canceled"]||0),n=(t.data.total[0]["attendant_canceled"]||0)+(t.data.total[0]["patient_canceled"]||0)),{name:this.$t("status."+e).toLowerCase(),last_hour:a||0,total:n||0}})}).catch(e=>{console.error(e)}).finally(()=>{const t=this.itemsExpandedLoading.indexOf(e);this.itemsExpandedLoading.splice(t,1),this.updateLastUpdatedDate()})},formatTotal(e){return e>0&&e<10?"0"+e:e},handleExpansion(e,t){this.expanded=[],t||(this.expanded.push(e),this.listProgramStatus(e.id))}}},$T=yT,xT=(a("f8aa"),Object(I["a"])($T,PT,UT,!1,null,"f4fca0de",null)),VT=xT.exports,GT=a("0798"),FT=function(){var e=this,t=e._self._c;return t("div",{staticClass:"personal-attendance-lists-tb mt-15 mb-5"},[t("div",{staticClass:"title-header d-flex justify-space-between mb-4"},[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"title pt-2"},[t("span",{staticClass:"mr-2"},[e._v(e._s(e.$t("attendance_controls.calls_by")))]),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance_controls.professional")))])]),t("div",{staticClass:"mx-6"},[t("p",{staticClass:"caption ma-0"},[e._v(e._s(e.$t("attendance_controls.last_updated")))]),t("p",{staticClass:"body-1 ma-0"},[e._v(e._s(e.lastUpdatedDate))])])]),e.loading?e._e():t("div",{staticClass:"search"},[t(de["a"],{staticClass:"search-field",attrs:{"error-messages":e.searchListErrors,placeholder:e.$t("attendance_controls.search"),height:"50",width:"350",outlined:""},on:{blur:e.$v.searchParam.$touch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList.apply(null,arguments)}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",attrs:{disabled:e.$v.searchParam.$invalid,color:"primary",depresse:"",tile:"",height:"50",width:"50"},on:{click:e.searchList}},[t(at["a"],{attrs:{color:"white"}},[e._v("\n          search\n        ")])],1)],1)]),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"table mb-4",attrs:{headers:e.headers,page:e.pagination.currentPage,"sort-by":e.sortBy,"sort-desc":e.sortDesc,items:e.items,"items-per-page":e.limit,"hide-default-footer":""},on:{"update:page":function(t){return e.$set(e.pagination,"currentPage",t)},"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":[function(t){e.sortDesc=t},e.listProfessionals]},scopedSlots:e._u([{key:"item.availability",fn:function({item:a}){return[t("div",{staticClass:"d-flex justify-center"},[t(l["a"],{staticClass:"rounded-circle justify-center",attrs:{color:e.defineColor(a.availability_minutes),height:"16",width:"16"}})],1)]}},{key:"item.OPENED",fn:function({item:a}){return[t("span",[e._v(e._s(e.formatZero(a.opened)))])]}},{key:"item.ATTENDED",fn:function({item:a}){return[t("span",[e._v(e._s(e.formatZero(a.attended)))])]}},{key:"item.CANCELED",fn:function({item:a}){return[t("span",[e._v(e._s(e.formatZero(a.canceled)))])]}},{key:"item.ATTENDING",fn:function({item:a}){return[t("span",[e._v(e._s(e.formatZero(a.attending)))])]}},{key:"item.PENDING",fn:function({item:a}){return[t("span",[e._v(e._s(e.formatZero(a.pending)))])]}},{key:"item.RESERVED",fn:function({item:a}){return[t("span",[e._v(e._s(e.formatZero(a.reserved)))])]}},{key:"item.DOCUMENT_CREATION_FAILED",fn:function({item:a}){return[t("span",[e._v(e._s(e.formatZero(a.document_creation_failed)))])]}}])}),e.pagination.pageCount>1?t(_t["a"],{staticClass:"pagination",attrs:{length:e.pagination.pageCount,"total-visible":e.limit},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),e.items.length?t(GT["a"],{staticClass:"mt-8 py-5 px-6",attrs:{color:"#DDDDDD",dense:"","max-width":"881",outlined:""}},[t("div",{staticClass:"d-flex flex-row justify-space-between"},[t("span",{staticClass:"davygrey--text align-self-center"},[e._v("\n        "+e._s(e.$t("attendance_controls.subtitle"))+"\n      ")]),t("div",{staticClass:"d-flex justify-center align-center ml-2"},[t(l["a"],{staticClass:"rounded-circle justify-center mr-2",attrs:{color:e.$consts.LAST_USER_ACTION_TIME_COLORS.GREEN,height:"16",width:"16"}}),t("span",{staticClass:"primary--text"},[e._v("\n          "+e._s(e.$t("attendance_controls.availability_green"))+"\n        ")])],1),t("div",{staticClass:"d-flex justify-center align-center ml-2"},[t(l["a"],{staticClass:"rounded-circle justify-center mr-2",attrs:{color:e.$consts.LAST_USER_ACTION_TIME_COLORS.YELLOW,height:"16",width:"16"}}),t("span",{staticClass:"primary--text"},[e._v("\n          "+e._s(e.$t("attendance_controls.availability_yellow"))+"\n        ")])],1),t("div",{staticClass:"d-flex justify-center align-center ml-2"},[t(l["a"],{staticClass:"rounded-circle justify-center mr-2",attrs:{color:e.$consts.LAST_USER_ACTION_TIME_COLORS.RED,height:"16",width:"16"}}),t("span",{staticClass:"primary--text"},[e._v("\n          "+e._s(e.$t("attendance_controls.availability_red"))+"\n        ")])],1)])]):e._e(),t("OnlineProfessionals",{attrs:{total:e.totalUsersOnline}})],1)},BT=[],wT=function(){var e=this,t=e._self._c;return t("div",{staticClass:"online-professionals mt-10 mb-5"},[t("div",{staticClass:"title d-flex"},[t("span",{staticClass:"font-weight-bold mr-2"},[e._v(e._s(e.$t("attendance_controls.online_professionais")))]),t("span",[e._v(e._s(e.totalFormated))])])])},HT=[],qT={name:"OnlineProfessionals",props:["total"],computed:{totalFormated(){return 0==parseInt(this.total)?0:parseInt(this.total)<10?"0"+this.total:this.total}}},YT=qT,jT=(a("3783"),Object(I["a"])(YT,wT,HT,!1,null,"d6d0491e",null)),KT=jT.exports,ZT={name:"ProfessionalAttendancesList",components:{OnlineProfessionals:KT},mixins:[ve],data(){return{loading:!1,searchParam:"",lastUpdatedDate:"",items:[],totalItems:0,limit:10,offset:0,totalUsersOnline:0,selfInformation:!1,internalInformation:!1,sortBy:"availability",lastSortBy:"",sortDesc:!0,headers:[{text:this.$t("attendance_controls.availability"),align:"center",value:"availability",sortable:!0},{text:this.$t("attendance_controls.professional"),align:"center",value:"user_name",sortable:!0},{text:this.$t("attendance_controls.open"),align:"center",value:"OPENED",sortable:!0},{text:this.$t("attendance_controls.attended_today"),align:"center",value:"ATTENDED",sortable:!0},{text:this.$t("attendance_controls.canceled"),align:"center",value:"CANCELED",sortable:!0},{text:this.$t("attendance_controls.in_progress"),align:"center",value:"ATTENDING",sortable:!0},{text:this.$t("attendance_controls.pending"),align:"center",value:"PENDING",sortable:!0},{text:this.$t("attendance_controls.reserved"),align:"center",value:"RESERVED",sortable:!0},{text:this.$t("attendance_controls.document_failure"),align:"center",value:"DOCUMENT_CREATION_FAILED",sortable:!0}],pagination:{pageCount:0,currentPage:1}}},created(){this.listProfessionals()},methods:{updateLastUpdatedDate(){this.lastUpdatedDate=this.$moment().format("DD/MM/YYYY - HH:mm")},changeSortBy(){},searchList(){this.searchParam||(this.searchParam=""),this.offset=0,this.pagination.currentPage=1,this.listProfessionals()},listProfessionals(){this.loading=!0,this.sortBy?this.lastSortBy=this.sortBy:this.sortBy=this.lastSortBy;let e={search:this.searchParam,limit:this.limit,offset:this.offset,sort:this.sortDesc?"desc":"asc",order:this.sortBy.toLowerCase(),page:this.pagination.currentPage||1};e.offset=10*(e.page-1),be.listProfessionals(e).then(e=>{this.totalItems=e.data.total,this.totalUsersOnline=e.data.user_online_now,this.pagination.pageCount=Math.ceil(e.data.total/this.limit),this.pagination.currentPage=this.offset/this.limit+1,this.items=e.data.user_onlines,this.items.length&&this.items.forEach((e,t)=>{this.items[t].user_name=e.name,this.items[t].availability_minutes=e.availability,this.items[t].availability=e.last_action_time})}).catch(e=>{console.log(e)}).finally(()=>{this.loading=!1,this.updateLastUpdatedDate()})},getPage(e){this.pagination.currentPage=e,this.offset=1===this.pagination.currentPage?this.offset:(this.pagination.currentPage-1)*this.limit,this.listProfessionals()},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){this.pagination.currentPage>1&&this.pagination.currentPage--,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage<this.totalPages&&this.pagination.currentPage++,this.getPage(this.pagination.currentPage)},defineColor(e){let t=this.$consts.LAST_USER_ACTION_TIME_COLORS.GREEN;return e>15&&e<=60?t=this.$consts.LAST_USER_ACTION_TIME_COLORS.YELLOW:e>60&&(t=this.$consts.LAST_USER_ACTION_TIME_COLORS.RED),t},formatZero(e){return e<10?"0"+(e||0):e}},computed:{searchListErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},QT=ZT,JT=(a("ab46"),Object(I["a"])(QT,FT,BT,!1,null,"4b6551e2",null)),WT=JT.exports,XT={components:{OpenAttendanceList:VT,ProfessionalAttendancesList:WT},mixins:[ve],data(){return{access_flags:{OPEN_ATTENDANCES:!1,PROFESSIONAL_ATTENDANCES:!1}}},created(){this.access_flags.OPEN_ATTENDANCES=this.checkAccessesControlFuncionalityContains("manage.programStatus.list",this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.PROFESSIONAL_ATTENDANCES=this.checkAccessesControlFuncionalityContains("manage.professionalOnline.list",this.$store.state.Data.User.info.role_info.funcionality_privilegies)}},zT=XT,eR=Object(I["a"])(zT,bT,MT,!1,null,null,null),tR=eR.exports,aR=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-6 reports-mine"},[t("div",{staticClass:"rep-title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.backofice_reports")))])]),t("div",{staticClass:"results-section"},[t("TablePayments")],1)])},nR=[],iR=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(i["a"],[t(Xn["a"],[t("div",{staticClass:"search-part"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"2",lg:"2"}},[t(ee["a"],{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{label:"",hint:"Data inicial","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(t){e.start_issue_date=e.parseDate(e.start_issue_date_format)}},model:{value:e.start_issue_date_format,callback:function(t){e.start_issue_date_format=t},expression:"start_issue_date_format"}},"v-text-field",n,!1),a))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(yt["a"],{attrs:{"no-title":""},on:{input:function(t){e.menu1=!1}},model:{value:e.start_issue_date,callback:function(t){e.start_issue_date=t},expression:"start_issue_date"}})],1)],1),t(oe["a"],{attrs:{cols:"2",lg:"2"}},[t(ee["a"],{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{label:"",hint:"Data final","persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(t){e.end_issue_date=e.parseDate(e.end_issue_date_format)}},model:{value:e.end_issue_date_format,callback:function(t){e.end_issue_date_format=t},expression:"end_issue_date_format"}},"v-text-field",n,!1),a))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[t(yt["a"],{attrs:{"no-title":""},on:{input:function(t){e.menu2=!1}},model:{value:e.end_issue_date,callback:function(t){e.end_issue_date=t},expression:"end_issue_date"}})],1)],1),t(oe["a"],[t(r["a"],{staticClass:"white--text m-btn mt-2 ml-2",attrs:{color:"primary","max-width":"258px",height:"37px"},on:{click:function(t){return e.generateReport()}}},[e._v("\n                        "+e._s(e.$t("controls.generate_report"))+"\n                        ")])],1)],1)],1),t(l["a"],[t(c["c"],[t(de["a"],{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(At["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"items-per-page":10,search:e.search},scopedSlots:e._u([{key:"item.urlNfse",fn:function({item:a}){return[a.urlNfse?t("button",{staticClass:"white--text v-btn v-btn--contained theme--light v-size--default primary",staticStyle:{height:"26px",width:"78px"},attrs:{type:"button"},on:{click:function(t){return e.openLinkTargetBlank(a.urlNfse)}}},[t("span",{staticClass:"v-btn__content"},[t("span",{staticClass:"edit-op"},[e._v("NFSE")])])]):e._e()]}}])})],1)],1)],1)],1)},sR=[],oR={getPaymentStatements(e=null){let t=R.ENDPOINTS.CHARGES_LIST;return new Promise((a,n)=>{C.a.post(t,e,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{a(e.data)}).catch(e=>n(e.response.data.error.message||e.response.data.error.code))})}},rR=a("f545"),lR=a.n(rR),cR={data(){return{start_issue_date:null,end_issue_date:null,start_issue_date_format:null,end_issue_date_format:null,menu1:!1,menu2:!1,desserts:[],search:null,loading:!0,options:{},headers:[{text:"ID da Transa
dio":this.riskRating=this.$t("patient.nutrition_answers.risk_medium"),this.riskId=2;break;case"Risco Alto":this.riskRating=this.$t("patient.nutrition_answers.risk_high"),this.riskId=3;break;case"Risco Severo":this.riskRating=this.$t("patient.nutrition_answers.risk_severe"),this.riskId=4;break}this.risk=e,this.fillError=!1}).catch(e=>{console.log(e)})}},computed:{riskColor(){switch(this.riskId){case 0:return"calculate-risk";case 1:return"risk-low";case 2:return"risk-medium";case 3:return"risk-high";case 4:return"risk-severe";default:return"calculate-risk"}}}},i_=n_,s_=(a("5d0d"),Object(I["a"])(i_,t_,a_,!1,null,"34d16c1c",null)),o_=s_.exports,r_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"anamnese_psicologica_brick"},[t("div",{staticClass:"diag-title mt-10"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("psychology.psychological_anamnesis")))])])]),t(re["a"],{staticClass:"mt-5",class:{"readonly-history":e.disabled},attrs:{readonly:e.disabled,loading:e.loading||!e.questions}},[e.loading?e._e():t(Xn["a"],{staticClass:"pa-5 form-border"},[t(ce["a"],{attrs:{"justify-space-between":""}},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"mb-5",attrs:{name:"question_1"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              1)\n              "+e._s(e.$t("psychology."+e.questions.como_voce_esta_se_sentindo.str_translation))+"\n            ")]),t(ce["a"],{staticClass:"pl-2"},e._l(e.questions.como_voce_esta_se_sentindo.options,(function(n,i){return t("div",{key:i,staticClass:"ma-1 feeling-container",class:{"disabled-history":e.disabled,opacity_not_selected:!e.selectedAnswer(e.questions.como_voce_esta_se_sentindo.id,n.id)},attrs:{row:""},on:{click:function(t){return e.selectBoolean(e.questions.como_voce_esta_se_sentindo.id,n.id)}}},[t("img",{staticClass:"feelings-icons",attrs:{src:a("821f")("./"+n.field_value.toLowerCase()+".svg")}}),t("p",{staticClass:"feelings-font-style"},[e._v(e._s(n.field_value))])])})),0)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_2"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              2)\n              "+e._s(e.$t("psychology."+e.questions["teve_acesso_a_escola_na_primeira_infancia_(ate_o_ensino_medio)"].str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){e.selectBoolean(e.questions["teve_acesso_a_escola_na_primeira_infancia_(ate_o_ensino_medio)"].id,e.form.schoolAccessAnswerId)}},model:{value:e.form.schoolAccessAnswerId,callback:function(t){e.$set(e.form,"schoolAccessAnswerId",t)},expression:"form.schoolAccessAnswerId"}},e._l(e.questions["teve_acesso_a_escola_na_primeira_infancia_(ate_o_ensino_medio)"].options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_3"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              3)\n              "+e._s(e.$t("psychology."+e.questions.pais_divorciados.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.pais_divorciados.id,e.form.parentsDivorcedAnswerId)}},model:{value:e.form.parentsDivorcedAnswerId,callback:function(t){e.$set(e.form,"parentsDivorcedAnswerId",t)},expression:"form.parentsDivorcedAnswerId"}},e._l(e.questions.pais_divorciados.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_4"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              4)\n              "+e._s(e.$t("psychology."+e.questions.na_adolescencia_teve_muitos_amigos.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.na_adolescencia_teve_muitos_amigos.id,e.form.friendsInAdolescenceAnswerId)}},model:{value:e.form.friendsInAdolescenceAnswerId,callback:function(t){e.$set(e.form,"friendsInAdolescenceAnswerId",t)},expression:"form.friendsInAdolescenceAnswerId"}},e._l(e.questions.na_adolescencia_teve_muitos_amigos.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_5"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              5)\n              "+e._s(e.$t("psychology."+e.questions["alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual"].str_translation))+"\n            ")]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"5"}},[t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions["alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual"].id,e.form.familyHavePsychologyDiseasesAnswerId)}},model:{value:e.form.familyHavePsychologyDiseasesAnswerId,callback:function(t){e.$set(e.form,"familyHavePsychologyDiseasesAnswerId",t)},expression:"form.familyHavePsychologyDiseasesAnswerId"}},e._l(e.questions["alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual"].options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t(oe["a"],{staticClass:"px-0",attrs:{cols:"12",md:"5","justify-start":"","align-start":""}},[e.selectedAnswerHasAdditionalText(e.questions["alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual"].id,"alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual")?t(de["a"],{staticClass:"mt-1",attrs:{width:"20px",placeholder:e.$t("psychology.which"),outlined:""},model:{value:e.form.text[92],callback:function(t){e.$set(e.form.text,92,t)},expression:"form.text[92]"}}):e._e()],1)],1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_6"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              6)\n              "+e._s(e.$t("psychology."+e.questions.sente_apoio_emocional_dos_familiares.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.sente_apoio_emocional_dos_familiares.id,e.form.emocionalSupportAnswerId)}},model:{value:e.form.emocionalSupportAnswerId,callback:function(t){e.$set(e.form,"emocionalSupportAnswerId",t)},expression:"form.emocionalSupportAnswerId"}},e._l(e.questions.sente_apoio_emocional_dos_familiares.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_7"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              7)\n              "+e._s(e.$t("psychology."+e.questions.ja_foi_afastado_do_trabalho_por_questoes_emocionais.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.ja_foi_afastado_do_trabalho_por_questoes_emocionais.id,e.form.hasAlreadyHiredFromWorkAnswerId)}},model:{value:e.form.hasAlreadyHiredFromWorkAnswerId,callback:function(t){e.$set(e.form,"hasAlreadyHiredFromWorkAnswerId",t)},expression:"form.hasAlreadyHiredFromWorkAnswerId"}},e._l(e.questions.ja_foi_afastado_do_trabalho_por_questoes_emocionais.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_8"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              8)\n              "+e._s(e.$t("psychology."+e.questions.faz_quanto_tempo_que_ocorreu_o_afastamento.str_translation))+"\n            ")]),t(ce["a"],{staticClass:"pl-3 mt-2"},[t(de["a"],{attrs:{width:"20px",outlined:""},model:{value:e.form.text[95],callback:function(t){e.$set(e.form.text,95,t)},expression:"form.text[95]"}})],1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_9"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              9)\n              "+e._s(e.$t("psychology."+e.questions["sente-se_apoiado_por_amigos"].str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions["sente-se_apoiado_por_amigos"].id,e.form.doYouFeelSupportedByFriendsAnswerId)}},model:{value:e.form.doYouFeelSupportedByFriendsAnswerId,callback:function(t){e.$set(e.form,"doYouFeelSupportedByFriendsAnswerId",t)},expression:"form.doYouFeelSupportedByFriendsAnswerId"}},e._l(e.questions["sente-se_apoiado_por_amigos"].options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5",attrs:{name:"question_10"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              10)\n              "+e._s(e.$t("psychology."+e.questions.consegue_ter_momentos_de_lazer.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.consegue_ter_momentos_de_lazer.id,e.form.canYouHaveLeisureTimeAnswerId)}},model:{value:e.form.canYouHaveLeisureTimeAnswerId,callback:function(t){e.$set(e.form,"canYouHaveLeisureTimeAnswerId",t)},expression:"form.canYouHaveLeisureTimeAnswerId"}},e._l(e.questions.consegue_ter_momentos_de_lazer.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1)]),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_11"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              11)\n              "+e._s(e.$t("psychology."+e.questions.ja_realizou_psicoterapia_anteriormente.str_translation))+"\n            ")]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"5"}},[t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.ja_realizou_psicoterapia_anteriormente.id,e.form.haveYouHadPsychotherapyBeforeAnswerId)}},model:{value:e.form.haveYouHadPsychotherapyBeforeAnswerId,callback:function(t){e.$set(e.form,"haveYouHadPsychotherapyBeforeAnswerId",t)},expression:"form.haveYouHadPsychotherapyBeforeAnswerId"}},e._l(e.questions.ja_realizou_psicoterapia_anteriormente.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t(oe["a"],{staticClass:"px-0",attrs:{cols:"12",md:"5"}},[e.selectedAnswerHasAdditionalText(e.questions["ja_realizou_psicoterapia_anteriormente"].id,"ja_realizou_psicoterapia_anteriormente")?t(de["a"],{staticClass:"mt-1",attrs:{width:"20px",placeholder:e.$t("psychology.for_how_long"),outlined:""},model:{value:e.form.text[98],callback:function(t){e.$set(e.form.text,98,t)},expression:"form.text[98]"}}):e._e()],1)],1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_12"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              12)\n              "+e._s(e.$t("psychology."+e.questions.recebeu_alta_do_tratamento.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.recebeu_alta_do_tratamento.id,e.form.wereYouDischargedFromTreatmentAnswerId)}},model:{value:e.form.wereYouDischargedFromTreatmentAnswerId,callback:function(t){e.$set(e.form,"wereYouDischargedFromTreatmentAnswerId",t)},expression:"form.wereYouDischargedFromTreatmentAnswerId"}},e._l(e.questions.recebeu_alta_do_tratamento.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_13"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              13)\n              "+e._s(e.$t("psychology."+e.questions.teve_ideia_suicidas_nas_ultimas_3_semanas.str_translation))+"\n            ")]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.teve_ideia_suicidas_nas_ultimas_3_semanas.id,e.form.haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId)}},model:{value:e.form.haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId,callback:function(t){e.$set(e.form,"haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId",t)},expression:"form.haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId"}},e._l(e.questions.teve_ideia_suicidas_nas_ultimas_3_semanas.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[43==e.form.haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId?t(ce["a"],{staticClass:"severity-border mt-2"},e._l(e.questions.gravidade_da_tentativa.options,(function(a,n){return t(oe["a"],{key:n,staticClass:"severity-option-centralize px-2"},[t("p",{staticClass:"severity-font-style",class:{"select-severity-font-style":e.selectedAnswer(e.questions.gravidade_da_tentativa.id,a.id)},on:{click:function(t){return e.selectBoolean(e.questions.gravidade_da_tentativa.id,a.id)}}},[e._v("\n                      "+e._s(a.field_value)+"\n                    ")])])})),1):e._e()],1)],1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_14"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              14)\n              "+e._s(e.$t("psychology."+e.questions["ja_teve_tentativa_de_autoexterminio_(tentativa_suicida)_nas_ultimas_3_semanas"].str_translation))+"\n            ")]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){e.selectBoolean(e.questions["ja_teve_tentativa_de_autoexterminio_(tentativa_suicida)_nas_ultimas_3_semanas"].id,e.form.haveYouEverHadASelfExterminationAttemptAnswerId)}},model:{value:e.form.haveYouEverHadASelfExterminationAttemptAnswerId,callback:function(t){e.$set(e.form,"haveYouEverHadASelfExterminationAttemptAnswerId",t)},expression:"form.haveYouEverHadASelfExterminationAttemptAnswerId"}},e._l(e.questions["ja_teve_tentativa_de_autoexterminio_(tentativa_suicida)_nas_ultimas_3_semanas"].options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t(oe["a"],{attrs:{cols:"12",md:"10"}},[43==e.form.haveYouEverHadASelfExterminationAttemptAnswerId?t(de["a"],{staticClass:"mt-1",attrs:{width:"20px",placeholder:e.$t("psychology.which"),outlined:""},model:{value:e.form.text[102],callback:function(t){e.$set(e.form.text,102,t)},expression:"form.text[102]"}}):e._e()],1)],1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_15"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              15)\n              "+e._s(e.$t("psychology."+e.questions.ja_fez_uso_de_medicacao_psiquiatrica.str_translation))+"\n            ")]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"5"}},[t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.ja_fez_uso_de_medicacao_psiquiatrica.id,e.form.haveYouEverUsedPsychiatricMedicationAnswerId)}},model:{value:e.form.haveYouEverUsedPsychiatricMedicationAnswerId,callback:function(t){e.$set(e.form,"haveYouEverUsedPsychiatricMedicationAnswerId",t)},expression:"form.haveYouEverUsedPsychiatricMedicationAnswerId"}},e._l(e.questions.ja_fez_uso_de_medicacao_psiquiatrica.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t(oe["a"],{staticClass:"px-0",attrs:{cols:"12",md:"6"}},[e.selectedAnswerHasAdditionalText(e.questions["ja_fez_uso_de_medicacao_psiquiatrica"].id,"ja_fez_uso_de_medicacao_psiquiatrica")?t(de["a"],{staticClass:"mt-1",attrs:{width:"20px",placeholder:e.$t("psychology.which"),outlined:""},model:{value:e.form.text[103],callback:function(t){e.$set(e.form.text,103,t)},expression:"form.text[103]"}}):e._e()],1)],1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_16"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              16)\n              "+e._s(e.$t("psychology."+e.questions["se_tem_filhos,_a_gestacao_foi_planejada"].str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions["se_tem_filhos,_a_gestacao_foi_planejada"].id,e.form.ifYouHaveChildrenWasThePregnancyPlannedAnswerId)}},model:{value:e.form.ifYouHaveChildrenWasThePregnancyPlannedAnswerId,callback:function(t){e.$set(e.form,"ifYouHaveChildrenWasThePregnancyPlannedAnswerId",t)},expression:"form.ifYouHaveChildrenWasThePregnancyPlannedAnswerId"}},e._l(e.questions["se_tem_filhos,_a_gestacao_foi_planejada"].options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_17"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              17)\n              "+e._s(e.$t("psychology."+e.questions.ja_foi_vitima_de_violencia_nas_ultimas_3_semanas.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.ja_foi_vitima_de_violencia_nas_ultimas_3_semanas.id,e.form.hasVictimOfViolenceInLastWeeksAnswerId)}},model:{value:e.form.hasVictimOfViolenceInLastWeeksAnswerId,callback:function(t){e.$set(e.form,"hasVictimOfViolenceInLastWeeksAnswerId",t)},expression:"form.hasVictimOfViolenceInLastWeeksAnswerId"}},e._l(e.questions.ja_foi_vitima_de_violencia_nas_ultimas_3_semanas.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_18"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              18)\n              "+e._s(e.$t("psychology."+e.questions.atualmente_passa_por_algum_tratamento_medico.str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions.atualmente_passa_por_algum_tratamento_medico.id,e.form.actuallyDidSomeMedicalTreatmentAnswerId)}},model:{value:e.form.actuallyDidSomeMedicalTreatmentAnswerId,callback:function(t){e.$set(e.form,"actuallyDidSomeMedicalTreatmentAnswerId",t)},expression:"form.actuallyDidSomeMedicalTreatmentAnswerId"}},e._l(e.questions.atualmente_passa_por_algum_tratamento_medico.options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_19"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              19)\n              "+e._s(e.$t("psychology."+e.questions["ja_fez_uso_de_substancias_psicoativas_(drogas_ilicitas)"].str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){e.selectBoolean(e.questions["ja_fez_uso_de_substancias_psicoativas_(drogas_ilicitas)"].id,e.form.haveYouEverUseIllicitsDrugsAnswerId)}},model:{value:e.form.haveYouEverUseIllicitsDrugsAnswerId,callback:function(t){e.$set(e.form,"haveYouEverUseIllicitsDrugsAnswerId",t)},expression:"form.haveYouEverUseIllicitsDrugsAnswerId"}},e._l(e.questions["ja_fez_uso_de_substancias_psicoativas_(drogas_ilicitas)"].options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1),t("div",{staticClass:"mb-5 ml-2",attrs:{name:"question_20"}},[t("p",{staticClass:"question-font-style"},[e._v("\n              20)\n              "+e._s(e.$t("psychology."+e.questions["ja_fez_uso_de_drogas_licitas,_tabaco_e_bebida_alcoolica"].str_translation))+"\n            ")]),t(Qs["a"],{staticClass:"mt-1",attrs:{column:""},on:{change:function(t){return e.selectBoolean(e.questions["ja_fez_uso_de_drogas_licitas,_tabaco_e_bebida_alcoolica"].id,e.form.haveYouEverUsellicitsDrugsAnswerId)}},model:{value:e.form.haveYouEverUsellicitsDrugsAnswerId,callback:function(t){e.$set(e.form,"haveYouEverUsellicitsDrugsAnswerId",t)},expression:"form.haveYouEverUsellicitsDrugsAnswerId"}},e._l(e.questions["ja_fez_uso_de_drogas_licitas,_tabaco_e_bebida_alcoolica"].options,(function(e,a){return t(Zs["a"],{key:a,attrs:{label:e.field_value,value:e.id}})})),1)],1)])],1)],1)],1)],1)},l_=[],c_={props:["brickDetails"],data(){return{brickName:"brick_anamnese_psicologica",disabled:!1,loading:!1,questions:[],form:{text:{88:"",92:"",95:"",98:"",102:"",103:""},schoolAccessAnswerId:null,parentsDivorcedAnswerId:null,friendsInAdolescenceAnswerId:null,familyHavePsychologyDiseasesAnswerId:null,emocionalSupportAnswerId:null,hasAlreadyHiredFromWorkAnswerId:null,doYouFeelSupportedByFriendsAnswerId:null,canYouHaveLeisureTimeAnswerId:null,haveYouHadPsychotherapyBeforeAnswerId:null,wereYouDischargedFromTreatmentAnswerId:null,haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId:null,haveYouEverHadASelfExterminationAttemptAnswerId:null,haveYouEverUsedPsychiatricMedicationAnswerId:null,ifYouHaveChildrenWasThePregnancyPlannedAnswerId:null,hasVictimOfViolenceInLastWeeksAnswerId:null,actuallyDidSomeMedicalTreatmentAnswerId:null,haveYouEverUseIllicitsDrugsAnswerId:null,haveYouEverUsellicitsDrugsAnswerId:null},questionsAndAnswers:[]}},created(){!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.loading=!0,sA.getQuestion({program_id:57}).then(e=>{if(this.questions=e.data.questions,this.brickDetails&&this.brickDetails[this.brickName]&&this.brickDetails[this.brickName].length>0){let e=this.brickDetails[this.brickName][0];e.dynamic_questions&&e.dynamic_questions.length>0&&(this.selectBoolean(this.questions.como_voce_esta_se_sentindo.id,sA.getSelectedAnswers(e.dynamic_questions,this.questions.como_voce_esta_se_sentindo)[0]),this.form.text[88]=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions.como_voce_esta_se_sentindo),this.form.schoolAccessAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["teve_acesso_a_escola_na_primeira_infancia_(ate_o_ensino_medio)"])[0],this.selectBoolean(this.questions["teve_acesso_a_escola_na_primeira_infancia_(ate_o_ensino_medio)"].id,this.form.schoolAccessAnswerId),this.form.parentsDivorcedAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["pais_divorciados"])[0],this.selectBoolean(this.questions["pais_divorciados"].id,this.form.parentsDivorcedAnswerId),this.form.friendsInAdolescenceAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["na_adolescencia_teve_muitos_amigos"])[0],this.selectBoolean(this.questions["na_adolescencia_teve_muitos_amigos"].id,this.form.friendsInAdolescenceAnswerId),this.form.familyHavePsychologyDiseasesAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual"])[0],this.selectBoolean(this.questions["alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual"].id,this.form.familyHavePsychologyDiseasesAnswerId),this.form.text[92]=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions["alguem_na_familia_ou_cuidadores_padece_de_transtorno_psicologico,_se_sim_qual"]),this.form.emocionalSupportAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["sente_apoio_emocional_dos_familiares"])[0],this.selectBoolean(this.questions["sente_apoio_emocional_dos_familiares"].id,this.form.emocionalSupportAnswerId),this.form.hasAlreadyHiredFromWorkAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["ja_foi_afastado_do_trabalho_por_questoes_emocionais"])[0],this.selectBoolean(this.questions["ja_foi_afastado_do_trabalho_por_questoes_emocionais"].id,this.form.hasAlreadyHiredFromWorkAnswerId),this.form.text[95]=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions["faz_quanto_tempo_que_ocorreu_o_afastamento"]),this.form.doYouFeelSupportedByFriendsAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["sente-se_apoiado_por_amigos"])[0],this.selectBoolean(this.questions["sente-se_apoiado_por_amigos"].id,this.form.doYouFeelSupportedByFriendsAnswerId),this.form.canYouHaveLeisureTimeAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["consegue_ter_momentos_de_lazer"])[0],this.selectBoolean(this.questions["consegue_ter_momentos_de_lazer"].id,this.form.canYouHaveLeisureTimeAnswerId),this.form.haveYouHadPsychotherapyBeforeAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["ja_realizou_psicoterapia_anteriormente"])[0],this.selectBoolean(this.questions["ja_realizou_psicoterapia_anteriormente"].id,this.form.haveYouHadPsychotherapyBeforeAnswerId),this.form.text[98]=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions["ja_realizou_psicoterapia_anteriormente"]),this.form.wereYouDischargedFromTreatmentAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["recebeu_alta_do_tratamento"])[0],this.selectBoolean(this.questions["recebeu_alta_do_tratamento"].id,this.form.wereYouDischargedFromTreatmentAnswerId),this.form.haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["teve_ideia_suicidas_nas_ultimas_3_semanas"])[0],this.selectBoolean(this.questions["teve_ideia_suicidas_nas_ultimas_3_semanas"].id,this.form.haveYouHadSuicidalThoughtsInTheLastWeeksAnswerId),this.selectBoolean(this.questions["gravidade_da_tentativa"].id,sA.getSelectedAnswers(e.dynamic_questions,this.questions["gravidade_da_tentativa"])[0]),this.form.haveYouEverHadASelfExterminationAttemptAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["ja_teve_tentativa_de_autoexterminio_(tentativa_suicida)_nas_ultimas_3_semanas"])[0],this.selectBoolean(this.questions["ja_teve_tentativa_de_autoexterminio_(tentativa_suicida)_nas_ultimas_3_semanas"].id,this.form.haveYouEverHadASelfExterminationAttemptAnswerId),this.form.text[102]=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions["ja_teve_tentativa_de_autoexterminio_(tentativa_suicida)_nas_ultimas_3_semanas"]),this.form.haveYouEverUsedPsychiatricMedicationAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["ja_fez_uso_de_medicacao_psiquiatrica"])[0],this.selectBoolean(this.questions["ja_fez_uso_de_medicacao_psiquiatrica"].id,this.form.haveYouEverUsedPsychiatricMedicationAnswerId),this.form.text[103]=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions["ja_fez_uso_de_medicacao_psiquiatrica"]),this.form.ifYouHaveChildrenWasThePregnancyPlannedAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["se_tem_filhos,_a_gestacao_foi_planejada"])[0],this.selectBoolean(this.questions["se_tem_filhos,_a_gestacao_foi_planejada"].id,this.form.ifYouHaveChildrenWasThePregnancyPlannedAnswerId),this.form.hasVictimOfViolenceInLastWeeksAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["ja_foi_vitima_de_violencia_nas_ultimas_3_semanas"])[0],this.selectBoolean(this.questions["ja_foi_vitima_de_violencia_nas_ultimas_3_semanas"].id,this.form.hasVictimOfViolenceInLastWeeksAnswerId),this.form.actuallyDidSomeMedicalTreatmentAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["atualmente_passa_por_algum_tratamento_medico"])[0],this.selectBoolean(this.questions["atualmente_passa_por_algum_tratamento_medico"].id,this.form.actuallyDidSomeMedicalTreatmentAnswerId),this.form.haveYouEverUseIllicitsDrugsAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["ja_fez_uso_de_substancias_psicoativas_(drogas_ilicitas)"])[0],this.selectBoolean(this.questions["ja_fez_uso_de_substancias_psicoativas_(drogas_ilicitas)"].id,this.form.haveYouEverUseIllicitsDrugsAnswerId),this.form.haveYouEverUsellicitsDrugsAnswerId=sA.getSelectedAnswers(e.dynamic_questions,this.questions["ja_fez_uso_de_drogas_licitas,_tabaco_e_bebida_alcoolica"])[0],this.selectBoolean(this.questions["ja_fez_uso_de_drogas_licitas,_tabaco_e_bebida_alcoolica"].id,this.form.haveYouEverUsellicitsDrugsAnswerId))}}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1}),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){},methods:{selectBoolean(e,t){const a=this.findQuestionIndex(e);-1!=a?this.questionsAndAnswers[a].dynamic_drop_down_option_id=t:this.questionsAndAnswers.push({dynamic_question_id:e,dynamic_drop_down_option_id:t})},findQuestionIndex(e){const t=this.questionsAndAnswers.findIndex(t=>t.dynamic_question_id===e);return t},selectedAnswer(e,t){const a=this.findQuestionIndex(e);return-1!=a&&this.questionsAndAnswers[a].dynamic_drop_down_option_id==t},selectedAnswerHasAdditionalText(e,t){const a=this.findQuestionIndex(e);if(-1==a)return!1;const n=this.questionsAndAnswers[a].dynamic_drop_down_option_id;if("undefined"==typeof n||null==n)return!1;const i=this.questions[t].options.findIndex(e=>e.id===n);return this.questions[t].options[i].has_additional_text},sendSaveData(){const e=[88,92,95,98,102,103];let t={brick_key:this.brickName,brick_data:{case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,questions_answers:[]},isValid:!0,message:""};"undefined"!==typeof this.form.text[95]&&this.questionsAndAnswers.push({dynamic_question_id:95,dynamic_drop_down_option_id:265}),this.questionsAndAnswers.forEach(a=>{if(e.includes(a.dynamic_question_id)&&(a.addicional_information=this.form.text[a.dynamic_question_id]),a.dynamic_question_id&&a.dynamic_drop_down_option_id)t.brick_data.questions_answers.push(a);else{const e=this.questionsAndAnswers.indexOf(a);e>-1&&this.questionsAndAnswers.splice(e,1)}}),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,t),this.$bus.emit("receive-brick-data",t)}},computed:{},watch:{}},d_=c_,m_=(a("041c"),Object(I["a"])(d_,r_,l_,!1,null,"47bcd2d4",null)),u_=m_.exports,A_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sugestao-plano-terapeutico-brick"},[t("div",{staticClass:"diag-title mt-10"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("psychology.sugestao_plano_terapeutico")))]),t(de["a"],{staticClass:"number-input centered-input d-inline-flex mx-1",attrs:{disabled:e.disabled,height:"76px","hide-details":"","single-line":"",outlined:"",readonly:""},model:{value:e.number_1,callback:function(t){e.number_1=t},expression:"number_1"}},[t(at["a"],{staticClass:"arrow-buttons up",attrs:{slot:"append",disabled:e.disabled},on:{click:e.incressNumber1},slot:"append"},[e._v("\n          arrow_drop_up\n        ")]),t(at["a"],{staticClass:"arrow-buttons down",attrs:{slot:"append",disabled:e.disabled},on:{click:e.decressNumber1},slot:"append"},[e._v("\n          arrow_drop_down\n        ")])],1),t(de["a"],{staticClass:"number-input centered-input d-inline-flex mx-1",attrs:{disabled:e.disabled,height:"76px","hide-details":"","single-line":"",outlined:"",readonly:""},model:{value:e.number_2,callback:function(t){e.number_2=t},expression:"number_2"}},[t(at["a"],{staticClass:"arrow-buttons up",attrs:{slot:"append",disabled:e.disabled},on:{click:e.incressNumber2},slot:"append"},[e._v("\n          arrow_drop_up\n        ")]),t(at["a"],{staticClass:"arrow-buttons down",attrs:{slot:"append",disabled:e.disabled},on:{click:e.decressNumber2},slot:"append"},[e._v("\n          arrow_drop_down\n        ")])],1),t("span",{staticClass:"small-text"},[e._v(e._s(e.$t("psychology.sessions")))])],1)])])},__=[],E_={props:["brickDetails"],data(){return{brickName:"brick_sugestao_plano_terapeutico",disabled:!1,number_1:0,number_2:0}},watch:{number_1(e){e||this.number_2?this.$bus.emit("required-brick-frequencia-sugerida",!0):this.$bus.emit("required-brick-frequencia-sugerida",!1)},number_2(e){e||this.number_1?this.$bus.emit("required-brick-frequencia-sugerida",!0):this.$bus.emit("required-brick-frequencia-sugerida",!1)}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e&&e.length>0&&(e[0].number_of_attendances?e[0].number_of_attendances<=9?(this.number_1=0,this.number_2=e[0].number_of_attendances):(this.number_1=parseInt((""+e[0].number_of_attendances).split("")[0]),this.number_2=parseInt((""+e[0].number_of_attendances).split("")[1])):(this.number_1=0,this.number_2=0))}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{incressNumber1(){this.number_1>=9||this.number_1++},incressNumber2(){this.number_2>=9||this.number_2++},decressNumber1(){this.number_1<=0||this.number_1--},decressNumber2(){this.number_2<=0||this.number_2--},sendSaveData(){let e={brick_key:this.brickName,brick_data:{case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,number_of_attendances:parseInt(`${this.number_1}${this.number_2}`)},isValid:!0,message:""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)}}},I_=E_,h_=(a("6371"),Object(I["a"])(I_,A_,__,!1,null,"07560b30",null)),O_=h_.exports,p_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"historia_paciente"},[t("div",{staticClass:"diag-title mt-15"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(e.$t("psychology.historia_paciente"))+"\n      ")])])]),t(re["a"],{staticClass:"mt-5",class:{"readonly-history":e.disabled},attrs:{readonly:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{height:"150px",label:e.$t("psychology.type_here"),counter:"3000","no-resize":"",outlined:""},model:{value:e.form.history_text,callback:function(t){e.$set(e.form,"history_text",t)},expression:"form.history_text"}})],1)],1)],1)],1)],1)},S_=[],C_={props:["brickDetails"],data(){return{brickName:"brick_historia_paciente",disabled:!1,form:{history_text:""}}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e&&e.length>0&&(this.form.history_text=e[0].history_text)}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{sendSaveData(){let e={brick_key:this.brickName,brick_data:{case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,history_text:this.form.history_text},isValid:!0,message:""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)}}},T_=C_,R_=(a("13c6"),Object(I["a"])(T_,p_,S_,!1,null,"22122186",null)),D_=R_.exports,g_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"brick_avaliacao"},[t("div",{staticClass:"diag-title mt-15"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(e.$t("psychology.evaluation")))])])]),t(re["a"],{staticClass:"mt-5",class:{"readonly-history":e.disabled},attrs:{readonly:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(se["a"],{attrs:{label:e.$t("psychology.cid"),items:e.isSimpleCIDs?e.filteredCid:e.cidList,"append-icon":"keyboard_arrow_down","item-text":"formattedName","item-value":"id","return-object":"",height:"42px",outlined:""},on:{change:e.checkCid},scopedSlots:e._u([{key:"selection",fn:function(a){return[t("span",{staticClass:"text-color"},[e._v(e._s(a.item.formattedName))])]}},{key:"item",fn:function(a){return[t("span",{staticClass:"primary--text"},[e._v(e._s(a.item.formattedName))])]}}]),model:{value:e.selectedCid,callback:function(t){e.selectedCid=t},expression:"selectedCid"}})],1)],1)],1)],1)],1)},L_=[],f_={props:["brickDetails"],data(){return{brickName:"brick_avaliacao",disabled:!1,rawCid:Yl,ciap2List:[],cidList:[],filteredCid:[],isSimpleCIDs:!1,cidsToShow:[],selectedCid:null}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e&&e.length>0&&(this.selectedCid=e[0].cid_id)}for(let e=0;e<100;e++)this.cidsToShow.push(e<10?"F0"+e:"F"+e);this.getCidList(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{getCidList(){this.cidList=this.rawCid.data,console.log(this.cidsToShow),this.cidList.forEach((e,t)=>{this.cidList[t].formattedName=e.code+" - "+e.name,this.cidsToShow.includes(e.code)&&this.filteredCid.push(this.cidList[t])}),this.filteredCid.push({id:-1,code:"N/A",cid_group_id:1,name:this.$t("psychology.showAllCids"),formattedName:this.$t("psychology.showAllCids")})},checkCid(){"N/A"==this.selectedCid.code&&(this.isSimpleCIDs=!1,this.selectedCid=null)},sendSaveData(){let e={brick_key:this.brickName,brick_data:{case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,cid_id:this.selectedCid?this.selectedCid.id:null},isValid:!0,message:""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)}}},N_=f_,k_=(a("c7cb"),Object(I["a"])(N_,g_,L_,!1,null,"4c58d5d6",null)),v_=k_.exports,b_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"brick_objetivo"},[t("div",{staticClass:"diag-title mt-15"},[t("div",{staticClass:"diag-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(e.$t("psychology.objective"))+"\n      ")])])]),t(re["a"],{class:{"readonly-history":e.disabled},attrs:{readonly:e.disabled,loading:e.loading||!e.questions}},[t(Xn["a"],{staticClass:"pa-0"},[t("label",[e._v(e._s(e.$t("psychology.objective_info")))]),t(ce["a"],e._l(e.questions,(function(a,n){return t(oe["a"],{key:n,attrs:{cols:"12",md:0==n||n==e.questions.length-1?12:6}},["select"==a.input_type&&"multiple_answers"==a.group_name?t("div",{staticClass:"rounded col-border my-3 pa-2"},[t("label",[e._v(e._s(e.$t("psychology."+a.str_translation)))]),e._l(a.options,(function(n,i){return t("div",{staticClass:"my-2"},[t(St["a"],{key:i,staticClass:"ma-0 pa-0",attrs:{value:n.id,label:e.$t("psychology."+n.str_translation),"hide-details":"",multiple:""},on:{change:function(t){return e.optionSelect(a.id,n.id)}},model:{value:e.selectedValues[a.id],callback:function(t){e.$set(e.selectedValues,a.id,t)},expression:"selectedValues[question.id]"}}),e.optionTextArea(n)?t(Ni["a"],{staticClass:"mt-4 mb-2",attrs:{readonly:e.disabled,height:"100px","hide-details":"","no-resize":"",outlined:""},on:{change:function(t){return e.optionTextChange(n)}},model:{value:e.textArea,callback:function(t){e.textArea=t},expression:"textArea"}}):e._e()],1)}))],2):"select"==a.input_type?t("div",{staticClass:"rounded col-border my-3 pa-2"},[t("label",[e._v(e._s(e.$t("psychology."+a.str_translation)))]),t(Qs["a"],{staticClass:"my-2",attrs:{"hide-details":"",column:""},model:{value:e.selectedValues[a.id],callback:function(t){e.$set(e.selectedValues,a.id,t)},expression:"selectedValues[question.id]"}},e._l(a.options,(function(n,i){return t("div",{staticClass:"d-flex"},[t(Zs["a"],{staticClass:"mb-2",attrs:{value:n.id,label:e.$t("psychology."+n.str_translation)},on:{change:function(t){return e.optionSelect(a.id,n.id)}}}),n.has_additional_text&&e.isOptionSelected(n.id)?t(de["a"],{staticClass:"py-0 pl-2 my-0",attrs:{readonly:e.disabled,"hide-details":"","no-resize":""},on:{change:function(t){return e.optionTextChange(n)}},model:{value:n.additionalText,callback:function(t){e.$set(n,"additionalText",t)},expression:"option.additionalText"}}):e._e()],1)})),0)],1):e._e()])})),1)],1)],1)],1)},M_=[],P_={getQuestion(e){return new Promise((t,a)=>{C.a.post(""+R.ENDPOINTS.QUESTION.GET,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getDynamicFieldDropdown(e){return new Promise((t,a)=>{C.a.get(`${R.ENDPOINTS.DYNAMIC_FIELD.DROPDOWN}?usage_group_type=${e}`,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getFrequencyTimePeriod(e){return new Promise((e,t)=>{C.a.get(""+R.ENDPOINTS.GET_FREQUENCY_TIME_PERIOD,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error.message||e.response.data.error.code)})})}},U_={props:["brickDetails"],data(){return{brickName:"brick_objetivo",loading:!1,disabled:!1,questions:[],textArea:"",questionsKeys:["quais_objetivos_dentro_psicoterapia_a_serem_alcancados","memoria_preservada","paciente_orientado","cuidado_pessoal","humor/afeto","discurso_organizado","capacidade_de_manter_atencao","sono_esta_regular"],questions_answers:[],selectedValues:{}}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e&&e.length>0&&(this.questions_answers=Object.values(e[0].dynamic_questions).map(e=>({dynamic_question_id:e.dynamic_question_id,dynamic_drop_down_option_id:e.dynamic_drop_down_option_id,addicional_information:e.addicional_information})),this.questions_answers.forEach(e=>{this.selectedValues[e.dynamic_question_id]||(this.selectedValues[e.dynamic_question_id]=[]),this.selectedValues[e.dynamic_question_id].push(e.dynamic_drop_down_option_id)}))}this.getQuestions(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{getQuestions(){this.loading=!0;let e={program_id:57};P_.getQuestion(e).then(e=>{Object.entries(e.data.questions).map(e=>{this.questionsKeys.includes(e[0])&&this.questions.push(e[1])})}).catch(e=>{console.error(e)}).finally(()=>{Object.keys(this.selectedValues).length>0&&this.questions.length>0&&this.questions.forEach(e=>{"boolean_question"==e.group_name&&this.selectedValues[e.id]&&1==this.selectedValues[e.id].length&&(this.selectedValues[e.id]=parseInt(this.selectedValues[e.id].toString()))}),this.loading=!1})},optionSelect(e,t){this.isOptionSelected(t)?this.questions_answers=this.questions_answers.filter(e=>e.dynamic_drop_down_option_id!==t):("multiple_answers"!==this.questions.find(t=>t.id==e).group_name&&(this.questions_answers=this.questions_answers.filter(t=>t.dynamic_question_id!==e)),this.questions_answers.push({dynamic_question_id:e,dynamic_drop_down_option_id:t}))},optionTextChange(e){if(e.has_additional_text&&this.isOptionSelected(e.id)){let t=this.questions_answers.findIndex(t=>t.dynamic_drop_down_option_id==e.id);this.questions_answers[t].addicional_information=this.textArea}},sendSaveData(){let e={brick_key:this.brickName,brick_data:{case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,questions_answers:this.questions_answers},isValid:!0,message:""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)},optionTextArea(e){if(e.has_additional_text&&this.isOptionSelected(e.id)){let t=this.questions_answers.findIndex(t=>t.dynamic_drop_down_option_id==e.id);return this.questions_answers[t].addicional_information&&(this.textArea=this.questions_answers[t].addicional_information),!0}}},computed:{isOptionSelected(){return e=>this.questions_answers.find(t=>t.dynamic_drop_down_option_id==e)}}},y_=U_,$_=(a("7fd4"),Object(I["a"])(y_,b_,M_,!1,null,"57a59327",null)),x_=$_.exports,V_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback_terapeutico rounded pa-4"},[t("div",{staticClass:"diag-title mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n      "+e._s(e.$t("psychology.feedback_terapeutico"))+"\n    ")])]),t("p",{staticClass:"label"},[e._v(e._s(e.$t("psychology.feedback_terapeutico_description")))]),t(re["a"],{staticClass:"form mt-5",class:{"readonly-history":e.disabled},attrs:{readonly:e.disabled,loading:e.loading}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{staticClass:"px-16",attrs:{cols:"12",md:"12"}},[t(jo["a"],{attrs:{"tick-size":e.options?e.options.length-1:0,"tick-labels":e.optionsLabels,max:e.options?e.options.length-1:0,loading:e.loading,"thumb-color":"#6ca3f7",color:"#6ca3f7",ticks:"always",step:"1"},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}})],1)],1)],1)],1),t("div",[t("ErrorText")],1)],1)},G_=[],F_={props:["brickDetails"],components:{ErrorText:pi},data(){return{brickName:"brick_feedback_terapeutico",loading:!0,disabled:!1,questionId:null,answerId:null,selectedOption:0,options:null,optionsLabels:[]}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e&&e.length>0&&e[0].dynamic_questions&&e[0].dynamic_questions.length&&(this.answerId=e[0].dynamic_questions[0].dynamic_drop_down_option_id)}this.getQuestions(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{getQuestions(){this.loading=!0;let e={program_id:57};this.options=[{active:!1,answer_weight:null,field_value:"N
do com sucesso",authentication_fail:"Falha na tentativa de autenticar usu
 documentos para enviar.",this.disabled=!0,!0)},send(){this.loading=!0,this.message="sending_message",this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SEND_WHATSAPP,{case_attendance_id:this.$store.state.Data.CaseAttendance.info.id,phone_mobile:this.getRawPhoneHelper(this.celphone)}).then(e=>{}).catch(e=>{console.error(e)}).finally(()=>{this.getWhatsappHistory()})}},computed:{invalid(){return-1===this.celphone.indexOf("+55")||this.celphone.length<18}}},lu=ru,cu=(a("35de"),Object(I["a"])(lu,zm,eu,!1,null,null,null)),du=cu.exports,mu=function(){var e=this,t=e._self._c;return e.hide?e._e():t("div",[t("div",{staticClass:"brick-title"},[e._v(e._s(e.$t("patient.call_attempt_title"))+" "+e._s(e.numRetries))]),e.hideHistory?e._e():t("div",[t(Ni["a"],{staticClass:"textarea-data",attrs:{height:"100px",label:e.$t("patient.contact_observations"),outlined:"","no-resize":""},model:{value:e.observation,callback:function(t){e.observation="string"===typeof t?t.trim():t},expression:"observation"}}),t("div",{staticClass:"retry-button"},[t("p",{staticClass:"clickable",on:{click:e.addRetry}},[t("b",[e._v(e._s(e.$t("patient.call_attempt_add")))])])])],1),e.retryList.length>0&&!e.disabled?t("div",{staticClass:"brick-title"},[e._v(e._s(e.$t("patient.call_attempt_history")))]):e._e(),e._l(e.retryList,(function(e,a){return t("div",{key:a,staticClass:"attempt-box"},[t("CallCountHistory",{attrs:{callAttempt:e}})],1)}))],2)},uu=[],Au=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"attendant-name"},[e._v("\n  "+e._s(e.callAttempt.attendant.name)+" ("+e._s(e.callAttempt.attendant.email)+") - "+e._s(e.$moment(1e3*e.callAttempt.attempt_timestamp).format("DD/MM/YYYY HH:mm")))]),t("div",{staticClass:"observation-box"},[e._v(e._s(e.callAttempt.observation))])])},_u=[],Eu={props:["callAttempt"],mixins:[ve],components:{},data(){return{}},created(){},methods:{},computed:{}},Iu=Eu,hu=(a("33db"),Object(I["a"])(Iu,Au,_u,!1,null,null,null)),Ou=hu.exports,pu={props:["item"],mixins:[ve],components:{CallCountHistory:Ou},data(){return{caseAttendanceId:null,numRetries:0,retryList:[],attendant_list:[],observation:"",disabled:!1,hide:!1,hideHistory:!1}},created(){this.disabled=!1,44==this.$store.state.Data.CaseAttendance.info.program_id&&(this.hide=!0),7==this.$store.state.Data.CaseAttendance.info.program_id&&1==this.$store.state.Data.CaseAttendance.info.program_step&&(this.hide=!0),!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0,this.hideHistory=!0),this.caseAttendanceId=null!=this.$store.state.Data.CaseAttendance.info.case_attendance_id?this.$store.state.Data.CaseAttendance.info.case_attendance_id:this.$store.state.Data.CaseAttendance.info.id,this.loadHistory()},methods:{loadHistory(){let e=this.$store.state.Data.User.token,t={token:e,case_attendance_id:this.caseAttendanceId};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ATTEMPT_CALL_HISTORY,t).then(e=>{let t=this.$store.state.Data.CaseAttendance.info.program_step;this.$store.state.Data.CaseAttendance.history_mode&&this.$store.state.Data.CaseAttendance.selected_step>0&&(t=this.$store.state.Data.CaseAttendance.selected_step),e.data.attendance_history&&e.data.attendance_history.steps&&e.data.attendance_history.steps[t]&&e.data.attendance_history.steps[t].call_attempts&&(this.retryList=[],this.attendant_list=e.data.users_info,e.data.attendance_history.steps[t].call_attempts.map(e=>{let t={attempt_timestamp:e.attempt_timestamp,attendant:this.getAttendantInfo(e.attendant_id),observation:""==e.bricks.conclusao_atendimento.observation?"Sem observa
 em atendimento.",attendance_schedule_pending:"Erro, atendimento em status SCHEDULE_PENDING",attendance_error:"Erro ao gerar o PDF",attendance_successful:"Atendimento realizado com sucesso",attendance:"de Atendimento",auth_error:"O PIN informado 
es da anestesia administrada durante o puerp
es de anestesia administrada durante a gravidez","created_at":"2020-04-03 23:48:57.224578","updated_at":"2020-04-03 23:48:57.227045"},{"id":1101,"cid_group_id":15,"code":"O30","name":"Gesta
es devidas a drogas administradas ao feto e ao rec
es do antendimento em nosso servidor. Tente novamente em alguns instantes",this.fieldError=!1))},closeSaveAttendance(){this.dialogSaveAttendance=!1,this.saveSuccess=!1,this.saveError=!1},certifyAttendance(){this.dialogSaveAttendance=!1,this.dialogCertification=!0,this.$bus.emit("open-digital-certification-modal",{hasToken:this.hasToken,inAttendance:!0,pendingDocs:this.pendingDocs})},saveCertification(){this.$bus.emit("toggle-loading",!0);let e=Object.keys(this.$store.state.Data.CaseAttendance.info).length>0&&!1===this.generateDocuments?this.$store.state.Data.CaseAttendance.info:this.item;if(this.invalidPhone=!1,1==this.whatsapp){if(0!==this.celphone.indexOf("55")||this.celphone.length<13)return void(this.invalidPhone=!0);this.celphoneSend=this.getRawPhoneHelper(this.celphone)}else this.celphoneSend="";this.$bus.emit("get-document-data"),this.disabled=!0,this.loading=!0,this.failed=!1,this.savePayload={token:this.$store.state.Data.User.token,patient_id:e.patient_info.id,user_id:this.$store.state.Data.User.info.user_info.id,case_id:e.case_id||this.case_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING,program_id:this.item.program_id||e.program_information[0].id,program_step:1,due_date:this.$moment(e.due_date).format("YYYY-MM-DD"),due_time:e.due_time,bricks:JSON.stringify(this.data),case_attendance_id:e.case_attendance_id},this.$bus.emit("certify-attendance",{cpf:this.cpf,accessToken:this.accessToken,attendancePayload:this.savePayload,provider:this.selectedCertification,has_whatsapp:this.whatsapp,test_failed:this.testFailed,phone_number:this.celphoneSend,case_attendance_id:e.case_attendance_id})},finishAttendance(e=!1){this.loading=!0,this.success=!1,this.error=!1;let t=Object.keys(this.$store.state.Data.CaseAttendance.info).length>0&&!1===this.generateDocuments?this.$store.state.Data.CaseAttendance.info:this.item,a={token:this.$store.state.Data.User.token,case_attendance_id:t.case_attendance_id,has_whatsapp:this.whatsapp,phone_mobile:this.celphoneSend};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.FINISH,a).then(e=>{this.attendancesToProcess.length>0&&Ge.attendancesProccessCreate(this.attendancesToProcess),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR)}).catch(e=>{console.error(e,"when finishing session")}).finally(()=>{this.loading=!1,setTimeout(()=>{this.endAttendance()},2e3),e&&this.$bus.emit("open-documents-async-dialog")})},endAttendance(){this.$bus.emit("close-temp-data-tab"),this.$bus.emit("trigger-home-mounted");const e=this.$consts.NUTRITIONAL_PROGRAM.includes(this.$store.state.Data.CaseAttendance.info.program_id),t=this.$consts.SPORTIVE_PROGRAM.includes(this.$store.state.Data.CaseAttendance.info.program_id);e||t||!this.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")||(console.log("[SAVE MODAL] Buscando pr
es":e.bricks.conclusao_atendimento.observation};this.retryList.push(t)}),this.numRetries=this.retryList.length)}).catch(e=>{console.error("could not load attempt history",e)})},getAttendantInfo(e){return this.attendant_list.find(t=>t.id==e)},addRetry(){this.numRetries++;let e=this.$store.state.Data.User.token,t={token:e,case_attendance_id:this.caseAttendanceId,user_id:this.$store.state.Data.User.info.user_info.id,step:this.$store.state.Data.CaseAttendance.info.program_step,attempt_action:"ADD",bricks:JSON.stringify({conclusao_atendimento:{attendance_complete_successfully:!1,observation:this.observation}})};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ATTEMPT_CALL,t).then(e=>{this.$bus.emit("open-snackbar",{message:"attempt_add"}),this.loadHistory(),this.observation="",this.$bus.emit("close-temp-data-tab")}).catch(e=>{this.numRetries--,console.error("Something went wrong when adding an attempt")})}},computed:{}},Su=pu,Cu=(a("2970"),Object(I["a"])(Su,mu,uu,!1,null,null,null)),Tu=Cu.exports,Ru=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emr-observation"},[t("div",{staticClass:"emr-observation"},[t("div",{staticClass:"emr-observation-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.emr_observation")))])])]),t("div",{staticClass:"d-flex"},[t(Ni["a"],{staticClass:"observation-area",attrs:{disabled:e.disabled,height:"100px",label:e.$t("attendance.observations"),outlined:"","no-resize":""},model:{value:e.observation,callback:function(t){e.observation=t},expression:"observation"}})],1)])},Du=[],gu={props:["brickDetails"],data(){return{observation:"",disabled:!1}},created(){if((null!=this.$store.state.Data.Queue.incoming_queue&&"QUEUE"===this.$store.state.Data.Queue.incoming_queue.type||!0===this.$store.state.Data.CaseAttendance.history_mode)&&(this.disabled=!0),this.brickDetails&&this.brickDetails.emr_observation&&this.brickDetails.emr_observation.length>0){this.disabled=!0;let e=this.brickDetails.emr_observation[0];this.observation=e.observation?e.observation:""}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{sendSaveData(){let e={brick_key:"emr_observation",brick_data:{observation:this.observation}};this.$bus.emit("receive-brick-data",e)},receiveObservationData(e){this.visible=!0,e&&e.observation&&0!==e.observation.length||(this.visible=!1),this.observation=e.observation,this.disable=!0}}},Lu=gu,fu=(a("e593"),Object(I["a"])(Lu,Ru,Du,!1,null,null,null)),Nu=fu.exports,ku=function(){var e=this,t=e._self._c;return t("div",{staticClass:"faturamento_tiss"},[t("div",{staticClass:"faturamento_tiss"},[t("div",{staticClass:"faturamento_tiss-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.faturamento_tiss_brick")))])])]),t("div",{staticClass:"d-flex flex-wrap"},[t("div",{staticClass:"mr-md-4 mb-4",staticStyle:{flex:"1","min-width":"300px"}},[t(se["a"],{staticClass:"sign-input mb-n2",attrs:{id:"tipo-consulta","item-color":"primary","append-icon":"keyboard_arrow_down",items:e.serviceTypes,"item-text":"label","item-value":"value",disabled:e.disabled,"error-messages":e.tipoConsultaErrors,label:e.$t("attendance.type_attendance"),height:"40px",outlined:"","return-object":""},model:{value:e.tipoConsulta,callback:function(t){e.tipoConsulta=t},expression:"tipoConsulta"}})],1),t("div",{staticStyle:{flex:"1","min-width":"300px"}},[t(se["a"],{staticClass:"sign-input mb-n2",attrs:{id:"indicacao-acidente","item-color":"primary","append-icon":"keyboard_arrow_down",items:e.accidentIndications,"item-text":"label","item-value":"value",disabled:e.disabled,"error-messages":e.IndicacaoAcidenteErrors,label:e.$t("attendance.accident_indication"),height:"40px",outlined:"","return-object":""},model:{value:e.indicacaoAcidente,callback:function(t){e.indicacaoAcidente=t},expression:"indicacaoAcidente"}})],1)])])},vu=[],bu={props:["brickDetails"],data(){return{serviceTypes:[{value:1,label:this.$t("attendance.first_attendance")},{value:2,label:this.$t("attendance.return_attendance")},{value:3,label:this.$t("attendance.prenatal_attendance")},{value:4,label:this.$t("attendance.referral_attendance")}],accidentIndications:[{value:1,label:this.$t("attendance.work")},{value:2,label:this.$t("attendance.traffic")},{value:3,label:this.$t("attendance.others")},{value:4,label:this.$t("attendance.not_accident")}],tipoConsulta:{value:1,label:this.$t("attendance.first_attendance")},indicacaoAcidente:{value:4,label:this.$t("attendance.not_accident")},generalServiceTypes:[],generalAccidentIndications:[],disabled:!1,isValid:!0,message:""}},created(){if(this.getAccidentIndications(),this.getServiceTypes(),(null!=this.$store.state.Data.Queue.incoming_queue&&"QUEUE"===this.$store.state.Data.Queue.incoming_queue.type||!0===this.$store.state.Data.CaseAttendance.history_mode)&&(this.disabled=!0),this.brickDetails&&this.brickDetails.faturamento_tiss&&this.brickDetails.faturamento_tiss.length>0){this.disabled=!0;let e=this.brickDetails.faturamento_tiss[0];this.tipoConsulta=e.service_type_id?e.service_type_id:"",this.indicacaoAcidente=e.accident_indication_id?e.accident_indication_id:""}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{sendSaveData(){this.$v.$touch();const e=this.tipoConsulta&&this.tipoConsulta.value?this.tipoConsulta.value:null,t=this.indicacaoAcidente&&this.indicacaoAcidente.value?this.indicacaoAcidente.value:null;e&&t?(this.isValid=!0,this.message=""):(this.isValid=!1,this.message=this.$t("attendance.tiss_required_field"));const a={brick_key:"faturamento_tiss",brick_data:{service_type_id:e,accident_indication_id:t},isValid:this.isValid,message:this.message};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,a),this.$bus.emit("receive-brick-data",a)},getServiceTypes(){Bs.getServiceTypes().then(e=>{this.generalServiceTypes=e.data,this.serviceTypes=this.generalServiceTypes.map(e=>({value:e.id,label:this.$t("attendance."+e.translate)}))}).catch(e=>{console.error("Error fetching service types:",e)})},getAccidentIndications(){Bs.getAccidentIndications().then(e=>{this.generalAccidentIndications=e.data,this.accidentIndications=this.generalAccidentIndications.map(e=>({value:e.id,label:this.$t("attendance."+e.translate)}))}).catch(e=>{console.error("Error fetching accident indications:",e)})}},validations:{tipoConsulta:{required:Ae["required"]},indicacaoAcidente:{required:Ae["required"]}},computed:{tipoConsultaErrors(){const e=[];return this.$v.tipoConsulta.$dirty?(!this.$v.tipoConsulta.required&&e.push(this.$t("access_controls.required")),e):e},IndicacaoAcidenteErrors(){const e=[];return this.$v.indicacaoAcidente.$dirty?(!this.$v.indicacaoAcidente.required&&e.push(this.$t("access_controls.required")),e):e}}},Mu=bu,Pu=(a("8cf3"),Object(I["a"])(Mu,ku,vu,!1,null,null,null)),Uu=Pu.exports,yu=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emr_agendamento"},[t("div",{staticClass:"emr_agendamento-title"},[t("div",{staticClass:"emr_agendamento-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(e.$t("attendance.emr_agendamento"))+"\n      ")])])]),t("div",[e.cancelReason&&0===e.cancelReason.length?t("div",{staticClass:"emr_agendamento-container-row"},[t("p",{staticClass:"bold"},[e._v(e._s(e.$t("attendance.user_booked_cancel")))]),t("p",{staticClass:"ml-2"},[e._v("\n        "+e._s(e.cancelReason)+"\n      ")])]):e._e(),t("div",{staticClass:"emr_agendamento-container-row"},[t("p",{staticClass:"bold"},[e._v(e._s(e.$t("attendance.user_booked_reason")))]),t("p",{staticClass:"ml-2"},[e._v("\n        "+e._s(e.bookedReason&&0!==e.bookedReason.length?e.bookedReason:"-")+"\n      ")])]),t("div",[t(Ni["a"],{attrs:{filled:"",label:e.$t("attendance.reason_observation"),disabled:!0,height:"100px",readonly:!0,outlined:"","no-resize":""},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),t("div",[t("p",{staticClass:"text-color bold"},[e._v(e._s(e.$t("attendance.is_fitting"))+":")]),t(Qs["a"],{attrs:{disabled:!0},model:{value:e.fitting,callback:function(t){e.fitting=t},expression:"fitting"}},[t(Zs["a"],{attrs:{label:e.$t("attendance.yes"),value:!0}}),t(Zs["a"],{attrs:{label:e.$t("attendance.no"),value:!1}})],1)],1)])])},$u=[],xu={props:["brickDetails"],components:{},data(){return{bookedReason:"",cancelReason:"",reason:"",fitting:!1}},created(){this.bookedReason=this.brickDetails.emr_agendamento.user_booked_schedule_reason_name,this.cancelReason=this.brickDetails.emr_agendamento.user_booked_cancel_reason_name,this.reason=this.brickDetails.emr_agendamento.reason&&0!==this.brickDetails.emr_agendamento.reason.length?this.brickDetails.emr_agendamento.reason:"-",this.fitting=this.brickDetails.emr_agendamento.fitting},methods:{}},Vu=xu,Gu=(a("0dbf"),Object(I["a"])(Vu,yu,$u,!1,null,"9f37d25a",null)),Fu=Gu.exports,Bu=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"title-schedule"},[t("b",[e._v(e._s(e.$t("schedule.scheduling")))]),e._v(" "+e._s(e.$t("schedule.indicative"))+" ")]),e._l(e.schedule_data.brick_options_hierarchy,(function(a,n){return t("div",{key:n,staticClass:"observations"},[t("p",{staticClass:"schedule-title"},[e._v(e._s(a.brick_name)+" ")]),e._l(a.options_hierarchy,(function(a,n){return t("div",{key:n,staticClass:"observations"},[t("p",{staticClass:"schedule-title"},[e._v(e._s(a.name)+" ")]),e._l(a.options_hierarchy,(function(a,n){return t("div",{key:n,staticClass:"observations"},[t("p",{staticClass:"schedule-title"},[e._v(e._s(a.name)+" ")]),e._l(a.options_hierarchy,(function(a,n){return t("div",{key:n,staticClass:"observations"},[t("p",{staticClass:"schedule-title"},[e._v(e._s(a.name)+" ")]),e._l(a.options_hierarchy,(function(a,n){return t("div",{key:n,staticClass:"observations"},[t("p",{staticClass:"schedule-title"},[e._v(e._s(a.name)+" ")])])}))],2)}))],2)}))],2)}))],2)}))],2)},wu=[],Hu={props:["brickDetails"],data(){return{schedule_data:{}}},created(){this.schedule_data=this.brickDetails.agendamento_indicativo}},qu=Hu,Yu=(a("c880"),Object(I["a"])(qu,Bu,wu,!1,null,null,null)),ju=Yu.exports,Ku=a("cd55"),Zu=a("49e2"),Qu=a("c865"),Ju=a("0393"),Wu=function(){var e=this,t=e._self._c;return t(Ju["a"],{staticClass:"nutrition-answers rounded",attrs:{accordion:""},model:{value:e.openedPanel,callback:function(t){e.openedPanel=t},expression:"openedPanel"}},[t(Ku["a"],{attrs:{expand:"",value:0}},[t(Qu["a"],[t("span",{staticClass:"font-weight-bold nutrition-answers-title"},[e._v("\n        "+e._s(e.$t("patient.nutrition_answers.nutrition_questionnaire"))+"\n      ")]),t("div",[t("span",{staticClass:"font-weight-bold subtitle-2",attrs:{outlined:""}},[e._v("\n        "+e._s(e.riskRating)+"\n      ")])])]),t(Zu["a"],[[t($a["a"],{scopedSlots:e._u([{key:"default",fn:function(){return[t("thead"),t("tbody",[e._l(e.questions,(function(a){return[t("form-question",{key:a.id,attrs:{data:a,"max-td":e.maxOptionsTd,answer:e.allAnswers,disabled:e.disabled}})]}))],2)]},proxy:!0}])})],t(r["a"],{staticClass:"save-bt ma-4",class:[{"save-disabled":e.disabled||!e.allowCalculateRisk},e.riskColor],attrs:{color:"primary"},on:{click:function(t){return e.getRiskRating()}}},[t("span",{staticClass:"save-text"},[e._v(e._s(e.riskRating))])])],2),e.fillError?t("p",{staticClass:"cancel-text ml-5 red--text"},[e._v(e._s(e.$t("nutritional.fillQuestionsError")))]):e._e()],1)],1)},Xu=[],zu=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-questions"},[t("tr",{staticClass:"questions-row",class:e.data.str_translation},[t("td",{staticClass:"question-col",attrs:{width:250}},[e._v(e._s(e.data.field_value))]),t("td",{staticClass:"options-col"},e._l(e.data.options,(function(a,n){return a.active&&a.field_value?t("div",{key:a.id,staticClass:"option",class:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.toggleCheck(a,e.data.id)}}},[t("label",{staticClass:"container",attrs:{for:a.id},on:{click:function(e){e.preventDefault()}}},[t("input",{attrs:{type:"checkbox",id:a.id,name:a.field_value},domProps:{value:a.id,checked:e.choose==a.id}}),t("span",{staticClass:"checkmark"})]),t("span",[e._v(e._s(a.field_value))])]):e._e()})),0)])])},eA=[],tA={name:"FormQuestion",props:["data","maxTd","answer","disabled"],data(){return{choose:0}},created(){if(this.answer){let e=this.answer.find(e=>e.question_id==this.data.id);if(e){this.choose=e.answer_id;let t={questionId:e.question_id,answerId:e.answer_id,answerWeight:e.answer_weighting};this.$store.dispatch(this.$consts.NUTRI.SET_ANSWER,t),this.$bus.emit("questions-get-risk-rating")}}this.adjustOptions()},methods:{toggleCheck(e,t){this.choose=this.choose==e.id?0:e.id;let a={questionId:t,answerId:e.id,answerWeight:e.answer_weight};this.$store.dispatch(this.$consts.NUTRI.SET_ANSWER,a),this.$bus.emit("questions-get-risk-rating")},adjustOptions(){if(this.data.options.length<this.maxTd)for(let e=this.data.options.length;e<this.maxTd;e++)this.data.options.push({field_value:!1})}}},aA=tA,nA=(a("e270"),Object(I["a"])(aA,zu,eA,!1,null,"7c084214",null)),iA=nA.exports,sA={getNutritionalPrograms(){return this.getDynamicFieldDropdown("nutritional_programs")},getNutritionalObjectives(){return this.getDynamicFieldDropdown("nutritional_objective")},getPregnantWeek(){return this.getDynamicFieldDropdown("pregnancy_weeks")},getFoodAllergies(){return this.getDynamicFieldDropdown("food_allergies")},getFoodIntolerances(){return this.getDynamicFieldDropdown("food_intolerance")},getBowelFunctions(){return this.getDynamicFieldDropdown("bowel_function")},getMedicaments(){return this.getDynamicFieldDropdown("medicaments_allergies")},getMedicamentsContinuousUse(){return this.getDynamicFieldDropdown("medicaments_allergies")},getPhysicalActivities(){return this.getDynamicFieldDropdown("physical_activities")},getPhysicalActivitiesFrequency(){return this.getDynamicFieldDropdown("physical_activities_frequency")},getCompletionAccompaniment(){return this.getDynamicFieldDropdown("completion_accompaniment")},getSmokeFrequency(){return this.getDynamicFieldDropdown("smoke_frequency")},getDrinkFrequency(){return this.getDynamicFieldDropdown("drink_frequency")},getQuestion(e){return new Promise((t,a)=>{C.a.post(""+R.ENDPOINTS.QUESTION.GET,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getDynamicFieldDropdown(e){return new Promise((t,a)=>{C.a.get(`${R.ENDPOINTS.DYNAMIC_FIELD.DROPDOWN}?usage_group_type=${e}`,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},calculateImc(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.IMC_CALCULATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getProgramQuestions(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.NUTRI.GET_QUESTIONS,e,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(e=>{t(e.data.data.questions)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getRiskRating(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.NUTRI.GET_RISK_RATING,e,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(e=>{t(e.data.data.classificacao)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getSportRiskRating(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.NUTRI.GET_SPORT_RISK_RATING,e,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(e=>{t(e.data.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getSelectedAnswers(e,t){const a=e.filter(e=>e.dynamic_question_id==t.id),n=a.map(e=>e.dynamic_drop_down_option_id);return n},getAnswerAdditionalText(e,t){const a=e.filter(e=>e.dynamic_question_id==t.id),n=a&&a.length>0&&a[0].addicional_information?a[0].addicional_information:"";return n}},oA={components:{FormQuestion:iA},props:["brickDetails"],data(){return{brickName:"nutricional_answers_history",openedPanel:0,disabled:!1,fillError:!1,questions:[],maxOptionsTd:0,countQuestions:0,allAnswers:null,allAnswersBackup:null,risk:null,riskRating:"",riskId:0}},beforeCreate(){this.$store.dispatch(this.$consts.NUTRI.CLEAR)},created(){!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]&&(this.allAnswers=this.brickDetails[this.brickName]||null),this.riskRating=this.$t("patient.nutrition_answers.calculate_risk_rating"),this.getQuestions(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()}),this.$bus.on("questions-get-risk-rating",()=>{this.$store.state.Data.Nutri.allAnswers.length<this.allAnswers.length||this.getRiskRating()}),this.$bus.on("nutritional-care-change-step",e=>{let t=this.$store.state.Data.CaseAttendance.info;e.step==t.case_attendance_id?(this.$store.state.Data.Nutri.allAnswers=[],this.allAnswers=[...this.allAnswersBackup],this.allAnswersBackup=null,this.disabled=!1):(this.disabled=!0,this.allAnswersBackup||(this.allAnswersBackup=[...this.allAnswers].map(e=>{let t=this.$store.state.Data.Nutri.allAnswers.find(t=>t.questionId==e.question_id);return e.answer_id=t.answerId,e.answer_weighting=t.answerWeight,e})),this.$store.state.Data.Nutri.allAnswers=[],this.allAnswers=e[this.brickName]||null),this.questions=[],this.getQuestions(),this.getRiskRating()})},mounted(){this.openedPanel=!1},beforeDestroy(){this.$bus.off("questions-get-risk-rating"),this.$bus.off("nutritional-care-change-step")},methods:{getQuestions(){let e={program_id:this.$store.state.Data.CaseAttendance.info.program_id,usage_group_type:10};sA.getProgramQuestions(e).then(e=>{this.countQuestions=0;for(let t in e)this.maxOptionsTd=e[t].options.length>this.maxOptionsTd?e[t].options.length:this.maxOptionsTd,this.countQuestions++;this.questions=e}).catch(e=>{console.log(e)})},getRiskRating(e=null){let t=this.$store.state.Data.Nutri.allAnswers.map(e=>({id:e.questionId,peso:e.answerWeight||e.answer_weight}));sA.getRiskRating(t).then(e=>{switch(e){case"Risco Baixo":this.riskRating=this.$t("patient.nutrition_answers.risk_low"),this.riskId=1;break;case"Risco Moderado":this.riskRating=this.$t("patient.nutrition_answers.risk_medium"),this.riskId=2;break;case"Risco Alto":this.riskRating=this.$t("patient.nutrition_answers.risk_high"),this.riskId=3;break;case"Risco Severo":this.riskRating=this.$t("patient.nutrition_answers.risk_severe"),this.riskId=4;break}this.risk=e,this.$store.dispatch(this.$consts.NUTRI.SET_RISK,e),this.fillError=!1}).catch(e=>{console.log(e)})},sendSaveData(){this.fillError=!this.risk;let e={allAnswers:this.$store.state.Data.Nutri.allAnswers,questions:this.$store.state.Data.Nutri.questions,risk:this.risk},t={brick_key:this.brickName,brick_data:e,isValid:!this.fillError,message:this.fillError?this.$t("nutritional.nutritionalQuestionsError"):""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,t),this.$bus.emit("receive-brick-data",t)}},computed:{allowCalculateRisk:function(){let e=this.$store.state.Data.Nutri.allAnswers.length==this.countQuestions&&this.$store.state.Data.Nutri.allAnswers.length>0;return e&&this.getRiskRating(),e},riskColor(){switch(this.riskId){case 0:return"calculate-risk";case 1:return"risk-low";case 2:return"risk-medium";case 3:return"risk-high";case 4:return"risk-severe";default:return"calculate-risk"}}}},rA=oA,lA=(a("4b4f"),Object(I["a"])(rA,Wu,Xu,!1,null,"702ef9fd",null)),cA=lA.exports,dA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"member-nutrition-brick"},[t("div",{staticClass:"diag-title mt-10"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.information")))]),e._v("\n      "+e._s(e.$t("nutritional.health"))+"\n    ")])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:e.isFemale?4:6}},[t(se["a"],{attrs:{label:e.$t("nutritional.program"),items:e.programs,"search-input":e.searchPrograms,loading:e.loadingPrograms,"error-messages":e.programErrors,"item-text":"field_value","item-value":"id",height:"37px",outlined:"",required:"",disabled:e.disabledVidaV},on:{"update:searchInput":function(t){e.searchPrograms=t},"update:search-input":function(t){e.searchPrograms=t},blur:function(t){return e.$v.form.program_id.$touch()},input:function(t){e.searchPrograms=""}},model:{value:e.form.program_id,callback:function(t){e.$set(e.form,"program_id",t)},expression:"form.program_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:e.isFemale?4:6}},[t(se["a"],{attrs:{label:e.$t("nutritional.objective"),items:e.objectives,"search-input":e.searchObjectives,loading:e.loadingObjectives,"error-messages":e.objectiveErrors,"item-text":"field_value","item-value":"id",height:"37px",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchObjectives=t},"update:search-input":function(t){e.searchObjectives=t},blur:function(t){return e.$v.form.objective_id.$touch()},input:function(t){e.searchObjectives=""}},model:{value:e.form.objective_id,callback:function(t){e.$set(e.form,"objective_id",t)},expression:"form.objective_id"}})],1),e.isFemale?t(oe["a"],{attrs:{cols:"12",md:e.form.pregnant?2:4}},[t($t["a"],{attrs:{label:e.$t("nutritional.pregnant"),items:e.pregnantOptions,"item-text":"text","item-value":"value",height:"37px",outlined:""},on:{change:function(t){return e.calculateImc()}},model:{value:e.form.pregnant,callback:function(t){e.$set(e.form,"pregnant",t)},expression:"form.pregnant"}})],1):e._e(),e.isFemale&&e.form.pregnant?t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(se["a"],{attrs:{label:e.$t("nutritional.pregnantWeek"),items:e.pregnantWeekOptions,"search-input":e.searchPregnantWeek,loading:e.loadingPregnantWeek,"error-messages":e.pregnantWeekErrors,"item-value":"id","item-text":"field_value",height:"37px",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchPregnantWeek=t},"update:search-input":function(t){e.searchPregnantWeek=t},blur:function(t){return e.$v.form.pregnantWeek.$touch()},change:function(t){return e.calculateImc()},input:function(t){e.searchPregnantWeek=""}},model:{value:e.form.pregnantWeek,callback:function(t){e.$set(e.form,"pregnantWeek",t)},expression:"form.pregnantWeek"}})],1):e._e(),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###,##","##,##","#,##"],expression:"['###,##', '##,##', '#,##']"}],attrs:{type:"text",label:e.$t("nutritional.weight"),"error-messages":e.weightErrors,readonly:e.weightDisable,disabled:e.weightDisable,height:"37px",outlined:"",required:""},on:{blur:e.adjustWeight},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["#,##"],expression:"['#,##']"}],attrs:{type:"text",label:e.$t("nutritional.height"),"error-messages":e.heightErrors,height:"37px",outlined:"",required:""},on:{blur:e.adjustHeight},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t("nutritional.imc"),loading:e.loadingImc,height:"37px",outlined:"",readonly:""},model:{value:e.imcCalc.imc,callback:function(t){e.$set(e.imcCalc,"imc",t)},expression:"imcCalc.imc"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t("nutritional.imc_classification"),loading:e.loadingImc,height:"37px",outlined:"",readonly:""},model:{value:e.imcCalc.classificacao,callback:function(t){e.$set(e.imcCalc,"classificacao",t)},expression:"imcCalc.classificacao"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("nutritional.drink_frequency"),items:e.drinkFrequencyOptions,loading:e.loadingDrinkFrequency,"item-value":"id","item-text":"field_value",height:"37px",outlined:""},model:{value:e.form.drinkFrequency,callback:function(t){e.$set(e.form,"drinkFrequency",t)},expression:"form.drinkFrequency"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("nutritional.smoke_frequency"),items:e.smokeFrequencyOptions,loading:e.loadingSmokeFrequency,"item-value":"id","item-text":"field_value",height:"37px",outlined:""},model:{value:e.form.smokeFrequency,callback:function(t){e.$set(e.form,"smokeFrequency",t)},expression:"form.smokeFrequency"}})],1),t(oe["a"],{staticClass:"mb-5",attrs:{cols:"12",md:"3"}},[e.addingFoodAllergy||e.form.foodAllergy?t("div",[t(se["a"],{attrs:{label:e.$t("nutritional.foodAllergy"),items:e.foodAllergies,"search-input":e.searchFoodAllergies,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingFoodAllergies,loading:e.loadingFoodAllergies,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchFoodAllergies=t},"update:search-input":function(t){e.searchFoodAllergies=t},change:e.wasOthersFoodAllergiesSelected,input:function(t){e.searchFoodAllergies=""}},model:{value:e.form.foodAllergy,callback:function(t){e.$set(e.form,"foodAllergy",t)},expression:"form.foodAllergy"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteFoodAllergy},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1),e.addingFoodAllergyOther?t(Ls["a"],{staticClass:"mt-3",attrs:{label:e.$t("nutritional.others"),items:e.form.foodAllergyOthers||[],"search-input":e.searchFoodAllergiesOthers,height:"auto","hide-selected":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchFoodAllergiesOthers=t},"update:search-input":function(t){e.searchFoodAllergiesOthers=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(Ct["a"],{staticClass:"combobox-helper",attrs:{persisted:""}},[t(Tt["a"],[e.searchFoodAllergiesOthers?t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.press"))+"\n                      "),t("kbd",[e._v(e._s(e.$t("nutritional.enter")))]),e._v("\n                      "+e._s(e.$t("nutritional.to_insert"))+" "),t("br"),t("br"),e._v('\n                      "'),t("strong",[e._v(e._s(e.searchFoodAllergiesOthers))]),e._v('"\n                    ')]):t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.insertOtherFoodAllergy"))+"\n                    ")])],1)],1)]},proxy:!0}],null,!1,1529158476),model:{value:e.form.foodAllergyOthers,callback:function(t){e.$set(e.form,"foodAllergyOthers",t)},expression:"form.foodAllergyOthers"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteFoodAllergyOthers},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1):e._e()],1):t("div",{staticClass:"add-label-container"},[t("label",{staticClass:"add-label"},[e._v(e._s(e.$t("nutritional.foodAllergy")))]),t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewFoodAllergy}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)]),t(oe["a"],{staticClass:"mb-5",attrs:{cols:"12",md:"3"}},[e.addingFoodIntolerance||e.form.foodIntolerance?t("div",[t(se["a"],{attrs:{label:e.$t("nutritional.foodIntolerance"),items:e.foodIntolerances,"search-input":e.searchFoodIntolerances,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingFoodIntolerances,loading:e.loadingFoodIntolerances,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchFoodIntolerances=t},"update:search-input":function(t){e.searchFoodIntolerances=t},change:e.wasOthersFoodIntolerancesSelected,input:function(t){e.searchFoodIntolerances=""}},model:{value:e.form.foodIntolerance,callback:function(t){e.$set(e.form,"foodIntolerance",t)},expression:"form.foodIntolerance"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteFoodIntolerance},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1),e.addingFoodIntoleranceOther?t(Ls["a"],{staticClass:"mt-3",attrs:{label:e.$t("nutritional.others"),items:e.form.foodIntoleranceOthers||[],"search-input":e.searchFoodIntolerancesOthers,height:"auto","hide-selected":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchFoodIntolerancesOthers=t},"update:search-input":function(t){e.searchFoodIntolerancesOthers=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(Ct["a"],{staticClass:"combobox-helper",attrs:{persisted:""}},[t(Tt["a"],[e.searchFoodIntolerancesOthers?t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.press"))+"\n                      "),t("kbd",[e._v(e._s(e.$t("nutritional.enter")))]),e._v("\n                      "+e._s(e.$t("nutritional.to_insert"))+" "),t("br"),t("br"),e._v('\n                      "'),t("strong",[e._v(e._s(e.searchFoodIntolerancesOthers))]),e._v('"\n                    ')]):t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.insertFood"))+"\n                    ")])],1)],1)]},proxy:!0}],null,!1,1433467648),model:{value:e.form.foodIntoleranceOthers,callback:function(t){e.$set(e.form,"foodIntoleranceOthers",t)},expression:"form.foodIntoleranceOthers"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteFoodIntoleranceOthers},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1):e._e()],1):t("div",{staticClass:"add-label-container"},[t("label",{staticClass:"add-label"},[e._v(e._s(e.$t("nutritional.foodIntolerance")))]),t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewFoodIntolerance}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)]),t(oe["a"],{staticClass:"mb-5",attrs:{cols:"12",md:"3"}},[e.addingOtherAllergy||e.form.otherAllergy?t("div",[t(Ls["a"],{attrs:{label:e.$t("nutritional.otherAllergy"),items:e.form.otherAllergy||[],"search-input":e.searchOtherAllergy,height:"auto","hide-selected":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchOtherAllergy=t},"update:search-input":function(t){e.searchOtherAllergy=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(Ct["a"],{staticClass:"combobox-helper"},[t(Tt["a"],[e.searchOtherAllergy?t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.press"))+"\n                      "),t("kbd",[e._v(e._s(e.$t("nutritional.enter")))]),e._v("\n                      "+e._s(e.$t("nutritional.to_insert"))+" "),t("br"),t("br"),e._v('\n                      "'),t("strong",[e._v(e._s(e.searchOtherAllergy))]),e._v('".\n                    ')]):t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.insertOtherAllergy"))+"\n                    ")])],1)],1)]},proxy:!0}]),model:{value:e.form.otherAllergy,callback:function(t){e.$set(e.form,"otherAllergy",t)},expression:"form.otherAllergy"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteOtherAllergies},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1)],1):t("div",{staticClass:"add-label-container"},[t("label",{staticClass:"add-label"},[e._v(e._s(e.$t("nutritional.otherAllergy")))]),t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewOtherAllergy}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)]),t(oe["a"],{staticClass:"mb-5",attrs:{cols:"12",md:"3"}},[e.addingFoodRejection||e.form.foodRejection?t("div",[t(Ls["a"],{attrs:{label:e.$t("nutritional.foodRejection"),items:e.form.foodRejection||[],"search-input":e.searchFoodRejection,height:"auto","hide-selected":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchFoodRejection=t},"update:search-input":function(t){e.searchFoodRejection=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(Ct["a"],{staticClass:"combobox-helper",attrs:{persisted:""}},[t(Tt["a"],[e.searchFoodRejection?t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.press"))+"\n                      "),t("kbd",[e._v(e._s(e.$t("nutritional.enter")))]),e._v("\n                      "+e._s(e.$t("nutritional.to_insert"))+" "),t("br"),t("br"),e._v('\n                      "'),t("strong",[e._v(e._s(e.searchFoodRejection))]),e._v('"\n                    ')]):t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.insertFood"))+"\n                    ")])],1)],1)]},proxy:!0}]),model:{value:e.form.foodRejection,callback:function(t){e.$set(e.form,"foodRejection",t)},expression:"form.foodRejection"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteFoodRejection},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1)],1):t("div",{staticClass:"add-label-container"},[t("label",{staticClass:"add-label"},[e._v(e._s(e.$t("nutritional.foodRejection")))]),t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewFoodRejection}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)])],1)],1)],1),t("div",{staticClass:"diag-title mt-10 mb-5"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.bowelFunction")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(se["a"],{attrs:{label:e.$t("nutritional.bowelFunction"),items:e.bowelFunctions,"search-input":e.searchBowelFunction,loading:e.loadingBowelFunction,"item-text":"field_value","item-value":"id",height:"37px","hide-details":"",outlined:""},on:{"update:searchInput":function(t){e.searchBowelFunction=t},"update:search-input":function(t){e.searchBowelFunction=t},input:function(t){e.searchBowelFunction=""}},model:{value:e.form.bowelFunction,callback:function(t){e.$set(e.form,"bowelFunction",t)},expression:"form.bowelFunction"}})],1)],1)],1)],1),t("div",{staticClass:"diag-title mt-10 mb-5"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.medication")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[e.addingMedsAllergy||e.form.medsAllergy?t("div",[t(se["a"],{attrs:{label:e.$t("nutritional.medsAllergy"),items:e.medicaments,"search-input":e.searchMedicamentsAllergy,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingMedicamentsAllergy,loading:e.loadingMedicamentsAllergy,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchMedicamentsAllergy=t},"update:search-input":function(t){e.searchMedicamentsAllergy=t},change:e.wasOthersMedsAllergySelected,input:function(t){e.searchMedicamentsAllergy=""}},model:{value:e.form.medsAllergy,callback:function(t){e.$set(e.form,"medsAllergy",t)},expression:"form.medsAllergy"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteMedsAllergy},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1),e.addingMedsAllergyOther?t(Ls["a"],{staticClass:"mt-3",attrs:{label:e.$t("nutritional.others"),items:e.form.medsAllergyOthers||[],"search-input":e.searchMedicamentsAllergyOthers,height:"auto","hide-selected":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchMedicamentsAllergyOthers=t},"update:search-input":function(t){e.searchMedicamentsAllergyOthers=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(Ct["a"],{staticClass:"combobox-helper",attrs:{persisted:""}},[t(Tt["a"],[e.searchMedicamentsAllergyOthers?t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.press"))+"\n                      "),t("kbd",[e._v(e._s(e.$t("nutritional.enter")))]),e._v("\n                      "+e._s(e.$t("nutritional.to_insert"))+" "),t("br"),t("br"),e._v('\n                      "'),t("strong",[e._v(e._s(e.searchMedicamentsAllergyOthers))]),e._v('"\n                    ')]):t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.insertMedication"))+"\n                    ")])],1)],1)]},proxy:!0}],null,!1,3334571513),model:{value:e.form.medsAllergyOthers,callback:function(t){e.$set(e.form,"medsAllergyOthers",t)},expression:"form.medsAllergyOthers"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteMedsAllergyOthers},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1):e._e()],1):t("div",{staticClass:"add-label-container"},[t("label",{staticClass:"add-label"},[e._v(e._s(e.$t("nutritional.medsAllergy")))]),t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewMedsAllergy}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)]),t(oe["a"],{attrs:{cols:"12",md:"6"}},[e.addingMedsContinuous||e.form.medsContinuous?t("div",[t(se["a"],{attrs:{label:e.$t("nutritional.medsContinuous"),items:e.medicaments,"search-input":e.searchMedicamentsContinuous,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingMedicamentsContinuous,loading:e.loadingMedicamentsContinuous,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchMedicamentsContinuous=t},"update:search-input":function(t){e.searchMedicamentsContinuous=t},change:e.wasOthersMedsContinuousSelected,input:function(t){e.searchMedicamentsContinuous=""}},model:{value:e.form.medsContinuous,callback:function(t){e.$set(e.form,"medsContinuous",t)},expression:"form.medsContinuous"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteMedsContinuous},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1),e.addingMedsContinuousOther?t(Ls["a"],{staticClass:"mt-3",attrs:{label:e.$t("nutritional.others"),items:e.form.medsContinuousOthers||[],"search-input":e.searchMedicamentsContinuousOthers,height:"auto","hide-selected":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchMedicamentsContinuousOthers=t},"update:search-input":function(t){e.searchMedicamentsContinuousOthers=t},input:function(t){e.searchMedicamentsContinuousOthers=""}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(Ct["a"],{staticClass:"combobox-helper",attrs:{persisted:""}},[t(Tt["a"],[e.searchMedicamentsContinuousOthers?t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.press"))+"\n                      "),t("kbd",[e._v(e._s(e.$t("nutritional.enter")))]),e._v("\n                      "+e._s(e.$t("nutritional.to_insert"))+" "),t("br"),t("br"),e._v('\n                      "'),t("strong",[e._v(e._s(e.searchMedicamentsContinuousOthers))]),e._v('"\n                    ')]):t(Tt["c"],[e._v("\n                      "+e._s(e.$t("nutritional.insertMedication"))+"\n                    ")])],1)],1)]},proxy:!0}],null,!1,3820377849),model:{value:e.form.medsContinuousOthers,callback:function(t){e.$set(e.form,"medsContinuousOthers",t)},expression:"form.medsContinuousOthers"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteMedsContinuousOthers},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1):e._e()],1):t("div",{staticClass:"add-label-container"},[t("label",{staticClass:"add-label"},[e._v(e._s(e.$t("nutritional.medsContinuous")))]),t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewMedsContinuous}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)])],1)],1)],1),t("div",{staticClass:"diag-title mt-10 mb-5"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.physicalActivities")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[e._l(e.form.physicalActivity,(function(a,n){return t(ce["a"],{key:n,staticClass:"mb-4"},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("nutritional.physicalActivity"),items:a.physicalActivity?e.physicalActivities:e.filteredPhysicalActivities,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingPhysicalActivity,loading:e.loadingPhysicalActivity,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"",outlined:""},model:{value:a.physicalActivity,callback:function(t){e.$set(a,"physicalActivity",t)},expression:"objectPhysicalActivity.physicalActivity"}},[e.form.physicalActivity.length-1==n?t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deletePhysicalActivities},slot:"append"},[e._v("\n              $vuetify.icons.delete\n            ")]):e._e()],1)],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("nutritional.frequency"),items:e.physicalActivityFrequencies,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingPhysicalActivityFrequency,loading:e.loadingPhysicalActivityFrequency,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"",outlined:""},model:{value:a.frequency,callback:function(t){e.$set(a,"frequency",t)},expression:"objectPhysicalActivity.frequency"}})],1)],1)})),e.canAddMorePhysicalActivities?t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewPhysicalActivity}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n        "+e._s(e.$t("nutritional.add"))+"\n      ")],1):e._e()],2)],1),t("div",{staticClass:"diag-title mt-10 mb-5"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.chronicDiseases")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[e.addingChronicDiseases||e.form.chronicDiseases?t("div",[t(se["a"],{attrs:{label:e.$t("nutritional.chronicDiseases"),items:e.isSimpleCIDs?e.filteredChronicDiseases:e.chronicDiseases,"search-input":e.searchChronicDiseases,"item-text":"name","hide-no-data":e.loadingChronicDiseases,loading:e.loadingChronicDiseases,"no-data-text":e.$t("controls.noDataAvailable"),"return-object":"",height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchChronicDiseases=t},"update:search-input":function(t){e.searchChronicDiseases=t},change:e.checkCid,input:function(t){e.searchChronicDiseases=""}},model:{value:e.form.chronicDiseases,callback:function(t){e.$set(e.form,"chronicDiseases",t)},expression:"form.chronicDiseases"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteChronicDiseases},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1)],1):t("div",{staticClass:"add-label-container"},[t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewChronicDiseases}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)])],1)],1)],1),t("div",{staticClass:"diag-title mt-10 mb-5"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.exams")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[e._l(e.form.exam,(function(a,n){return t(ce["a"],{key:n,staticClass:"mb-4 align-center"},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("nutritional.examName"),height:"37","hide-details":"",outlined:""},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"objectExam.name"}},[e.form.exam.length-1==n?t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteExams},slot:"append"},[e._v("\n              $vuetify.icons.delete\n            ")]):e._e()],1)],1),t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":"",lazy:""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:i}){return[a.schedule_date?t(de["a"],e._g(e._b({attrs:{label:e.$t("nutritional.examDate"),placeholder:"DD/MM/YYYY",height:"37px","hide-details":"",readonly:"",outlined:"",required:""},model:{value:e.$moment(a.schedule_date).format("DD/MM/YYYY"),callback:function(t){e.$set(e.$moment(a.schedule_date),"format('DD/MM/YYYY')",t)},expression:"$moment(objectExam.schedule_date).format('DD/MM/YYYY')"}},"v-text-field",i,!1),n)):t(de["a"],e._g(e._b({attrs:{label:e.$t("nutritional.examDate"),placeholder:"DD/MM/YYYY",height:"37px","hide-details":"",readonly:"",outlined:"",required:""}},"v-text-field",i,!1),n))]}}],null,!0),model:{value:a.datePicker,callback:function(t){e.$set(a,"datePicker",t)},expression:"objectExam.datePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,locale:"pt-br"},on:{input:function(e){a.datePicker=!1}},model:{value:a.schedule_date,callback:function(t){e.$set(a,"schedule_date",t)},expression:"objectExam.schedule_date"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{label:e.$t("nutritional.examResult"),height:"37","hide-details":"",outlined:""},model:{value:a.exam_value,callback:function(t){e.$set(a,"exam_value",t)},expression:"objectExam.exam_value"}})],1),t(oe["a"],{attrs:{cols:"12",md:"1"}},[t(St["a"],{attrs:{label:e.$t("nutritional.changed"),height:"37"},model:{value:a.changed,callback:function(t){e.$set(a,"changed",t)},expression:"objectExam.changed"}})],1)],1)})),e.canAddMoreExams?t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewExam}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n        "+e._s(e.$t("nutritional.add"))+"\n      ")],1):e._e()],2)],1)],1)},mA=[];let uA;var AA={props:["brickDetails"],data(){return{brickName:"member_nutrition_brick",cidsToShow:["B20","C76","E03","E10","E11","E66","E78","F32","G20","G30","G40","H54","H90","I10","I25","I50","J30","J41","J43","J45"],isSimpleCIDs:!0,disabled:!1,disabledVidaV:!1,weightDisable:!1,loadingPrograms:!1,loadingObjectives:!1,loadingPregnantWeek:!1,loadingImc:!1,loadingSmokeFrequency:!1,loadingDrinkFrequency:!1,loadingFoodAllergies:!1,loadingFoodIntolerances:!1,loadingBowelFunction:!1,loadingMedicamentsAllergy:!1,loadingMedicamentsContinuous:!1,loadingPhysicalActivity:!1,loadingPhysicalActivityFrequency:!1,loadingChronicDiseases:!1,isFemale:!1,programs:[],objectives:[],pregnantOptions:[{text:this.$t("nutritional.no"),value:!1},{text:this.$t("nutritional.yes"),value:!0}],pregnantWeekOptions:[],smokeFrequencyOptions:[],drinkFrequencyOptions:[],foodAllergies:[],foodIntolerances:[],bowelFunctions:[],medicaments:[],physicalActivities:[],physicalActivityFrequencies:[],chronicDiseases:[],searchPrograms:"",searchObjectives:"",searchPregnantWeek:null,searchFoodAllergies:null,searchFoodAllergiesOthers:null,searchFoodIntolerances:null,searchFoodIntolerancesOthers:null,searchOtherAllergy:null,searchFoodRejection:null,searchBowelFunction:"",searchMedicamentsAllergy:!1,searchMedicamentsAllergyOthers:!1,searchMedicamentsContinuous:!1,searchMedicamentsContinuousOthers:!1,searchChronicDiseases:null,addingFoodAllergy:!1,addingFoodAllergyOther:!1,addingFoodIntolerance:!1,addingFoodIntoleranceOther:!1,addingOtherAllergy:!1,addingFoodRejection:!1,addingMedsAllergy:!1,addingMedsAllergyOther:!1,addingMedsContinuous:!1,addingMedsContinuousOther:!1,addingChronicDiseases:!1,imcCalc:{imc:0,classificacao:""},patientAge:null,patientBirth:null,form:{program_id:null,objective_id:null,pregnant:!1,pregnantWeek:null,weight:null,height:null,smokeFrequency:null,drinkFrequency:null,foodAllergy:null,foodAllergyOthers:null,foodIntolerance:null,foodIntoleranceOthers:null,otherAllergy:null,foodRejection:null,bowelFunction:null,medsAllergy:null,medsAllergyOthers:null,medsContinuous:null,medsContinuousOthers:null,physicalActivity:[],chronicDiseases:null,exam:[]}}},filters:{Double(e){e.substr(2);return e.toUpperCase()}},created(){if(this.patientAge=this.$store.state.Data.Patient.info.age,this.patientBirth=this.$store.state.Data.Patient.info.birthdate,uA=this,!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.$store.state.Data.Patient.info.gender&&(this.isFemale="feminino"==this.$store.state.Data.Patient.info.gender.toLowerCase()),this.searchPregnantWeek=this.isFemale?"":null,this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];this.form.program_id=e.nutrition_program_id,this.form.objective_id=e.nutrition_objective_id,this.form.weight=e.weight,this.weightDisable=!!e.weight,this.form.height=e.height,this.form.smokeFrequency=e.smoke_frequency,this.form.drinkFrequency=e.drink_frequency,this.form.pregnant=e.pregnant,this.form.pregnantWeek=e.pregnant_week_id||0,e.imc&&e.imc_classification?(this.imcCalc.imc=e.imc,this.imcCalc.classificacao=e.imc_classification):this.calculateImc(),e.member_allergies&&this.addNewFoodAllergy(),e.member_food_intolerance&&this.addNewFoodIntolerance(),e.other_allergies&&this.addNewOtherAllergy(),e.food_rejection&&this.addNewFoodRejection(),e.member_medication_allergies&&Array.isArray(e.member_medication_allergies)&&this.addNewMedsAllergy(),e.member_medicines&&this.addNewMedsContinuous(),e.member_pathologies&&this.addNewChronicDiseases(),this.form.foodAllergy=e.member_allergies?e.member_allergies.map(e=>e.id):null,this.form.foodAllergyOthers=e.other_member_allergies?JSON.parse(e.other_member_allergies):null,this.form.foodIntolerance=e.member_food_intolerance?e.member_food_intolerance.map(e=>e.id):null,this.form.foodIntoleranceOthers=e.other_food_intolerance?JSON.parse(e.other_food_intolerance):null,this.form.otherAllergy=e.other_allergies?JSON.parse(e.other_allergies):null,this.form.foodRejection=e.food_rejection?JSON.parse(e.food_rejection):null,this.form.bowelFunction=e.bowel_function_id,this.form.medsAllergy=e.member_medication_allergies&&Array.isArray(e.member_medication_allergies)?e.member_medication_allergies.map(e=>e.id):null,this.form.medsAllergyOthers=e.other_medication_allergies?JSON.parse(e.other_medication_allergies):null,this.form.medsContinuous=e.member_medicines?e.member_medicines.map(e=>e.id):null,this.form.medsContinuousOthers=e.other_member_medicines?JSON.parse(e.other_member_medicines):null,this.form.chronicDiseases=e.member_pathologies?e.member_pathologies:null,this.form.exam=e.member_exams&&e.member_exams.length>0?e.member_exams:[],e.member_exercises&&e.member_exercises.length>0&&(this.form.physicalActivity=e.member_exercises.map((t,a)=>({physicalActivity:t.id,frequency:e.member_exercises_frequency[a]?e.member_exercises_frequency[a].id:null})),this.getPhysicalActivities(),this.getPhysicalActivityFrequencies()),this.$nextTick(()=>{this.$bus.emit("nurition-brick-initial-weight-change",this.form.weight),this.$bus.emit("nurition-brick-initial-height-change",this.form.height),this.$bus.emit("nurition-brick-pregnant",this.form.pregnant,this.form.pregnantWeek)})}else this.form.physicalActivity=[];this.getSmokeFrequency(),this.getDrinkFrequency(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){},methods:{adjustWeight(){this.form.weight=this.form.weight?parseFloat(this.form.weight.replace(",",".")).toFixed(2).replace(".",","):null,"NaN"==this.form.weight&&(this.form.weight=null),this.$v.form.weight.$touch(),this.calculateImc(),this.$bus.emit("nurition-brick-initial-weight-change",this.form.weight)},adjustHeight(){this.form.height=this.form.height?parseFloat(this.form.height.replace(",",".")).toFixed(2).replace(".",","):null,"NaN"==this.form.height&&(this.form.height=null),this.$v.form.height.$touch(),this.calculateImc(),this.$bus.emit("nurition-brick-initial-height-change",this.form.height)},calculateImc(){if((!this.isFemale||this.isFemale&&!this.form.pregnant)&&(this.form.pregnantWeek=null),this.$bus.emit("nurition-brick-pregnant",this.form.pregnant,this.form.pregnantWeek),null===this.patientAge||!this.form.height||!this.form.weight)return this.imcCalc={imc:0,classificacao:""};this.loadingImc=!0;let e={...this.form},t={idade:this.$store.state.Data.Patient.info.age,dt_nascimento:this.patientBirth,altura:e.height.replace(",","."),peso:e.weight.replace(",","."),sexo:this.isFemale?"FEMININO":"MASCULINO",semana_gestacional:this.form.pregnantWeek?this.pregnantWeekOptions.find(e=>e.id==this.form.pregnantWeek).field_value.slice(0,2).replace(" ",""):null};sA.calculateImc(t).then(e=>{this.imcCalc=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingImc=!1})},addNewFoodAllergy(){this.searchFoodAllergies="",this.searchFoodAllergiesOthers="",this.addingFoodAllergy=!0},deleteFoodAllergy(){this.form.foodAllergy=null,this.form.foodAllergyOthers=null,this.addingFoodAllergy=!1},deleteFoodAllergyOthers(){this.form.foodAllergyOthers=null},addNewFoodIntolerance(){this.searchFoodIntolerances="",this.searchFoodIntolerancesOthers="",this.addingFoodIntolerance=!0},deleteFoodIntolerance(){this.form.foodIntolerance=null,this.form.foodIntoleranceOthers=null,this.addingFoodIntolerance=!1},deleteFoodIntoleranceOthers(){this.form.foodIntoleranceOthers=null},addNewOtherAllergy(){this.searchOtherAllergy="",this.addingOtherAllergy=!0},deleteOtherAllergies(){this.form.otherAllergy=null,this.addingOtherAllergy=!1},addNewFoodRejection(){this.searchFoodRejection="",this.addingFoodRejection=!0},deleteFoodRejection(){this.form.foodRejection=null,this.addingFoodRejection=!1},addNewMedsAllergy(){this.searchMedicamentsAllergy="",this.searchMedicamentsAllergyOthers="",this.addingMedsAllergy=!0},deleteMedsAllergy(){this.form.medsAllergy=null,this.addingMedsAllergy=!1,this.addingMedsAllergyOther=!1},deleteMedsAllergyOthers(){this.form.medsAllergyOthers=null},addNewMedsContinuous(){this.searchMedicamentsContinuous="",this.searchMedicamentsContinuousOthers="",this.addingMedsContinuous=!0},deleteMedsContinuous(){this.form.medsContinuous=null,this.addingMedsContinuous=!1,this.addingMedsContinuousOther=!1},deleteMedsContinuousOthers(){this.form.medsContinuousOthers=null},addNewPhysicalActivity(){this.form.physicalActivity.push({physicalActivity:null,frequency:null}),this.getPhysicalActivities(),this.getPhysicalActivityFrequencies()},deletePhysicalActivities(){this.form.physicalActivity.pop()},addNewChronicDiseases(){this.searchChronicDiseases="",this.addingChronicDiseases=!0},deleteChronicDiseases(){this.form.chronicDiseases=null,this.addingChronicDiseases=!1},addNewExam(){this.form.exam.push({name:null,schedule_date:null,exam_value:null})},deleteExams(){this.form.exam.pop()},wasOthersFoodAllergiesSelected(){let e=this.foodAllergies.find(e=>e.has_additional_text);this.addingFoodAllergyOther=!!this.form.foodAllergy.find(t=>t==e.id),this.addingFoodAllergyOther||this.deleteFoodAllergyOthers()},wasOthersFoodIntolerancesSelected(){let e=this.foodIntolerances.find(e=>e.has_additional_text);this.addingFoodIntoleranceOther=!!this.form.foodIntolerance.find(t=>t==e.id),this.addingFoodIntoleranceOther||this.deleteFoodIntoleranceOthers()},wasOthersMedsAllergySelected(){let e=this.medicaments.find(e=>e.has_additional_text);this.addingMedsAllergyOther=!!this.form.medsAllergy.find(t=>t==e.id),this.addingMedsAllergyOther||this.deleteMedsAllergyOthers()},wasOthersMedsContinuousSelected(){let e=this.medicaments.find(e=>e.has_additional_text);this.addingMedsContinuousOther=!!this.form.medsContinuous.find(t=>t==e.id),this.addingMedsContinuousOther||this.deleteMedsContinuousOthers()},formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},getSmokeFrequency(){this.loadingSmokeFrequency||this.smokeFrequencyOptions&&0!=this.smokeFrequencyOptions.length||(this.loadingSmokeFrequency=!0,sA.getSmokeFrequency().then(e=>{this.smokeFrequencyOptions=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingSmokeFrequency=!1}))},getDrinkFrequency(){this.loadingDrinkFrequency||this.drinkFrequencyOptions&&0!=this.drinkFrequencyOptions.length||(this.loadingDrinkFrequency=!0,sA.getDrinkFrequency().then(e=>{this.drinkFrequencyOptions=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingDrinkFrequency=!1}))},getPhysicalActivities(){this.loadingPhysicalActivity||this.physicalActivities&&0!=this.physicalActivities.length||(this.loadingPhysicalActivity=!0,sA.getPhysicalActivities().then(e=>{this.physicalActivities=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingPhysicalActivity=!1}))},getPhysicalActivityFrequencies(){this.loadingPhysicalActivityFrequency||this.physicalActivityFrequencies&&0!=this.physicalActivityFrequencies.length||(this.loadingPhysicalActivityFrequency=!0,sA.getPhysicalActivitiesFrequency().then(e=>{this.physicalActivityFrequencies=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingPhysicalActivityFrequency=!1}))},checkCid(){this.form.chronicDiseases.find(e=>"N/A"==e.code)&&(this.isSimpleCIDs=!1,this.form.chronicDiseases=this.form.chronicDiseases.filter(e=>"N/A"!==e.code))},sendSaveData(){this.$v.$touch();let e={...this.imcCalc},t={...this.form,imc:e.imc?e.imc.replace(",","."):null,imc_classification:e.classificacao?e.classificacao:null,member_id:this.$store.state.Data.Patient.info.id};t.height=t.height?t.height.replace(",","."):null,t.weight=t.weight?t.weight.replace(",","."):null;let a={brick_key:this.brickName,brick_data:t,isValid:!this.$v.$invalid,message:this.$v.$invalid?this.$t("nutritional.nutritionalProfileError"):""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,a),this.$bus.emit("receive-brick-data",a)}},computed:{filteredPhysicalActivities(){let e=[],t=this.form.physicalActivity.map(e=>e.physicalActivity);for(let a in this.physicalActivities)t.includes(this.physicalActivities[a].id)||e.push(this.physicalActivities[a]);return e},filteredChronicDiseases(){return this.$store.state.Data.CaseAttendance.history_mode?this.chronicDiseases:[...this.chronicDiseases.filter(e=>this.cidsToShow.includes(e.code)),{cid_group_id:1,code:"N/A",formattedName:"Mostrar todos os CIDs",id:-1,name:"Mostrar todos os CIDs"}]},canAddMorePhysicalActivities(){return!(this.physicalActivities.length>0&&0==this.filteredPhysicalActivities.length)&&(0==this.form.physicalActivity.length||this.form.physicalActivity.length>0&&this.form.physicalActivity[this.form.physicalActivity.length-1].physicalActivity&&this.form.physicalActivity[this.form.physicalActivity.length-1].frequency)},canAddMoreExams(){return 0==this.form.exam.length||this.form.exam.length>0&&this.form.exam[this.form.exam.length-1].name&&this.form.exam[this.form.exam.length-1].schedule_date&&this.form.exam[this.form.exam.length-1].exam_value},programErrors(){const e=[];return this.$v.form.program_id.$dirty?(!this.$v.form.program_id.required&&e.push(this.$t("nutritional.required")),e):e},objectiveErrors(){const e=[];return this.$v.form.objective_id.$dirty?(!this.$v.form.objective_id.required&&e.push(this.$t("nutritional.required")),e):e},pregnantWeekErrors(){const e=[];return this.$v.form.pregnantWeek.$dirty?(!this.$v.form.pregnantWeek.required&&e.push(this.$t("nutritional.required")),e):e},weightErrors(){const e=[];return this.$v.form.weight.$dirty?(!this.$v.form.weight.required&&e.push(this.$t("nutritional.required")),e):e},heightErrors(){const e=[];return this.$v.form.height.$dirty?(!this.$v.form.height.required&&e.push(this.$t("nutritional.required")),e):e}},watch:{searchPrograms(e){this.loadingPrograms||this.programs&&0!=this.programs.length||(this.loadingPrograms=!0,sA.getNutritionalPrograms().then(e=>{this.programs=e.data,3==this.$store.state.Data.Patient.info.company_id&&(this.form.program_id=34,this.disabledVidaV=!0)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingPrograms=!1}))},searchObjectives(e){this.loadingObjectives||this.objectives&&0!=this.objectives.length||(this.loadingObjectives=!0,sA.getNutritionalObjectives().then(e=>{this.objectives=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingObjectives=!1}))},searchPregnantWeek(e){this.loadingPregnantWeek||this.pregnantWeekOptions&&0!=this.pregnantWeekOptions.length||(this.loadingPregnantWeek=!0,sA.getPregnantWeek().then(e=>{this.pregnantWeekOptions=e.data.reverse()}).catch(e=>{console.error(e)}).finally(()=>{this.loadingPregnantWeek=!1}))},searchFoodAllergies(e){this.loadingFoodAllergies||this.foodAllergies&&0!=this.foodAllergies.length||(this.loadingFoodAllergies=!0,sA.getFoodAllergies().then(e=>{this.foodAllergies=e.data,this.$nextTick(()=>{this.form.foodAllergy&&this.wasOthersFoodAllergiesSelected()})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingFoodAllergies=!1}))},searchFoodIntolerances(e){this.loadingFoodIntolerances||this.foodIntolerances&&0!=this.foodIntolerances.length||(this.loadingFoodIntolerances=!0,sA.getFoodIntolerances().then(e=>{this.foodIntolerances=e.data,this.$nextTick(()=>{this.form.foodIntolerance&&this.wasOthersFoodIntolerancesSelected()})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingFoodIntolerances=!1}))},searchBowelFunction(e){this.loadingBowelFunction||this.bowelFunctions&&0!=this.bowelFunctions.length||(this.loadingBowelFunction=!0,sA.getBowelFunctions().then(e=>{this.bowelFunctions=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingBowelFunction=!1}))},searchMedicamentsAllergy(e){this.loadingMedicamentsAllergy||this.medicaments&&0!=this.medicaments.length||(this.loadingMedicamentsAllergy=!0,sA.getMedicaments().then(e=>{this.medicaments=e.data,this.$nextTick(()=>{this.form.medsAllergy&&this.wasOthersMedsAllergySelected()})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingMedicamentsAllergy=!1}))},searchMedicamentsContinuous(e){this.loadingMedicamentsContinuous||this.medicaments&&0!=this.medicaments.length||(this.loadingMedicamentsContinuous=!0,sA.getMedicaments().then(e=>{this.medicaments=e.data,this.$nextTick(()=>{this.form.medsContinuous&&this.wasOthersMedsContinuousSelected()})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingMedicamentsContinuous=!1}))},searchChronicDiseases(e){this.loadingChronicDiseases||this.chronicDiseases&&0!=this.chronicDiseases.length||(this.loadingChronicDiseases=!0,Ge.filteredDiseasesList().then(e=>{this.chronicDiseases=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingChronicDiseases=!1}))}},validations:{form:{program_id:{required:Ae["required"]},objective_id:{required:Ae["required"]},pregnantWeek:{required:Object(Ae["requiredIf"])(()=>{uA.form.pregnant})},weight:{required:Ae["required"]},height:{required:Ae["required"]}}}},_A=AA,EA=(a("2840"),Object(I["a"])(_A,dA,mA,!1,null,"1c218e07",null)),IA=EA.exports,hA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"nutritional-care"},[t("div",{staticClass:"diag-title mt-15"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(e.$t("nutritional.accompaniment"))+"\n      ")])])]),!e.historyMode&&e.nutritionCaseSteps&&e.nutritionCaseSteps.length>0?t("div",{staticClass:"steps"},e._l(e.nutritionCaseSteps,(function(a,n){return t(r["a"],{key:n,staticClass:"mr-4",class:{selected:e.selectedStep==a},attrs:{dark:e.selectedStep==a,outlined:e.selectedStep!==a,loading:e.loadingSteps,color:"primary",rounded:"",small:""},on:{click:function(t){return e.chooseStep(a)}}},[e._v("\n      "+e._s(n+1)+e._s(e.$t("nutritional.step"))+"\n    ")])})),1):e._e(),t(re["a"],{staticClass:"mt-5",class:{"readonly-history":e.disabled},attrs:{readonly:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t(e.labelReponsable),"error-messages":e.userIdErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.user_id.$touch()}},model:{value:e.nutritionistName,callback:function(t){e.nutritionistName=t},expression:"nutritionistName"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t("nutritional.accompanimentDatetime"),"error-messages":e.attendanceDateErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.attendance_date.$touch()}},model:{value:e.form.attendance_date,callback:function(t){e.$set(e.form,"attendance_date",t)},expression:"form.attendance_date"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###,##","##,##"],expression:"['###,##', '##,##']"}],attrs:{type:"text",masked:!1,label:e.$t("nutritional.currentWeight"),"error-messages":e.currentWeightErrors,height:"37px",outlined:"",required:""},on:{blur:e.changeCurrentWeight},model:{value:e.form.current_weight,callback:function(t){e.$set(e.form,"current_weight",t)},expression:"form.current_weight"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{type:"number",label:e.$t("nutritional.weightLoss"),"error-messages":e.weightLossErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.weight_loss.$touch()}},model:{value:e.form.weight_loss,callback:function(t){e.$set(e.form,"weight_loss",t)},expression:"form.weight_loss"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{type:"text",label:e.$t("nutritional.weightLossGoal"),"error-messages":e.weightLossGoalErrors,height:"37px",outlined:"",required:""},on:{blur:e.adjustWeightLossGoal},model:{value:e.form.weight_loss_goal,callback:function(t){e.$set(e.form,"weight_loss_goal",t)},expression:"form.weight_loss_goal"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t("nutritional.weightLossRange"),"error-messages":e.weightLossRangeErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.weight_loss_range.$touch()}},model:{value:e.form.weight_loss_range,callback:function(t){e.$set(e.form,"weight_loss_range",t)},expression:"form.weight_loss_range"}})],1)],1),t(ce["a"],[!0===e.pregnant||43===e.pregnant?t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(se["a"],{attrs:{label:e.$t("nutritional.pregnantWeek"),items:e.pregnantWeekOptions,loading:e.loadingPregnantWeek,"item-value":"id","item-text":"field_value",height:"37px",outlined:"",required:""},on:{change:function(t){return e.calculateImc()}},model:{value:e.form.pregancy_week,callback:function(t){e.$set(e.form,"pregancy_week",t)},expression:"form.pregancy_week"}})],1):e._e(),t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t("nutritional.imc"),loading:e.loadingImc,height:"37px",outlined:"",readonly:""},model:{value:e.form.imc,callback:function(t){e.$set(e.form,"imc",t)},expression:"form.imc"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t("nutritional.imc_classification"),loading:e.loadingImc,height:"37px",outlined:"",readonly:""},model:{value:e.form.imc_classification,callback:function(t){e.$set(e.form,"imc_classification",t)},expression:"form.imc_classification"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{height:"100px",label:e.$t("nutritional.observations"),"error-messages":e.observationsErrors,counter:"2000","no-resize":"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.observations.$touch()}},model:{value:e.form.observations,callback:function(t){e.$set(e.form,"observations",t)},expression:"form.observations"}})],1)],1)],1)],1)],1)},OA=[],pA={props:["brickDetails"],mixins:[ve],data(){return{brickName:"nutricional_care",historyMode:this.$store.state.Data.CaseAttendance.history_mode,disabled:!1,loadingSteps:!1,datePicker:!1,timePicker:!1,loading:!1,nutritionistName:null,initialWeight:null,nutritionCaseSteps:[],selectedStep:null,currentFormBackup:null,pregnant:!1,pregnantWeekOptions:[],loadingPregnantWeek:!1,loadingImc:!1,initialHeight:null,patientAge:this.$store.state.Data.Patient.info.age,patientBirth:this.$store.state.Data.Patient.info.birthdate,lastNutritionStep:null,form:{user_id:null,attendance_date:null,current_weight:null,weight_loss:null,weight_loss_goal:null,weight_loss_range:null,observations:null,pregancy_week:null,imc:0,imc_classification:null},sportivePrograms:[4,10],labelReponsable:"accompanimentNutritionist"}},created(){if(this.historyMode&&(this.disabled=!0),this.$store.state.Data.CaseAttendance.info.program_information&&this.sportivePrograms.includes(this.$store.state.Data.CaseAttendance.info.program_information[0].id)?this.labelReponsable="nutritional.accompanimentSportive":this.labelReponsable="nutritional.accompanimentNutritionist",this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e.length>0&&e[0]&&(this.form.user_id=e[0].user_id,this.form.attendance_date=this.convertUtcOffset(e[0].attendance_date).format("DD/MM/YYYY - HH:mm"),this.form.current_weight=e[0].current_weight,this.form.weight_loss=e[0].weight_loss,this.form.weight_loss_goal=e[0].weight_loss_goal,this.form.observations=e[0].observations,this.form.pregancy_week=e[0].pregancy_week,this.form.imc=e[0].imc,this.form.imc_classification=e[0].imc_classification,this.adjustWeightLossGoal(),this.setWeightLossRange()),this.form.attendance_date&&this.convertUtcOffset(e[0].attendance_date).isValid()||(this.form.attendance_date=this.$moment().format("DD/MM/YYYY - HH:mm")),this.form.user_id?this.form.user_id==this.$store.state.Data.User.info.user_info.id?this.nutritionistName=this.$store.state.Data.User.info.user_info.name:be.getUser(this.form.user_id).then(e=>{this.nutritionistName=e.data.user_info.name}).catch(e=>{console.error(e)}):(this.form.user_id=this.$store.state.Data.User.info.user_info.id,this.nutritionistName=this.$store.state.Data.User.info.user_info.name)}this.getNutritionSteps(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()}),this.$bus.on("nurition-brick-pregnant",(e,t)=>{this.pregnant=e,this.form.pregancy_week=t,this.pregnant&&this.getPregnantWeek(),this.calculateImc()}),this.$bus.on("nurition-brick-initial-weight-change",e=>{this.initialWeight=e,this.form.current_weight||(this.form.current_weight=this.initialWeight),this.setWeightLossRange(),this.calculateImc()}),this.$bus.on("nurition-brick-initial-height-change",e=>{this.initialHeight=e,this.calculateImc()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data"),this.$bus.off("nurition-brick-initial-weight-change")},methods:{changeCurrentWeight(){this.setWeightLossRange(),this.$v.form.current_weight.$touch(),this.calculateImc()},calculateImc(){if(!this.form.current_weight||!this.initialHeight)return this.form.imc=0,void(this.form.imc_classification="");if(this.loadingImc)return;this.loadingImc=!0;let e=this.initialHeight.slice(),t=this.form.current_weight.slice(),a={idade:this.$store.state.Data.Patient.info.age,dt_nascimento:this.patientBirth,altura:e.replace(",","."),peso:t.replace(",","."),sexo:this.$store.state.Data.Patient.info.gender.toUpperCase(),semana_gestacional:this.pregnant&&this.form.pregancy_week&&this.pregnantWeekOptions.length>0?this.pregnantWeekOptions.find(e=>e.id==this.form.pregancy_week).field_value.slice(0,2).replace(" ",""):null};sA.calculateImc(a).then(e=>{this.form.imc=e.data.imc,this.form.imc_classification=e.data.classificacao}).catch(e=>{console.error(e)}).finally(()=>{this.loadingImc=!1})},getPregnantWeek(){this.loadingPregnantWeek||this.pregnantWeekOptions.length>0||(this.loadingPregnantWeek=!0,sA.getPregnantWeek().then(e=>{this.pregnantWeekOptions=e.data.reverse()}).catch(e=>{console.error(e)}).finally(()=>{this.loadingPregnantWeek=!1}))},getNutritionSteps(){let e=this.$store.state.Data.CaseAttendance.info;if(!this.$consts.DEFAULT_PROGRAM_SAVE_FLOW_IDS.includes(e.program_id))return;this.selectedStep=e.case_attendance_id;let t={case_id:e.case_id,program_id:e.program_id};Ge.listHistory(t).then(e=>{this.nutritionCaseSteps=e.data.case_attendance_ids,this.nutritionCaseSteps&&this.nutritionCaseSteps.length>1&&(this.lastNutricionalStep=this.nutritionCaseSteps[this.nutritionCaseSteps.length-2],this.getLastCurrentWeight(this.lastNutricionalStep))}).catch(e=>{console.error(e)})},getLastCurrentWeight(e){Bs.getProgramBricksDataHistory(e).then(t=>{if(t.data.hasOwnProperty(1)){let a={step:e,...t.data[1]};a&&a.nutricional_care.length>0&&(this.form.current_weight=a.nutricional_care[0].current_weight,this.form.imc=a.nutricional_care[0].imc,this.form.imc_classification=a.nutricional_care[0].imc_classification)}}).catch(e=>{console.error(e)}).finally(()=>{})},chooseStep(e){this.selectedStep=e;let t=this.$store.state.Data.CaseAttendance.info;if(e==t.case_attendance_id){this.form={...this.currentFormBackup},this.currentFormBackup=null;let t={step:e};this.$bus.emit("nutritional-care-change-step",t),this.disabled=!1}else this.disabled=!0,this.loadingSteps=!0,this.currentFormBackup=this.currentFormBackup||{...this.form},Bs.getProgramBricksDataHistory(e).then(t=>{if(t.data.hasOwnProperty(1)){let a={step:e,...t.data[1]};this.$bus.emit("nutritional-care-change-step",a),this.form=a[this.brickName]&&a[this.brickName].length>0?a[this.brickName][0]:{user_id:null,attendance_date:null,current_weight:null,weight_loss:null,weight_loss_goal:null,weight_loss_range:null,observations:null}}}).catch(e=>{console.error(e)}).finally(()=>{this.loadingSteps=!1})},formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY - HH:mm"):""},allowedStep:e=>e%5===0,adjustWeightLossGoal(){if(!/^([+-]?([0-9]*[.,])?[0-9]+)$/.test(this.form.weight_loss_goal))return this.form.weight_loss_goal=null;this.form.weight_loss_goal=this.form.weight_loss_goal?parseFloat(this.form.weight_loss_goal.replace(",",".")).toFixed(2).replace(".",","):null,"NaN"==this.form.weight_loss_goal&&(this.form.weight_loss_goal=null),this.$v.form.weight_loss_goal.$touch()},setWeightLossRange(){if(this.initialWeight&&this.form.current_weight)switch(this.form.weight_loss=-(parseFloat(this.initialWeight.replace(",","."))-parseFloat(this.form.current_weight.replace(",","."))).toFixed(2),!0){case this.form.weight_loss>0:this.form.weight_loss_range=this.$t("nutritional.lossRange01");break;case 0==this.form.weight_loss:this.form.weight_loss_range=this.$t("nutritional.lossRange02");break;case this.form.weight_loss>=-.5:this.form.weight_loss_range=this.$t("nutritional.lossRange03");break;case this.form.weight_loss>=-1:this.form.weight_loss_range=this.$t("nutritional.lossRange04");break;case this.form.weight_loss>=-1.5:this.form.weight_loss_range=this.$t("nutritional.lossRange05");break;case this.form.weight_loss>=-2:this.form.weight_loss_range=this.$t("nutritional.lossRange06");break;case this.form.weight_loss>=-2.5:this.form.weight_loss_range=this.$t("nutritional.lossRange07");break;case this.form.weight_loss>=-3:this.form.weight_loss_range=this.$t("nutritional.lossRange08");break;case this.form.weight_loss>=-3.5:this.form.weight_loss_range=this.$t("nutritional.lossRange09");break;case this.form.weight_loss>=-4:this.form.weight_loss_range=this.$t("nutritional.lossRange10");break;default:this.form.weight_loss_range=this.$t("nutritional.lossRange11");break}},sendSaveData(){this.$v.$touch();let e={...this.form};e.attendance_date=this.$moment(e.attendance_date,"DD/MM/YYYY - HH:mm").format("YYYY-MM-DD HH:mm:ss"),e.current_weight=e.current_weight?e.current_weight.replace(",","."):null,e.weight_loss_goal=e.weight_loss_goal?e.weight_loss_goal.replace(",","."):null,delete e["weight_loss_range"];let t={brick_key:this.brickName,brick_data:e,isValid:!this.$v.$invalid,message:this.$v.$invalid?this.$t("nutritional.nutritionalCareError"):""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,t),this.$bus.emit("receive-brick-data",t)}},computed:{userIdErrors(){const e=[];return this.$v.form.user_id.$dirty?(!this.$v.form.user_id.required&&e.push(this.$t("nutritional.required")),e):e},attendanceDateErrors(){const e=[];return this.$v.form.attendance_date.$dirty?(!this.$v.form.attendance_date.required&&e.push(this.$t("nutritional.required")),e):e},currentWeightErrors(){const e=[];return this.$v.form.current_weight.$dirty?(!this.$v.form.current_weight.required&&e.push(this.$t("nutritional.required")),e):e},weightLossErrors(){const e=[];return this.$v.form.weight_loss.$dirty?(!this.$v.form.weight_loss.required&&e.push(this.$t("nutritional.required")),e):e},weightLossGoalErrors(){const e=[];return this.$v.form.weight_loss_goal.$dirty?(!this.$v.form.weight_loss_goal.required&&e.push(this.$t("nutritional.required")),e):e},weightLossRangeErrors(){const e=[];return this.$v.form.weight_loss_range.$dirty?(!this.$v.form.weight_loss_range.required&&e.push(this.$t("nutritional.required")),e):e},observationsErrors(){const e=[];return this.$v.form.observations.$dirty?(!this.$v.form.observations.required&&e.push(this.$t("nutritional.required")),e):e}},validations:{form:{user_id:{required:Ae["required"]},attendance_date:{required:Ae["required"]},current_weight:{required:Ae["required"]},weight_loss:{required:Ae["required"]},weight_loss_goal:{required:Ae["required"]},weight_loss_range:{required:Ae["required"]},observations:{required:Ae["required"]}}}},SA=pA,CA=(a("911a"),Object(I["a"])(SA,hA,OA,!1,null,"8312a584",null)),TA=CA.exports,RA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"completion-accompaniment-brick"},[3==e.item.company_id&&5==e.item.program_id?t("div"):t("div",[t("div",{staticClass:"diag-title mt-15"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n          "+e._s(e.$t("nutritional.completion_accompaniment"))+"\n        ")])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},e._l(Object.values(e.questions),(function(a){return t(ce["a"],{staticClass:"pb-5"},[t(oe["a"],{staticClass:"pb-3",attrs:{cols:"12",md:"12"}},["initial_goal_achieved"==a.index?t("label",{on:{click:function(e){e.preventDefault()}}},[e._v("\n              "+e._s(a.question)+" "),t("span",{staticClass:"text-danger"},[e._v("(Responder apenas no segundo, terceiro e quarto contato)")])]):t("label",{on:{click:function(e){e.preventDefault()}}},[e._v("\n              "+e._s(a.question)+" "),t("span",{staticClass:"text-danger"},[e._v("(Responder apenas no quarto contato)")])])]),e._l(e.answerOptions,(function(n){return t(oe["a"],{class:{disabled:e.disabled},attrs:{cols:"12",md:"2"},on:{click:function(t){return e.toggleCheck(n,a)}}},[t("label",{staticClass:"container"},[t("input",{attrs:{type:"checkbox",id:n.id,name:n.field_value},domProps:{value:n.id,checked:e.form[a.index]==n.id}}),t("span",{staticClass:"checkmark"})]),t("span",[e._v(e._s(e.$t("nutritional."+n.str_translation)))])])})),a.haveObservation?t(oe["a"],{staticClass:"pt-3",attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{height:"64px",label:e.$t("nutritional.observations"),disabled:e.disabled,counter:"256","no-resize":"",outlined:""},model:{value:e.form["observation_"+a.index],callback:function(t){e.$set(e.form,"observation_"+a.index,t)},expression:"form[`observation_${questionOption.index}`]"}})],1):e._e()],2)})),1)],1)],1)])},DA=[],gA=a("33ba"),LA=a.n(gA),fA={props:["brickDetails","item"],data(){return{brickName:"completion_accompaniment_brick",disabled:!1,loading:!1,questions:{initial_goal_achieved:{index:"initial_goal_achieved",question:this.$t("nutritional.initial_goal_achieved"),haveObservation:!1},met_the_needs:{index:"met_the_needs",question:this.$t("nutritional.met_the_needs"),haveObservation:!1},day_changes:{index:"day_changes",question:this.$t("nutritional.day_changes"),haveObservation:!1}},answerOptions:[],formBackup:null,form:{case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,initial_goal_achieved:null,met_the_needs:null,day_changes:null,observation_initial_goal_achieved:null,observation_met_the_needs:null,observation_day_changes:null}}},created(){if(this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e.length>0&&e[0]&&(this.form.initial_goal_achieved=e[0].initial_goal_achieved,this.form.met_the_needs=e[0].met_the_needs,this.form.day_changes=e[0].day_changes,this.form.observation_initial_goal_achieved=e[0].observation_initial_goal_achissssssssseved,this.form.observation_met_the_needs=e[0].observation_met_the_needs,this.form.observation_day_changes=e[0].observation_day_changes,this.questions.initial_goal_achieved.haveObservation=!!this.form.initial_goal_achieved,this.questions.met_the_needs.haveObservation=!!this.form.met_the_needs,this.questions.day_changes.haveObservation=!!this.form.day_changes)}this.getAnswerOptions(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()}),this.$bus.on("nutritional-care-change-step",e=>{let t=this.$store.state.Data.CaseAttendance.info;if(e.step==t.case_attendance_id)this.form={...this.formBackup},this.questions.initial_goal_achieved.haveObservation=!!this.form.initial_goal_achieved,this.questions.met_the_needs.haveObservation=!!this.form.met_the_needs,this.questions.day_changes.haveObservation=!!this.form.day_changes,this.formBackup=null,this.disabled=!1;else{this.disabled=!0,this.formBackup=this.formBackup||{...this.form};let t=e[this.brickName];t&&t.length>0?(this.form.initial_goal_achieved=t[0].initial_goal_achieved,this.form.met_the_needs=t[0].met_the_needs,this.form.day_changes=t[0].day_changes,this.form.observation_initial_goal_achieved=t[0].observation_initial_goal_achieved,this.form.observation_met_the_needs=t[0].observation_met_the_needs,this.form.observation_day_changes=t[0].observation_day_changes):(this.form.initial_goal_achieved=null,this.form.met_the_needs=null,this.form.day_changes=null,this.form.observation_initial_goal_achieved=null,this.form.observation_met_the_needs=null,this.form.observation_day_changes=null),this.questions.initial_goal_achieved.haveObservation=!!this.form.initial_goal_achieved,this.questions.met_the_needs.haveObservation=!!this.form.met_the_needs,this.questions.day_changes.haveObservation=!!this.form.day_changes}})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data"),this.$bus.off("nutritional-care-change-step")},methods:{getAnswerOptions(){this.loading||this.answerOptions&&0!=this.answerOptions.length||(this.loading=!0,sA.getCompletionAccompaniment().then(e=>{this.answerOptions=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1}))},toggleCheck(e,t){this.form[t.index]=e.id,t.haveObservation=e.has_additional_text,t.haveObservation||(this.form["observation_"+t.index]=null)},sendSaveData(){if(!this.form.initial_goal_achieved&&!this.form.met_the_needs&&!this.form.day_changes)return;let e={brick_key:this.brickName,brick_data:this.form,isValid:!0,message:""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)}}},NA=fA,kA=(a("b698"),Object(I["a"])(NA,RA,DA,!1,null,"4a3879d1",null)),vA=kA.exports,bA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"nutrition-plan-upload"},[t("div",{staticClass:"diag-title my-15"},[t("div",{staticClass:"diag-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t(e.title)))]),t(r["a"],{staticClass:"ml-8 upload-button",class:{"upload-disabled":e.disabled},attrs:{color:"#00b5e2",loading:e.loading,width:"120",depressed:"",dark:""},on:{click:e.onButtonClick}},[e._v("\n        "+e._s(e.$t("nutritional.upload"))+"\n        "),t(at["a"],{attrs:{right:""}},[e._v("\n          upload\n        ")])],1),t("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file",accept:"application/pdf"},on:{change:e.onFileChanged}}),e._l(e.uploadedFiles,(function(a,n){return t("div",{key:n},[t(at["a"],{staticClass:"file-icon",attrs:{color:"primary"}},[e._v("\n          note\n        ")]),t("a",{staticClass:"ml-2 body-1",attrs:{href:a.url_file,target:"blank"}},[e._v("\n          "+e._s(a.filename)+"\n        ")]),e.disabled?e._e():t(r["a"],{staticClass:"text-none",attrs:{color:"red",depressed:"",text:""},on:{click:function(t){return e.removeFile(a)}}},[t(at["a"],[e._v("\n            close\n          ")])],1)],1)}))],2),t("div",{staticClass:"diag-need-plan",class:{"upload-disabled":e.disabled},on:{click:function(t){return t.stopPropagation(),e.tooglenoPlan()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.noPlan,expression:"noPlan"}],attrs:{id:"need-nutrition-plan",type:"checkbox"},domProps:{checked:Array.isArray(e.noPlan)?e._i(e.noPlan,null)>-1:e.noPlan},on:{change:function(t){var a=e.noPlan,n=t.target,i=!!n.checked;if(Array.isArray(a)){var s=null,o=e._i(a,s);n.checked?o<0&&(e.noPlan=a.concat([s])):o>-1&&(e.noPlan=a.slice(0,o).concat(a.slice(o+1)))}else e.noPlan=i}}}),t("label",{attrs:{for:"need-nutrition-plan"},on:{click:function(e){e.preventDefault()}}},[e._v("\n        "+e._s(e.$t("nutritional.no_need_to_send"))+"\n      ")])])]),e.planUploadError?t("div",{staticClass:"plan-error"},[t("p",{staticClass:"cancel-text ml-5 red--text"},[e._v(e._s(e.$t(this.errorText)))])]):e._e()])},MA=[],PA={props:["brickDetails"],data(){return{brickName:"nutrition_plan_upload",disabled:!1,loading:!1,uploadedFiles:[],uploadedFilesBackup:null,selectedFile:null,sportivePrograms:[4,10],title:"nutritional.foodPlan",noPlan:!1,planUploadError:!1,errorText:"nutritional.foodPlanUploadError"}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]){let e=this.brickDetails[this.brickName];e&&(this.noPlan=void 0!=e.need_plan&&!e.need_plan,e.need_plan&&(this.uploadedFiles=e.files.filter(e=>({filename:e.filename,url_file:e.url_file}))))}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()}),this.$store.state.Data.CaseAttendance.info.program_information&&this.sportivePrograms.includes(this.$store.state.Data.CaseAttendance.info.program_information[0].id)?(this.title="nutritional.sportivePlan",this.errorText="nutritional.sportivePlanUploadError"):(this.title="nutritional.foodPlan",this.errorText="nutritional.foodPlanUploadError"),this.$bus.on("nutritional-care-change-step",e=>{let t=this.$store.state.Data.CaseAttendance.info;if(e.step==t.case_attendance_id)this.uploadedFiles=[...this.uploadedFilesBackup],this.disabled=!1;else{this.disabled=!0,this.uploadedFilesBackup=this.uploadedFilesBackup||[...this.uploadedFiles],this.uploadedFiles=[];let t=e[this.brickName];t&&(this.uploadedFiles=t.files.filter(e=>({filename:e.filename,url_file:e.url_file})))}})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data"),this.$bus.off("nutritional-care-change-step")},methods:{onButtonClick(){this.loading=!0,window.addEventListener("focus",()=>{this.loading=!1},{once:!0}),this.$refs.uploader.click()},onFileChanged(e){this.loading=!0,this.noPlan=!1,this.selectedFile=e.target.files[0];let t=this.selectedFile.name.split(".");if("pdf"!=t[1]||this.uploadedFiles.find(e=>e.filename==this.selectedFile.name))return this.loading=!1,this.selectedFile=null,void this.$bus.emit("open-snackbar",{message:"pdf"!=t[1]?"invalid_file_type":"invalid_file_name"});this.$bus.$emit("has-unsaved-data");let a={token:this.$store.state.Data.User.token,file:this.selectedFile};this.planUploadError=!1,this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,a).then(e=>{this.uploadedFiles.push({filename:this.selectedFile.name,url_file:e.data[this.selectedFile.name].completeUrl})}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,this.selectedFile=null})},removeFile(e){this.uploadedFiles=this.uploadedFiles.filter(t=>t.filename!==e.filename)},removeFiles(){this.uploadedFiles=[]},sendSaveData(){if(!this.noPlan&&!this.uploadedFiles||!this.noPlan&&this.uploadedFiles&&0==this.uploadedFiles.length)return void(this.planUploadError=!0);let e={brick_key:this.brickName,brick_data:{files:this.uploadedFiles&&this.uploadedFiles.length>0?this.uploadedFiles:null,user_id:this.$store.state.Data.User.info.user_info.id,need_plan:!this.noPlan},isValid:!0,message:""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)},tooglenoPlan(){this.noPlan=!this.noPlan,this.noPlan&&this.removeFiles(),this.planUploadError=!1,this.$bus.$emit("has-unsaved-data")}}},UA=PA,yA=(a("244b"),Object(I["a"])(UA,bA,MA,!1,null,"5fe72b27",null)),$A=yA.exports,xA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"atividade_fisica_brick"},[t("div",{staticClass:"diag-title mt-10"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.physicalActivities")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[e._l(e.form.physicalActivity,(function(a,n){return t(ce["a"],{key:n,staticClass:"mb-4"},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("nutritional.physicalActivity"),items:a?e.physicalActivities:e.filteredPhysicalActivities,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingPhysicalActivity,loading:e.loadingPhysicalActivity,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"",outlined:""},model:{value:e.form.physicalActivity[n],callback:function(t){e.$set(e.form.physicalActivity,n,t)},expression:"form.physicalActivity[index]"}},[e.form.physicalActivity.length-1==n?t(at["a"],{attrs:{slot:"append",color:"red"},on:{click:e.deletePhysicalActivities},slot:"append"},[e._v("\n              $vuetify.icons.delete\n            ")]):e._e()],1)],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("nutritional.frequency"),items:e.frequency,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingFrequency,loading:e.loadingFrequency,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"",outlined:""},on:{change:function(t){return e.updateAllAnswers(n)}},model:{value:e.form.frequencyIds[n],callback:function(t){e.$set(e.form.frequencyIds,n,t)},expression:"form.frequencyIds[index]"}})],1)],1)})),e.canAddMorePhysicalActivities?t(r["a"],{attrs:{disabled:e.disabled,color:"primary",text:""},on:{click:e.addNewPhysicalActivity}},[t(r["a"],{staticClass:"mr-2",attrs:{disabled:e.disabled,height:"20px",width:"20px",color:"primary","x-small":"",dark:!e.disabled,fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n        Adicionar\n      ")],1):e._e()],2)],1),t("div",{staticClass:"diag-title mt-10"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.physicalLesions")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],{staticClass:"my-2"},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(se["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.muscle_injury"),items:e.muscleInjury,"search-input":e.searchMuscleInjury,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingMuscleInjury,loading:e.loadingMuscleInjury,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchMuscleInjury=t},"update:search-input":function(t){e.searchMuscleInjury=t},input:function(t){e.searchMuscleInjury=""}},model:{value:e.form.muscleInjuryId,callback:function(t){e.$set(e.form,"muscleInjuryId",t)},expression:"form.muscleInjuryId"}}),e.showMuscleInjuryOthers?t(de["a"],{staticClass:"mt-3 option-string",attrs:{label:e.$t("nutritional.others"),height:"37px",outlined:""},model:{value:e.form.muscleInjuryOthers,callback:function(t){e.$set(e.form,"muscleInjuryOthers",t)},expression:"form.muscleInjuryOthers"}}):e._e()],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(se["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.frequent_injuries"),items:e.frequentInjuries,"search-input":e.searchFrequencyInjuries,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingFrequencyInjuries,loading:e.loadingFrequencyInjuries,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchFrequencyInjuries=t},"update:search-input":function(t){e.searchFrequencyInjuries=t},input:function(t){e.searchFrequencyInjuries=""}},model:{value:e.form.frequentInjuries,callback:function(t){e.$set(e.form,"frequentInjuries",t)},expression:"form.frequentInjuries"}}),e.showFrequentInjuryOthers?t(de["a"],{staticClass:"mt-3 option-string",attrs:{label:e.$t("nutritional.others"),height:"37px",outlined:""},model:{value:e.form.frequentInjuriesOthers,callback:function(t){e.$set(e.form,"frequentInjuriesOthers",t)},expression:"form.frequentInjuriesOthers"}}):e._e()],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(se["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.moviment_limitation"),items:e.movimentLimitation,"search-input":e.searchMovimentLimitation,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingMovimentLimitation,loading:e.loadingMovimentLimitation,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchMovimentLimitation=t},"update:search-input":function(t){e.searchMovimentLimitation=t},input:function(t){e.searchMovimentLimitation=""}},model:{value:e.form.movimentLimitationId,callback:function(t){e.$set(e.form,"movimentLimitationId",t)},expression:"form.movimentLimitationId"}}),e.showMovimentLimitationOthers?t(de["a"],{staticClass:"mt-3 option-string",attrs:{label:e.$t("nutritional.others"),height:"37px",outlined:""},model:{value:e.form.movimentLimitationOthers,callback:function(t){e.$set(e.form,"movimentLimitationOthers",t)},expression:"form.movimentLimitationOthers"}}):e._e()],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t($t["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.medical_liberation"),items:e.medicalLiberation,loading:e.loadingMedicalLiberation,"item-value":"id","item-text":"field_value",height:"37px",outlined:"",required:""},model:{value:e.form.medicalLiberationId,callback:function(t){e.$set(e.form,"medicalLiberationId",t)},expression:"form.medicalLiberationId"}})],1)],1)],1)],1)],1)},VA=[],GA={props:["brickDetails"],data(){return{brickName:"atividade_fisica",arrayWeight:[],disabled:!1,loadingMuscleInjury:!0,loadingMovimentLimitation:!0,loadingMedicalLiberation:!0,loadingPhysicalActivity:!0,loadingFrequency:!0,loadingFrequencyInjuries:!0,muscleInjury:[],frequentInjuries:[],movimentLimitation:[],medicalLiberation:[],physicalActivities:[],frequency:[],searchPhysicalActivity:"",searchFrequency:"",searchMuscleInjury:"",searchFrequencyInjuries:"",searchMovimentLimitation:"",programId:null,memberId:null,questions:[],form:{muscleInjuryId:[],movimentLimitationId:[],medicalLiberationId:null,physicalActivity:[],frequencyIds:[],frequentInjuries:[],muscleInjuryOthers:"",frequentInjuriesOthers:"",movimentLimitationOthers:""},showMuscleInjuryOthers:!1,showFrequentInjuryOthers:!1,showMovimentLimitationOthers:!1}},created(){!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),sA.getQuestion({program_id:4}).then(e=>{if(this.questions=e.data.questions,this.frequency=this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.options,this.physicalActivities=this.questions.indique_quais_atividades_fisicas_voce_pratica.options,this.muscleInjury=this.questions["lesao_muscular/articular"].options,this.movimentLimitation=this.questions.limitacao_de_movimento.options,this.medicalLiberation=this.questions.liberacao_medica.options,this.frequentInjuries=this.questions.desconforto_ou_dores_frequentes.options,this.brickDetails&&this.brickDetails[this.brickName]&&this.brickDetails[this.brickName].length>0){let e=this.brickDetails[this.brickName][0];if(this.programId=e.program_id,this.memberId=e.member_id,e.dynamic_questions&&e.dynamic_questions.length>0){const t=sA.getSelectedAnswers(e.dynamic_questions,this.questions["lesao_muscular/articular"]);this.form.muscleInjuryId=t||null,this.form.muscleInjuryOthers=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions["lesao_muscular/articular"]);const a=sA.getSelectedAnswers(e.dynamic_questions,this.questions.desconforto_ou_dores_frequentes);this.form.frequentInjuries=a||null,this.form.frequentInjuriesOthers=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions.desconforto_ou_dores_frequentes);const n=sA.getSelectedAnswers(e.dynamic_questions,this.questions.limitacao_de_movimento);this.form.movimentLimitationId=n||null,this.form.movimentLimitationOthers=sA.getAnswerAdditionalText(e.dynamic_questions,this.questions.limitacao_de_movimento);const i=sA.getSelectedAnswers(e.dynamic_questions,this.questions.liberacao_medica);this.form.medicalLiberationId=i?i[0]:null;const s=sA.getSelectedAnswers(e.dynamic_questions,this.questions.indique_quais_atividades_fisicas_voce_pratica);this.form.physicalActivity=s||null;const o=sA.getSelectedAnswers(e.dynamic_questions,this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas);if(this.form.frequencyIds=o||null,this.form.frequencyIds&&this.form.frequencyIds.length>0){let e,t,a,n=new Array;this.form.frequencyIds.forEach(t=>{e=this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.options.find(e=>e.id===t),n.push(e.answer_weight)}),this.arrayWeight=n;let i=(e,t)=>e+t;t=n.reduce(i),a={questionId:this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.id,answerId:e.id,answerWeight:this.sumWeightFrequency(n)},this.$store.dispatch(this.$consts.NUTRI.SET_ANSWER,a),this.$bus.emit("calculate-risk",this.sumWeightFrequency(n))}}}}).catch(e=>{console.error(e)}).finally(()=>{this.loadingMuscleInjury=!1,this.loadingMovimentLimitation=!1,this.loadingMedicalLiberation=!1,this.loadingPhysicalActivity=!1,this.loadingFrequency=!1,this.loadingFrequencyInjuries=!1}),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){},methods:{updateAllAnswers(e){let t=this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.options.find(t=>t.id===this.form.frequencyIds[e]);this.arrayWeight[e]=t.answer_weight;let a={questionId:this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.id,answerId:this.form.frequencyIds[e],answerWeight:this.sumWeightFrequency(this.arrayWeight)};this.$bus.emit("sum-frequency",this.sumWeightFrequency(this.arrayWeight)),this.$store.dispatch(this.$consts.NUTRI.SET_ANSWER,a)},sumWeightFrequency(e){if(0!==e.length){var t=(e,t)=>e+t;return this.arrayWeight.reduce(t)}return 0},addNewPhysicalActivity(){this.form.physicalActivity.push(null),this.form.frequencyIds.push(null),this.getPhysicalActivities(),this.getPhysicalActivityFrequencies()},deletePhysicalActivities(){this.form.physicalActivity.pop();let e=this.form.frequencyIds.length-1;if(this.arrayWeight.pop(),this.$bus.emit("sum-frequency",this.sumWeightFrequency(this.arrayWeight)),e>-1){if(this.form.frequencyIds[e]!=this.$store.state.Data.Nutri.allAnswers[this.$store.state.Data.Nutri.allAnswers.length-1].answerId)return void this.form.frequencyIds.pop();let t=this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.options.find(t=>t.id===this.form.frequencyIds[e]);if(t){let t={questionId:this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.id,answerId:this.form.frequencyIds[e],answerWeight:this.sumWeightFrequency(this.arrayWeight)};if(this.$bus.emit("sum-frequency",this.sumWeightFrequency(this.arrayWeight)),this.$store.dispatch(this.$consts.NUTRI.SET_ANSWER,t),this.form.frequencyIds.pop(),e>0){let e,t;this.form.frequencyIds.forEach(a=>{t=this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.options.find(e=>e.id===a),(!e||e.answerWeight<t.answer_weight)&&(e={questionId:this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.id,answerId:t.id,answerWeight:this.sumWeightFrequency(this.arrayWeight)})}),this.$bus.emit("sum-frequency",this.sumWeightFrequency(this.arrayWeight)),this.$store.dispatch(this.$consts.NUTRI.SET_ANSWER,e)}}}},getPhysicalActivities(){this.loadingPhysicalActivity||this.physicalActivities&&0!=this.physicalActivities.length||(this.loadingPhysicalActivity=!0,this.physicalActivities=this.questions.indique_quais_atividades_fisicas_voce_pratica.options)},getPhysicalActivityFrequencies(){this.loadingFrequency||this.frequency&&0!=this.frequency.length||(this.loadingFrequency=!0,this.frequency=this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.options)},sendSaveData(){this.frequency=this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.options,this.physicalActivities=this.questions.indique_quais_atividades_fisicas_voce_pratica.options;const e=this.form.muscleInjuryId.map(e=>({dynamic_question_id:this.questions["lesao_muscular/articular"].id,dynamic_drop_down_option_id:e,addicional_information:this.form.muscleInjuryOthers})),t=this.form.movimentLimitationId.map(e=>({dynamic_question_id:this.questions.limitacao_de_movimento.id,dynamic_drop_down_option_id:e,addicional_information:this.form.movimentLimitationOthers})),a=this.form.frequentInjuries.map(e=>({dynamic_question_id:this.questions.desconforto_ou_dores_frequentes.id,dynamic_drop_down_option_id:e,addicional_information:this.form.frequentInjuriesOthers})),n=this.form.physicalActivity.map((e,t)=>({dynamic_question_id:this.questions.indique_quais_atividades_fisicas_voce_pratica.id,dynamic_drop_down_option_id:e,relates_to_dynamic_question_id:this.questions.indique_a_frequencia_da_pratica_de_atividades_fisicas.id,relates_to_dynamic_drop_down_option_id:this.form.frequencyIds[t]}));let i=!0;n.forEach(e=>{e.dynamic_drop_down_option_id&&e.relates_to_dynamic_drop_down_option_id||(i=!1)});let s=[{dynamic_question_id:this.questions.liberacao_medica.id,dynamic_drop_down_option_id:this.form.medicalLiberationId}];s=s.concat(n),s=s.concat(e),s=s.concat(t),s=s.concat(a),s.forEach(e=>{e.dynamic_drop_down_option_id||(i=!1)});const o={program_id:this.programId,member_id:this.memberId,dynamic_questions:s};let r={brick_key:this.brickName,brick_data:o,isValid:i,message:i?"":this.$t("nutritional.nutritionalProfileError")};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,r),this.$bus.emit("receive-brick-data",r)}},computed:{filteredPhysicalActivities(){let e=[],t=this.form.physicalActivity;for(let a in this.physicalActivities)t.includes(this.physicalActivities[a].id)||e.push(this.physicalActivities[a]);return e},canAddMorePhysicalActivities(){return!(this.physicalActivities&&this.physicalActivities.length>0&&0==this.filteredPhysicalActivities.length)&&(0==this.form.physicalActivity.length||this.form.physicalActivity.length>0&&this.form.physicalActivity[this.form.physicalActivity.length-1]&&this.form.frequencyIds[this.form.physicalActivity.length-1])}},watch:{searchMuscleInjury(e){if(this.loadingMuscleInjury)return;this.muscleInjury&&0!=this.muscleInjury.length||(this.loadingMuscleInjury=!0,this.muscleInjury=this.questions["lesao_muscular/articular"].options,this.loadingMuscleInjury=!1);let t=!1;for(let a of this.form.muscleInjuryId){let e=this.muscleInjury.find(e=>e.id==a);e&&"others"==e.str_translation&&(t=!0)}this.showMuscleInjuryOthers=t},searchFrequencyInjuries(){if(this.loadingFrequencyInjuries)return;this.frequentInjuries&&0!=this.frequentInjuries.length||(this.loadingFrequencyInjuries=!0,this.frequentInjuries=this.questions.desconforto_ou_dores_frequentes.options,this.loadingFrequencyInjuries=!1);let e=!1;for(let t of this.form.frequentInjuries){let a=this.frequentInjuries.find(e=>e.id==t);a&&"others"==a.str_translation&&(e=!0)}this.showFrequentInjuryOthers=e},searchMovimentLimitation(){if(this.loadingMovimentLimitation)return;this.movimentLimitation&&0!=this.movimentLimitation.length||(this.loadingMovimentLimitation=!0,this.movimentLimitation=this.questions.limitacao_de_movimento.options,this.loadingMovimentLimitation=!1);let e=!1;for(let t of this.form.movimentLimitationId){let a=this.movimentLimitation.find(e=>e.id==t);a&&"others"==a.str_translation&&(e=!0)}this.showMovimentLimitationOthers=e}}},FA=GA,BA=(a("5911"),Object(I["a"])(FA,xA,VA,!1,null,"0ffa2d10",null)),wA=BA.exports,HA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"member-nutrition-spot-brick"},[t("div",{staticClass:"diag-title mt-10"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.information")))]),e._v("\n      "+e._s(e.$t("nutritional.health"))+"\n    ")])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:e.isFemale?4:6}},[t(se["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.program"),items:e.programs,"search-input":e.searchPrograms,loading:e.loadingPrograms,"error-messages":e.programErrors,"item-text":"field_value","item-value":"id",height:"51px",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchPrograms=t},"update:search-input":function(t){e.searchPrograms=t},blur:function(t){return e.$v.form.program_id.$touch()}},model:{value:e.form.program_id,callback:function(t){e.$set(e.form,"program_id",t)},expression:"form.program_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:e.isFemale?4:6}},[t(se["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.objective"),items:e.objectives,"search-input":e.searchObjectives,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingObjectives,loading:e.loadingObjectives,"no-data-text":e.$t("controls.noDataAvailable"),"error-messages":e.objectiveErrors,height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchObjectives=t},"update:search-input":function(t){e.searchObjectives=t},blur:function(t){return e.$v.form.objective.$touch()},input:function(t){e.searchObjectives=""}},model:{value:e.form.objective,callback:function(t){e.$set(e.form,"objective",t)},expression:"form.objective"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteObjectives},slot:"append"},[e._v("\n              $vuetify.icons.delete\n            ")])],1)],1),e.isFemale?t(oe["a"],{attrs:{cols:"12",md:43!==e.form.pregnant?4:2}},[t($t["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.pregnant"),items:e.pregnantOptions,"item-text":"field_value","item-value":"id",height:"51px",outlined:""},on:{change:function(t){return e.calculateImc()}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n              "+e._s(e.$t("nutritional."+t.item.str_translation))+"\n            ")]}},{key:"item",fn:function(t){return[e._v("\n              "+e._s(e.$t("nutritional."+t.item.str_translation))+"\n            ")]}}],null,!1,1768447740),model:{value:e.form.pregnant,callback:function(t){e.$set(e.form,"pregnant",t)},expression:"form.pregnant"}})],1):e._e(),t(oe["a"],{attrs:{cols:"12",md:"2"}},[e.isFemale&&43==e.form.pregnant?t(se["a"],{staticClass:"option-string",attrs:{"error-messages":e.pregnantWeekErrors,label:e.$t("nutritional.pregnantWeek"),items:e.pregnantWeekOptions,loading:e.loadingPregnantWeek,"search-input":e.searchPregnantWeekOptions,"item-text":"field_value","item-value":"id",height:"51px",outlined:""},on:{"update:searchInput":function(t){e.searchPregnantWeekOptions=t},"update:search-input":function(t){e.searchPregnantWeekOptions=t},blur:function(t){return e.$v.form.pregnantWeek.$touch()},change:function(t){return e.calculateImc()},input:function(t){e.searchPregnantWeekOptions=""}},model:{value:e.form.pregnantWeek,callback:function(t){e.$set(e.form,"pregnantWeek",t)},expression:"form.pregnantWeek"}}):e._e()],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###,##","##,##","#,##"],expression:"['###,##', '##,##', '#,##']"}],attrs:{type:"text",readonly:e.weightDisable,disabled:e.weightDisable,label:e.$t("nutritional.weight"),"error-messages":e.weightErrors,height:"37px",outlined:"",required:""},on:{blur:e.adjustWeight},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["#,##"],expression:"['#,##']"}],attrs:{type:"text",label:e.$t("nutritional.height"),"error-messages":e.heightErrors,height:"37px",outlined:"",required:""},on:{blur:e.adjustHeight},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1),t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(de["a"],{attrs:{label:e.$t("nutritional.imc"),loading:e.loadingImc,height:"37px",outlined:"",readonly:""},scopedSlots:e._u([{key:"append",fn:function(){},proxy:!0}]),model:{value:e.imcCalc.imc,callback:function(t){e.$set(e.imcCalc,"imc",t)},expression:"imcCalc.imc"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{staticClass:"cant-touch-this",attrs:{label:e.$t("nutritional.imc_classification"),loading:e.loadingImc,height:"37px",outlined:"",readonly:""},model:{value:e.imcCalc.classificacao,callback:function(t){e.$set(e.imcCalc,"classificacao",t)},expression:"imcCalc.classificacao"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.drink_alcohol"),items:e.drink,"item-text":"text","item-value":"id",height:"37px",outlined:""},on:{change:function(t){return e.calculateImc()}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n              "+e._s(e.$t("nutritional."+t.item.str_translation))+"\n            ")]}},{key:"item",fn:function(t){return[e._v("\n              "+e._s(e.$t("nutritional."+t.item.str_translation))+"\n            ")]}}]),model:{value:e.form.drink,callback:function(t){e.$set(e.form,"drink",t)},expression:"form.drink"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{staticClass:"option-string",attrs:{label:e.$t("nutritional.smoke"),items:e.smoke,"item-text":"text","item-value":"id",height:"37px",outlined:""},on:{change:function(t){return e.calculateImc()}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n              "+e._s(e.$t("nutritional."+t.item.str_translation))+"\n            ")]}},{key:"item",fn:function(t){return[e._v("\n              "+e._s(e.$t("nutritional."+t.item.str_translation))+"\n            ")]}}]),model:{value:e.form.smoke,callback:function(t){e.$set(e.form,"smoke",t)},expression:"form.smoke"}})],1),t(oe["a"],{staticClass:"mb-5",attrs:{cols:"12",md:"12"}},[e.addingMedicineVitamin||e.form.medicineVitamin?t("div",[t(se["a"],{attrs:{label:e.$t("nutritional.medicineSuplements"),items:e.medicineVitamin,"search-input":e.searchMedicineVitamin,"item-value":"id","item-text":"field_value","hide-no-data":e.loadingMedicineVitamin,loading:e.loadingMedicineVitamin,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchMedicineVitamin=t},"update:search-input":function(t){e.searchMedicineVitamin=t},input:function(t){e.searchMedicineVitamin=""}},model:{value:e.form.medicineVitamin,callback:function(t){e.$set(e.form,"medicineVitamin",t)},expression:"form.medicineVitamin"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteMedicineVitamin},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1)],1):t("div",{staticClass:"add-label-container"},[t("label",{staticClass:"add-label"},[e._v(e._s(e.$t("nutritional.medicineSuplements")))]),t(r["a"],{attrs:{color:"primary",text:""},on:{click:e.addMedicineVitamin}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1),e.form.medicineVitamin.includes(242)?t(Ni["a"],{staticClass:"long-inputs mt-4",attrs:{height:"100px",label:e.$t("nutritional.observations"),outlined:"","no-resize":""},model:{value:e.medicineVitaminOther,callback:function(t){e.medicineVitaminOther=t},expression:"medicineVitaminOther"}}):e._e()],1)],1)],1)],1)],1)},qA=[],YA={props:["brickDetails"],data(){return{brickName:"informacao_saude",disabled:!1,loadingPrograms:!0,loadingObjectives:!0,loadingPregnantWeek:!0,loadingImc:!0,loadingMedicineVitamin:!0,isFemale:!1,programs:[],objectives:[],pregnantOptions:[],pregnantWeekOptions:[],smoke:[],drink:[],medicineVitamin:[],medicineVitaminOther:"",searchPrograms:"",searchObjectives:"",searchPregnantWeekOptions:null,searchMedicineVitamin:null,patientAge:null,patientBirth:null,addingMedicineVitamin:!1,programId:null,memberId:null,medicineOthers:!0,imcCalc:{imc:0,classificacao:""},questions:[],weightDisable:!1,form:{program_id:null,objective:[],pregnant:!1,pregnantWeek:null,weight:null,height:null,medicineVitamin:[],smoke_or_drink:null,smoke:null,drink:null}}},created(){this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()}),this.patientAge=this.$store.state.Data.Patient.info.age,this.patientBirth=this.$store.state.Data.Patient.info.birthdate,!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.getQuestion(),this.getMedicaments()},methods:{getQuestion(){let e={program_id:4};sA.getQuestion(e).then(e=>{if(this.questions=e.data.questions,this.programs=e.data.questions.programa.options,this.objectives=e.data.questions.o_que_voce_espera_alcancar_apos_a_conclusao_do_programa.options,this.pregnantOptions=e.data.questions.gestante.options,this.pregnantWeekOptions=e.data.questions.semanas_de_gestacao.options,this.drink=e.data.questions.quantas_doses_por_semana.options,this.smoke=e.data.questions.quantos_cigarros_por_dia.options,this.$store.state.Data.Patient.info.gender&&(this.isFemale="feminino"==this.$store.state.Data.Patient.info.gender.toLowerCase()),this.searchPregnantWeek=this.isFemale?"":null,this.brickDetails&&this.brickDetails[this.brickName]&&this.brickDetails[this.brickName].length>0){let e=this.brickDetails[this.brickName][0];if(this.programId=e.program_id,this.memberId=e.member_id,e.dynamic_questions&&e.dynamic_questions.length>0){const t=sA.getSelectedAnswers(e.dynamic_questions,this.questions.programa);this.form.program_id=t?t[0]:null;const a=sA.getSelectedAnswers(e.dynamic_questions,this.questions.o_que_voce_espera_alcancar_apos_a_conclusao_do_programa);this.form.objective=a||null;const n=sA.getSelectedAnswers(e.dynamic_questions,this.questions["medicamento_e/ou_suplemento"]);this.form.medicineVitamin=n||null;let i=e.dynamic_questions.findIndex((e,t)=>242===e.dynamic_drop_down_option_id);-1!==i&&(this.medicineVitaminOther=e.dynamic_questions[i].addicional_information);const s=sA.getSelectedAnswers(e.dynamic_questions,this.questions.gestante);this.form.pregnant=s?s[0]:null;const o=sA.getSelectedAnswers(e.dynamic_questions,this.questions.semanas_de_gestacao);this.form.pregnantWeek=o?o[0]:null;const r=sA.getSelectedAnswers(e.dynamic_questions,this.questions.quantos_cigarros_por_dia);this.form.smoke=r?r[0]:null;const l=sA.getSelectedAnswers(e.dynamic_questions,this.questions.quantas_doses_por_semana);this.form.drink=l?l[0]:null}this.form.weight=e.initial_weight,this.weightDisable=!!e.initial_weight,this.form.height=e.height,this.$bus.emit("nurition-brick-pregnant",this.form.pregnant,this.form.pregnantWeek),this.$bus.emit("nurition-brick-initial-weight-change",this.form.weight),this.$bus.emit("nurition-brick-initial-height-change",this.form.height),e.imc&&e.imc_classification?(this.imcCalc.imc=e.imc,this.imcCalc.classificacao=e.imc_classification):this.calculateImc()}}).catch(e=>{console.error(e)}).finally(()=>{this.loadingPrograms=!1,this.loadingObjectives=!1,this.loadingImc=!1,this.loadingMedicineVitamin=!1,this.loadingPregnantWeek=!1})},getMedicaments(){sA.getMedicaments().then(e=>{this.medicineVitamin=e.data}).catch(e=>{console.error(e)})},adjustWeight(){this.form.weight=this.form.weight?parseFloat(this.form.weight.replace(",",".")).toFixed(2).replace(".",","):null,"NaN"==this.form.weight&&(this.form.weight=null),this.$v.form.weight.$touch(),this.calculateImc(),this.$bus.emit("nurition-brick-initial-weight-change",this.form.weight)},adjustHeight(){this.form.height=this.form.height?parseFloat(this.form.height.replace(",",".")).toFixed(2).replace(".",","):null,"NaN"==this.form.height&&(this.form.height=null),this.$v.form.height.$touch(),this.calculateImc(),this.$bus.emit("nurition-brick-initial-height-change",this.form.height)},calculateImc(){let e=null;if((!this.isFemale||this.isFemale&&!this.form.pregnant)&&(this.form.pregnantWeek=null),this.$bus.emit("nurition-brick-pregnant",this.form.pregnant,this.form.pregnantWeek),null===this.patientAge||!this.form.height||!this.form.weight)return this.imcCalc={imc:0,classificacao:""};if(43!==this.form.pregnant)this.form.pregnantWeek=null,e=null;else{let t=this.pregnantWeekOptions.filter(e=>e.id==this.form.pregnantWeek);e=t&&t[0]?t[0].str_translation.split("_")[0]:null}this.loadingImc=!0;let t={...this.form},a={idade:this.$store.state.Data.Patient.info.age,dt_nascimento:this.patientBirth,altura:t.height.replace(",","."),peso:t.weight.replace(",","."),sexo:this.isFemale?"FEMININO":"MASCULINO",semana_gestacional:e};sA.calculateImc(a).then(e=>{this.imcCalc=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingImc=!1})},deleteObjectives(){this.form.objective=null,this.addingObjective=!1},addMedicineVitamin(){this.searchMedicineVitamin="",this.addingMedicineVitamin=!0},deleteMedicineVitamin(){this.form.medicineVitamin=null,this.addingMedicineVitamin=!1},sendSaveData(){this.$v.$touch();const e=this.form.objective.map(e=>({dynamic_question_id:this.questions.o_que_voce_espera_alcancar_apos_a_conclusao_do_programa.id,dynamic_drop_down_option_id:e}));let t=this.form.medicineVitamin&&this.form.medicineVitamin.length>0?this.form.medicineVitamin.map(e=>({dynamic_question_id:this.questions["medicamento_e/ou_suplemento"].id,dynamic_drop_down_option_id:e})):[],a=t.findIndex((e,t)=>242===e.dynamic_drop_down_option_id);-1!==a&&(t[a].addicional_information=this.medicineVitaminOther);let n=[{dynamic_question_id:this.questions.programa.id,dynamic_drop_down_option_id:this.form.program_id},{dynamic_question_id:this.questions.quantos_cigarros_por_dia.id,dynamic_drop_down_option_id:this.form.smoke},{dynamic_question_id:this.questions.quantas_doses_por_semana.id,dynamic_drop_down_option_id:this.form.drink}];this.isFemale&&(n.push({dynamic_question_id:this.questions.gestante.id,dynamic_drop_down_option_id:this.form.pregnant}),43==this.form.pregnant&&n.push({dynamic_question_id:this.questions.semanas_de_gestacao.id,dynamic_drop_down_option_id:this.form.pregnantWeek})),n=n.concat(e),n=n.concat(t);let i={...this.form,...this.imcCalc};const s={initial_weight:i.weight?i.weight.replace(",","."):null,height:i.height?i.height.replace(",","."):null,imc:i.imc?i.imc.replace(",","."):null,imc_classification:i.classificacao?i.classificacao:null,program_id:this.programId,member_id:this.memberId,dynamic_questions:n,cids:[]};let o={brick_key:this.brickName,brick_data:s,isValid:!this.$v.$invalid,message:this.$v.$invalid?this.$t("nutritional.nutritionalProfileError"):""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,o),this.$bus.emit("receive-brick-data",o)}},computed:{programErrors(){const e=[];return this.$v.form.program_id.$dirty?(!this.$v.form.program_id.required&&e.push(this.$t("access_controls.required")),e):e},objectiveErrors(){const e=[];return this.$v.form.objective.$dirty?(!this.$v.form.objective.required&&e.push(this.$t("access_controls.required")),e):e},pregnantWeekErrors(){const e=[];return this.$v.form.pregnantWeek.$dirty?(!this.$v.form.pregnantWeek.required&&e.push(this.$t("access_controls.required")),e):e},weightErrors(){const e=[];return this.$v.form.weight.$dirty?(!this.$v.form.weight.required&&e.push(this.$t("access_controls.required")),e):e},heightErrors(){const e=[];return this.$v.form.height.$dirty?(!this.$v.form.height.required&&e.push(this.$t("access_controls.required")),e):e}},watch:{searchPrograms(e){this.loadingPrograms||this.programs&&0!=this.programs.length||(this.loadingPrograms=!0,this.programs=this.questions.programa.options,this.loadingPrograms=!1)},searchObjectives(e){this.loadingObjectives||this.objectives&&0!=this.objectives.length||(this.loadingObjectives=!0,this.objectives=this.questions.o_que_voce_espera_alcancar_apos_a_conclusao_do_programa.options,this.loadingObjectives=!1)},searchPregnantWeekOptions(e){this.loadingPregnantWeek||(!this.pregnantWeekOptions||this.pregnantWeek&&0==this.pregnantWeek.length)&&(this.loadingPregnantWeek=!0,this.pregnantWeek=this.questions.semanas_de_gestacao.options,this.loadingPregnantWeek=!1)},searchMedicineVitamin(e){this.loadingMedicineVitamin||this.medicineVitamin&&0!=this.medicineVitamin.length||(this.loadingMedicineVitamin=!0,this.medicineVitamin=[],this.loadingMedicineVitamin=!1)}},validations:{form:{program_id:{required:Ae["required"]},objective:{required:Ae["required"]},pregnantWeek:{required:Object(Ae["requiredIf"])(e=>{e.pregnant})},weight:{required:Ae["required"]},height:{required:Ae["required"]}}}},jA=YA,KA=(a("1b2a"),Object(I["a"])(jA,HA,qA,!1,null,"1826a7b2",null)),ZA=KA.exports,QA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"disease_exams"},[t("div",{staticClass:"diag-title mt-5 mb-5"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.chronicDiseases")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[e.addingChronicDiseases||e.form.cids?t("div",[t(se["a"],{attrs:{label:e.$t("nutritional.chronicDiseases"),items:e.isSimpleCIDs?e.filteredChronicDiseases:e.chronicDiseases,"search-input":e.searchChronicDiseases,"item-text":"name","item-value":"id","hide-no-data":e.loadingChronicDiseases,loading:e.loadingChronicDiseases,"no-data-text":e.$t("controls.noDataAvailable"),height:"auto","hide-details":"","small-chips":"",multiple:"",outlined:""},on:{"update:searchInput":function(t){e.searchChronicDiseases=t},"update:search-input":function(t){e.searchChronicDiseases=t},change:e.checkCid,input:function(t){e.searchChronicDiseases=""}},model:{value:e.form.cids,callback:function(t){e.$set(e.form,"cids",t)},expression:"form.cids"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteChronicDiseases},slot:"append"},[e._v("\n                $vuetify.icons.delete\n              ")])],1)],1):t("div",{staticClass:"add-label-container"},[t(r["a"],{class:{"add-button-disabled":e.disabled},attrs:{color:"primary",text:""},on:{click:e.addNewChronicDiseases}},[t(r["a"],{staticClass:"mr-2",attrs:{height:"20px",width:"20px",color:"primary","x-small":"",dark:"",fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n              "+e._s(e.$t("nutritional.add"))+"\n            ")],1)],1)])],1)],1)],1),t("div",{staticClass:"diag-title mt-10"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("nutritional.exams")))])])]),t(re["a"],{staticClass:"mb-10",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[e._l(e.form.exam,(function(a,n){return t(ce["a"],{key:n,staticClass:"align-center"},[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("nutritional.examName"),height:"37","hide-details":"",outlined:""},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"objectExam.name"}},[e.form.exam.length-1==n?t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteExams},slot:"append"},[e._v("\n              $vuetify.icons.delete\n            ")]):e._e()],1)],1),t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":"",lazy:""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:i}){return[a.exam_date?t(de["a"],e._g(e._b({attrs:{label:e.$t("nutritional.examDate"),placeholder:"DD/MM/YYYY",height:"37px","hide-details":"",readonly:"",outlined:"",required:""},model:{value:e.$moment(a.exam_date).format("DD/MM/YYYY"),callback:function(t){e.$set(e.$moment(a.exam_date),"format('DD/MM/YYYY')",t)},expression:"$moment(objectExam.exam_date).format('DD/MM/YYYY')"}},"v-text-field",i,!1),n)):t(de["a"],e._g(e._b({attrs:{label:e.$t("nutritional.examDate"),placeholder:"DD/MM/YYYY",height:"37px","hide-details":"",readonly:"",outlined:"",required:""}},"v-text-field",i,!1),n))]}}],null,!0),model:{value:a.datePicker,callback:function(t){e.$set(a,"datePicker",t)},expression:"objectExam.datePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,locale:"pt-br"},on:{input:function(e){a.datePicker=!1}},model:{value:a.exam_date,callback:function(t){e.$set(a,"exam_date",t)},expression:"objectExam.exam_date"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{label:e.$t("nutritional.examResult"),height:"37","hide-details":"",outlined:""},model:{value:a.result,callback:function(t){e.$set(a,"result",t)},expression:"objectExam.result"}})],1),t(oe["a"],{attrs:{cols:"12",md:"1"}},[t(St["a"],{staticClass:"ma-0 pt-5",attrs:{label:e.$t("nutritional.changed")},model:{value:a.changed,callback:function(t){e.$set(a,"changed",t)},expression:"objectExam.changed"}})],1)],1)})),e.canAddMoreExams?t(r["a"],{attrs:{disabled:e.disabled,color:"primary",text:""},on:{click:e.addNewExam}},[t(r["a"],{staticClass:"mr-2",attrs:{disabled:e.disabled,height:"20px",width:"20px",color:"primary","x-small":"",dark:!e.disabled,fab:""}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1),e._v("\n        Adicionar\n      ")],1):e._e()],2)],1)],1)},JA=[],WA={props:["brickDetails"],mixins:[ve],data(){return{brickName:"diseases_exams",cidsToShow:["B20","C76","E03","E10","E11","E66","E78","F32","G20","G30","G40","H54","H90","I10","I25","I50","J30","J41","J43","J45"],isSimpleCIDs:!0,disabled:!1,patientAge:this.$store.state.Data.Patient.info.age,loadingChronicDiseases:!1,searchChronicDiseases:null,addingChronicDiseases:!1,chronicDiseases:[],form:{cids:null,exam:[]}}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]&&this.brickDetails[this.brickName].length>0){let e=this.brickDetails[this.brickName][0];if(this.form.cids=e.cids?e.cids.map(e=>e.cid_id):null,this.form.cids&&this.addNewChronicDiseases(),e.exams&&e.exams.length>0){let t=e.exams.map(e=>{if(Number(e.exam_date)){const t=Ot.a.tz(1e3*e.exam_date,"UTC");e.exam_date=t.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("YYYY-MM-DD")}return e});this.form.exam=t}}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},methods:{addNewChronicDiseases(){this.searchChronicDiseases="",this.addingChronicDiseases=!0},deleteChronicDiseases(){this.form.cid=null,this.addingChronicDiseases=!1},addNewExam(){this.form.exam.push({name:null,schedule_date:null,exam_value:null})},deleteExams(){this.form.exam.pop()},formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},checkCid(){this.form.cids.find(e=>-1==e)&&(this.isSimpleCIDs=!1,this.form.cids=this.form.cids.filter(e=>-1!==e))},sendSaveData(){let e=this.form.exam,t=!1;this.form.exam&&this.form.exam.length>0&&(this.form.exam.forEach(e=>{e.name&&e.exam_date&&e.result&&"Invalid date"!=e.exam_date||(t=!0)}),t||(e=this.form.exam.map(e=>{let t="";const a=Ot.a.tz(this.$moment(e.exam_date).format("YYYY-MM-DD"),Intl.DateTimeFormat().resolvedOptions().timeZone);return t=a.tz("UTC").format("X"),{name:e.name,exam_date:parseInt(t),result:e.result,changed:e.changed}})));let a=this.form.cids&&this.form.cids.length>0?Object.values([...this.form.cids]).map(e=>({cid_id:e})):[],n={cids:a,exams:e},i={brick_key:this.brickName,brick_data:n,isValid:!t,message:t?this.$t("nutritional.nutritionalProfileError"):""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,i),this.$bus.emit("receive-brick-data",i)}},computed:{filteredChronicDiseases(){return this.$store.state.Data.CaseAttendance.history_mode?this.chronicDiseases:[...this.chronicDiseases.filter(e=>this.cidsToShow.includes(e.code)),{cid_group_id:1,code:"N/A",formattedName:"Mostrar todos os CIDs",id:-1,name:"Mostrar todos os CIDs"}]},canAddMoreExams(){return 0==this.form.exam.length||this.form.exam.length>0&&this.form.exam[this.form.exam.length-1].name&&this.form.exam[this.form.exam.length-1].exam_date&&this.form.exam[this.form.exam.length-1].result}},watch:{searchChronicDiseases(e){this.loadingChronicDiseases||this.chronicDiseases&&0!=this.chronicDiseases.length||(this.loadingChronicDiseases=!0,Ge.filteredDiseasesList().then(e=>{this.chronicDiseases=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingChronicDiseases=!1}))}}},XA=WA,zA=(a("246e"),Object(I["a"])(XA,QA,JA,!1,null,"229cccaa",null)),e_=zA.exports,t_=function(){var e=this,t=e._self._c;return t(r["a"],{staticClass:"save-bt ma-4",class:[e.riskColor],attrs:{disabled:e.disabled,color:"primary"},on:{click:function(t){return e.getRiskRating()}}},[t("span",{staticClass:"save-text"},[e._v(e._s(e.riskRating))])])},a_=[],n_={props:["brickDetails"],data(){return{brickName:"calcular_risco",disabled:!1,risk:null,riskRating:"",riskId:0}},created(){!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.riskRating=this.$t("patient.nutrition_answers.calculate_risk_rating"),this.$bus.on("calculate-risk",e=>{this.frequency=e,this.getRiskRating()}),this.$bus.on("sum-frequency",e=>{this.frequency=e})},beforeDestroy(){this.$bus.off("calculate-risk"),this.$bus.off("sum-frequency")},methods:{getRiskRating(e=null){let t={frequencia:0};this.frequency?t.frequencia=this.frequency:t.frequencia=this.$store.state.Data.Nutri.allAnswers&&this.$store.state.Data.Nutri.allAnswers.length>0?this.$store.state.Data.Nutri.allAnswers[0].answerWeight:0,sA.getSportRiskRating(t).then(e=>{switch(e.classificacao){case"Risco Baixo":this.riskRating=this.$t("patient.nutrition_answers.risk_low"),this.riskId=1;break;case"Risco M
es NE","created_at":"2020-04-03 23:48:57.270833","updated_at":"2020-04-03 23:48:57.272881"},{"id":726,"ciap":"-69","name":"Outro motivo de consulta NE","created_at":"2020-04-03 23:48:57.270833","updated_at":"2020-04-03 23:48:57.272881"}]},"error":null}')},"7ae8":function(e,t,a){"use strict";a("a55c")},"7aec":function(e,t,a){e.exports=a.p+"img/end_attend.23664fc5.svg"},"7af4":function(e,t,a){e.exports=a.p+"img/ic_consulta_habilitar_video.240381a6.svg"},"7b82":function(e,t,a){},"7b8d":function(e,t,a){},"7cdd":function(e,t,a){"use strict";a("92b1")},"7d2e":function(e,t,a){"use strict";a("9046")},"7d39":function(e,t,a){},"7dce":function(e,t,a){},"7ddc":function(e,t,a){"use strict";a("2195")},"7e5d":function(e,t,a){e.exports=a.p+"img/ic_consulta_dasabilitar_audio.eabebcc3.svg"},"7edd":function(e,t,a){e.exports=a.p+"img/google-recaptcha@2x.826519cf.png"},"7f06":function(e,t,a){"use strict";a("2ae3")},"7f63":function(e,t,a){"use strict";a("f16e")},"7f66":function(e,t,a){},"7f72":function(e,t,a){},"7fae":function(e,t,a){"use strict";a("8eb6")},"7fc3":function(e,t,a){"use strict";a("9f5d")},"7fd4":function(e,t,a){"use strict";a("fa55")},8094:function(e,t,a){e.exports=a.p+"img/irritado.217a5bd3.svg"},"80a8":function(e,t,a){},"810e":function(e,t,a){"use strict";a("c217")},8191:function(e,t,a){},"81aa":function(e,t,a){"use strict";a("da86")},8202:function(e,t,a){"use strict";a("58b8")},"821f":function(e,t,a){var n={"./ansioso.svg":"bf46","./calmo.svg":"56c5","./desmotivado.svg":"16dd","./feliz.svg":"8f4a","./impaciente.svg":"566a","./irritado.svg":"8094","./motivado.svg":"6019","./otimista.svg":"7909","./paciente.svg":"5e6c","./pessimista.svg":"a38e","./relaxado.svg":"ca8e","./triste.svg":"f9bf"};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id="821f"},8263:function(e,t,a){"use strict";a("7d39")},"82aa":function(e,t,a){"use strict";a("bc54")},"82ee":function(e,t,a){"use strict";a("32dd")},8375:function(e,t,a){"use strict";a("7595")},"83bc":function(e,t,a){},"83da":function(e,t,a){},"845e":function(e,t,a){},8551:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAAHFJREFUSMftkEEKgCAQRbVt0BFCuv8l2niLsE7yXCQhoYI1QYt5K2H0fecboyjK59jaAKBLZG3RNTTe7B3+nrvXBjOwceKBKZuNwJpmB7A86q8UIibPQhwQshCfzgFwr+SVTWR+3giRl9/qkqlFUf5DBPUnlEZAb1hcAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA0LTAyVDIxOjU5OjQ1KzAwOjAwBZz1jgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wNC0wMlQyMTo1OTo0NSswMDowMHTBTTIAAAAodEVYdHN2ZzpiYXNlLXVyaQBmaWxlOi8vL3RtcC9tYWdpY2stdlJ6bHJhengCdnKfAAAAAElFTkSuQmCC"},"855b":function(e,t,a){},8576:function(e,t,a){},"85d6":function(e,t,a){e.exports=a.p+"img/ic_logo_apm.3118c608.svg"},"85e4":function(e,t,a){},"85fe":function(e,t,a){e.exports=a.p+"img/Icon - Visibility - Filled.83ef12c1.svg"},"862e":function(e,t,a){},"875c":function(e,t,a){e.exports=a.p+"img/53418.0956e933.svg"},"88a9":function(e,t,a){"use strict";a("ed22")},"88c6":function(e,t,a){"use strict";a("57c9")},"88c7":function(e,t,a){"use strict";a("fada")},"891f":function(e,t,a){},"893c":function(e,t,a){"use strict";a("c37d")},8943:function(e,t,a){"use strict";a("790a")},"896b":function(e,t,a){"use strict";a("ee35")},"89b0":function(e,t,a){"use strict";a("ff53")},"8a9c":function(e,t,a){"use strict";a("24dc")},"8adb":function(e,t,a){},"8adc":function(e,t,a){},"8ae2":function(e,t,a){},"8b50":function(e,t,a){"use strict";a("a9c1")},"8b93":function(e,t,a){"use strict";a("165d")},"8bdd":function(e,t,a){"use strict";a("b420")},"8c95":function(e,t,a){"use strict";a("4633")},"8cce":function(e,t,a){"use strict";a("0159")},"8cf3":function(e,t,a){"use strict";a("feb5")},"8d22":function(e,t,a){"use strict";a("d38e")},"8e46":function(e,t,a){"use strict";a("a1a0")},"8e66":function(e,t,a){"use strict";a("adc6")},"8e8b":function(e,t,a){"use strict";a("d958")},"8eb6":function(e,t,a){},"8ee6":function(e,t,a){"use strict";a("b832")},"8f4a":function(e,t,a){e.exports=a.p+"img/feliz.9388cf2f.svg"},"8f85":function(e,t,a){},"8fe6":function(e,t,a){"use strict";a("2e1c")},9046:function(e,t,a){},"911a":function(e,t,a){"use strict";a("10d0")},9160:function(e,t,a){e.exports=a.p+"img/ic_painel_relatorio_ativo.14dd4bc6.svg"},9225:function(e,t,a){"use strict";a("1354")},"92a7":function(e,t,a){e.exports=a.p+"img/lgbtqa+_flag.22c92137.svg"},"92b1":function(e,t,a){},"92c8":function(e,t,a){},9360:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAADhJREFUSMftzbENACAIBVG2tpTNj9bGkCg05L8B7sxEZDhgkdudk794MqmJXya18WPigLfEReRdAOU0cmsqXTuUAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA0LTAyVDIxOjU5OjUyKzAwOjAwDJHLngAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wNC0wMlQyMTo1OTo1MiswMDowMH3McyIAAAAodEVYdHN2ZzpiYXNlLXVyaQBmaWxlOi8vL3RtcC9tYWdpY2stVkk5bk9nN1AbezYjAAAAAElFTkSuQmCC"},"943c":function(e,t,a){"use strict";a("b5ec")},"954d":function(e,t,a){"use strict";a("d55d")},9582:function(e,t,a){},9607:function(e,t,a){e.exports=a.p+"img/ic_painel_outro_inativo.cc6d653c.svg"},"961b":function(e,t,a){},9676:function(e,t,a){},9691:function(e,t,a){e.exports=a.p+"img/ic_atender.3515e06a.svg"},"96a0":function(e,t,a){"use strict";a("5034")},"96cc":function(e,t,a){"use strict";a("78a8")},"971a":function(e,t,a){},9728:function(e,t,a){"use strict";a("bf34")},9730:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24","enable-background":"new 0 0 1000 1000","xml:space":"preserve"}},[t("rect",{attrs:{id:"backgroundrect",width:"100%",height:"100%",x:"0",y:"0",fill:"none",stroke:"none"}}),t("g",{staticClass:"currentLayer"},[t("title",[e._v("Layer 1")]),t("path",{attrs:{d:"M22.468829695117694,1.531274708641147 c0.8112984911280646,0.8112998263248329 0.8099632401551748,2.1263239111767267 0,2.9376237375015597 l-0.9789837591401875,0.9789853703054561 L18.551581661766978,2.510260078946592 l0.9789837591401875,-0.9789853703054561 C20.341819403669437,0.7206647631209723 21.657508949806754,0.7199748823162903 22.468829695117694,1.531274708641147 zM7.78278256540779,13.280412151257465 l-0.978293879470861,3.9159192270023166 l3.915912782377868,-0.9789853703054561 l9.790460708522557,-9.790476821200738 L17.572597902626754,3.489245449252037 L7.78278256540779,13.280412151257465 zM17.538771544646877,11.3575808232472 v8.95009072998106 H3.6924637517875722 V6.461340972768998 h8.950721371671934 l2.7685761297391127,-2.7692705669357447 H0.9231977423791304 V23.07694212016395 h19.384817557493314 V8.587620375506672 L17.538771544646877,11.3575808232472 z",id:"svg_1",fill:"#00b5e2","fill-opacity":"1",filter:""}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"9730e":function(e,t,a){},"974c":function(e,t,a){},9791:function(e,t,a){e.exports=a.p+"img/backoffice_inativo.179ff183.svg"},"984c":function(e,t,a){e.exports=a.p+"img/ic_painel_outro_ativo.2bc1b6a1.svg"},"993c":function(e,t,a){},"9a0f":function(e,t,a){"use strict";a("6add")},"9afe":function(e,t,a){"use strict";a("cec8")},"9b5d":function(e,t,a){e.exports=a.p+"img/ic_editar_paciente.6e9a15a4.svg"},"9bc7":function(e,t,a){},"9bdf":function(e,t,a){},"9c12":function(e,t,a){},"9cd0":function(e,t,a){"use strict";a("0469")},"9ce4":function(e,t,a){},"9d00":function(e,t,a){},"9d4e":function(e,t,a){},"9d59":function(e,t,a){},"9f02":function(e,t,a){"use strict";a("2f45")},"9f3a":function(e,t,a){},"9f53":function(e,t,a){"use strict";a("17e4")},"9f56":function(e,t,a){},"9f5d":function(e,t,a){},"9f92":function(e,t,a){"use strict";a("8191")},a0ab:function(e,t,a){e.exports=a.p+"img/btn_play.2f9e04b4.svg"},a166:function(e,t,a){},a1a0:function(e,t,a){},a1ce:function(e,t,a){},a1d4:function(e,t,a){},a270:function(e,t,a){"use strict";a("7b8d")},a2dd:function(e,t,a){"use strict";a("2e01")},a38e:function(e,t,a){e.exports=a.p+"img/pessimista.1a04a469.svg"},a3e6:function(e,t,a){"use strict";a("e95a")},a3f7:function(e,t,a){},a44f:function(e,t,a){"use strict";a("ae47")},a51a:function(e,t,a){},a55c:function(e,t,a){},a6d7:function(e,t,a){"use strict";a("e9e9")},a739:function(e,t,a){"use strict";a("a1d4")},a762:function(e,t,a){},a8d5:function(e,t,a){"use strict";a("9582")},a9c1:function(e,t,a){},aa8c:function(e,t,a){"use strict";a("891f")},aab1:function(e,t,a){"use strict";a("c5f0")},aaf6:function(e,t,a){},ab20:function(e,t,a){"use strict";a("5b30")},ab46:function(e,t,a){"use strict";a("7409")},ac89:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAAGlJREFUSMftkEEKgDAMBJuz4BOk+P9HeOovpPiS8RKhiIoh9mQGemnLbLIpBUFgAshA7iWfgBXYgLmX/OC7EK2lqrjoQe98dZ0mL8AIDMDi3uRK3rz5Q5pa3lDvPPIQgGUgERHL/yD4EztN6cIS5DRqdwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNC0wMlQyMTo1OTozMSswMDowMPsW2IQAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDQtMDJUMjE6NTk6MzErMDA6MDCKS2A4AAAAKHRFWHRzdmc6YmFzZS11cmkAZmlsZTovLy90bXAvbWFnaWNrLTJLckpmdjN2/ySTKgAAAABJRU5ErkJggg=="},ad2f:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAUCAIAAABXimkEAAAAA3NCSVQICAjb4U/gAAAAEHRFWHRTb2Z0d2FyZQBTaHV0dGVyY4LQCQAAAbNJREFUSMftlktv00AUhc849tixARXaUNzg2KF5OAkOCUJq1CCxQvwJxB7BhmXVXYWgYs2q3Ta/qJXaRfsDKlVVH3YebWeGxbW8pZXYFPkuRufcOXP1STOLYR+Gn3AfSstU7017e7TZimpk179/Xdv4QrrzqrE92uy+bgF4936wtfOj7LsAmMZ+/V77/O0jxVbe9rdGP6u1Ctklb/GpuwCAaZoXuE9Kc9R/NPewUi3rhk4TngfufOnxHUDbUd3z3bCTgg6G/cGwRzrsLHu+247qAF52G5Wg3GgGAGzH7vbCldU+xaJes+IvNVtVAIwxxyk6D2wAulGwLNN2ihQr2pZpGqbFARQKhaJlUuy2oPfm6nPQHDQHzUFz0Bw0B/0fQfVMxZcJgCQeZ1ZKlep4nAUuzmMASTIBcH11NZ3Oxkl65PIiziYoQEgphQCgpFKAFJJiJNJVSgVIKf8KyrKPM9NY2Fne3z0kW1qcV1Anx6dkW1Ftf+8ISnGTv6h7B3tH1C/7zybJ9PTkDIBu6PUwyCYY3JBKimsBgFtc3AhxI+h7yk1jNplRjJtciHTrVqD5G/039QdoiozoN7EIEwAAAABJRU5ErkJggg=="},ad69:function(e,t,a){},ad7d:function(e,t,a){e.exports=a.p+"img/start_attend.e9309a0a.svg"},adc6:function(e,t,a){},adc8:function(e,t,a){},adcc:function(e,t,a){},ae3e:function(e,t,a){"use strict";a("6e5c")},ae47:function(e,t,a){},aed5:function(e,t,a){},af49:function(e,t,a){"use strict";a("49ab")},af58:function(e,t,a){e.exports=a.p+"img/ic_painel_relatorio_inativo.eff76786.svg"},b018:function(e,t,a){"use strict";a("7f66")},b08a:function(e,t,a){"use strict";a("bde0")},b0d9:function(e,t,a){"use strict";a("d47d")},b115:function(e,t,a){},b135:function(e,t,a){"use strict";a("fa5f")},b174:function(e,t,a){"use strict";a("2f4e")},b182:function(e,t,a){},b29e:function(e,t,a){e.exports=a.p+"img/ic_porta.a793a54b.svg"},b318:function(e,t,a){e.exports=a.p+"img/reload.4d4fe282.svg"},b420:function(e,t,a){},b49e:function(e,t,a){},b4e6:function(e,t,a){"use strict";a("57c7")},b509:function(e,t,a){"use strict";a("ed95")},b5aa:function(e,t,a){"use strict";a("7222")},b5b2:function(e,t,a){"use strict";a("9676")},b5d6:function(e,t,a){},b5ec:function(e,t,a){},b5ef:function(e,t,a){},b62b:function(e,t,a){},b640:function(e,t,a){"use strict";a("c5e8")},b676:function(e,t,a){e.exports=a.p+"img/hospital-user.1d43a69e.svg"},b689:function(e,t,a){"use strict";a("d4d3")},b698:function(e,t,a){"use strict";a("799f")},b6ed:function(e,t,a){"use strict";a("d6ed")},b6fc:function(e,t,a){"use strict";a("b5ef")},b795:function(e,t,a){"use strict";a("31ed")},b832:function(e,t,a){},b885:function(e,t,a){},b88e:function(e,t,a){"use strict";a("297e")},b92c:function(e,t,a){},b978:function(e,t,a){"use strict";a("9d4e")},ba92:function(e,t,a){"use strict";a("3807")},bab9:function(e,t,a){"use strict";a("0a6c")},bace:function(e,t,a){},bb30:function(e,t,a){"use strict";a("6360")},bc49:function(e,t,a){},bc54:function(e,t,a){},bdaf:function(e,t,a){},bde0:function(e,t,a){},bde6:function(e,t,a){"use strict";a("05fb")},be73:function(e,t,a){},be8a:function(e,t,a){e.exports=a.p+"img/logo_sidebar_logo_teladoc.584188a2.svg"},be8e:function(e,t,a){"use strict";a("05bd")},bf34:function(e,t,a){},bf37:function(e,t,a){e.exports=a.p+"img/close.1ea44000.svg"},bf46:function(e,t,a){e.exports=a.p+"img/ansioso.9bdc29c3.svg"},bf68:function(e,t,a){"use strict";a("2323")},c01d:function(e,t,a){"use strict";a("aed5")},c088:function(e,t,a){},c092:function(e,t,a){},c09b:function(e,t,a){},c18e:function(e,t,a){},c1a1:function(e,t,a){},c1b9:function(e,t,a){},c217:function(e,t,a){},c237:function(e,t,a){"use strict";a("2797")},c23a:function(e,t,a){},c2c1:function(e,t,a){"use strict";a("9c12")},c323:function(e,t,a){"use strict";a("efd2")},c37d:function(e,t,a){},c3cd:function(e,t,a){},c42c:function(e,t,a){},c42c1:function(e,t,a){"use strict";a("766b")},c439:function(e,t,a){"use strict";a("154a")},c50f:function(e,t,a){"use strict";a("eeb0")},c5ac:function(e,t,a){"use strict";a("d3fd")},c5e8:function(e,t,a){},c5ee:function(e,t,a){},c5f0:function(e,t,a){},c609:function(e,t,a){"use strict";a("7b82")},c643:function(e,t,a){e.exports=a.p+"img/ic_tranfer.e0a6f9d1.svg"},c678:function(e,t,a){},c68e:function(e,t,a){"use strict";a("c42c")},c70c:function(e,t,a){"use strict";a("c09b")},c77f:function(e,t,a){"use strict";a("194a")},c781:function(e,t,a){"use strict";a("fb18")},c7cb:function(e,t,a){"use strict";a("aaf6")},c81e:function(e,t,a){"use strict";a("9ce4")},c856:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24.936",height:"23.656",viewBox:"0 0 24.936 23.656"}},[t("g",{attrs:{transform:"translate(-1810.402 -11.748)",fill:"#5949a7"}},[t("path",{staticClass:"a",attrs:{d:"M1823.122,35.4a11.939,11.939,0,0,1-10.133-6.328,12.387,12.387,0,0,1-.811-1.924c-.059-.2-.118-.389-.131-.419a15.6,15.6,0,0,1,2.594,0c.017.029.115.245.219.481a9.765,9.765,0,0,0,4.018,4.492,9.155,9.155,0,0,0,3.075,1.1,7.034,7.034,0,0,0,1.495.111,6.846,6.846,0,0,0,1.43-.088,9.467,9.467,0,0,0,4.233-1.8,12.04,12.04,0,0,0,1.825-1.825,9.517,9.517,0,0,0,1.822-4.3,11.932,11.932,0,0,0,0-2.647,9.513,9.513,0,0,0-1.822-4.3,12.022,12.022,0,0,0-1.825-1.826,9.3,9.3,0,0,0-9.917-.87,9.751,9.751,0,0,0-4.028,3.916l-.154.282,1.721,1.724c.949.949,1.725,1.738,1.725,1.754s-1.816.029-4.031.029H1810.4V14.84l1.42,1.42c.782.782,1.433,1.423,1.449,1.423a1.578,1.578,0,0,0,.2-.3,11.581,11.581,0,0,1,6.419-5.084,11.085,11.085,0,0,1,3.579-.553,11.434,11.434,0,0,1,5.981,1.61,12.586,12.586,0,0,1,4.047,3.916,11.8,11.8,0,0,1-8.863,18.073,12.834,12.834,0,0,1-1.512.053Zm4.027-7.8c-.157-.1-.792-.474-1.41-.844s-1.495-.886-1.943-1.155l-1.482-.88-.664-.4v-3.18l0-3.18h1.842V23.2l2.444,1.463c1.345.8,2.464,1.482,2.49,1.5s-.069.235-.429.821a7.377,7.377,0,0,1-.517.782,1.2,1.2,0,0,1-.327-.163Z",transform:"translate(0 0)"}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},c880:function(e,t,a){"use strict";a("642d")},c891:function(e,t,a){},c95f:function(e,t,a){e.exports=a.p+"img/ic_logo_notificacao.4fb65ee7.svg"},ca3b:function(e,t,a){"use strict";a("1ee6")},ca74:function(e,t,a){e.exports=a.p+"img/ic_teladoc_o.85bdf94c.svg"},ca8e:function(e,t,a){e.exports=a.p+"img/relaxado.472dfd65.svg"},cc0d:function(e,t,a){e.exports=a.p+"img/ic_servico_ativo.070bd9a8.svg"},ccd4:function(e,t,a){e.exports=a.p+"img/logo_teladoc_loading.f763b1c0.svg"},ccd5:function(e,t,a){},cd4e:function(e,t,a){e.exports=a.p+"img/ic_grupo.ca2a28d1.svg"},cde8:function(e,t,a){},cde8f:function(e,t,a){"use strict";a("855b")},ce1e:function(e,t,a){"use strict";a("ccd5")},ce5a:function(e,t,a){e.exports=a.p+"img/right-left.b41fd226.svg"},ceae:function(e,t,a){"use strict";a("76c2")},cec8:function(e,t,a){},cf05:function(e,t,a){"use strict";a("68e2")},cf362:function(e,t,a){"use strict";a("f46c")},cfde:function(e,t,a){},d092:function(e,t,a){},d0df:function(e,t,a){"use strict";a("85e4")},d0ec:function(e,t,a){},d123:function(e,t,a){"use strict";a("44c2")},d141:function(e,t,a){"use strict";a("83da")},d161:function(e,t,a){},d27e:function(e,t,a){"use strict";a("314d")},d2d6:function(e,t,a){"use strict";a("53f1")},d38e:function(e,t,a){},d3fd:function(e,t,a){},d47d:function(e,t,a){},d4d3:function(e,t,a){},d50a:function(e,t,a){e.exports=a.p+"img/ic_consulta_dasabilitar_video.32acef60.svg"},d541:function(e,t,a){},d55d:function(e,t,a){},d674:function(e,t,a){},d6ed:function(e,t,a){},d742:function(e,t,a){e.exports=a.p+"img/chevron-down.67e84651.svg"},d781:function(e,t,a){},d78f:function(e,t,a){},d808:function(e,t,a){e.exports=a.p+"img/Grupo1514.58857153.svg"},d888:function(e,t,a){"use strict";a("cde8")},d8c1:function(e,t,a){"use strict";a("8576")},d8d9:function(e,t,a){"use strict";a("8ae2")},d958:function(e,t,a){},d99e:function(e,t,a){e.exports=a.p+"img/ic_sidebar_relatorio.cf3e2888.svg"},d9d8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAA8CAYAAADFXvyQAAAABHNCSVQICAgIfAhkiAAABEBJREFUeF7tm0tSGzEQhlvGrAMnCDlBJpWwjn0CzAlwKrgqu5gTxDkBZA0pzAlCToCzhhTOCXBuQNYGlF+DB+YhjWw9xkMiV7FhpFbrU6vVklqMKvq9od0WEftIxFuMsTWTZjnnI058+JO+npjUN6nDTCotWgdw9gGlv2g9VXkB6oZutsc0vHYlUyXHOyDAGQDOJ9cdEZAu6KjtWm5enldAEX3YaNLNpemU0nae07tzOhxqy1kU8Apok3oHxAh+5/GHkf/NiJ3Clyw0PVCnA1kvM33lNAGgFxb911b1DegKndrIdeoVOjXWaiYpAOBjCSRjefPo4A2QmF6r7PYqC4efnNNRdx7FZGUAqAtAxzngXqeZN0BiWYfvOctNr89wrAMLQBEAXbqUqdOlUkB3/G4bMcypTqmy75usx/9ZQHDQbVjQKAACAcUUC4AS6/inAcUrEN0+t5kKqCsc6kHOX5RaEFapt9o2GWWnKKch6og/m98fVeiRcdKv6f1Ogxp9dCyyaU1VV+WDIuqurdLqZSFm8qGEUjmaiI0w9nhf0nu8B0AYvWMoaByjzNMXFSBf+7V5dCqU4SSCWBFbxcFsDKgKOKIdFSDZlsSoc64qAdKUpm1hSUzmTF21k5HD6RdGRTp17ze1t2PG6JmXtg2EYjDjoJZt0u6QGNvJd0bMR/zPaM8k00cX/wg/tEIrLWxKvfg/DaMIUf9WugwAXUPndQDqZTaUYrcNRxVVcRhlMLDeqmAmnUogtVk+dIejsNpQeuuBZ8FYwTsN1viWs6I2fFBvhLn/GH9UcAjlua9G4lWBLSZ8d61JTfgbcZAeH2MOjFp44pWUgJ54v5ypHwBpUAZAAZDdbKu9BSEeixCcbuFvUuXNaYK11oDyyiVhvp1NLFZbCeh+5Ag3n7wFkUMs83uLibYvXdjuVHDflddaCQgfzhBiCzjxD6O3B0iZgy57BOUSCsEqip/zQ28XCjJt1BZUvCX4DkAd31DS8p8YIPpxQYcPFlUFqABIG4Pk9oP1nmLBglL+uHjcwbkfQEmcIzMmHJKJO/eN9DcsFgNZWV9x0gJO2j0g18e6PuKkZQNym2XmIU5aNqA+Yq19VysiLMh5KLJUQAKM7MzXCBhuR1Cva5qEpWpz6YDKYIQ4KMRBRpPloVKwoGBBwYLsCAQLsuOHJTYTJ/na7pSvpNKs3Or2YmXK3SdQNZGVz3YEHJyU9V3HObohrHUcpFO+iu8BkNYP1niKVWEhujaCBQUL0tlI+fdgQRp+szQg5EmyOD88ybQrZJgtIwaxG3t3tWeQ4re1SEM8SLJcJwm1GblrnBG3q45D3HXTrSSRxCl7NonnkmwEQ3OW5epWbXfS8pn1eclIwZO8DHTXfv0lac63k0z74lPH+nfNmYZl79jSbzX+W0hTPl1X5YVnMihmz6D6uJzrpB23s6GqmaDZE/VB2dv7v8/W9audkfg0AAAAAElFTkSuQmCC"},d9ed:function(e,t,a){e.exports=a.p+"img/ic_cancel.861fb3cb.svg"},da86:function(e,t,a){},da97:function(e,t,a){},db7b:function(e,t,a){},dc31:function(e,t,a){},dc36:function(e,t,a){},dc7c:function(e,t,a){},dcb9:function(e,t,a){e.exports=a.p+"img/sort-down.126e6f20.svg"},dcc7:function(e,t,a){},dd5a:function(e,t,a){"use strict";a("2cf9")},ddc6:function(e,t,a){"use strict";a("db7b")},de03:function(e,t,a){"use strict";a("69ae")},de5e:function(e,t,a){},dfbb:function(e,t,a){e.exports=a.p+"img/warning_sign.652fe30f.svg"},dfd0:function(e,t,a){"use strict";a("ad69")},e044:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18.984",height:"22.5",viewBox:"0 0 18.984 22.5"}},[t("g",{attrs:{transform:"translate(0)",fill:"#00B5E2"}},[t("path",{staticClass:"a",attrs:{d:"M62.644,5.625a1.052,1.052,0,0,0,.746-.309L65.1,3.6V15.117a1.055,1.055,0,0,0,2.109,0V3.6l1.716,1.715a1.055,1.055,0,0,0,1.491-1.491L66.905.309a1.054,1.054,0,0,0-1.491,0L61.9,3.825a1.054,1.054,0,0,0,.745,1.8Zm11.6,1.406H70.378a1.055,1.055,0,1,0,0,2.109h3.164v11.25H58.776V9.141H61.94a1.055,1.055,0,0,0,0-2.109H58.073a1.408,1.408,0,0,0-1.406,1.406V21.094A1.408,1.408,0,0,0,58.073,22.5H74.245a1.408,1.408,0,0,0,1.406-1.406V8.437A1.408,1.408,0,0,0,74.245,7.031Z",transform:"translate(-56.667)"}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},e075:function(e,t,a){},e080:function(e,t,a){},e0f8:function(e,t,a){e.exports=a.p+"img/clock.b2e5b5a0.svg"},e270:function(e,t,a){"use strict";a("a166")},e2a2:function(e,t,a){},e3c0:function(e,t,a){},e40a:function(e,t,a){"use strict";a("582d")},e429:function(e,t,a){},e464:function(e,t,a){"use strict";a("6dee")},e573:function(e,t,a){},e593:function(e,t,a){"use strict";a("d092")},e5a7:function(e,t,a){},e5ec:function(e,t,a){},e632:function(e,t,a){},e6b3:function(e,t,a){"use strict";a("8f85")},e804:function(e,t,a){},e95a:function(e,t,a){},e9e9:function(e,t,a){},ea75:function(e,t,a){"use strict";a("e804")},eb33:function(e,t,a){},ec3b:function(e,t,a){"use strict";a("92c8")},ec85:function(e,t,a){"use strict";a("7ac0")},ecc3:function(e,t,a){"use strict";a("9730e")},ed1f:function(e,t,a){e.exports=a.p+"img/pdf_icon.5147a2db.png"},ed1f2:function(e,t,a){"use strict";a("e5a7")},ed22:function(e,t,a){},ed4b:function(e,t,a){},ed4d:function(e,t,a){"use strict";a("631e")},ed6b:function(e,t,a){"use strict";a("0aed")},ed95:function(e,t,a){},ee03:function(e,t,a){"use strict";a("6a59")},ee1b:function(e,t,a){},ee35:function(e,t,a){},ee54:function(e,t,a){},eeb0:function(e,t,a){},efd2:function(e,t,a){},f026:function(e,t,a){"use strict";a("3d8f")},f16e:function(e,t,a){},f236:function(e,t,a){},f291:function(e,t,a){},f34f:function(e,t,a){"use strict";a("70cf")},f370:function(e,t,a){"use strict";a("bdaf")},f39b:function(e,t,a){e.exports=a.p+"img/Grupo 123.56710cb9.svg"},f3e1:function(e,t,a){},f46c:function(e,t,a){},f472:function(e,t,a){"use strict";a("971a")},f5b3:function(e,t,a){},f5c3:function(e,t,a){"use strict";a("1b5e")},f649:function(e,t,a){e.exports=a.p+"img/google-recaptcha.0f1195e3.png"},f6bf:function(e,t,a){"use strict";a("f5b3")},f746:function(e,t,a){"use strict";a("6123")},f764:function(e,t,a){"use strict";a("1c8c")},f859:function(e,t,a){},f8aa:function(e,t,a){"use strict";a("fca2")},f948:function(e,t,a){"use strict";a("2ba1")},f9a1:function(e,t,a){},f9bf:function(e,t,a){e.exports=a.p+"img/triste.36846a30.svg"},fa17:function(e,t,a){"use strict";a("27c5")},fa55:function(e,t,a){},fa5f:function(e,t,a){},fada:function(e,t,a){},fb18:function(e,t,a){},fb40:function(e,t,a){"use strict";a("862e")},fb49:function(e,t,a){"use strict";a("10a5")},fbc9:function(e,t,a){e.exports=a.p+"img/triangle-exclamation.0f98e309.svg"},fbe4:function(e,t,a){"use strict";a("b182")},fbff:function(e,t,a){"use strict";a("4f6c")},fc25:function(e,t,a){"use strict";a("cfde")},fca2:function(e,t,a){},fd11:function(e,t,a){"use strict";a("6a14")},fd97:function(e,t,a){"use strict";a("dc36")},fe1a:function(e,t,a){"use strict";a("321e")},feb5:function(e,t,a){},fecc:function(e,t,a){},ff53:function(e,t,a){}});
 existe")}).then(e=>{console.error(e)})}},validations:{internal_manager_name:{required:Ae["required"]},internal_manager_phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},payer_manager_name:{required:Ae["required"]},payer_manager_phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},name:{required:Ae["required"]},juridica:{required:Ae["required"]},country:{required:Ae["required"]},address:{required:Ae["required"]},activity:{required:Ae["required"]},registry:{required:Object(Ae["requiredIf"])((function(){return!this.document}))}},computed:{internalManagerErrors(){const e=[];return this.$v.internal_manager_name.$dirty?(!this.$v.internal_manager_name.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},internalManagerPhoneErrors(){const e=[];return this.$v.internal_manager_phone.$dirty?(!this.$v.internal_manager_phone.required&&e.push(this.$t("access_controls.required")),!this.$v.internal_manager_phone.minLength&&e.push(this.$t("access_controls.invalid_phone")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},payerManagerErrors(){const e=[];return this.$v.payer_manager_name.$dirty?(!this.$v.payer_manager_name.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},payerManagerPhoneErrors(){const e=[];return this.$v.payer_manager_phone.$dirty?(!this.$v.payer_manager_phone.required&&e.push(this.$t("access_controls.required")),!this.$v.payer_manager_phone.minLength&&e.push(this.$t("access_controls.invalid_phone")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},juridicaErrors(){const e=[];return this.$v.juridica.$dirty?(!this.$v.juridica.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},countryErrors(){const e=[];return this.$v.country.$dirty?(!this.$v.country.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},addressErrors(){const e=[];return this.$v.address.$dirty?(!this.$v.address.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},activityErrors(){const e=[];return this.$v.activity.$dirty?(!this.$v.activity.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},selectedPayerErrors(){const e=[];return this.$v.selectedPayer.$dirty?(!this.$v.selectedPayer.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e},registryErrors(){const e=[];return this.$v.registry.$dirty?(!this.$v.registry.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-payer-contract",this.$v.$invalid),e):e}}},ck=lk,dk=(a("51a7"),Object(I["a"])(ck,ok,rk,!1,null,null,null)),mk=dk.exports,uk=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pc"},[t("div",{staticClass:"payer-contract-title"},[t("div",{staticClass:"payer-contract-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.contract")))]),e._v(" "+e._s(e.$t("external_controls.from_payer"))+"\n        ")])]),t("div",{staticClass:"data d-flex"},[t($t["a"],{staticClass:"i-data",attrs:{label:e.$t("external_controls.frequency"),height:"37px",items:e.frequency,"error-messages":e.frequencyErrors,outlined:""},on:{blur:function(t){return e.$v.selectedFrequency.$touch()}},model:{value:e.selectedFrequency,callback:function(t){e.selectedFrequency=t},expression:"selectedFrequency"}}),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.formattedDate,transition:"scale-transition","offset-y":"","min-width":"217px"},on:{"update:returnValue":function(t){e.formattedDate=t},"update:return-value":function(t){e.formattedDate=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({staticClass:"i-data2",attrs:{label:e.$t("external_controls.due_date"),height:"37px",readonly:"","error-messages":e.dateErrors,outlined:""},on:{blur:function(t){return e.$v.selected_date.$touch()}},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},a))]}}]),model:{value:e.due,callback:function(t){e.due=t},expression:"due"}},[t(yt["a"],{attrs:{min:e.today,width:"255px","no-title":"",scrollable:""},model:{value:e.selected_date,callback:function(t){e.selected_date=t},expression:"selected_date"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.due=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueDate()}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1),t($t["a"],{staticClass:"i-data3",attrs:{label:e.$t("external_controls.index_type"),height:"37px",items:e.index_type,"return-object":"","error-messages":e.typeErrors,"item-text":"name",outlined:""},on:{blur:function(t){return e.$v.selectedType.$touch()}},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1),e.upload?e._e():t("div",{staticClass:"err-msg"},[e._v(e._s(e.$t("external_controls.upload_required")))]),e.visible?t("div",{staticClass:"contract"},[e.visible?t(de["a"],{staticClass:"file",attrs:{height:"37px","prepend-inner-icon":"$vuetify.icons.custom_contract",readonly:"",outlined:""},model:{value:e.file.name,callback:function(t){e.$set(e.file,"name",t)},expression:"file.name"}},[t("template",{slot:"append"},[t(r["a"],{staticClass:"edit",attrs:{text:""}},[t("a",{staticClass:"download",attrs:{href:e.fileUrl,download:e.fileUrl,target:"blank"}},[t("span",{staticClass:"download"},[e._v(e._s(e.$t("external_controls.download")))])])]),t(r["a"],{staticClass:"edit",attrs:{text:""},on:{click:function(t){return e.clearField()}}},[t("span",{staticClass:"remove"},[e._v(e._s(e.$t("external_controls.remove")))])])],1)],2):e._e()],1):e._e(),e.invalid?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file_size")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),e.invalidFile?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),t("div",{staticClass:"up-btn"},[t(r["a"],{attrs:{color:"blue",height:"37px",width:"100%",block:"",outlined:""},on:{click:function(t){return e.$refs.uploadContract.click()}}},[t(at["a"],{attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"upload-text"},[e._v(e._s(e.$t("external_controls.contract_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadContract",attrs:{type:"file",accept:"application/pdf"},on:{change:function(t){return e.uploadCompanyContract()}}})],1)],1)])},Ak=[],_k={props:["item"],data(){return{foreign:0,index_type:["IGPM","IPCA"],frequency:["ANUAL"],due:!1,selected_date:null,selectedType:"",selectedFrequency:"",file:"",files:[],filename:"",fileUrl:null,visible:!1,invalid:!1,invalidFile:!1,today:this.$moment().format("YYYY-MM-DD"),upload:!0,cnpjChecked:!1,formattedDate:""}},created(){this.$bus.on("payer-contract",()=>{this.sendContractData()}),this.$bus.on("enable-payer-contract",e=>{this.cnpjChecked=0==e})},beforeDestroy(){this.$bus.off("payer-contract"),this.$bus.off("enable-payer-contract")},methods:{uploadCompanyContract(){this.invalidFile=!1;let e=event.target.files[0],t=event.target.files[0].size,a=e.type;if("application/pdf"!=a)return this.invalidFile=!0,!1;if(t>15e6&&(this.visible=!1,this.invalid=!0),e&&(this.$v.$touch(),!this.$v.$invalid)){this.visible=!0,this.file=e,this.filename=e.name;let t=this.$store.state.Data.User.token,a={file:this.file,token:t,path:"contracts",make_unique:"true"};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,a).then(e=>{this.fileUrl=e.data[this.filename].completeUrl,this.upload=!0,this.sendContractData()}).catch(e=>{console.error(e)})}},saveDueDate(){this.formatDueDate(),this.$refs.menu.save(this.formattedDate)},sendContractData(){if(this.$v.$touch(),this.$v.$invalid)return!1;if(!this.fileUrl)return this.uploadErrors,this.$bus.emit("disable-save"),!1;{let e={expiration_date:this.selected_date,readjustment_frequency:this.selectedFrequency,index_type:this.selectedType,file:this.fileUrl};this.$bus.emit("new-payer-contract",e)}},clearField(){this.fileUrl=null,this.visible=!1,this.sendContractData()},formatDueDate(){if(this.selected_date){const[e,t,a]=this.selected_date.split("-");return this.formattedDate=`${a}-${t}-${e}`,this.formattedDate}}},validations:{selectedFrequency:{required:Ae["required"]},selectedType:{required:Ae["required"]},selected_date:{required:Ae["required"]}},computed:{frequencyErrors(){const e=[];return this.$v.selectedFrequency.$dirty?(!this.$v.selectedFrequency.required&&e.push(this.$t("access_controls.required")),e):e},dateErrors(){const e=[];return this.$v.selected_date.$dirty?(!this.$v.selected_date.required&&e.push(this.$t("access_controls.required")),e):e},typeErrors(){const e=[];return this.$v.selectedType.$dirty?(!this.$v.selectedType.required&&e.push(this.$t("access_controls.required")),e):e},uploadErrors(){this.fileUrl?this.upload=!0:this.upload=!1}}},Ek=_k,Ik=(a("553b"),Object(I["a"])(Ek,uk,Ak,!1,null,null,null)),hk=Ik.exports,Ok=function(){var e=this,t=e._self._c;return t("div",{staticClass:"save-client-component"},[e.success?t("div",{staticClass:"successful"},[e._v(e._s(e.$t("external_controls.payer_successful")))]):e._e(),t("div",{staticClass:"test2"},[t(r["a"],{staticClass:"test",class:{"disabled-events":!e.completed},attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.saveData()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)])},pk=[],Sk={data(){return{loading:!1,success:!1,completed:!1,data:null}},created(){this.$bus.on("new-payer-setup",e=>{this.data=e,this.completed=!0}),this.$bus.on("enable-save-button",()=>{this.completed=!0}),this.$bus.on("disable-save",()=>{this.completed=!1})},beforeDestroy(){},methods:{getDataFromComponents(){this.completed&&this.$bus.emit("new-payer")},saveData(){this.loading=!0;let e=this.$store.state.Data.User.token,t=this.data;t.token=e,this.$store.dispatch(this.$consts.USER_ACTIONS.NEW_PAYER,t).then(e=>{this.loading=!1,this.saveSuccessful()}).catch(e=>{this.loading=!1})},saveSuccessful(){this.success=!0,setTimeout(()=>{this.$bus.emit("confirm-close-new-payer")},3e3)}}},Ck=Sk,Tk=(a("cf05"),Object(I["a"])(Ck,Ok,pk,!1,null,"ffa0e302",null)),Rk=Tk.exports,Dk=function(){var e=this,t=e._self._c;return t("div",{staticClass:"delete-client-component"},[t(r["a"],{attrs:{color:"blue",outlined:"",block:""}},[t(at["a"],{attrs:{size:"18"}},[e._v("$vuetify.icons.custom_delete")]),t("span",{staticClass:"delete-text"},[e._v(e._s(e.$t("external_controls.delete")))])],1)],1)},gk=[],Lk={},fk=Lk,Nk=(a("1570"),Object(I["a"])(fk,Dk,gk,!1,null,"4c47936a",null)),kk=Nk.exports,vk={components:{NewPayer:mk,PayerContract:hk,SaveComponent:Rk,DeleteComponent:kk,ForeignCnpjNavegation:Ug},data(){return{}},created(){}},bk=vk,Mk=(a("f026"),Object(I["a"])(bk,ik,sk,!1,null,"26549434",null)),Pk=Mk.exports,Uk=function(){var e=this,t=e._self._c;return t("div",{staticClass:"edit-payer-components mb-8"},[t("EditPayer",{attrs:{item:e.item}}),t("PayerContract",{attrs:{item:e.item}}),t("SaveComponent"),t("DeleteComponent",{attrs:{item:e.item}}),t("ForeignCnpjNavegation")],1)},yk=[],$k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"payer"},[t("div",{staticClass:"payer-title"},[t("div",{staticClass:"payer-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.name))])])]),t("div",{staticClass:"payer-sub"},[t("span",{staticClass:"payer-subtitle"},[e._v(e._s(e.$t("external_controls.foreign")))])]),t("div",{staticClass:"radio-btns"},[t(Qs["a"],{attrs:{disabled:"",row:""},model:{value:e.foreign,callback:function(t){e.foreign=t},expression:"foreign"}},[t(Zs["a"],{attrs:{label:e.$t("external_controls.no"),value:0}}),t(Zs["a"],{attrs:{label:e.$t("external_controls.yes"),value:1}})],1)],1),t("div",{staticClass:"cnpj d-flex"},[0==e.foreign?t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##.###.###/####-##",expression:"'##.###.###/####-##'"}],staticClass:"input1 mr-6",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.cnpj"),height:"37px",id:"cnpj",outlined:""},model:{value:e.cnpj,callback:function(t){e.cnpj=t},expression:"cnpj"}}):e._e(),1==e.foreign?t(de["a"],{staticClass:"input1 mr-6",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.registry_number"),height:"37px",outlined:""},model:{value:e.registry,callback:function(t){e.registry=t},expression:"registry"}}):e._e(),t(de["a"],{staticClass:"input2b",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.fantasy_name"),height:"37px",outlined:""},model:{value:e.fantasia,callback:function(t){e.fantasia="string"===typeof t?t.trim():t},expression:"fantasia"}}),t(de["a"],{staticClass:"i-cnpj",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.country"),height:"37px",outlined:""},model:{value:e.country,callback:function(t){e.country="string"===typeof t?t.trim():t},expression:"country"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input3 mr-6",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.social"),height:"37px",outlined:""},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t(de["a"],{staticClass:"input1",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.ie"),height:"37px",outlined:""},model:{value:e.ie,callback:function(t){e.ie="string"===typeof t?t.trim():t},expression:"ie"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input3b",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.main_address"),height:"37px",outlined:""},model:{value:e.address,callback:function(t){e.address="string"===typeof t?t.trim():t},expression:"address"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input1 mr-6",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.activity"),height:"37px",outlined:""},model:{value:e.activity,callback:function(t){e.activity="string"===typeof t?t.trim():t},expression:"activity"}}),t(de["a"],{staticClass:"input1",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.legal"),height:"37px",outlined:""},model:{value:e.juridica,callback:function(t){e.juridica="string"===typeof t?t.trim():t},expression:"juridica"}})],1),t("div",{staticClass:"mb-3"},[t("span",{staticClass:"payer-subtitle"},[e._v(e._s(e.$t("external_controls.additional_info")))])]),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input1 mr-6",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.intern_manager"),"error-messages":e.message,height:"37px",maxlength:"50",outlined:""},model:{value:e.internal_manager_name,callback:function(t){e.internal_manager_name=t},expression:"internal_manager_name"}}),t(de["a"],{staticClass:"input1",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.phone"),height:"37px",outlined:""},model:{value:e.internal_manager_phone,callback:function(t){e.internal_manager_phone=t},expression:"internal_manager_phone"}})],1),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"input1 mr-6",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.payer_manager"),"error-messages":e.message,height:"37px",maxlength:"50",outlined:""},model:{value:e.payer_manager_name,callback:function(t){e.payer_manager_name=t},expression:"payer_manager_name"}}),t(de["a"],{staticClass:"input1",class:{"disabled-events":e.isEdit},attrs:{label:e.$t("external_controls.phone"),height:"37px",outlined:""},model:{value:e.payer_manager_phone,callback:function(t){e.payer_manager_phone=t},expression:"payer_manager_phone"}})],1)])},xk=[],Vk={props:["item"],data(){return{foreign:0,loading:!1,cnpj:"",fantasia:"",country:"Brasil",name:"",ie:"",address:"",activity:"",juridica:"",isValid:!1,error:"",internal_manager_name:"",internal_manager_phone:"",payer_manager_name:"",payer_manager_phone:"",message:"",dialog:!1,payerData:"",contractData:[],registry:"",isEdit:!0}},created(){this.item&&this.getPayer(this.item)},methods:{getPayer(e){let t=this.$store.state.Data.User.token,a={payer_id:e.id,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PAYER,a).then(e=>{let t=e.data.payer_info,a=e.data.payer_contract_info;this.name=t.name,this.cnpj=t.document,this.address=t.address,this.internal_manager_name=t.internal_manager_name,this.internal_manager_phone=this.formatPhone(t.internal_manager_phone),this.country=t.country,this.activity=t.economic_activity,this.payer_manager_name=t.company_manager_name,this.payer_manager_phone=this.formatPhone(t.company_manager_phone),this.fantasia=t.trading_name,this.juridica=t.legal_nature,this.$bus.emit("payer-contract-data",a)}).catch(e=>{console.error(e)})},formatPhone(e){let t=e.substr(0,2),a=e.substr(2,5),n=e.substr(2,4),i=e.substr(7,4),s=e.substr(6,4);return 11==e.length?`(${t})${a}-${i}`:`(${t})${n}-${s}`}}},Gk=Vk,Fk=(a("635c"),Object(I["a"])(Gk,$k,xk,!1,null,null,null)),Bk=Fk.exports,wk=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pc2"},[t("div",{staticClass:"payer-contract-title"},[t("div",{staticClass:"payer-contract-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.contract")))]),e._v(" "+e._s(e.$t("external_controls.from_payer"))+"\n        ")])]),t("div",{staticClass:"data d-flex"},[t($t["a"],{staticClass:"i-data",attrs:{label:e.$t("external_controls.frequency"),height:"37px",items:e.frequency,"error-messages":e.frequencyErrors,outlined:""},on:{blur:function(t){return e.$v.selectedFrequency.$touch()}},model:{value:e.selectedFrequency,callback:function(t){e.selectedFrequency=t},expression:"selectedFrequency"}}),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.formattedDate,transition:"scale-transition","offset-y":"","min-width":"217px"},on:{"update:returnValue":function(t){e.formattedDate=t},"update:return-value":function(t){e.formattedDate=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({staticClass:"i-data2",attrs:{label:e.$t("external_controls.due_date"),height:"37px",readonly:"","error-messages":e.dateErrors,outlined:""},on:{blur:function(t){return e.$v.selected_date.$touch()}},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},a))]}}]),model:{value:e.due,callback:function(t){e.due=t},expression:"due"}},[t(yt["a"],{attrs:{min:e.today,width:"255px","no-title":"",scrollable:""},model:{value:e.selected_date,callback:function(t){e.selected_date=t},expression:"selected_date"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.due=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueDate()}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1),t($t["a"],{staticClass:"i-data3",attrs:{label:e.$t("external_controls.index_type"),height:"37px",items:e.index_type,"return-object":"","error-messages":e.typeErrors,"item-text":"name",outlined:""},on:{blur:function(t){return e.$v.selectedType.$touch()}},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1),e.upload?e._e():t("div",{staticClass:"err-msg"},[e._v(e._s(e.$t("external_controls.upload_required")))]),t("div",{staticClass:"contract"},[e.visible?t(de["a"],{staticClass:"file",attrs:{height:"37px","prepend-inner-icon":"$vuetify.icons.custom_contract",readonly:"",outlined:""},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}},[t("template",{slot:"append"},[t(r["a"],{staticClass:"edit",attrs:{text:""}},[t("a",{staticClass:"download",attrs:{href:"#",download:e.fileUrl}},[t("span",{staticClass:"download"},[e._v(e._s(e.$t("external_controls.download")))])])]),t(r["a"],{staticClass:"edit",attrs:{text:""},on:{click:function(t){return e.removeContract()}}},[t("span",{staticClass:"remove"},[e._v(e._s(e.$t("external_controls.remove")))])])],1)],2):e._e()],1),t("div",{staticClass:"contract"},["null"==e.fileUrl||e.isChange?e._e():t(de["a"],{staticClass:"file",attrs:{height:"37px","prepend-inner-icon":"$vuetify.icons.custom_contract",readonly:"",outlined:""},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}},[t("template",{slot:"append"},[t(r["a"],{staticClass:"edit",attrs:{text:""}},[e.isChrome?t("a",{staticClass:"download",attrs:{href:e.fileUrl,download:e.fileUrl,target:"blank"}},[t("span",{staticClass:"download"},[e._v(e._s(e.$t("external_controls.download")))])]):e._e(),e.isChrome?e._e():t("span",{staticClass:"download",on:{click:function(t){return e.downloadFile()}}},[e._v(e._s(e.$t("external_controls.download")))])]),t(r["a"],{staticClass:"edit",attrs:{text:""},on:{click:function(t){return e.prepareRemoveContract()}}},[t("span",{staticClass:"remove"},[e._v(e._s(e.$t("external_controls.remove")))])])],1)],2)],1),e.invalid?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file_size")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),e.invalidFile?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),t("div",{staticClass:"up-btn"},[t(r["a"],{attrs:{color:"blue",width:"100%",height:"37px",block:"",outlined:""},on:{click:function(t){return e.$refs.uploadContract.click()}}},[t(at["a"],{attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"upload-text"},[e._v(e._s(e.$t("external_controls.contract_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadContract",attrs:{type:"file",accept:"application/pdf"},on:{change:function(t){return e.uploadCompanyContract()}}})],1)],1),t("RemoveContractModal")],1)},Hk=[],qk={props:["item"],components:{RemoveContractModal:Rf},data(){return{foreign:0,index_type:["IGPM","IPCA"],frequency:["ANUAL"],due:!1,selected_date:null,selectedType:"",selectedFrequency:"",file:"",files:[],filename:"",fileUrl:null,visible:!1,invalid:!1,invalidFile:!1,today:this.$moment().format("YYYY-MM-DD"),upload:!0,contractName:"",errors:[],isChange:!1,isChrome:!1,formattedDate:""}},created(){this.item&&this.$bus.on("payer-contract-data",e=>{this.selected_date=e.expiration_date,this.selectedType=e.index_type,this.selectedFrequency=e.readjustment_frequency.toUpperCase(),this.fileUrl=e.file_path,this.getFilename(),this.formatDueDate()}),this.$bus.on("payer-update",()=>{this.sendContractData()}),this.$bus.on("confirm-delete-contract",()=>{this.removeContract()}),this.checkBrowser()},beforeDestroy(){this.$bus.off("payer-contract-data"),this.$bus.off("payer-update"),this.$bus.off("confirm-delete-contract")},methods:{uploadCompanyContract(){this.invalidFile=!1;let e=event.target.files[0],t=event.target.files[0].size,a=e.type;if("application/pdf"!=a)return this.invalidFile=!0,!1;t>15e6&&(this.visible=!1,this.invalid=!0),e&&(this.isChange=!0,this.visible=!0,this.file=e,this.files.push(e),this.filename=e.name);let n=this.$store.state.Data.User.token,i=(this.item.id,{file:this.file,token:n,path:"contracts",make_unique:"true"});this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,i).then(e=>{this.fileUrl=e.data[this.filename].completeUrl,this.sendFileUrl()}).catch(e=>{console.error(e)})},saveDueDate(){this.formatDueDate(),this.$refs.menu.save(this.formattedDate)},sendContractData(){if(this.upload=!0,this.$v.$touch(),this.$v.$invalid)this.uploadErrors;else if("null"!=this.fileurl){let e={payer_id:this.item.id,expiration_date:this.selected_date,readjustment_frequency:this.selectedFrequency,index_type:this.selectedType,filename:this.fileUrl,path:"contracts",make_unique:"true"};this.$bus.emit("update-payer-contract",e)}else this.upload=!1},prepareRemoveContract(){let e=!0;this.$bus.emit("get-delete-contract-confirmation",e)},removeContract(){this.fileUrl="null",this.visible=!1,this.sendFileUrl()},getFilename(){if(this.fileUrl){let e=this.fileUrl.lastIndexOf("/");this.filename=this.fileUrl.substr(e+1)}},sendFileUrl(){this.$bus.emit("update-file",this.fileUrl)},downloadFile(){let e=document.createElement("a");document.body.appendChild(e),e.href=this.fileUrl,e.download=this.fileUrl,e.target="blank",e.click()},checkBrowser(){let e=window;e&&e.chrome&&(this.isChrome=!0)},formatDueDate(){if(this.selected_date){const[e,t,a]=this.selected_date.split("-");return this.formattedDate=`${a}-${t}-${e}`,this.formattedDate}}},validations:{selectedFrequency:{required:Ae["required"]},selectedType:{required:Ae["required"]},selected_date:{required:Ae["required"]}},computed:{frequencyErrors(){return this.$v.selectedFrequency.$dirty?(!this.$v.selectedFrequency.required&&this.errors.push(this.$t("access_controls.required")),this.errors):this.errors},dateErrors(){return this.$v.selected_date.$dirty?(!this.$v.selected_date.required&&this.errors.push(this.$t("access_controls.required")),this.errors):this.errors},typeErrors(){const e=[];return this.$v.selectedType.$dirty?(!this.$v.selectedType.required&&e.push(this.$t("access_controls.required")),this.errors):e},uploadErrors(){this.fileUrl?this.upload=!0:this.upload=!1}}},Yk=qk,jk=(a("6355"),Object(I["a"])(Yk,wk,Hk,!1,null,null,null)),Kk=jk.exports,Zk=function(){var e=this,t=e._self._c;return t("div",{staticClass:"save-client-component"},[e.success?t("div",{staticClass:"successful"},[e._v(e._s(e.$t("external_controls.payer_successful")))]):e._e(),e.editSuccessful?t("div",{staticClass:"successful"},[e._v(e._s(e.$t("external_controls.edit_payer_successful")))]):e._e(),e.invalidFile?t("div",{staticClass:"no-file"},[e._v(e._s(e.$t("external_controls.required_file")))]):e._e(),t(r["a"],{attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.getUpdateData()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)},Qk=[],Jk={data(){return{loading:!1,success:!1,invalidFile:!1,file:null,edit:!1,editSuccessful:!1}},created(){this.$bus.on("update-payer-contract",e=>{this.edit=!0,this.saveData(e)}),this.$bus.on("update-file",e=>{this.edit=!0,this.file=e})},beforeDestroy(){this.$bus.off("update-payer-contract"),this.$bus.off("update-file")},methods:{getUpdateData(){this.edit=!0,this.$bus.emit("payer-update")},saveData(e){if(this.invalidFile=!1,"null"==e.filename)return this.invalidFile=!0,this.editSuccessful=!1,!1;{let t=this.$store.state.Data.User.token,a=e;this.file?a.filename=this.file:this.file=null,a.token=t,this.loading=!0,this.$store.dispatch(this.$consts.USER_ACTIONS.UPDATE_PAYER,a).then(e=>{this.loading=!1,this.saveSuccessful()}).catch(e=>{this.loading=!1})}},saveSuccessful(){this.edit?(this.editSuccessful=!0,this.success=!1):(this.success=!0,this.editSuccessful=!1),setTimeout(()=>{},3e3)}}},Wk=Jk,Xk=(a("33a6"),Object(I["a"])(Wk,Zk,Qk,!1,null,"95765f1c",null)),zk=Xk.exports,ev=function(){var e=this,t=e._self._c;return t("div",{staticClass:"delete-client-component"},[t(r["a"],{attrs:{color:"blue",width:"100%",outlined:"",block:""},on:{click:function(t){return e.getDeleteModal()}}},[t(at["a"],{attrs:{size:"18"}},[e._v("$vuetify.icons.custom_delete")]),t("span",{staticClass:"delete-text"},[e._v(e._s(e.$t("external_controls.delete")))])],1),t("DeleteConfirmation")],1)},tv=[],av=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"request-section"},[t(l["a"],{staticClass:"c-card-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("attendance.nav_confirm")))]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),t(c["b"],{staticClass:"card-desc text-justify mb-3"},[e._v(e._s(e.$t("external_controls.delete_payer_confirmation")))]),t(c["a"],{staticClass:"buttons"},[t(r["a"],{staticClass:"primary--text ml-1",attrs:{color:"white",height:"37px",width:"226px",outlined:""},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("external_controls.yes")))]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"226px"},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("external_controls.no")))])],1)],1)],1)])],1)},nv=[],iv={components:{},data(){return{dialog:!1,data:null}},created(){this.$bus.on("get-delete-confirmation",e=>{this.dialog=e.dialog})},beforeDestroy(){this.$bus.off("get-delete-confirmation")},methods:{close(){this.$bus.emit("confirm-delete-payer"),this.dialog=!1}}},sv=iv,ov=(a("8b50"),Object(I["a"])(sv,av,nv,!1,null,null,null)),rv=ov.exports,lv={props:["item"],components:{DeleteConfirmation:rv},data(){return{}},created(){this.$bus.on("confirm-delete-payer",()=>{this.deletePayer()})},beforeDestroy(){this.$bus.off("confirm-delete-payer")},methods:{deletePayer(){let e=this.$store.state.Data.User.token,t=this.item.id,a={token:e,payer_id:t};this.$store.dispatch(this.$consts.USER_ACTIONS.DELETE_PAYER,a).then(e=>{this.goBackToMainPage()}).catch(e=>{console.error(e)})},goBackToMainPage(){setTimeout(()=>{this.$bus.emit("confirm-close-edit-payer",this.item)},1e3)},getDeleteModal(){let e={dialog:!0};this.$bus.emit("get-delete-confirmation",e)}}},cv=lv,dv=(a("77f2"),Object(I["a"])(cv,ev,tv,!1,null,"1f179bdc",null)),mv=dv.exports,uv={props:["item"],components:{EditPayer:Bk,PayerContract:Kk,SaveComponent:zk,DeleteComponent:mv,ForeignCnpjNavegation:Ug},data(){return{}},created(){}},Av=uv,_v=(a("88c7"),Object(I["a"])(Av,Uk,yk,!1,null,"ce4b7ed8",null)),Ev=_v.exports,Iv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reason"},[t("div",{staticClass:"reason-title mb-4"},[t("div",{staticClass:"reason-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.new2")))]),e._v(" "+e._s(e.$t("external_controls.reason_call"))+"\n        ")])]),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"reason-name",attrs:{placeholder:e.$t("external_controls.reason_name"),"error-messages":e.nameErrors,height:"37px",maxlength:"100",outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t($t["a"],{staticClass:"select",attrs:{label:e.$t("external_controls.status"),height:"37px",items:e.statuses,"item-name":"status","error-messages":e.statusErrors,outlined:""},on:{blur:function(t){return e.$v.selectedStatus.$touch()}},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}})],1),t("div",{staticClass:"radio-btn"},[t(Qs["a"],{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t(Zs["a"],{attrs:{label:e.$t("external_controls.aso_available")},on:{click:function(t){return e.toggleAso()}}})],1)],1),t("div",{staticClass:"reason-title mb-4"},[t("div",{staticClass:"reason-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.details")))]),e._v(" "+e._s(e.$t("external_controls.details2"))+"\n        ")])]),e._l(e.details,(function(a,n){return t("div",{key:n},[t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"reason-name",attrs:{placeholder:e.$t("external_controls.reason_placeholder"),height:"37px",maxlength:"100",outlined:""},on:{blur:function(t){return e.checkField(a.title)}},model:{value:a.title,callback:function(t){e.$set(a,"title","string"===typeof t?t.trim():t)},expression:"data.title"}}),t("div",{staticClass:"close mt-2"},[t(at["a"],{staticClass:"icon ml-4",attrs:{size:"16",color:"white"},on:{click:function(t){return e.removeDetail(a)}}},[e._v("close")])],1),0==a.subcategory.length?t("div",{staticClass:"ml-4"},[t(r["a"],{staticClass:"add-detail",attrs:{width:"219px",color:"blue",outlined:""},on:{click:function(t){return e.addSubcategory(a,n)}}},[e._v("\n                    "+e._s(e.$t("external_controls.add_subcategory"))+"\n                ")])],1):e._e()],1),e._l(a.subcategory,(function(i,s){return e.subcategory_visible?t("div",{key:s,staticClass:"saved"},[t("div",{staticClass:"d-flex sub"},[t(de["a"],{staticClass:"reason-name",attrs:{placeholder:e.$t("external_controls.subcategory_placeholder"),height:"37px",maxlength:"100",outlined:""},on:{blur:function(t){return e.checkSubField(i.title)}},model:{value:i.title,callback:function(t){e.$set(i,"title","string"===typeof t?t.trim():t)},expression:"sub.title"}}),t("div",{staticClass:"close mt-2"},[t(at["a"],{staticClass:"icon ml-4",attrs:{size:"16",color:"white"},on:{click:function(t){return e.removeSubcategory(i,a.subcategory)}}},[e._v("close")])],1)],1),s==a.subcategory.length-1?t("div",{staticClass:"d-flex mr-8 sub mb-8 mt-n4"},[t(r["a"],{staticClass:"add-detail",attrs:{width:"528px",color:"blue",outlined:""},on:{click:function(t){return e.addSubcategoryDetail(a,n,i.title)}}},[e._v("\n                "+e._s(e.$t("external_controls.add_sub_subcategory"))+"\n            ")])],1):e._e()]):e._e()}))],2)})),t("div",{staticClass:"mb-10"},[t(r["a"],{staticClass:"add-detail",attrs:{width:"528px",color:"blue",outlined:""},on:{click:function(t){return e.addDetails()}}},[e._v("\n            "+e._s(e.$t("external_controls.add_new_detail"))+"\n        ")])],1),e.success?t("div",{staticClass:"created"},[t("span",[e._v(e._s(e.$t("external_controls.reason_created")))])]):e._e(),e.exists?t("div",{staticClass:"error-msg"},[t("span",[e._v(e._s(e.$t("external_controls.reason_exists")))])]):e._e(),e.subEmpty?t("div",{staticClass:"empty-field mt-n7 mb-6"},[e._v(e._s(e.$t("access_controls.all_required")))]):e._e(),e.empty?t("div",{staticClass:"empty-field mt-n7"},[e._v(e._s(e.$t("access_controls.all_required")))]):e._e(),t("div",{staticClass:"save-reason mb-10"},[t(r["a"],{attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.saveData()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)],2)},hv=[],Ov={data(){return{loading:!1,name:"",radio:1,details:[],detail:null,detail_visible:!1,subcategory_visible:!1,fieldVisible:!1,hasSub:!1,statuses:[],selectedStatus:null,success:!1,exists:!1,empty:!1,subEmpty:!1}},created(){this.listStatuses()},methods:{addDetails(){this.$v.name.$touch(),this.$v.selectedStatus.$touch(),this.$v.name.$invalid||this.$v.selectedStatus.$invalid||(this.handleSubmit(),this.empty||(this.details.push({title:"",subcategory:[]}),this.detail_visible=!0))},addSubcategory(e,t){this.subcategory_visible=!0,this.details[t].subcategory.push({title:""})},toggleAso(){1==this.radio?this.radio=0:this.radio=1},removeDetail(e){let t=this.details.indexOf(e);this.details.splice(t,1)},addSubcategoryDetail(e,t,a){a&&a.length>0&&e.subcategory.push({title:""})},removeSubcategory(e,t){let a=t.indexOf(e);t.splice(a,1)},listStatuses(){let e=this.$store.state.Data.User.token,t={token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_REASON_STATUS,t).then(e=>{this.statuses=e.data}).catch(e=>{})},saveData(){if(this.$v.$touch(),!this.$v.$invalid&&(this.handleSubmit(),!this.empty&&!this.subEmpty)){this.success=!1,this.exists=!1,this.detail_visible=!1;let e={token:this.$store.state.Data.User.token,title:this.name,status:this.selectedStatus,user_id:this.$store.state.Data.User.info.user_info.id,aso:0==this.radio?1:0,subcategory:this.details};this.$store.dispatch(this.$consts.USER_ACTIONS.CREATE_REASON_CALL,e).then(e=>{e.data.message&&(this.success=!0),this.closeNewReasonTab(),this.$bus.emit("update-reason-list")}).catch(e=>{"There is title duplicated in this call reason"==e.message&&(this.exists=!0),this.success=!1})}},handleSubmit(){this.details.map(e=>{let t=[];t.push(e),""==e.title?this.empty=!0:this.empty=!1})},closeNewReasonTab(){setTimeout(()=>{this.$bus.emit("confirm-close-new-reason")},2e3)},checkField(e){0==e.length?this.empty=!0:this.empty=!1},checkSubField(e){0==e.length?this.subEmpty=!0:this.subEmpty=!1}},validations:{name:{required:Ae["required"]},selectedStatus:{required:Ae["required"]}},computed:{nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),e):e},statusErrors(){const e=[];return this.$v.selectedStatus.$dirty?(!this.$v.selectedStatus.required&&e.push(this.$t("access_controls.required")),e):e},isEmpty(){return this.empty}}},pv=Ov,Sv=(a("49df"),Object(I["a"])(pv,Iv,hv,!1,null,null,null)),Cv=Sv.exports,Tv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reason"},[t("div",{staticClass:"reason-title mb-4"},[t("div",{staticClass:"reason-title-text"},[t("span",{staticClass:"font-weight-bold"}),e._v("\n      "+e._s(e.$t("external_controls.reason_call"))+"\n    ")])]),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"reason-name",attrs:{placeholder:e.$t("external_controls.reason_name"),"error-messages":e.titleErrors,height:"37px",maxlength:"100",outlined:""},on:{blur:function(t){return e.$v.title.$touch()},change:function(t){return e.addDataToUpload(e.info.id,e.title)}},model:{value:e.title,callback:function(t){e.title="string"===typeof t?t.trim():t},expression:"title"}}),t($t["a"],{staticClass:"select",attrs:{"error-messages":e.statusErrors,label:e.$t("external_controls.status"),height:"37px",items:e.statuses,"item-name":"status",outlined:""},on:{blur:function(t){return e.$v.selectedStatus.$touch()}},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}})],1),t("div",{staticClass:"radio-btn"},[t(Qs["a"],{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t(Zs["a"],{attrs:{label:e.$t("external_controls.aso_available")},on:{click:function(t){return e.toggleAso()}}})],1)],1),t("div",{staticClass:"reason-title mb-4"},[t("div",{staticClass:"reason-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.details")))]),e._v("\n      "+e._s(e.$t("external_controls.details2"))+"\n    ")])]),e._l(e.subcategories,(function(a,n){return t("div",{key:n},[t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"reason-name",attrs:{placeholder:e.$t("external_controls.reason_placeholder"),height:"37px",maxlength:"100",outlined:""},on:{blur:function(t){return e.checkField(a.title)},change:function(t){return e.addDataToCategory(a,a.id)}},model:{value:a.title,callback:function(t){e.$set(a,"title","string"===typeof t?t.trim():t)},expression:"data.title"}}),t("div",{staticClass:"close mt-2"},[t(at["a"],{staticClass:"icon ml-4",attrs:{size:"16",color:"white"},on:{click:function(t){return e.removeDetail(a)}}},[e._v("close")])],1),a.subcategories&&0==a.subcategories.length?t("div",{staticClass:"ml-4"},[t(r["a"],{staticClass:"add-detail",attrs:{width:"219px",color:"blue",outlined:""},on:{click:function(t){return e.addSubcategory(e.subcategories,n)}}},[e._v("\n          "+e._s(e.$t("external_controls.add_subcategory"))+"\n        ")])],1):e._e()],1),e._l(a.subcategories,(function(i,s){return e.forceReloadSub?e._e():t("div",{key:s,staticClass:"saved"},[t("div",{staticClass:"d-flex sub"},[t(de["a"],{staticClass:"reason-name",attrs:{placeholder:e.$t("external_controls.subcategory_placeholder"),height:"37px",maxlength:"100",outlined:""},on:{blur:function(t){return e.checkSubField(i.title)},change:function(t){return e.addDataToSubcategory(i,a,s)}},model:{value:i.title,callback:function(t){e.$set(i,"title","string"===typeof t?t.trim():t)},expression:"sub.title"}}),t("div",{staticClass:"close mt-2"},[t(at["a"],{staticClass:"icon ml-4",attrs:{size:"16",color:"white"},on:{click:function(t){return e.removeSubcategory(i,a.subcategories)}}},[e._v("close")])],1)],1),a.subcategories&&s==a.subcategories.length-1?t("div",{staticClass:"d-flex mr-8 sub mb-8 mt-n4"},[t(r["a"],{staticClass:"add-detail",attrs:{width:"528px",color:"blue",outlined:""},on:{click:function(t){return e.addSubcategory(e.subcategories,n)}}},[e._v("\n          "+e._s(e.$t("external_controls.add_sub_subcategory"))+"\n        ")])],1):e._e()])}))],2)})),t("div",{staticClass:"mb-10"},[t(r["a"],{staticClass:"add-detail",attrs:{width:"528px",color:"blue",outlined:""},on:{click:function(t){return e.addDetails(e.info.id)}}},[e._v("\n      "+e._s(e.$t("external_controls.add_new_detail"))+"\n    ")])],1),e.success?t("div",{staticClass:"created"},[t("span",[e._v(e._s(e.$t("external_controls.reason_updated")))])]):e._e(),e.subEmpty?t("div",{staticClass:"empty-field mt-n7 mb-2"},[e._v("\n    "+e._s(e.$t("access_controls.all_required"))+"\n  ")]):e._e(),e.empty?t("div",{staticClass:"empty-field mt-n7"},[e._v("\n    "+e._s(e.$t("access_controls.all_required"))+"\n  ")]):e._e(),e.exists?t("div",{staticClass:"error-msg"},[t("span",[e._v(e._s(e.$t("external_controls.reason_exists")))])]):e._e(),t("div",{staticClass:"save-reason mb-10"},[t(r["a"],{attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.prepareUpdate()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)],2)},Rv=[],Dv={props:["item"],data(){return{loading:!1,name:"",radio:1,subcategory:"",detail_visible:!1,subcategory_visible:!1,fieldVisible:!1,statuses:[],selectedStatus:null,success:!1,title:"",subcategories:[],empty:!1,subEmpty:!1,hasSub:!1,newData:null,info:null,uploadData:[],deletedIds:[],exists:!1,forceReloadSub:!1}},created(){this.listStatuses(),this.getReasonData(this.item.id)},methods:{addSubcategory(e,t){if(this.forceReloadSub=!0,!e[t].subcategories||0===e[t].subcategories.length)return e[t].subcategories=[{title:""}],void(this.forceReloadSub=!1);this.forceReloadSub=!1,e[t].subcategories.push({title:""})},addDetails(e){this.empty||(this.subcategories.push({call_reason_id:e,title:"",subcategories:[]}),this.detail_visible=!0)},toggleAso(){1==this.radio?this.radio=0:this.radio=1},removeDetail(e){""==e.title&&(this.empty=!1),this.deletedIds.push(e.id);let t=this.subcategories.indexOf(e);this.subcategories.splice(t,1),this.hasSub=!1,this.subcategory_visible=!1},addDataToCategory(e,t){t||(e.call_reason_id=this.info.id)},addDataToSubcategory(e,t,a){e.id||t.id&&(e.call_reason_id=t.id),t.subcategories[a]=e},addSubcategoryDetail(e,t,a){this.subcategories[e].subcategories.push({title:""})},removeSubcategory(e,t){""==e.title&&(this.subEmpty=!1),this.deletedIds.push(e.id);let a=t.indexOf(e);t.splice(a,1),0==t.length&&(this.hasSub=!1)},listStatuses(){let e=this.$store.state.Data.User.token,t={token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_REASON_STATUS,t).then(e=>{this.statuses=e.data}).catch(e=>{})},updateData(e){this.empty||this.subEmpty?console.log("empty check"):(this.success=!1,this.exists=!1,this.subcategory="",this.detail_visible=!1,e.token=this.$store.state.Data.User.token,this.$store.dispatch(this.$consts.USER_ACTIONS.UPDATE_REASON_CALL,e).then(e=>{e.data.message&&(this.success=!0,setTimeout(()=>{this.success=!1},3e3)),this.exists=!1,this.listStatuses(),this.getReasonData(this.item.id)}).catch(e=>{"There is title duplicated in this call reason"==e.message&&(this.exists=!0),this.success=!1}))},handleSubmit(){this.newData.length>0&&(0==this.uploadData.length?this.uploadData=this.newData:this.uploadData.concat(this.newData)),0==this.newData.length&&0==this.uploadData.length&&this.uploadData.push({id:this.info.id,status:this.selectedStatus,aso:0==this.radio?1:0})},getReasonData(e){let t=this.$store.state.Data.User.token,a={token:t,id:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_REASON,a).then(e=>{let t=e.data.aso;this.radio=1==t?0:1,this.title=e.data.title,this.selectedStatus=e.data.status,this.subcategories=e.data.subcategories,this.info=e.data,this.subcategories.forEach(e=>{e.subcategories||(e.subcategories=Array())})}).catch(e=>{})},checkField(e){0==e.length?this.empty=!0:this.empty=!1},checkSubField(e){0==e.length?this.subEmpty=!0:this.subEmpty=!1},addDataToUpload(e,t,a){t.length>0&&this.uploadData.push({id:e,title:t,aso:0==this.radio?1:0,status:this.selectedStatus})},addNewDataToUpload(e,t){this.uploadData.push({call_reason_id:e.id,title:t,aso:0==this.radio?1:0,status:this.selectedStatus})},prepareUpdate(){let e=[].concat(this.subcategories);e.push({id:this.info.id,status:this.selectedStatus,aso:1==this.radio}),e.forEach((t,a)=>{e[a].subcategory=[].concat(e[a]["subcategories"])});const t={call_reason:e,call_reason_parent_id:this.info.id,delete_ids:this.deletedIds};this.updateData(t)}},validations:{title:{required:Ae["required"]},selectedStatus:{required:Ae["required"]},tempTitle:{required:Ae["required"]},tempSubcategory:{required:Ae["required"]}},computed:{titleErrors(){const e=[];return this.$v.title.$dirty?(!this.$v.title.required&&e.push(this.$t("access_controls.required")),e):e},statusErrors(){const e=[];return this.$v.selectedStatus.$dirty?(!this.$v.selectedStatus.required&&e.push(this.$t("access_controls.required")),e):e},isEmpty(){return this.empty},tempTitleErrors(){const e=[];return this.$v.tempTitle.$dirty?(!this.$v.tempTitle.required&&e.push(this.$t("access_controls.required")),e):e},tempSubcategoryErrors(){const e=[];return this.$v.tempSubcategory.$dirty?(!this.$v.tempSubcategory.required&&e.push(this.$t("access_controls.required")),e):e}}},gv=Dv,Lv=(a("5c3f"),Object(I["a"])(gv,Tv,Rv,!1,null,null,null)),fv=Lv.exports,Nv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"attendance-center"},[t(re["a"],[t(Xn["a"],[t("div",{staticClass:"title mb-4"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n                        "+e._s("edit"!=e.type?e.$t("external_controls.new2"):e.$t("external_controls.edit"))+"\n                    ")]),e._v(" "+e._s(e.$t("external_controls.attendance_center"))+"\n                ")])]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(se["a"],{attrs:{label:e.$t("external_controls.attendance_center_company"),items:e.companies,"search-input":e.searchCompanies,"error-messages":e.companyIdErrors,"hide-no-data":e.loadingCompanies,loading:e.loadingCompanies,"no-data-text":e.$t("controls.noDataAvailable"),"item-value":"id","item-text":"name","item-name":"name",height:"37px","hide-selected":"",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchCompanies=t},"update:search-input":function(t){e.searchCompanies=t},blur:function(t){return e.$v.form.company_id.$touch()}},model:{value:e.form.company_id,callback:function(t){e.$set(e.form,"company_id",t)},expression:"form.company_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.attendance_center_name"),"error-messages":e.nameErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.name.$touch()}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],attrs:{type:"tel",label:e.$t("external_controls.attendance_center_contact_phone"),"error-messages":e.contactPhoneErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.contact_phone.$touch()}},model:{value:e.form.contact_phone,callback:function(t){e.$set(e.form,"contact_phone","string"===typeof t?t.trim():t)},expression:"form.contact_phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("external_controls.status"),"error-messages":e.statusErrors,items:e.statusTypes,"item-value":"id","item-text":e.getStatusTypeText,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.status_id.$touch()}},model:{value:e.form.status_id,callback:function(t){e.$set(e.form,"status_id",t)},expression:"form.status_id"}})],1)],1),t("div",{staticClass:"title"},[t("p",{staticClass:"text"},[e._v(e._s(e.$t("external_controls.address")))])]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.attendance_center_country"),"error-messages":e.countryErrors,disabled:e.loadingZipCode,loading:e.loadingZipCode,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.country.$touch()}},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country","string"===typeof t?t.trim():t)},expression:"form.country"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["#####-###"],expression:"['#####-###']"}],attrs:{type:"tel",label:e.$t("external_controls.attendance_center_zip_code"),"error-messages":e.zipCodeErrors,disabled:e.loadingZipCode,loading:e.loadingZipCode,height:"37px",outlined:"",required:""},on:{blur:e.checkZipCode},model:{value:e.form.zip_code,callback:function(t){e.$set(e.form,"zip_code","string"===typeof t?t.trim():t)},expression:"form.zip_code"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.attendance_center_address"),"error-messages":e.addressErrors,disabled:e.loadingZipCode,loading:e.loadingZipCode,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.address.$touch()}},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address","string"===typeof t?t.trim():t)},expression:"form.address"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.attendance_center_number"),"error-messages":e.numberErrors,disabled:e.loadingZipCode,loading:e.loadingZipCode,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.number.$touch()}},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number","string"===typeof t?t.trim():t)},expression:"form.number"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.attendance_center_complement"),disabled:e.loadingZipCode,loading:e.loadingZipCode,height:"37px",outlined:""},model:{value:e.form.complement,callback:function(t){e.$set(e.form,"complement","string"===typeof t?t.trim():t)},expression:"form.complement"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("external_controls.attendance_center_state"),"error-messages":e.stateErrors,disabled:e.loadingZipCode,loading:e.loadingZipCode,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.state.$touch()}},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state","string"===typeof t?t.trim():t)},expression:"form.state"}})],1)],1),t("div",{staticClass:"my-10"},[t(r["a"],{attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.saveData()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)],1)],1)],1)},kv=[],vv={props:["type","item"],data(){return{loading:!1,loadingCompanies:!1,loadingZipCode:!1,searchTimeout:null,searchCompanies:"",duplicatedNameError:!1,statusTypes:[],countries:[],companies:[],form:{company_id:null,name:"",zip_code:"",address:"",number:"",complement:"",state:"",country:"",contact_phone:"",status_id:null}}},created(){this.getStatusTypes(),this.item&&(this.form.company_id=this.item.company_id,this.form.name=this.item.name,this.form.zip_code=this.item.cep,this.form.address=this.item.address,this.form.number=this.item.number,this.form.complement=this.item.complement,this.form.state=this.item.state,this.form.country=this.item.country,this.form.contact_phone=this.item.contact_phone,this.form.status_id=this.item.status_id)},methods:{listCompanies(e=null){this.loadingCompanies=!0;let t={limit:10,offset:0};e&&(t.filters={name:e}),this.searchTimeout=setTimeout(()=>{be.listCompany(t).then(e=>{this.companies=e.data.company_list}).catch(e=>{this.companies=[],console.error(e)}).finally(()=>{this.loadingCompanies=!1})},400)},getStatusTypes(){let e={entity_schema:"program",entity_name:"attendance_center"};tN.getStatusTypes(e).then(e=>{this.statusTypes=e}).catch(e=>{console.error(e)})},getStatusTypeText(e){return this.$t("status."+e.name)},checkZipCode(){this.loadingZipCode=!0,tN.getAddressByZipCode(this.form.zip_code).then(e=>{this.autocompleteAddress(e)}).finally(()=>{this.loadingZipCode=!1,this.$v.form.zip_code.$touch()})},autocompleteAddress(e){e&&(this.form.address=e.logradouro,this.form.complement=e.complemento,this.form.state=e.uf)},checkSaveError(e){this.duplicatedNameError=e.includes("there_is_an_attendance_center_with_this_name"),this.duplicatedNameError&&this.$v.form.name.$touch()},saveData(){if(this.$v.$touch(),this.duplicatedNameError=!1,this.$v.$invalid)return;this.loading=!0;let e={company_id:this.form.company_id,name:this.form.name,contact_phone:this.form.contact_phone.replace(/\D/g,""),status_id:this.form.status_id||this.statusTypes.find(e=>"active"==e.name).id,cep:this.form.zip_code,address:this.form.address,number:this.form.number,complement:this.form.complement,state:this.form.state,country:this.form.country};this.item&&(e.id=this.item.id),dD.upsertAttendanceCenters(e).then(e=>{this.closeAttendanceCenterTab(),this.$bus.emit("update-attendance-center-list")}).catch(e=>{this.checkSaveError(e),this.loading=!1,console.error(e)})},closeAttendanceCenterTab(){setTimeout(()=>{this.item?this.$bus.emit("confirm-close-edit-attendance-center",this.item):this.$bus.emit("confirm-close-new-attendance-center")},2e3)}},computed:{companyIdErrors(){const e=[];return this.$v.form.company_id.$dirty?(!this.$v.form.company_id.required&&e.push(this.$t("external_controls.required")),e):e},nameErrors(){const e=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&e.push(this.$t("external_controls.required")),this.duplicatedNameError&&e.push(this.$t("external_controls.duplicated_name")),e):e},statusErrors(){const e=[];return this.$v.form.status_id.$dirty?(!this.$v.form.status_id.required&&e.push(this.$t("external_controls.required")),e):e},zipCodeErrors(){const e=[];return this.$v.form.zip_code.$dirty?(!this.$v.form.zip_code.required&&e.push(this.$t("external_controls.required")),e):e},addressErrors(){const e=[];return this.$v.form.address.$dirty?(!this.$v.form.address.required&&e.push(this.$t("external_controls.required")),e):e},numberErrors(){const e=[];return this.$v.form.number.$dirty?(!this.$v.form.number.required&&e.push(this.$t("external_controls.required")),e):e},stateErrors(){const e=[];return this.$v.form.state.$dirty?(!this.$v.form.state.required&&e.push(this.$t("external_controls.required")),e):e},countryErrors(){const e=[];return this.$v.form.country.$dirty?(!this.$v.form.country.required&&e.push(this.$t("external_controls.required")),e):e},contactPhoneErrors(){const e=[];return this.$v.form.contact_phone.$dirty?(!this.$v.form.contact_phone.required&&e.push(this.$t("external_controls.required")),e):e}},watch:{searchCompanies(e){clearTimeout(this.searchTimeout),this.item&&null===e&&(e=this.item.company_name),this.listCompanies(e)}},validations:{form:{company_id:{required:Ae["required"]},name:{required:Ae["required"]},status_id:{required:Ae["required"]},zip_code:{required:Ae["required"]},address:{required:Ae["required"]},number:{required:Ae["required"]},state:{required:Ae["required"]},country:{required:Ae["required"]},contact_phone:{required:Ae["required"]}}}},bv=vv,Mv=(a("9225"),Object(I["a"])(bv,Nv,kv,!1,null,"45034c64",null)),Pv=Mv.exports,Uv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"schedule-external-agent"},[t(re["a"],[t(Xn["a"],[t("div",{staticClass:"title mb-4"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s("edit"!=e.type?e.$t("access_controls.new"):e.$t("access_controls.edit")))]),e._v(" "+e._s(e.$t("access_controls.schedule_external_agent"))+"\n                ")])]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("access_controls.name"),"error-messages":e.nameErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.name.$touch()}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("access_controls.email"),"error-messages":e.emailErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.email.$touch()},change:function(t){return e.resetEmailErrors()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###.###.###-##"],expression:"['###.###.###-##']"}],attrs:{type:"tel",label:e.$t("access_controls.cpf"),"error-messages":e.cpfErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.cpf.$touch()},change:function(t){return e.resetCpfErrors()}},model:{value:e.form.cpf,callback:function(t){e.$set(e.form,"cpf","string"===typeof t?t.trim():t)},expression:"form.cpf"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],attrs:{type:"tel",label:e.$t("access_controls.phone"),"error-messages":e.phoneErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("access_controls.role"),"error-messages":e.roleErrors,items:e.roleTypes,"item-value":"id","item-text":"role",height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.user_role_id.$touch()}},model:{value:e.form.user_role_id,callback:function(t){e.$set(e.form,"user_role_id",t)},expression:"form.user_role_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("access_controls.speciality"),"error-messages":e.specialityErrors,items:e.specialityTypes,"item-value":"id","item-text":"name",height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.speciality_id.$touch()}},model:{value:e.form.speciality_id,callback:function(t){e.$set(e.form,"speciality_id",t)},expression:"form.speciality_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{label:e.$t("access_controls.status"),"error-messages":e.statusErrors,items:e.statusTypes,"item-value":"id","item-text":e.getStatusTypeText,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.user_status_id.$touch()}},model:{value:e.form.user_status_id,callback:function(t){e.$set(e.form,"user_status_id",t)},expression:"form.user_status_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(se["a"],{attrs:{label:e.$t("access_controls.attendance_centers"),items:e.attendanceCenters,"search-input":e.searchAttendanceCenters,"item-value":"id","item-text":"name","error-messages":e.attendanceCenterIdsErrors,"hide-no-data":e.loadingAttendanceCenters,loading:e.loadingAttendanceCenters,"no-data-text":e.$t("controls.noDataAvailable"),"item-name":"name",height:"auto",chips:"",multiple:"",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchAttendanceCenters=t},"update:search-input":function(t){e.searchAttendanceCenters=t},blur:function(t){return e.$v.form.attendance_center_ids.$touch()}},model:{value:e.form.attendance_center_ids,callback:function(t){e.$set(e.form,"attendance_center_ids",t)},expression:"form.attendance_center_ids"}})],1)],1),t("div",{staticClass:"my-10"},[t(r["a"],{attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.saveData()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("access_controls.save")))])],1)],1)],1)],1)],1)},yv=[],$v={props:["type","item"],data(){return{loading:!1,loadingAttendanceCenters:!1,lastSavedAttendanceCenterIds:[],duplicatedEmailError:!1,duplicatedCpfError:!1,invalidEmailError:!1,invalidCpfError:!1,searchTimeout:null,searchAttendanceCenters:"",selectedAttendanceCenters:[],statusTypes:[],roleTypes:[],specialityTypes:[],attendanceCenters:[],form:{name:"",email:"",cpf:"",phone:"",user_role_id:null,speciality_id:null,user_status_id:null,attendance_center_ids:[]}}},created(){this.getStatus(),this.getRoles(),this.getSpecialties(),this.item&&(this.lastSavedAttendanceCenterIds=this.item.attendance_center.map(e=>e),this.attendanceCenters=this.item.attendance_center,this.form.name=this.item.name,this.form.email=this.item.email,this.form.cpf=this.item.cpf,this.form.phone=this.item.phone,this.form.user_role_id=this.item.user_role_id,this.form.speciality_id=this.item.speciality_id,this.form.user_status_id=this.item.user_status_id,this.form.attendance_center_ids=this.item.attendance_center.map(e=>e.id))},methods:{getStatus(){be.listStatus().then(e=>{this.statusTypes=e.data}).catch(e=>{console.error(e)})},getRoles(){YR.getUserAgentRoles().then(e=>{this.roleTypes=e.data}).catch(e=>{console.error(e)})},getSpecialties(){be.listSpecialties().then(e=>{this.specialityTypes=e.data;let t=this.specialityTypes.find(e=>"Nenhuma"==e.name);this.specialityTypes=this.specialityTypes.filter(e=>"Nenhuma"!==e.name),this.specialityTypes.unshift(t)}).catch(e=>{console.error(e)})},getStatusTypeText(e){return this.$t("status."+e.status.toLowerCase())},resetEmailErrors(){this.invalidEmailError=!1,this.duplicatedEmailError=!1},resetCpfErrors(){this.invalidCpfError=!1,this.duplicatedCpfError=!1},checkSaveError(e){this.invalidEmailError=e.includes("invalid_email"),this.duplicatedEmailError=e.includes("email_is_already_used"),(this.invalidEmailError||this.duplicatedEmailError)&&this.$v.form.email.$touch(),this.invalidCpfError=e.includes("invalid_cpf"),this.duplicatedCpfError=e.includes("cpf_is_already_used"),(this.invalidCpfError||this.duplicatedCpfError)&&this.$v.form.cpf.$touch()},saveData(){if(this.$v.$touch(),this.duplicatedEmailError=!1,this.duplicatedCpfError=!1,this.invalidEmailError=!1,this.invalidCpfError=!1,this.$v.$invalid)return;if(!tN.checkCpf(this.form.cpf))return this.checkSaveError("invalid_cpf");this.loading=!0;let e={name:this.form.name,email:this.form.email,cpf:this.form.cpf.replace(/\D/g,""),phone:this.form.phone.replace(/\D/g,""),user_role_id:this.form.user_role_id,speciality_id:this.form.speciality_id,user_status_id:this.form.user_status_id,attendance_center_ids:this.form.attendance_center_ids.map(e=>({id:e}))};if(this.item){e.user_id=this.item.id;for(let t in e.attendance_center_ids){let a=e.attendance_center_ids[t].id;this.lastSavedAttendanceCenterIds.includes(a)||(e.attendance_center_ids[t].action="ADD")}for(let t in this.lastSavedAttendanceCenterIds){let a=this.lastSavedAttendanceCenterIds[t].id;e.attendance_center_ids.find(e=>e.id==a)||e.attendance_center_ids.push({id:a,action:"REMOVE"})}YR.updateUserAgent(e).then(e=>{this.closeScheduleExternalAgentTab(),this.$bus.emit("update-schedule-external-agent-list")}).catch(e=>{this.checkSaveError(e),this.loading=!1,console.error(e)})}else YR.createUserAgent(e).then(e=>{this.closeScheduleExternalAgentTab(),this.$bus.emit("update-schedule-external-agent-list")}).catch(e=>{this.checkSaveError(e),this.loading=!1,console.error(e)})},closeScheduleExternalAgentTab(){setTimeout(()=>{this.item?this.$bus.emit("confirm-close-edit-schedule-external-agent",this.item):this.$bus.emit("confirm-close-new-schedule-external-agent")},2e3)}},watch:{searchAttendanceCenters(e){clearTimeout(this.searchTimeout),this.loadingAttendanceCenters=!0;let t={token:this.$store.state.Data.User.token,limit:10,offset:0};e&&(t.search=e),this.selectedAttendanceCenters=this.attendanceCenters.filter(e=>this.form.attendance_center_ids.includes(e.id)),this.searchTimeout=setTimeout(()=>{dD.getAttendanceCenters(t).then(e=>{this.attendanceCenters=[].concat(this.selectedAttendanceCenters,e.data.attendance_center).filter((e,t,a)=>t===a.findIndex(t=>t.id===e.id))}).catch(e=>{this.attendanceCenters=[],console.error(e)}).finally(()=>{this.loadingAttendanceCenters=!1})},400)}},computed:{nameErrors(){const e=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&e.push(this.$t("access_controls.required")),e):e},emailErrors(){const e=[];return this.$v.form.email.$dirty?(!this.$v.form.email.required&&e.push(this.$t("access_controls.required")),!this.$v.form.email.email&&e.push(this.$t("access_controls.invalid_email")),this.invalidEmailError&&e.push(this.$t("access_controls.invalid_email")),this.duplicatedEmailError&&e.push(this.$t("access_controls.duplicated_email")),e):e},cpfErrors(){const e=[];return this.$v.form.cpf.$dirty?(!this.$v.form.cpf.required&&e.push(this.$t("access_controls.required")),this.invalidCpfError&&e.push(this.$t("access_controls.invalid_cpf")),this.duplicatedCpfError&&e.push(this.$t("access_controls.duplicated_cpf")),e):e},phoneErrors(){const e=[];return this.$v.form.phone.$dirty?(!this.$v.form.phone.required&&e.push(this.$t("access_controls.required")),e):e},roleErrors(){const e=[];return this.$v.form.user_role_id.$dirty?(!this.$v.form.user_role_id.required&&e.push(this.$t("access_controls.required")),e):e},specialityErrors(){const e=[];return this.$v.form.speciality_id.$dirty?(!this.$v.form.speciality_id.required&&e.push(this.$t("access_controls.required")),e):e},statusErrors(){const e=[];return this.$v.form.user_status_id.$dirty?(!this.$v.form.user_status_id.required&&e.push(this.$t("access_controls.required")),e):e},attendanceCenterIdsErrors(){const e=[];return this.$v.form.attendance_center_ids.$dirty?(!this.$v.form.attendance_center_ids.required&&e.push(this.$t("access_controls.required")),e):e}},validations:{form:{name:{required:Ae["required"]},email:{required:Ae["required"],email:Ae["email"]},cpf:{required:Ae["required"]},phone:{required:Ae["required"]},user_role_id:{required:Ae["required"]},speciality_id:{required:Ae["required"]},user_status_id:{required:Ae["required"]},attendance_center_ids:{required:Ae["required"]}}}},xv=$v,Vv=(a("d123"),Object(I["a"])(xv,Uv,yv,!1,null,"452f7abc",null)),Gv=Vv.exports,Fv={components:{AttendanceControls:tR,BackOfficeComponent:IR,MeusRelatorios:TR,ControleAcessos:zR,OutrosControles:$D,SaveComponent:ZD,CloseTabConfirmation:lC,ExternalControl:eg,Company:vL,Doctor:Dg,Operation:rf,EditCompany:CN,Call:nk,Payer:Pk,EditPayer:Ev,Reason:Cv,EditReason:fv,AttendanceCenter:Pv,ScheduleExternalAgent:Gv},mixins:[ve],data(){return{all_tabs:0,active_tab:0,active_sub_tab:null,active_client_tab:null,active_edit_control_tab:null,active_edit_company_tab:null,active_call_list_tab:null,active_view_call_list_tab:null,active_payer_tab:null,active_edit_payer_tab:null,active_new_reason_tab:null,active_new_doc_access_tab:null,active_edit_reason_tab:null,active_new_attendance_center_tab:null,active_edit_attendance_center_tab:null,active_new_schedule_external_agent_tab:null,active_edit_schedule_external_agent_tab:null,is_visible:!1,clicked_details:!1,controlTabs:[],controlList:[],controlTabList:null,editControlTabList:[],clientTabs:[],clientList:[],clientTabList:null,editCompanyList:[],editCompanyTabs:[],persistentEditCompanyList:null,editAccessControlTabs:[],editAccessControlList:[],persistEditAccessControlList:[],callTabs:[],callList:[],persistentCallList:[],title:this.$t("controls.new_access"),data:null,viewCallTabs:[],viewCallList:[],persistentViewCallList:[],payerTabs:[],payerList:[],persistentPayerList:[],persistentEditPayerList:[],editPayerTabs:[],editPayerList:[],reasonTabs:[],reasonList:[],persistentReasonList:[],editReasonTabs:[],editReasonList:[],persistentEditReasonList:[],attendanceCenterTabs:[],attendanceCenterList:[],persistentAttendanceCenterList:[],editAttendanceCenterTabs:[],editAttendanceCenterList:[],persistentEditAttendanceCenterList:[],scheduleExternalAgentTabs:[],scheduleExternalAgentList:[],persistentScheduleExternalAgentList:[],editScheduleExternalAgentTabs:[],editScheduleExternalAgentList:[],persistentEditScheduleExternalAgentList:[],access_flags:{ATENDER:!1,SCHEDULE:!1,CONTROLE_ACESSO:!1,CONTROLES:!1,OUTROS_CONTROLES:!1,RELATORIOS:!1,ATTENDANCE_CONTROLS:!1},user_role:this.$store.state.Data.User.info.role_info.role}},created(){this.access_flags.ATENDER=this.checkAccessesControlFuncionalityContains("attendanceQueue",this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.SCHEDULE=this.checkAccessesControlFuncionalityContains("schedule",this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.CONTROLE_ACESSO=this.checkAccessesControlFuncionality(["manage.operationUsers.list","manage.operationUsers.get","manage.operationUsers.create","manage.operationUsers.update","manage.medicalUsers.list","manage.medicalUsers.get","manage.medicalUsers.create","manage.medicalUsers.update","manage.generalOperationUsers.update","manage.internalOperationUsers.update","manage.generalMedicalUsers.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.CONTROLES=this.checkAccessesControlFuncionalityContains("manage",this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.OUTROS_CONTROLES=this.checkAccessesControlFuncionality(["manage.internalAttendanceCenters.create","manage.internalAttendanceCenters.update","manage.generalAttendanceCenters.update","manage.companies.create","manage.companies.update","manage.internalCompanies.update","manage.payers.create","manage.payers.update","manage.internalPayers.create","manage.internalPayers.update","manage.callReasons.create","manage.callReasons.update","manage.callReasons.delete","manage.generalAttendanceCenter.delete","manage.internalCompanies.delete","manage.payer.delete","manage.internalPayers.delete","manage.internalCallReasons.create","manage.internalCallReasons.update","manage.internalCallReasons.delete","manage.internalAttendanceCenters.delete"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.RELATORIOS=this.checkAccessesControlFuncionality(["manage.reports.list","manage.reports.get","manage.financialReports.get"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.ATTENDANCE_CONTROLS=this.checkAccessesControlFuncionality(["availability.user.list","manage.internalProfessionalOnline.list","manage.internalProgramStatus.list","manage.professionalOnline.list","manage.programStatus.list"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.$bus.on("new-operational",e=>{this.controlTabs.push(e),this.controlList=this.getUniqueTabsList(this.controlTabs),this.persistListToLocalStorage("controlTabs",this.controlList),this.controlTabList=this.controlList.map(e=>e),this.changeTab({tab:1,list:"access"}),this.autoClickTab("access")}),this.$bus.on("new-ext-access",e=>{this.controlTabs.push(e),this.controlList=this.getUniqueTabsList(this.controlTabs),this.persistListToLocalStorage("controlTabs",this.controlList),this.controlTabList=this.controlList.map(e=>e)}),this.$bus.on("new-doc-access",e=>{this.controlTabs.push(e),this.controlList=this.getUniqueTabsList(this.controlTabs),this.persistListToLocalStorage("controlTabs",this.controlList),this.controlTabList=this.controlList.map(e=>e),this.changeTab({tab:1,list:"access"}),this.autoClickTab("access")}),this.$bus.on("confirm-close",e=>{let t=this.controlTabList.indexOf(e);this.controlTabList.splice(t,1),0!==this.controlTabList.length&&this.persistListToLocalStorage("controlTabs",this.controlTabList),this.clearTabs(),this.active_tab=0,this.all_tabs=0}),this.$bus.on("edit-operational",e=>{this.editAccessControlTabs.push(e),this.editAccessControlList=this.getUniqueTabsList(this.editAccessControlTabs),this.persistListToLocalStorage("editAccessControlList",this.editAccessControlList),this.persistEditAccessControlList=this.editAccessControlList.map(e=>e),this.changeTab({tab:1,list:"editAccess"}),this.autoClickTab("editAccess")}),this.$bus.on("new-company",e=>{this.clientTabs.push(e),this.clientList=this.getUniqueTabsList(this.clientTabs),this.persistListToLocalStorage("companyTabs",this.clientList),this.clientTabList=this.clientList.map(e=>e),this.changeTab({tab:1,list:"create"}),this.autoClickTab("company")}),this.$bus.on("edit-company",e=>{this.editCompanyTabs.push(e),this.editCompanyList=this.getUniqueTabsList(this.editCompanyTabs),this.persistListToLocalStorage("editCompany",this.editCompanyList),this.persistentEditCompanyList=this.editCompanyList.map(e=>e),this.changeTab({tab:1,list:"editCompany"}),this.autoClickTab("editCompany")}),this.$bus.on("confirm-new-company-close",e=>{let t=this.clientTabList.indexOf(e);this.clientTabList.splice(t,1),0!==this.clientTabList.length&&this.persistListToLocalStorage("companyTabs",this.clientTabList),this.clearCompanyTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("confirm-close-edit-company-tab",e=>{let t=this.persistentEditCompanyList.indexOf(e);this.persistentEditCompanyList.splice(t,1),0!==this.persistentEditCompanyList.length&&this.persistListToLocalStorage("editCompany",this.editCompanyList),this.clearEditCompanyTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("confirm-close-edit-access",e=>{let t=this.persistEditAccessControlList.indexOf(e);this.persistEditAccessControlList.splice(t,1);let a=this.editAccessControlTabs.findIndex(t=>t.id==e.id),n=this.editAccessControlList.findIndex(t=>t.id==e.id);this.editAccessControlList.splice(n,1),this.editAccessControlTabs.splice(a,1),0!==this.persistEditAccessControlList.length&&this.persistListToLocalStorage("editAccessControlList",this.persistEditAccessControlList),this.clearEditAccessTabs(),this.active_tab=0,this.active_edit_control_tab=null,this.all_tabs=0,this.reloadComponent()}),this.$bus.on("confirm-close-call-list",e=>{let t=this.persistentCallList.indexOf(e);this.persistentCallList.splice(t,1),0!==this.persistentCallList.length&&this.persistListToLocalStorage("callList",this.persistentCallList),this.clearCallTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("new-call-list",e=>{this.callTabs.push(e),this.callList=this.getUniqueTabsList(this.callTabs),this.persistListToLocalStorage("callList",this.callList),this.persistentCallList=this.callList.map(e=>e),this.changeTab({tab:1,list:"callList"}),this.autoClickTab("callList")}),this.$bus.on("edit-call-list",e=>{this.viewCallTabs.push(e),this.viewCallList=this.getUniqueTabsList(this.viewCallTabs),this.persistListToLocalStorage("viewCallList",this.viewCallList),this.persistentViewCallList=this.viewCallList.map(e=>e),this.changeTab({tab:1,list:"viewCallList"}),this.autoClickTab("viewCallList")}),this.$bus.on("confirm-close-view-call-list",e=>{this.closeViewCallListTabs(e)}),this.$bus.on("successfully-deleted-call-list",e=>{this.closeViewCallListTabs(e)}),this.$bus.on("add-new-payer",e=>{this.payerTabs.push(e),this.payerList=this.getUniqueTabsList(this.payerTabs),this.persistListToLocalStorage("newPayer",this.payerList),this.persistentPayerList=this.payerList.map(e=>e),this.changeTab({tab:1,list:"newPayer"}),this.autoClickTab("newPayer")}),this.$bus.on("confirm-close-new-payer",e=>{let t=this.persistentPayerList.indexOf(e);this.persistentPayerList.splice(t,1),0!==this.persistentPayerList.length&&this.persistListToLocalStorage("payer",this.payerList),this.clearPayerTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("edit-payer",e=>{this.editPayerTabs.push(e),this.editPayerList=this.getUniqueTabsList(this.editPayerTabs),this.persistListToLocalStorage("editPayer",this.editPayerList),this.persistentEditPayerList=this.editPayerList.map(e=>e),this.changeTab({tab:1,list:"editPayer"}),this.autoClickTab("editPayer")}),this.$bus.on("confirm-close-edit-payer",e=>{let t=this.persistentEditPayerList.indexOf(e),a=this.editPayerList.indexOf(e),n=this.editPayerTabs.indexOf(e);this.persistentEditPayerList.splice(t,1),this.editPayerList.splice(a,1),this.editPayerTabs.splice(n,1),0!==this.persistentEditPayerList.length&&this.persistListToLocalStorage("editPayer",this.editPayerList),this.clearEditPayerTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("new-reason",e=>{this.reasonTabs.push(e),this.reasonList=this.getUniqueTabsList(this.reasonTabs),this.persistListToLocalStorage("newReason",this.reasonList),this.persistentReasonList=this.reasonList.map(e=>e),this.changeTab({tab:1,list:"newReason"}),this.autoClickTab("newReason")}),this.$bus.on("confirm-close-new-reason",e=>{let t=this.persistentReasonList.indexOf(e);this.persistentReasonList.splice(t,1),0!==this.persistentReasonList.length&&this.persistListToLocalStorage("newReason",this.persistentReasonList),this.clearNewReasonTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("edit-reason-call",e=>{this.editReasonTabs.push(e),this.editReasonList=this.getUniqueTabsList(this.editReasonTabs),this.persistListToLocalStorage("editReason",this.editReasonList),this.persistentEditReasonList=this.editReasonList.map(e=>e),this.changeTab({tab:1,list:"editReason"}),this.autoClickTab("editReason")}),this.$bus.on("confirm-close-edit-reason",e=>{let t=this.persistentEditReasonList.indexOf(e),a=this.editReasonList.findIndex(t=>t.id==e.id),n=this.editReasonTabs.findIndex(t=>t.id==e.id);this.editReasonList.splice(a,1),this.editReasonTabs.splice(n,1),this.persistentEditReasonList.splice(t,1),0!==this.persistentEditReasonList.length&&this.persistListToLocalStorage("editReason",this.persistentEditReasonList),this.clearEditReasonTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("new-attendance-center",e=>{this.attendanceCenterTabs.push(e),this.attendanceCenterList=this.getUniqueTabsList(this.attendanceCenterTabs),this.persistListToLocalStorage("newAttendanceCenter",this.attendanceCenterList),this.persistentAttendanceCenterList=this.attendanceCenterList.map(e=>e),this.changeTab({tab:1,list:"newAttendanceCenter"}),this.autoClickTab("newAttendanceCenter")}),this.$bus.on("confirm-close-new-attendance-center",e=>{let t=this.persistentAttendanceCenterList.indexOf(e);this.persistentAttendanceCenterList.splice(t,1),0!==this.persistentAttendanceCenterList.length&&this.persistListToLocalStorage("newAttendanceCenter",this.persistentAttendanceCenterList),this.clearNewAttendanceCenterTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("edit-attendance-center",e=>{e.title=e.name,this.editAttendanceCenterTabs.push(e),this.editAttendanceCenterList=this.getUniqueTabsList(this.editAttendanceCenterTabs),this.persistListToLocalStorage("editAttendanceCenter",this.editAttendanceCenterList),this.persistentEditAttendanceCenterList=this.editAttendanceCenterList.map(e=>e),this.changeTab({tab:1,list:"editAttendanceCenter"}),this.autoClickTab("editAttendanceCenter")}),this.$bus.on("confirm-close-edit-attendance-center",e=>{let t=this.persistentEditAttendanceCenterList.indexOf(e),a=this.editAttendanceCenterList.findIndex(t=>t.id==e.id),n=this.editAttendanceCenterTabs.findIndex(t=>t.id==e.id);this.editAttendanceCenterList.splice(a,1),this.editAttendanceCenterTabs.splice(n,1),this.persistentEditAttendanceCenterList.splice(t,1),0!==this.persistentEditAttendanceCenterList.length&&this.persistListToLocalStorage("editAttendanceCenter",this.persistentEditAttendanceCenterList),this.clearEditAttendanceCenterTabs(),this.active_tab=1,this.all_tabs=0}),this.$bus.on("new-schedule-external-agent",e=>{this.scheduleExternalAgentTabs.push(e),this.scheduleExternalAgentList=this.getUniqueTabsList(this.scheduleExternalAgentTabs),this.persistListToLocalStorage("newScheduleExternalAgent",this.scheduleExternalAgentList),this.persistentScheduleExternalAgentList=this.scheduleExternalAgentList.map(e=>e),this.changeTab({tab:1,list:"newScheduleExternalAgent"}),this.autoClickTab("newScheduleExternalAgent")}),this.$bus.on("confirm-close-new-schedule-external-agent",e=>{let t=this.persistentScheduleExternalAgentList.indexOf(e);this.persistentScheduleExternalAgentList.splice(t,1),0!==this.persistentScheduleExternalAgentList.length&&this.persistListToLocalStorage("newScheduleExternalAgent",this.persistentScheduleExternalAgentList),this.clearNewScheduleExternalAgentTabs(),this.active_tab=0,this.all_tabs=0}),this.$bus.on("edit-schedule-external-agent",e=>{e.title=e.name,this.editScheduleExternalAgentTabs.push(e),this.editScheduleExternalAgentList=this.getUniqueTabsList(this.editScheduleExternalAgentTabs),this.persistListToLocalStorage("editScheduleExternalAgent",this.editScheduleExternalAgentList),this.persistentEditScheduleExternalAgentList=this.editScheduleExternalAgentList.map(e=>e),this.changeTab({tab:1,list:"editScheduleExternalAgent"}),this.autoClickTab("editScheduleExternalAgent")}),this.$bus.on("confirm-close-edit-schedule-external-agent",e=>{let t=this.persistentEditScheduleExternalAgentList.indexOf(e),a=this.editScheduleExternalAgentList.findIndex(t=>t.id==e.id),n=this.editScheduleExternalAgentTabs.findIndex(t=>t.id==e.id);this.editScheduleExternalAgentList.splice(a,1),this.editScheduleExternalAgentTabs.splice(n,1),this.persistentEditScheduleExternalAgentList.splice(t,1),0!==this.persistentEditScheduleExternalAgentList.length&&this.persistListToLocalStorage("editScheduleExternalAgent",this.persistentEditScheduleExternalAgentList),this.clearEditScheduleExternalAgentTabs(),this.active_tab=0,this.all_tabs=0}),this.controlTabList=JSON.parse(localStorage.getItem("controlTabs")),this.persistEditAccessControlList=JSON.parse(localStorage.getItem("editAccessControlList")),this.clientTabList=JSON.parse(localStorage.getItem("companyTabs")),this.persistentEditCompanyList=JSON.parse(localStorage.getItem("editCompany")),this.persistentCallList=JSON.parse(localStorage.getItem("callList")),this.persistentViewCallList=JSON.parse(localStorage.getItem("viewCallList")),this.persistentPayerList=JSON.parse(localStorage.getItem("newPayer")),this.persistentEditPayerList=JSON.parse(localStorage.getItem("editPayer")),this.persistentReasonList=JSON.parse(localStorage.getItem("newReason")),this.persistentEditReasonList=JSON.parse(localStorage.getItem("editReason")),this.persistentAttendanceCenterList=JSON.parse(localStorage.getItem("newAttendanceCenter")),this.persistentEditAttendanceCenterList=JSON.parse(localStorage.getItem("editAttendanceCenter")),this.persistentScheduleExternalAgentList=JSON.parse(localStorage.getItem("newScheduleExternalAgent")),this.persistentEditScheduleExternalAgentList=JSON.parse(localStorage.getItem("editScheduleExternalAgent"))},beforeDestroy(){this.$bus.off("new-operational"),this.$bus.off("new-ext-access"),this.$bus.off("new-doc-access"),this.$bus.off("confirm-close"),this.$bus.off("edit-operational"),this.$bus.off("new-company"),this.$bus.off("edit-company"),this.$bus.off("confirm-new-company-close"),this.$bus.off("confirm-close-edit-company-tab"),this.$bus.off("confirm-close-edit-access"),this.$bus.off("confirm-close-call-list"),this.$bus.off("new-call-list"),this.$bus.off("edit-call-list"),this.$bus.off("confirm-close-view-call-list"),this.$bus.off("successfully-deleted-call-list"),this.$bus.off("add-new-payer"),this.$bus.off("confirm-close-new-payer"),this.$bus.off("edit-payer"),this.$bus.off("confirm-close-edit-payer"),this.$bus.off("new-reason"),this.$bus.off("confirm-close-new-reason"),this.$bus.off("edit-reason-call"),this.$bus.off("confirm-close-edit-reason"),this.$bus.off("new-attendance-center"),this.$bus.off("confirm-close-new-attendance-center"),this.$bus.off("edit-attendance-center"),this.$bus.off("confirm-close-edit-attendance-center"),this.$bus.off("new-schedule-external-agent"),this.$bus.off("confirm-close-new-schedule-external-agent"),this.$bus.off("edit-schedule-external-agent"),this.$bus.off("confirm-close-edit-schedule-external-agent")},methods:{getUniqueTabsList(e){return e.filter((t,a)=>e.indexOf(t)>=a)},persistListToLocalStorage(e,t){localStorage.setItem(e,JSON.stringify(t))},changeTab(e){"main"==e.list?this.active_tab=0:this.active_tab=null,"access"==e.list?this.active_sub_tab=e.tab-1:this.active_sub_tab=null,"create"==e.list?this.active_client_tab=e.tab-1:this.active_client_tab=null,"doctor"==e.list?this.active_new_doc_access_tab=e.tab-1:this.active_new_doc_access_tab=null,"editCompany"==e.list?this.active_edit_company_tab=e.tab-1:this.active_edit_company_tab=null,"editAccess"==e.list?this.active_edit_control_tab=e.tab-1:this.active_edit_control_tab=null,"callList"==e.list?this.active_call_list_tab=e.tab-1:this.active_call_list_tab=null,"viewCallList"==e.list?this.active_view_call_list_tab=e.tab-1:this.active_view_call_list_tab=null,"newPayer"==e.list?this.active_payer_tab=e.tab-1:this.active_payer_tab=null,"editPayer"==e.list?this.active_edit_payer_tab=e.tab-1:this.active_edit_payer_tab=null,"newReason"==e.list?this.active_new_reason_tab=e.tab-1:this.active_new_reason_tab=null,"editReason"==e.list?this.active_edit_reason_tab=e.tab-1:this.active_edit_reason_tab=null,"newAttendanceCenter"==e.list?this.active_new_attendance_center_tab=e.tab-1:this.active_new_attendance_center_tab=null,"editAttendanceCenter"==e.list?this.active_edit_attendance_center_tab=e.tab-1:this.active_edit_attendance_center_tab=null,"newScheduleExternalAgent"==e.list?this.active_new_schedule_external_agent_tab=e.tab-1:this.active_new_schedule_external_agent_tab=null,"editScheduleExternalAgent"==e.list?this.active_edit_schedule_external_agent_tab=e.tab-1:this.active_edit_schedule_external_agent_tab=null},closeTab(e){let t={dialog:!0,item:e};this.$bus.emit("close-control-tab",t)},closeViewCallListTabs(e){let t=this.persistentViewCallList.indexOf(e),a=this.viewCallTabs.indexOf(e);this.viewCallTabs.splice(a,1),this.persistentViewCallList.splice(t,1),0!==this.persistentViewCallList.length&&this.persistListToLocalStorage("viewCallList",this.persistentViewCallList),this.clearViewCallTabs(),this.active_tab=1,this.all_tabs=0},closeNewCompanyTab(e){this.closeTabsHelper(e,"newCompany","close-new-company-tab")},closeEditCompanyTab(e){this.closeTabsHelper(e,"editCompany","close-edit-company-tab")},closeEditAccessControlTab(e){this.closeTabsHelper(e,"editAccess","close-edit-access-tab")},closeCallList(e){this.closeTabsHelper(e,"callList","close-call-list-tab")},closeViewCallList(e){this.closeTabsHelper(e,"viewCallList","close-view-call-list")},closeNewPayer(e){this.closeTabsHelper(e,"newPayer","close-new-payer-tab")},closeEditPayer(e){this.closeTabsHelper(e,"editPayer","close-edit-payer-tab")},closeNewReason(e){this.closeTabsHelper(e,"newReason","close-new-reason-tab")},closeEditReason(e){this.closeTabsHelper(e,"editReason","close-edit-reason-tab")},closeNewAttendanceCenter(e){this.closeTabsHelper(e,"newAttendanceCenter","close-new-attendance-center-tab")},closeEditAttendanceCenter(e){this.closeTabsHelper(e,"editAttendanceCenter","close-edit-attendance-center-tab")},closeNewScheduleExternalAgent(e){this.closeTabsHelper(e,"newScheduleExternalAgent","close-new-schedule-external-agent-tab")},closeEditScheduleExternalAgent(e){this.closeTabsHelper(e,"editScheduleExternalAgent","close-edit-schedule-external-agent-tab")},clearTabs(){0==this.controlTabList.length&&(localStorage.removeItem("controlTabs"),this.controlList=[],this.controlTabs=[])},clearCompanyTabs(){0==this.clientTabList.length&&(localStorage.removeItem("companyTabs"),this.clientList=[],this.clientTabs=[])},clearEditCompanyTabs(){0==this.persistentEditCompanyList.length&&(localStorage.removeItem("editCompany"),this.editCompanyList=[],this.editCompanyTabs=[])},clearEditAccessTabs(){0==this.persistEditAccessControlList.length&&(localStorage.removeItem("editAccessControlList"),this.editAccessControlList=[],this.editAccessControlTabs=[])},clearCallTabs(){0==this.persistentCallList.length&&(localStorage.removeItem("callList"),this.callList=[],this.callTabs=[])},clearViewCallTabs(){0==this.persistentViewCallList.length&&(localStorage.removeItem("viewCallList"),this.viewCallList=[],this.viewCallTabs=[])},clearPayerTabs(){0==this.persistentPayerList.length&&(localStorage.removeItem("newPayer"),this.payerList=[],this.payerTabs=[])},clearEditPayerTabs(){0==this.persistentEditPayerList.length&&(localStorage.removeItem("editPayer"),this.editPayerList=[],this.editPayerTabs=[])},clearNewReasonTabs(){0==this.persistentReasonList.length&&(localStorage.removeItem("newReason"),this.reasonList=[],this.reasonTabs=[])},clearEditReasonTabs(){0==this.persistentEditReasonList.length&&(localStorage.removeItem("editReason"),this.editReasonList=[],this.editReasonTabs=[])},clearNewAttendanceCenterTabs(){0==this.persistentAttendanceCenterList.length&&(localStorage.removeItem("newAttendanceCenter"),this.attendanceCenterList=[],this.attendanceCenterTabs=[])},clearEditAttendanceCenterTabs(){0==this.persistentEditAttendanceCenterList.length&&(localStorage.removeItem("editAttendanceCenter"),this.editAttendanceCenterList=[],this.editAttendanceCenterTabs=[])},clearNewScheduleExternalAgentTabs(){0==this.persistentScheduleExternalAgentList.length&&(localStorage.removeItem("newScheduleExternalAgent"),this.scheduleExternalAgentList=[],this.scheduleExternalAgentTabs=[])},clearEditScheduleExternalAgentTabs(){0==this.persistentEditScheduleExternalAgentList.length&&(localStorage.removeItem("editScheduleExternalAgent"),this.editScheduleExternalAgentList=[],this.editScheduleExternalAgentTabs=[])},autoClickTab(e){setTimeout(()=>{document.getElementById(e).click()},500)},reloadComponent(){this.$bus.emit("reload-component")},getTabsCount(e){let t=1;return e&&e.length>0&&(t=e.length),t}},computed:{canAccess(){return this.checkAccessesControlFuncionality(["payment.billing.list","payment.billingSelfChildren.list"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)}}},Bv=Fv,wv=(a("1bcf"),Object(I["a"])(Bv,kT,vT,!1,null,"1a7141ae",null)),Hv=wv.exports,qv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"coupons-page"},[t("snackbar"),t(ot["a"],{staticClass:"border",model:{value:e.currentMainTab,callback:function(t){e.currentMainTab=t},expression:"currentMainTab"}},[t(it["a"],{key:"coupons"},[t("span",{staticClass:"c-tab"},[e._v(e._s(e.$t("coupons.coupons")))])]),e._l(e.mainTabs,(function(a){return t(it["a"],{key:a.name},[t("span",{staticClass:"c-tab"},[e._v(e._s(a.text))]),t("button",{staticClass:"ml-2 c-tab",on:{click:function(t){return e.closeMainTab(a.name)}}},[e._v("x")])])})),t(rt["a"],{staticClass:"mt-4",model:{value:e.currentMainTab,callback:function(t){e.currentMainTab=t},expression:"currentMainTab"}},[t(st["a"],[t(ot["a"],{model:{value:e.currentSecondaryTab,callback:function(t){e.currentSecondaryTab=t},expression:"currentSecondaryTab"}},[e._l(e.secondaryTabs,(function(a){return t(it["a"],{key:a.name},[t("span",{staticClass:"c-tab"},[t(at["a"],[e._v("\n                "+e._s(a.icon)+"\n              ")]),e._v("\n              "+e._s(a.text)+"\n            ")],1)])})),t(rt["a"],{model:{value:e.currentSecondaryTab,callback:function(t){e.currentSecondaryTab=t},expression:"currentSecondaryTab"}},[t(st["a"],{staticClass:"mt-6"},[t("CreateCampaign")],1),t(st["a"],{staticClass:"mt-6"},[e.editOrView?e._e():t("CampaignsControl"),e.editOrView?t("EditCampaign",{attrs:{inViewMode:"view"==e.editOrView,cuponBaseInfo:e.cuponBaseInfo}}):e._e()],1),t(st["a"],{staticClass:"mt-6"},[t("CreateGiftCards")],1),t(st["a"],{staticClass:"mt-6"},[t("GiftCardsControl")],1)],1)],2)],1),e._l(e.mainTabs,(function(a,n){return e.getMainTabIndex(a.name)?t(st["a"],{key:`${a.name}_${n}`,class:a.name},[e._v("\n        "+e._s(a.text)+"\n      ")]):e._e()}))],2)],2)],1)},Yv=[],jv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"create-campaign"},[t("CampaignInfoForm",{on:{handleSave:e.prepareSaveData,handleError:e.cancelSave}}),t("ServiceTypesForm",{on:{handleSave:e.prepareSaveData,handleError:e.cancelSave}}),t("CouponUsageForm",{on:{handleSave:e.prepareSaveData,handleError:e.cancelSave}}),t("DefinedCpfListUpload",{on:{handleSave:e.prepareSaveData}}),t("div",{staticClass:"save-container d-flex align-center mb-10"},[t(Rs["a"]),t(r["a"],{attrs:{loading:e.loading,color:"primary",height:"50",width:"482"},on:{click:e.handleSave}},[t(at["a"],{staticClass:"mr-2"},[e._v("\n        mdi-content-save\n      ")]),t("span",{staticClass:"save-text"},[e._v("\n        "+e._s(e.$t("general.save"))+"\n      ")])],1),t(Rs["a"])],1)],1)},Kv=[],Zv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"campaign-info"},[t(re["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"mt-8 mb-4"},[t(at["a"],{attrs:{color:"blue"}},[e._v("\n            mdi-file-edit-outline\n          ")]),t("span",{staticClass:"font-weight-bold davygrey--text"},[e._v("\n            "+e._s(e.$t("coupons.title_create_coupon"))+"\n          ")])],1)])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(de["a"],{attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.campaign.campaign_name"),loading:e.loadingValidateName,"error-messages":e.campaignNameErros,height:"50",required:"",outlined:""},on:{blur:function(t){return e.$v.form.campaign_name.$touch()},change:function(t){return e.validateCampaignNameOrCode(e.typeError.NAME)}},model:{value:e.form.campaign_name,callback:function(t){e.$set(e.form,"campaign_name",t)},expression:"form.campaign_name"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.campaign.description_name"),"error-messages":e.descriptionNameErros,placeholder:"Campanha geral de descontos para clientes diversos",color:"black",height:"161",required:"",outlined:""},on:{blur:function(t){return e.$v.form.description_name.$touch()}},model:{value:e.form.description_name,callback:function(t){e.$set(e.form,"description_name",t)},expression:"form.description_name"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.campaign.coupon_code"),loading:e.loadingValidateCode,"error-messages":e.couponCodeErros,height:"50",required:"",outlined:""},on:{blur:function(t){return e.$v.form.coupon_code.$touch()},change:function(t){return e.validateCampaignNameOrCode(e.typeError.CODE)}},model:{value:e.form.coupon_code,callback:function(t){e.$set(e.form,"coupon_code",t)},expression:"form.coupon_code"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{disabled:!!e.form.unlimited_amount||e.inViewMode||!!e.voucherInformation&&e.voucherInformation.unlimited_coupons,label:e.$t("coupons.campaign.amount_coupon"),"error-messages":e.amountCouponErros,min:e.minimunCupon,height:"50",required:"",outlined:"",type:"number"},on:{blur:e.validateAmountCoupon},model:{value:e.form.amount_coupon,callback:function(t){e.$set(e.form,"amount_coupon",t)},expression:"form.amount_coupon"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(St["a"],{staticClass:"ma-0 pa-0",attrs:{label:e.$t("coupons.campaign.unlimited_amount"),disabled:e.inViewMode||e.voucherInformation&&e.voucherInformation.unlimited_amount,"error-messages":e.unlimitedAmountErros,height:"50",required:""},on:{blur:e.validateUnlimitedAmount},model:{value:e.form.unlimited_amount,callback:function(t){e.$set(e.form,"unlimited_amount",t)},expression:"form.unlimited_amount"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{staticClass:"filter-field select mb-2",attrs:{disabled:e.inViewMode||!!e.voucherInformation,"error-messages":e.typeDiscountErros,items:e.listTypeDiscount,label:e.$t("coupons.campaign.type_discount"),loading:e.loadingTypeDiscount,height:"50","item-value":"id",outlined:""},on:{blur:function(t){return e.$v.form.type_discount.$touch()},change:e.clearDiscountValues},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n            "+e._s(e.$t("coupons.discount_types."+t.item.type))+"\n          ")]}},{key:"item",fn:function(t){return[e._v("\n            "+e._s(e.$t("coupons.discount_types."+t.item.type))+"\n          ")]}}]),model:{value:e.form.type_discount,callback:function(t){e.$set(e.form,"type_discount",t)},expression:"form.type_discount"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.campaign.discount_amount"),height:"50","hide-spin-buttons":"",outlined:"",type:"number"},on:{blur:e.formatMoney},model:{value:e.form.discount_amount,callback:function(t){e.$set(e.form,"discount_amount",t)},expression:"form.discount_amount"}},[t("template",{slot:"prepend-inner"},[1!=e.form.type_discount?t("div",[e._v(e._s(e.$t("general.money.real")))]):t("div",[e._v(e._s(e.$t("general.percentage")))])])],2)],1),1==e.form.type_discount?t(oe["a"],{attrs:{cols:"12",md:"5"}},[t(de["a"],{class:{customCheckbox:!!e.form.unlimited_maximum_discount_amount},attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.campaign.maximum_discount_amount"),height:"50","hide-spin-buttons":"",required:"",outlined:"",type:"number"},on:{blur:e.formatMoney},model:{value:e.form.maximum_discount_amount,callback:function(t){e.$set(e.form,"maximum_discount_amount",t)},expression:"form.maximum_discount_amount"}},[t("template",{slot:"prepend-inner"},[t("div",[e._v(e._s(e.$t("general.money.real")))])]),t("template",{slot:"append"},[t(St["a"],{staticClass:"unlimited_maximum_discount_amount ma-0 pa-0 rsr-name-box",attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.campaign.unlimited"),"hide-details":""},model:{value:e.form.unlimited_maximum_discount_amount,callback:function(t){e.$set(e.form,"unlimited_maximum_discount_amount",t)},expression:"form.unlimited_maximum_discount_amount"}})],1)],2)],1):e._e()],1)],1),t("DuplicatedCampaignNameOrCodeErrorModal")],1)},Qv=[],Jv=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("general.error")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e.body?t("p",{staticClass:"davygrey--text px-10 mt-10 mb-0"},[e._v("\n        "+e._s(e.body)+"\n      ")]):e._e(),t("div",{staticClass:"d-flex align-center justify-space-between pa-10"},[t(r["a"],{staticClass:"btn btn-cyan",attrs:{color:"davygrey",width:"100%",outlined:""},on:{click:e.close}},[e._v("\n          "+e._s(e.$t("general.ok"))+"\n        ")])],1)],1)],1)],1)},Wv=[],Xv={data(){return{dialog:!1,body:""}},created(){this.$bus.on("open-navigation-confirmation-modal",e=>{this.body=e||"",this.dialog=!0})},beforeDestroy(){this.$bus.off("open-navigation-confirmation-modal")},methods:{close(){this.dialog=!1},handleConfirm(){this.$emit("onConfirm"),this.close()}}},zv=Xv,eb=(a("c781"),Object(I["a"])(zv,Jv,Wv,!1,null,"3a78e61b",null)),tb=eb.exports,ab={voucherExistenceCheck(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.VOUCHER_EXISTENCE_CHECK,i=new URLSearchParams(e);n=`${n}?${new URLSearchParams(i).toString()}`,C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.name||e.response.data.code))})},getVoucherDiscountType(){return new Promise((e,t)=>{let a=R.ENDPOINTS.VOUCHERS.VOUCHER_DISCOUNT_TYPE_GET;C.a.get(a,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getProgramaDetailsServiceType(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_PROGRAM_DETAILS,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),a(e.response.data.error||e.response.data.error.code)})})},getProgramaSubscriptionModel(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.GET_PROGRAM_SUBSCRIPTION_MODEL;n=`${n}?${new URLSearchParams(e).toString()}`,C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),a(e.response.data.error||e.response.data.error.code)})})},voucherCreate(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.VOUCHER_CREATE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),a(e.response.data.error||e.response.data.error.code)})})},voucherUpdate(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.VOUCHER_UPDATE;C.a.put(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),a(e.response.data.error||e.response.data.error.code)})})}},nb={name:"CampaignInfoForm",components:{DuplicatedCampaignNameOrCodeErrorModal:tb},props:["handleSave","handleError","inViewMode","voucherInformation"],data(){return{loadingValidateName:!1,loadingValidateCode:!1,loadingTypeDiscount:!1,minimunCupon:0,typeError:{NAME:"name",CODE:"code"},form:{campaign_name:null,description_name:null,coupon_code:null,amount_coupon:0,discount_amount:null,unlimited_amount:!1,type_discount:null,maximum_discount_amount:null,unlimited_maximum_discount_amount:!1},listTypeDiscount:[]}},created(){this.getTypeDiscountList(),this.$bus.on("coupons-save-new-campaign",()=>{this.saveData()}),this.$bus.on("coupons-edit-campaign",()=>{this.editData()}),this.voucherInformation&&(this.form.campaign_name=this.voucherInformation.name,this.form.description_name=this.voucherInformation.description,this.form.coupon_code=this.voucherInformation.code,this.form.discount_amount=this.voucherInformation.discount_value,this.form.amount_coupon=this.voucherInformation.quantity,this.minimunCupon=this.voucherInformation.quantity?parseInt(this.voucherInformation.quantity):0,this.form.unlimited_amount=this.voucherInformation.unlimited_coupons,this.form.maximum_discount_amount=this.voucherInformation.maximum_value_limit,this.form.unlimited_maximum_discount_amount=this.voucherInformation.unlimited_max_value)},beforeDestroy(){this.$bus.off("coupons-save-new-campaign"),this.$bus.off("coupons-edit-campaign")},methods:{validateCampaignNameOrCode(e){if(this.typeError.NAME===e&&!this.form.campaign_name||this.typeError.CODE===e&&!this.form.coupon_code)return;let t={};this.typeError.NAME===e?(this.loadingValidateName=!0,t.name=this.form.campaign_name):(this.loadingValidateCode=!0,t.code=this.form.coupon_code),ab.voucherExistenceCheck(t).then(t=>{this.typeError.NAME===e?this.$v.form.campaign_name.$touch():this.$v.form.coupon_code.$touch()}).catch(t=>{console.error(t);let a=this.typeError.NAME===e?"error_name":"error_code";this.$bus.emit("open-navigation-confirmation-modal",this.$t("coupons.campaign."+a))}).finally(()=>{this.loadingValidateName=!1,this.loadingValidateCode=!1})},validateAmountCoupon(){this.form.amount_coupon=+(""+this.form.amount_coupon).replace("e",""),this.form.amount_coupon=0|this.form.amount_coupon,this.$v.form.amount_coupon.$touch(),this.form.amount_coupon>0&&(this.form.unlimited_amount=!1),this.$v.form.unlimited_amount.$touch()},validateUnlimitedAmount(){this.$v.form.unlimited_amount.$touch(),this.$v.form.amount_coupon.$touch()},clearDiscountValues(){this.form.discount_amount=null,this.form.maximum_discount_amount=null},formatMoney(){this.form.discount_amount=+(""+this.form.discount_amount).replace("e",""),this.form.discount_amount=0|this.form.discount_amount,this.form.maximum_discount_amount=+(""+this.form.maximum_discount_amount).replace("e",""),this.form.maximum_discount_amount=0|this.form.maximum_discount_amount,1!==this.form.type_discount&&this.form.discount_amount&&(this.form.discount_amount=parseFloat(this.form.discount_amount).toFixed(2)),this.form.maximum_discount_amount&&(this.form.maximum_discount_amount=parseFloat(this.form.maximum_discount_amount).toFixed(2))},saveData(){if(this.$v.$touch(),this.$v.$invalid)return this.$emit("handleError");let e={name:this.$consts.CREATE_CAMPAIGN_FORMS.CAMPAIGN_INFO,data:{name:this.form.campaign_name,code:this.form.coupon_code,description:this.form.description_name,discount_value:this.form.discount_amount,discount_type_id:this.form.type_discount,quantity:this.form.amount_coupon,unlimited_cupons:this.form.unlimited_amount,maximum_value_limit:this.form.maximum_discount_amount,unlimited_max_value:this.form.unlimited_maximum_discount_amount}};this.$emit("handleSave",e)},editData(){if(this.form.unlimited_amount)return;if(this.$bus.emit("show-error-message",{display:!1,message:"voucher_quantity_cant_be_lower_than_actual"}),void 0!==this.voucherInformation&&void 0!==this.voucherInformation.quantity&&this.form.amount_coupon<this.voucherInformation.quantity)return this.$bus.emit("show-error-message",{display:!0,message:"voucher_quantity_cant_be_lower_than_actual"}),void(this.form.amount_coupon=this.voucherInformation.quantity);let e={name:"campaign-info",data:{quantity:parseInt(this.form.amount_coupon)}};this.$emit("handleSave",e)},getTypeDiscountList(){this.loadingTypeDiscount=!0,ab.getVoucherDiscountType().then(e=>{this.listTypeDiscount=e.data.discounts,this.listTypeDiscount.length&&(this.form.type_discount=this.listTypeDiscount[0].id),this.voucherInformation&&(this.form.type_discount=this.voucherInformation.discount_type_id,this.formatMoney)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingTypeDiscount=!1})}},computed:{campaignNameErros(){const e=[];return this.$v.form.campaign_name.$dirty?(!this.$v.form.campaign_name.required&&e.push(this.$t("general.required")),e):e},descriptionNameErros(){const e=[];return this.$v.form.description_name.$dirty?(!this.$v.form.description_name.required&&e.push(this.$t("general.required")),e):e},couponCodeErros(){const e=[];return this.$v.form.coupon_code.$dirty?(!this.$v.form.coupon_code.required&&e.push(this.$t("general.required")),e):e},amountCouponErros(){const e=[];return this.$v.form.amount_coupon.$dirty?(!this.$v.form.amount_coupon.required&&e.push(this.$t("general.required")),e):e},unlimitedAmountErros(){const e=[];return this.$v.form.unlimited_amount.$dirty?(!this.$v.form.unlimited_amount.required&&e.push(this.$t("general.required")),e):e},typeDiscountErros(){const e=[];return this.$v.form.type_discount.$dirty?(!this.$v.form.type_discount.required&&e.push(this.$t("general.required")),e):e}},validations:{form:{campaign_name:{required:Ae["required"]},description_name:{required:Ae["required"]},coupon_code:{required:Ae["required"]},amount_coupon:{required:Object(Ae["requiredIf"])((function(){return!!this.form.unlimited_amount})),minLength:Object(Ae["minLength"])(0)},unlimited_amount:{required:Object(Ae["requiredIf"])((function(){return!!this.form.amount_coupon}))},discount_amount:{required:Ae["required"]},type_discount:{required:Ae["required"]},maximum_discount_amount:{required:Ae["required"]}}}},ib=nb,sb=(a("ca3b"),Object(I["a"])(ib,Zv,Qv,!1,null,"d21a0a24",null)),ob=sb.exports,rb=function(){var e=this,t=e._self._c;return t("div",{staticClass:"service-types"},[t(re["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"mt-4 mb-4"},[t(at["a"],{attrs:{color:"blue"}},[e._v("\n            mdi-laptop\n          ")]),t("span",{staticClass:"font-weight-bold davygrey--text"},[e._v("\n            "+e._s(e.$t("coupons.types_of_service.title"))+"\n          ")])],1)])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(St["a"],{staticClass:"font-weight-bold ma-0",attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.types_of_service.select_all_consultations"),"hide-details":""},model:{value:e.allProgramsSelected,callback:function(t){e.allProgramsSelected=t},expression:"allProgramsSelected"}})],1)],1),t(ce["a"],e._l(e.programs,(function(a,n){return t(oe["a"],{key:n,attrs:{cols:"12",md:"3"}},[t(St["a"],{staticClass:"button-checkbox px-2 mt-4",attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:a.description,value:a.id,height:"50","hide-details":""},model:{value:e.selectedPrograms,callback:function(t){e.selectedPrograms=t},expression:"selectedPrograms"}})],1)})),1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(St["a"],{staticClass:"font-weight-bold mt-6",attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.types_of_service.select_all_subscriptions")},model:{value:e.allSubscriptionsSelected,callback:function(t){e.allSubscriptionsSelected=t},expression:"allSubscriptionsSelected"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.campaign.type_discount"),suffix:e.$t("coupons.types_of_service.renewals_of_subscription"),"error-messages":e.numberOfSubscriptionsErrors,height:"50",required:"",outlined:""},on:{blur:function(t){return e.$v.discountRecurrence.$touch()}},model:{value:e.discountRecurrence,callback:function(t){e.discountRecurrence=t},expression:"discountRecurrence"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"mt-2 pa-0",attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.types_of_service.on_every_subscription_renewal"),"hide-details":""},model:{value:e.everySubscriptionRenew,callback:function(t){e.everySubscriptionRenew=t},expression:"everySubscriptionRenew"}})],1)],1),t(ce["a"],e._l(e.subscriptions,(function(a,n){return t(oe["a"],{key:n,attrs:{disabled:e.inViewMode||!!e.voucherInformation,cols:"12",md:"3"}},[t(St["a"],{staticClass:"button-checkbox px-2 mt-0 mb-4",attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:a.description,value:a.id,height:"50","hide-details":""},model:{value:e.selectedSubscriptions,callback:function(t){e.selectedSubscriptions=t},expression:"selectedSubscriptions"}})],1)})),1)],1),t("EmptyDiscountRecurrenceWarningModal")],1)},lb=[],cb=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("coupons.general.error")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("p",{staticClass:"davygrey--text px-10 mt-10 mb-0"},[e._v("\n        "+e._s(e.$t("coupons.types_of_service.modal_description"))+"\n      ")]),t("div",{staticClass:"d-flex align-center justify-space-between pa-10"},[t(r["a"],{staticClass:"btn btn-cyan",attrs:{color:"davygrey",width:"100%",outlined:""},on:{click:e.close}},[e._v("\n          "+e._s(e.$t("general.ok"))+"\n        ")])],1)],1)],1)],1)},db=[],mb={name:"EmptyDiscountRecurrenceWarningModal",data(){return{dialog:!1}},created(){this.$bus.on("open-discount-recurrence-warning-modal",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-discount-recurrence-warning-modal")},methods:{close(){this.$bus.emit("confirm-discount-recurrence"),this.dialog=!1},handleConfirm(){this.close()}}},ub=mb,Ab=(a("b795"),Object(I["a"])(ub,cb,db,!1,null,"6bab22fa",null)),_b=Ab.exports,Eb={name:"ServiceTypesForm",components:{EmptyDiscountRecurrenceWarningModal:_b},props:["handleSave","handleError","inViewMode","voucherInformation"],data(){return{allProgramsSelected:!1,allSubscriptionsSelected:!1,allSubscriptionsDefaultSelected:!1,everySubscriptionRenew:!1,selectedPrograms:[],selectedSubscriptions:[],selectedDiscountRecurrence:null,programs:[],subscriptions:[],discountRecurrence:1,company_id:null,group_id:null}},created(){this.geProgramDetails(),this.getSubscriptionModel(),this.$bus.on("coupons-save-new-campaign",()=>{this.saveData()}),this.$bus.on("coupons-edit-campaign",()=>{this.editData()}),this.$bus.on("confirm-discount-recurrence",()=>{this.confirmDiscountRecurrence()}),this.voucherInformation&&(this.discountRecurrence=this.voucherInformation.recorrence,this.everySubscriptionRenew=this.voucherInformation.unlimited_recorrence)},beforeDestroy(){this.$bus.off("coupons-save-new-campaign"),this.$bus.off("coupons-edit-campaign")},methods:{saveData(){if(this.isToOpenModal())this.$bus.emit("open-discount-recurrence-warning-modal");else{if(this.$v.$touch(),this.$v.$invalid)return this.$emit("handleError");let e={name:this.$consts.CREATE_CAMPAIGN_FORMS.SERVICE_TYPES,data:{program_ids:this.selectedPrograms,recorrence:this.discountRecurrence,unlimited_recorrence:this.everySubscriptionRenew,subscription_model_ids:this.selectedSubscriptions}};this.$emit("handleSave",e)}},editData(){},markAllProgramsAsSelected(){this.selectedPrograms=this.programs.map(e=>e.id)},markAllSubscriptionsAsSelected(){this.selectedSubscriptions=this.subscriptions.map(e=>e.id)},markOffAllPrograms(){this.selectedPrograms=[]},markOffAllSubscriptions(){this.selectedSubscriptions=[]},checkAllProgramsAreSelected(){this.allProgramsSelected=this.allProgramAreSelected()},checkAllSubscriptionsAreSelected(){this.allSubscriptionsSelected=this.allSubscriptionsAreSelected()},allProgramAreSelected(){return this.programs.length===this.selectedPrograms.length},allSubscriptionsAreSelected(){return this.subscriptions.length===this.selectedSubscriptions.length},isToOpenModal(){return 0===this.selectedSubscriptions.length&&!1===this.everySubscriptionRenew},confirmDiscountRecurrence(){this.everySubscriptionRenew=!0},geProgramDetails(){this.loading=!0;let e={company_id:4,group_id:4};ab.getProgramaDetailsServiceType(e).then(e=>{this.programs=e.data.program_info.map(e=>({id:e.program_id,description:e.translate})),this.voucherInformation&&(this.selectedPrograms=this.voucherInformation.program_ids)}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getSubscriptionModel(){this.loading=!0;let e={company_id:4,group_id:4};ab.getProgramaSubscriptionModel(e).then(e=>{this.subscriptions=e.data.subscriptions.map(e=>({id:e.id,description:e.short_description})),this.voucherInformation&&(this.selectedSubscriptions=this.voucherInformation.subscription_model_ids)}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})}},watch:{allProgramsSelected(e,t){e&&this.markAllProgramsAsSelected(),!e&&t&&this.allProgramAreSelected()&&this.markOffAllPrograms()},selectedPrograms(e){this.checkAllProgramsAreSelected(e)},allSubscriptionsSelected(e,t){e&&this.markAllSubscriptionsAsSelected(),!e&&t&&this.allSubscriptionsAreSelected()&&this.markOffAllSubscriptions()},selectedSubscriptions(e){this.checkAllSubscriptionsAreSelected(e)}},computed:{numberOfSubscriptionsErrors(){const e=[];return this.$v.discountRecurrence.$dirty?(!this.$v.discountRecurrence.between&&e.push(this.$t("coupons.general.between_1_100")),e):e}},validations:{discountRecurrence:{between:Object(Ae["between"])(1,100)}}},Ib=Eb,hb=(a("f472"),Object(I["a"])(Ib,rb,lb,!1,null,"4e33f8c9",null)),Ob=hb.exports,pb=function(){var e=this,t=e._self._c;return t(re["a"],{staticClass:"coupon-usage"},[t(ce["a"],[t("h4",{staticClass:"davygrey--text mt-16 mb-6"},[t(at["a"],{staticClass:"coupon-icon ml-3",attrs:{color:"blue"}},[e._v("\n        mdi-ticket-percent-outline\n      ")]),e._v("\n      "+e._s(e.$t("coupons.coupon_usage_title"))+"\n    ")],1)]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("schedule.absent_date"),"error-messages":e.initialExpirationDateErrors,placeholder:"DD/MM/YYYY",height:"50px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.initial_expiration_date.$touch()}},model:{value:e.initialExpirationDateFormat,callback:function(t){e.initialExpirationDateFormat=t},expression:"initialExpirationDateFormat"}},"v-text-field",n,!1),a))]}}]),model:{value:e.initialExpirationDatePicker,callback:function(t){e.initialExpirationDatePicker=t},expression:"initialExpirationDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,locale:"pt-br"},on:{input:function(t){e.initialExpirationDatePicker=!1}},model:{value:e.form.initial_expiration_date,callback:function(t){e.$set(e.form,"initial_expiration_date",t)},expression:"form.initial_expiration_date"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{disabled:e.form.undetermined_time||e.inViewMode,label:e.$t("coupons.end_expiration_date"),placeholder:"DD/MM/YYYY",height:"50px",outlined:""},on:{blur:function(t){return e.$v.form.end_expiration_date.$touch()}},model:{value:e.endExpirationDateFormat,callback:function(t){e.endExpirationDateFormat=t},expression:"endExpirationDateFormat"}},"v-text-field",n,!1),a))]}}]),model:{value:e.endExpirationDatePicker,callback:function(t){e.endExpirationDatePicker=t},expression:"endExpirationDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,locale:"pt-br"},on:{input:function(t){e.endExpirationDatePicker=!1}},model:{value:e.form.end_expiration_date,callback:function(t){e.$set(e.form,"end_expiration_date",t)},expression:"form.end_expiration_date"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"mt-2",attrs:{disabled:e.inViewMode,label:e.$t("coupons.undetermined_time"),color:"blue","hide-details":""},model:{value:e.form.undetermined_time,callback:function(t){e.$set(e.form,"undetermined_time",t)},expression:"form.undetermined_time"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",disabled:e.inViewMode||!!e.voucherInformation,label:e.$t("coupons.initial_expiration_time"),"error-messages":e.initialExpirationTimeErrors,height:"50px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.initial_expiration_time.$touch()}},model:{value:e.form.initial_expiration_time,callback:function(t){e.$set(e.form,"initial_expiration_time",t)},expression:"form.initial_expiration_time"}},"v-text-field",n,!1),a))]}}]),model:{value:e.initialExpirationTimePicker,callback:function(t){e.initialExpirationTimePicker=t},expression:"initialExpirationTimePicker"}},[t(Go["a"],{attrs:{"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(t){e.initialExpirationTimePicker=!1}},model:{value:e.form.initial_expiration_time,callback:function(t){e.$set(e.form,"initial_expiration_time",t)},expression:"form.initial_expiration_time"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",disabled:e.form.undetermined_time||e.inViewMode,label:e.$t("coupons.end_expiration_time"),"error-messages":e.endExpirationTimeErrors,height:"50px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.end_expiration_time.$touch()}},model:{value:e.form.end_expiration_time,callback:function(t){e.$set(e.form,"end_expiration_time",t)},expression:"form.end_expiration_time"}},"v-text-field",n,!1),a))]}}]),model:{value:e.endExpirationTimePicker,callback:function(t){e.endExpirationTimePicker=t},expression:"endExpirationTimePicker"}},[t(Go["a"],{attrs:{"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(t){e.endExpirationTimePicker=!1}},model:{value:e.form.end_expiration_time,callback:function(t){e.$set(e.form,"end_expiration_time",t)},expression:"form.end_expiration_time"}})],1)],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{attrs:{type:"number",disabled:e.form.unlimited_use||e.inViewMode||e.voucherInformation&&e.voucherInformation.unlimited_usage_per_coupon,"error-messages":e.initialLimitPerCpfErrors,label:e.$t("coupons.limit_per_cpf"),min:e.minimunCpf,height:"50px",outlined:""},on:{blur:function(t){return e.$v.form.limit_per_cpf.$touch()}},model:{value:e.form.limit_per_cpf,callback:function(t){e.$set(e.form,"limit_per_cpf",t)},expression:"form.limit_per_cpf"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"mt-2",attrs:{disabled:e.inViewMode||e.voucherInformation&&e.voucherInformation.unlimited_usage_per_coupon,label:e.$t("coupons.unlimited_use"),color:"blue","hide-details":""},model:{value:e.form.unlimited_use,callback:function(t){e.$set(e.form,"unlimited_use",t)},expression:"form.unlimited_use"}})],1)],1),t("EmptyEndDateWarningModal",{on:{onConfirm:e.saveWithUnlimitedUse}})],1)},Sb=[],Cb=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("coupons.navigation_confirmation")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("p",{staticClass:"davygrey--text px-10 mt-10 mb-0"},[e._v("\n        "+e._s(e.$t("coupons.message_empty_end_date_warning"))+"\n      ")]),t("div",{staticClass:"align-center pa-10"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"davygrey"},on:{click:e.handleConfirm}},[e._v("\n          "+e._s(e.$t("general.ok"))+"\n        ")])],1)],1)],1)],1)},Tb=[],Rb={props:["onConfirm"],data(){return{dialog:!1}},created(){this.$bus.on("open-empty-end-date-warning-modal",e=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-navigation-confirmation-modal")},methods:{close(){this.dialog=!1},handleConfirm(){this.$emit("onConfirm"),this.close()}}},Db=Rb,gb=(a("bde6"),Object(I["a"])(Db,Cb,Tb,!1,null,"2b7d2d1b",null)),Lb=gb.exports,fb={components:{EmptyEndDateWarningModal:Lb},props:["handleSave","handleError","inViewMode","voucherInformation"],mixins:[ve],data(){return{initialExpirationDatePicker:!1,initialExpirationTimePicker:!1,endExpirationDatePicker:!1,endExpirationTimePicker:!1,minimunCpf:0,form:{initial_expiration_date:null,initial_expiration_time:"00:00",end_expiration_date:null,end_expiration_time:"23:59",undetermined_time:null,limit_per_cpf:null,unlimited_use:null}}},created(){this.voucherInformation&&(this.form.initial_expiration_date=this.$moment(this.voucherInformation.start_date).format("YYYY-MM-DD"),this.form.initial_expiration_time=this.$moment(this.voucherInformation.start_date).format("HH:mm"),this.form.undetermined_time=this.voucherInformation.unlimited_expiration,this.form.limit_per_cpf=this.voucherInformation.usage_limit_per_coupon,this.form.unlimited_use=this.voucherInformation.unlimited_usage_per_coupon,this.minimunCpf=this.form.limit_per_cpf?parseInt(this.form.limit_per_cpf):0,this.voucherInformation.expiration_date&&(this.form.end_expiration_date=this.$moment(this.voucherInformation.expiration_date).format("YYYY-MM-DD"),this.form.end_expiration_time=this.$moment(this.voucherInformation.expiration_date).format("HH:mm"))),this.$bus.on("coupons-save-new-campaign",()=>{this.form.end_expiration_date||this.form.undetermined_time?this.saveData():this.$bus.emit("open-empty-end-date-warning-modal")}),this.$bus.on("coupons-edit-campaign",()=>{this.editData()})},beforeDestroy(){this.$bus.off("coupons-save-new-campaign"),this.$bus.off("coupons-edit-campaign")},methods:{formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},formattedTime(e){return e?this.$moment(e).format("HH:mm"):""},saveWithUnlimitedUse(){this.form.undetermined_time=!0,this.saveData()},saveData(){if(this.$v.$touch(),this.$v.$invalid)return this.$emit("handleError");let e=this.$moment(`${this.form.initial_expiration_date} ${this.form.initial_expiration_time}`).unix(),t=this.form.undetermined_time?null:this.$moment(`${this.form.end_expiration_date} ${this.form.end_expiration_time}`).unix(),a={name:this.$consts.CREATE_CAMPAIGN_FORMS.COUPON_USAGE,data:{start_date:e,expiration_date:t,unlimited_expiration:this.form.undetermined_time,usage_limit_per_coupon:this.form.limit_per_cpf,unlimited_usage_per_cupon:this.form.unlimited_use}};this.$emit("handleSave",a)},editData(){let e={};if(this.$bus.emit("show-error-message",{display:!1,message:"date_cannot_be_before_now_or_start_date"}),!this.form.undetermined_time){const t=this.$moment(this.form.end_expiration_date+" "+this.form.end_expiration_time),a=this.$moment(this.form.initial_expiration_date+" "+this.form.initial_expiration_time),n=this.$moment();if(t.isSameOrBefore(a)||t.isSameOrBefore(n))return void this.$bus.emit("show-error-message",{display:!0,message:"date_cannot_be_before_now_or_start_date"});e.expiration_date=t.format("X")}if(this.$v.$touch(),this.$v.$invalid)return;if(!this.form.unlimited_use){if(this.form.limit_per_cpf<this.voucherInformation.usage_limit_per_coupon)return this.$bus.emit("show-error-message",{display:!0,message:"usage_limit_per_cpf_cannot_be_lower_then_the_atual"}),void(this.form.limit_per_cpf=this.voucherInformation.usage_limit_per_coupon);e.usage_limit_per_cpf=this.form.limit_per_cpf}let t={name:"coupon-usage",data:e};this.$emit("handleSave",t)}},computed:{initialExpirationDateFormat(){return this.form.initial_expiration_date?this.$moment(this.form.initial_expiration_date).format("DD/MM/YYYY"):""},endExpirationDateFormat(){return this.form.end_expiration_date?this.$moment(this.form.end_expiration_date).format("DD/MM/YYYY"):""},initialExpirationDateErrors(){const e=[];return this.$v.form.initial_expiration_date.$dirty?(!this.$v.form.initial_expiration_date.required&&e.push(this.$t("general.required")),e):e},initialExpirationTimeErrors(){const e=[];return this.$v.form.initial_expiration_time.$dirty?(!this.$v.form.initial_expiration_time.required&&e.push(this.$t("general.required")),e):e},endExpirationTimeErrors(){const e=[];return this.$v.form.end_expiration_time.$dirty?(!this.$v.form.end_expiration_time.required&&e.push(this.$t("general.required")),e):e},initialLimitPerCpfErrors(){const e=[];return this.$v.form.limit_per_cpf.$dirty?(!this.$v.form.limit_per_cpf.required&&e.push(this.$t("general.required")),e):e}},validations:{form:{initial_expiration_date:{required:Ae["required"]},initial_expiration_time:{required:Ae["required"]},end_expiration_date:{},end_expiration_time:{required:Ae["required"]},undetermined_time:{},limit_per_cpf:{required:Object(Ae["requiredIf"])((function(){return!this.form.unlimited_use}))},unlimited_use:{}}}},Nb=fb,kb=(a("dfd0"),Object(I["a"])(Nb,pb,Sb,!1,null,"46c64a2c",null)),vb=kb.exports,bb=function(){var e=this,t=e._self._c;return t(re["a"],{staticClass:"cpf-list-upload mb-10"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"mt-8 mb-6"},[t(at["a"],{attrs:{color:"blue"}},[e._v("\n          mdi-file-document-outline\n        ")]),t("span",{staticClass:"font-weight-bold davygrey--text"},[e._v("\n          "+e._s(e.$t("coupons.cpfs_list"))+"\n        ")])],1)])],1),t(ce["a"],[t("div",[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"mt-6 mb-6"},[t(r["a"],{staticClass:"ml-8 upload-button",attrs:{disabled:e.inViewMode||!!e.voucherInformation,loading:e.loading,color:"primary",depressed:"",width:"240"},on:{click:e.onButtonClick}},[e._v("\n            "+e._s(e.$t("coupons.upload_csv"))+"\n            "),t(at["a"],{attrs:{right:""}},[e._v("\n              upload\n            ")])],1),t("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file"},on:{change:e.onFileChange}})],1),t("div",{staticClass:"mt-6 mb-6"},e._l(e.uploadedFiles,(function(a,n){return t("div",{key:n},[t(at["a"],{attrs:{color:"green"}},[e._v("\n              mdi-file-download\n            ")]),t("a",{staticClass:"ml-2 body-1",attrs:{href:a.url_file,target:"blank"}},[e._v("\n              "+e._s(a.filename)+"\n            ")]),e.inViewMode||e.voucherInformation?e._e():t(r["a"],{staticClass:"text-none",attrs:{disabled:e.inViewMode||!!e.voucherInformation,color:"red",depressed:"",text:""},on:{click:function(t){return e.removeFile(a)}}},[t(at["a"],[e._v("\n                close\n              ")]),t("a",{staticClass:"ml-2 body-1",attrs:{href:a.url_file,target:"blank"}},[e._v("\n                "+e._s(a.filename)+"\n              ")]),e.disabled?e._e():t(r["a"],{staticClass:"text-none",attrs:{color:"red",depressed:"",text:"",disabled:!!e.voucherInformation},on:{click:function(t){return e.removeFile(a)}}},[t(at["a"],[e._v("\n                  close\n                ")])],1)],1)],1)})),0)])],1)]),t("InvalidFileWarningModal")],1)},Mb=[],Pb=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"300",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header mb-5"},[t("div",{staticClass:"card-header white--text"},[e._v("\n          "+e._s(e.$t("coupons.modal_error"))+"\n        ")]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.handleClose()}}})])]),t(c["b"],{staticClass:"d-flex justify-center"},[e._v("\n        "+e._s(e.$t("coupons.modal_message_invalid_input"))+"\n      ")]),t(c["a"],{staticClass:"pb-5 d-flex justify-center"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary"},on:{click:e.handleClose}},[e._v("\n          "+e._s(e.$t("attendance.ok"))+"\n        ")])],1)],1)],1)],1)},Ub=[],yb={data(){return{dialog:!1}},created(){this.$bus.on("open-invalid-file-warning-dialog",()=>this.dialog=!0)},beforeDestroy(){this.$bus.off("open-invalid-file-warning-dialog")},methods:{handleClose(){this.dialog=!1}}},$b=yb,xb=(a("8375"),Object(I["a"])($b,Pb,Ub,!1,null,"0c1c641a",null)),Vb=xb.exports,Gb={name:"DefinedCpfListUpload",components:{InvalidFileWarningModal:Vb},props:["handleSave","inViewMode","voucherInformation"],data(){return{loading:!1,csv:[],keys:["cpf"],values:[],cpfs:[],cpfsUrl:"",loading:!1,uploadedFiles:[],uploadedFilesBackup:null,selectedFile:null,noPlan:!1}},created(){this.$bus.on("coupons-save-new-campaign",()=>{this.saveData()}),this.$bus.on("coupons-edit-campaign",()=>{this.saveData()}),this.voucherInformation&&this.voucherInformation.cpfs_restriction_url&&this.uploadedFiles.push({filename:this.voucherInformation.cpfs_restriction_url.substring(this.voucherInformation.cpfs_restriction_url.lastIndexOf("/")+1),url_file:this.voucherInformation.cpfs_restriction_url})},beforeDestroy(){this.$bus.off("coupons-save-new-campaign"),this.$bus.off("coupons-edit-campaign")},methods:{onButtonClick(){this.loading=!0,window.addEventListener("focus",()=>{this.loading=!1},{once:!0}),this.$refs.uploader.click()},onFileChange(e){let t=e.target.files||e.dataTransfer.files;if(!t.length)return;this.loading=!0,this.noPlan=!1,this.selectedFile=t[0];let a=this.selectedFile.name.split(".");if("csv"!=a[1]||this.uploadedFiles.find(e=>e.filename==this.selectedFile.name))return this.loading=!1,this.selectedFile=null,void this.$bus.emit("open-invalid-file-warning-dialog");let n={token:this.$store.state.Data.User.token,file:this.selectedFile};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,n).then(e=>{this.cpfsUrl=e.data[this.selectedFile.name].completeUrl,this.createInput(t[0],e)}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},createInput(e,t){let a=new Promise((t,a)=>{var n=new FileReader,i=this;n.onload=e=>{t(i.fileinput=n.result)},n.readAsText(e)});a.then(e=>{this.values.push(e.split("\n")),this.validate(this.values,t)},e=>{console.error(e)})},validate(e,t){let a=0,n=!1;e.forEach(e=>{e.forEach(t=>{if(Number.isInteger(parseInt(t))&&11==t.length)this.cpfs.push(t);else{if(this.keys.includes(t)&&0==a)return void a++;if(typeof t===typeof String()&&t)return n=!0,!1;e.pop(t)}})}),n?(this.values=[],this.uploadedFiles=[],this.cpfs=[],this.$bus.emit("open-invalid-file-warning-dialog")):(this.uploadedFiles.push({filename:this.selectedFile.name,url_file:t.data[this.selectedFile.name].completeUrl}),this.selectedFile=null,this.values=[])},removeFile(e){this.cpfs=[],this.cpfsUrl="",this.uploadedFiles=this.uploadedFiles.filter(t=>t.filename!==e.filename)},saveData(){let e={name:this.$consts.CREATE_CAMPAIGN_FORMS.DEFINED_CPF_LIST,data:{cpfs_restriction_url:this.cpfsUrl}};this.$emit("handleSave",e),this.false=!1}}},Fb=Gb,Bb=(a("bf68"),Object(I["a"])(Fb,bb,Mb,!1,null,"dfb698b0",null)),wb=Bb.exports,Hb={name:"CreateCampaign",components:{ServiceTypesForm:Ob,CampaignInfoForm:ob,CouponUsageForm:vb,DefinedCpfListUpload:wb},data(){return{loading:!1,form_keys:{},saveData:{}}},created(){Object.values(this.$consts.CREATE_CAMPAIGN_FORMS).forEach(e=>this.form_keys[e]=!1)},methods:{resetData(){this.saveData={};for(let e in this.form_keys)this.form_keys[e]=!1},handleSave(){this.loading=!0,this.resetData(),this.$bus.emit("coupons-save-new-campaign")},prepareSaveData(e){null!==this.form_keys[e.name]&&(this.form_keys[e.name]=!0),this.saveData={...this.saveData,...e.data};let t=!0;Object.values(this.form_keys).forEach(e=>{t&&!e&&(t=!1)}),t&&(this.saveData.user_id=this.$store.state.Data.User.info.user_info.id,this.saveData.company_id=this.$store.state.Data.User.info.user_info.companies[0].id,ab.voucherCreate(this.saveData).then(e=>{this.$bus.emit("open-snackbar",{message:"create_campaign_success"})}).catch(e=>{console.error(e),this.$bus.emit("open-snackbar",{message:"create_campaign_error"})}).finally(()=>{this.loading=!1}))},cancelSave(){this.resetData(),this.loading=!1}}},qb=Hb,Yb=(a("9728"),Object(I["a"])(qb,jv,Kv,!1,null,"5cb80315",null)),jb=Yb.exports,Kb=function(){var e=this,t=e._self._c;return t("div",{staticClass:"campaigns-control"},[t("CampaignsSearch",{attrs:{loading:e.loadingCampaignList},on:{onSearch:e.handleSearch}}),t("CampaignsFilters",{attrs:{loading:e.loadingCampaignList},on:{onFilter:e.handleFilter}}),t("CampaignsList",{attrs:{search:e.search,loading:e.loadingCampaignList}}),t("ChangeHistory",{attrs:{loading:e.loadingCampaignList}})],1)},Zb=[],Qb=function(){var e=this,t=e._self._c;return t("div",{staticClass:"campaign-search mb-9"},[t("div",{staticClass:"mb-5"},[t("h3",{staticClass:"davygrey--text"},[e._v("\n      "+e._s(e.$t("coupons.list_campaigns.search_title"))+"\n    ")])]),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"search",attrs:{disabled:e.loading,placeholder:e.$t("coupons.list_campaigns.search_placeholder"),height:"48","hide-details":"",outlined:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(r["a"],{attrs:{disabled:e.disable,loading:e.loading,color:"davygrey",dark:"",height:"48"},on:{click:function(t){return e.$bus.emit("onSearch",e.search)}}},[t(at["a"],{attrs:{size:"28"}},[e._v("search")])],1)],1)])},Jb=[],Wb={name:"CampaignsSearch",props:["disable","hasGiftCardsSelected","loading","selectedGiftCards","onSearch"],data(){return{search:""}},methods:{}},Xb=Wb,zb=(a("20af"),Object(I["a"])(Xb,Qb,Jb,!1,null,"71824f82",null)),eM=zb.exports,tM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"campaign-filter mb-8"},[t("div",{staticClass:"mb-5"},[t("h3",{staticClass:"davygrey--text"},[e._v("\n      "+e._s(e.$t("coupons.list_campaigns.filters"))+"\n    ")])]),t("div",{staticClass:"d-flex flex-wrap"},[t($t["a"],{staticClass:"filter-field select mr-4 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.list_campaigns.filter.created_by"),loading:e.loadingCreatedBy,items:e.listCreatedBy,"item-text":"name","item-value":"id",height:"50","hide-details":"",outlined:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:!!e.filter.created_by,expression:"!!filter.created_by"}],attrs:{color:"red"},on:{click:e.clearCreatedBy}},[e._v("\n          mdi-close-circle\n        ")])]},proxy:!0}]),model:{value:e.filter.created_by,callback:function(t){e.$set(e.filter,"created_by",t)},expression:"filter.created_by"}}),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"255px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"filter-field mr-6 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.list_campaigns.filter.creation_date_of"),placeholder:e.$t("general.empty_date_placeholder"),height:"50px","hide-details":"",outlined:"",readonly:""},model:{value:e.creationDateOfFormated,callback:function(t){e.creationDateOfFormated=t},expression:"creationDateOfFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.creationDateOfPicker,callback:function(t){e.creationDateOfPicker=t},expression:"creationDateOfPicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,max:e.filter.creation_date_to,locale:"pt-br"},on:{input:function(t){e.creationDateOfPicker=!1}},model:{value:e.filter.creation_date_of,callback:function(t){e.$set(e.filter,"creation_date_of",t)},expression:"filter.creation_date_of"}})],1),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"255px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"filter-field mr-6 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.list_campaigns.filter.creation_date_to"),placeholder:e.$t("general.empty_date_placeholder"),height:"50px","hide-details":"",outlined:"",readonly:""},model:{value:e.creationDateToFormated,callback:function(t){e.creationDateToFormated=t},expression:"creationDateToFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.creationDateToPicker,callback:function(t){e.creationDateToPicker=t},expression:"creationDateToPicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,min:e.filter.creation_date_of,locale:"pt-br"},on:{input:function(t){e.creationDateToPicker=!1}},model:{value:e.filter.creation_date_to,callback:function(t){e.$set(e.filter,"creation_date_to",t)},expression:"filter.creation_date_to"}})],1),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"255px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"filter-field mr-6 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.list_campaigns.filter.date_of_update"),placeholder:e.$t("general.empty_date_placeholder"),height:"50px","hide-details":"",outlined:"",readonly:""},model:{value:e.creationDateOfUpdateFormated,callback:function(t){e.creationDateOfUpdateFormated=t},expression:"creationDateOfUpdateFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.creationDateOfUpdatePicker,callback:function(t){e.creationDateOfUpdatePicker=t},expression:"creationDateOfUpdatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,max:e.filter.update_date_to,locale:"pt-br"},on:{input:function(t){e.creationDateOfUpdatePicker=!1}},model:{value:e.filter.date_of_update,callback:function(t){e.$set(e.filter,"date_of_update",t)},expression:"filter.date_of_update"}})],1),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"255px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"filter-field mr-6 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.list_campaigns.filter.update_date_to"),placeholder:e.$t("general.empty_date_placeholder"),height:"50px","hide-details":"",outlined:"",readonly:""},model:{value:e.creationDateToUpdateFormated,callback:function(t){e.creationDateToUpdateFormated=t},expression:"creationDateToUpdateFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.creationDateToUpdatePicker,callback:function(t){e.creationDateToUpdatePicker=t},expression:"creationDateToUpdatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,min:e.filter.date_of_update,locale:"pt-br"},on:{input:function(t){e.creationDateToUpdatePicker=!1}},model:{value:e.filter.update_date_to,callback:function(t){e.$set(e.filter,"update_date_to",t)},expression:"filter.update_date_to"}})],1),t($t["a"],{staticClass:"filter-field select mr-4 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.list_campaigns.filter.status"),loading:e.loadingStatus,items:e.listStatus,"item-text":"status","item-value":"id",height:"50","hide-details":"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function(a){return[t("span",{class:e.$consts.CAMPAIGN_STATUS_COLORS[a.item.status.toUpperCase()]+"--text"},[e._v("\n          "+e._s(e.$t("coupons.list_campaigns.list_status."+a.item.status))+"\n        ")])]}},{key:"item",fn:function(a){return[t("span",{class:e.$consts.CAMPAIGN_STATUS_COLORS[a.item.status.toUpperCase()]+"--text"},[e._v("\n          "+e._s(e.$t("coupons.list_campaigns.list_status."+a.item.status))+"\n        ")])]}},{key:"append-outer",fn:function(){return[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:!!e.filter.status,expression:"!!filter.status"}],attrs:{color:"red"},on:{click:e.clearStatus}},[e._v("\n          mdi-close-circle\n        ")])]},proxy:!0}]),model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}}),t(r["a"],{staticClass:"white--text mb-2",attrs:{disabled:e.disable,loading:e.loading,color:"blue",height:"50",width:"138"},on:{click:[function(t){return e.$bus.emit("onFilter",e.filter)},function(t){e.filter.download_csv=!e.filter.download_csv}]}},[e._v("\n      "+e._s(e.$t("general.filter"))+"\n    ")]),e.filter.download_csv?t(r["a"],{staticClass:"white--text mt-2",attrs:{color:"purple",height:"35"},model:{value:e.filter.download_csv,callback:function(t){e.$set(e.filter,"download_csv",t)},expression:"filter.download_csv"}},[t(at["a"],[e._v("\n        mdi-download\n      ")]),e._v("\n      "+e._s(e.$t("coupons.general.download_csv"))+"\n    ")],1):e._e()],1)])},aM=[],nM={name:"CampaignsFilters",props:["disable","loading","onFilter"],data(){return{loadingCreatedBy:!1,loadingStatus:!1,creationDateOfPicker:!1,creationDateToPicker:!1,creationDateOfUpdatePicker:!1,creationDateToUpdatePicker:!1,listCreatedBy:[],listStatus:[],filter:{created_by:null,creation_date_of:null,date_of_update:null,update_date_to:null,status:null,download_csv:null}}},created(){this.getCreatedByList(),this.getStatusList()},methods:{formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},clearCreatedBy(){this.filter.created_by=null},clearStatus(){this.filter.status=null},getCreatedByList(){this.loadingCreatedBy=!0,Fs.getVoucherUserList().then(e=>{this.listCreatedBy=e.data.users||[],this.loadingCreatedBy=!1}).catch(()=>this.loadingCreatedBy=!1)},getStatusList(){this.loadingStatus=!0,Fs.getVoucherStatusList().then(e=>{this.listStatus=e.data.status||[],this.loadingStatus=!1}).catch(()=>this.loadingStatus=!1)}},computed:{creationDateOfFormated(){return this.filter.creation_date_of?this.$moment(this.filter.creation_date_of).format("DD/MM/YYYY"):""},creationDateToFormated(){return this.filter.creation_date_to?this.$moment(this.filter.creation_date_to).format("DD/MM/YYYY"):""},creationDateOfUpdateFormated(){return this.filter.date_of_update?this.$moment(this.filter.date_of_update).format("DD/MM/YYYY"):""},creationDateToUpdateFormated(){return this.filter.update_date_to?this.$moment(this.filter.update_date_to).format("DD/MM/YYYY"):""}}},iM=nM,sM=(a("0cd8"),Object(I["a"])(iM,tM,aM,!1,null,"85d9fc76",null)),oM=sM.exports,rM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"campaign-cards-list"},[e.loadingTable?t("div",{staticClass:"text-center"},[t(nt["a"],{attrs:{active:e.loadingTable,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.items,"items-per-page":e.limit,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"hide-default-footer":""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"item.created_at",fn:function({item:a}){return[t("span",[e._v(e._s(e.$moment(a.created_at).format("DD/MM/YYYY")))])]}},{key:"item.created_up",fn:function({item:a}){return[t("span",[e._v(e._s(e.$moment(a.created_up).format("DD/MM/YYYY")))])]}},{key:"item.status_name",fn:function({item:a}){return[t("span",{staticClass:"font-weight-bold",class:e.$consts.CAMPAIGN_STATUS_COLORS[a.status_name.toUpperCase()]+"--text"},[e._v("\n        "+e._s(e.$t("coupons.list_campaigns.list_status."+a.status_name.toLowerCase()))+"\n      ")])]}},{key:"item.actions",fn:function({item:a}){return[2==a.status_id?t("div",{staticClass:"d-flex justify-center"},[t(r["a"],{staticClass:"white--text ma-2",attrs:{disabled:e.disable,color:"primary",height:"35",width:"100%"},on:{click:function(t){return e.viewCampaignInfo(a)}}},[t("span",[e._v(e._s(e.$t("coupons.list_campaigns.campaign_table.view")))])])],1):e._e(),1==a.status_id?t("div",{staticClass:"d-flex justify-center"},[t(r["a"],{staticClass:"white--text ma-2",attrs:{disabled:e.disable,color:"primary",height:"35",width:"46%"},on:{click:function(t){return e.editCampaign(a)}}},[t("span",[e._v(e._s(e.$t("coupons.list_campaigns.campaign_table.editar")))])]),t(r["a"],{staticClass:"white--text ma-2",attrs:{disabled:e.disable,color:"error",height:"35",width:"46%"},on:{click:function(t){return e.finalizeCampaign(a)}}},[t("span",[e._v(e._s(e.$t("coupons.list_campaigns.campaign_table.finalize")))])])],1):e._e()]}}])}),e.pagination.pageCount>1?t(_t["a"],{directives:[{name:"show",rawName:"v-show",value:!e.loadingTable,expression:"!loadingTable"}],staticClass:"pagination",attrs:{"total-visible":e.limit,length:e.pagination.pageCount},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e(),t("FinishCampaignsConfirmationModal")],1)},lM=[],cM=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("coupons.general.confirmation")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("p",{staticClass:"davygrey--text px-10 mt-10 mb-0"},[e._v("\n        "+e._s(e.$t("coupons.list_campaigns.finish_confirmation_message"))+"\n      ")]),t("div",{staticClass:"d-flex align-center justify-space-between pa-10"},[t(r["a"],{staticClass:"btn btn-cyan ma-2",attrs:{color:"davygrey",width:"50%",outlined:""},on:{click:e.close}},[e._v("\n          "+e._s(e.$t("coupons.general.cancel"))+"\n        ")]),t(r["a"],{staticClass:"white--text btn ma-2",attrs:{color:"davygrey",width:"50%"},on:{click:e.handleConfirm}},[e._v("\n          "+e._s(e.$t("coupons.general.yes_finish"))+"\n        ")])],1)],1)],1)],1)},dM=[],mM={data(){return{dialog:!1,campaign:{}}},created(){this.$bus.on("open-finish-campaign-confirmation-modal",e=>{this.campaign=e.campaign,this.dialog=!0})},beforeDestroy(){this.$bus.off("open-finish-campaign-confirmation-modal")},methods:{close(){this.dialog=!1},handleConfirm(){let e={voucher_id:this.campaign.id,information:{status_id:7}};Fs.voucherUpdate(e).finally(()=>{this.$bus.emit("getCampaigns"),this.close()})}}},uM=mM,AM=(a("6aa6"),Object(I["a"])(uM,cM,dM,!1,null,"7b974b9c",null)),_M=AM.exports,EM={name:"CampaignsList",components:{FinishCampaignsConfirmationModal:_M},mixins:[ve],props:["disable","forceUpdate","search"],data(){return{responseTimeout:!1,loadingTable:!1,loadingList:!1,page:1,totalPages:0,limit:8,offset:0,filters:null,items:[],sortBy:"created_at",sortDesc:!0,pagination:{pageCount:0,currentPage:1},headers:[{text:this.$t("coupons.list_campaigns.campaign_table.campaign_name"),align:"center",value:"campaign_name",sortable:!0},{text:this.$t("coupons.list_campaigns.campaign_table.coupon_code"),align:"center",value:"campaign_coupon_code",sortable:!0},{text:this.$t("coupons.list_campaigns.campaign_table.created_by"),align:"center",value:"campaign_created_by",sortable:!0},{text:this.$t("coupons.list_campaigns.campaign_table.creation_date"),align:"center",value:"created_at",sortable:!0},{text:this.$t("coupons.list_campaigns.campaign_table.update_date"),align:"center",value:"created_up",sortable:!0},{text:this.$t("coupons.list_campaigns.campaign_table.status"),align:"center",value:"status_name",sortable:!0},{text:this.$t("general.action"),align:"center",value:"actions",sortable:!1}]}},created(){this.getCampaignsList(),this.$bus.on("onFilter",e=>{this.filters=e,this.getCampaignsList()}),this.$bus.on("onSearch",e=>{this.filters={name:e,code:e},this.getCampaignsList()}),this.$bus.on("getCampaigns",()=>{this.getCampaignsList()})},methods:{editCampaign(e){let t={pageType:"edit",item:e};this.$bus.emit("edit-coupons-tab",t)},viewCampaignInfo(e){let t={pageType:"view",item:e};this.$bus.emit("edit-coupons-tab",t)},getCampaignsList(){this.loadingTable=!0;let e={user_id:this.filters?this.filters.created_by:null,created_at:this.filters?this.filters.creation_date_of:null,status_id:this.filters?this.filters.status:null,code:this.filters?this.filters.code:null,name:this.filters?this.filters.name:null,init_created_at:this.filters?this.filters.creation_date_of:null,end_created_at:this.filters?this.filters.creation_date_to:null,init_updated_at:this.filters?this.filters.date_of_update:null,end_updated_at:this.filters?this.filters.update_date_to:null,sortBy:this.sortBy,orderBy:this.sortDesc?"desc":"asc",limit:this.limit,offset:this.offset,page:this.pagination.currentPage||1};e=this.removeNullProperties(e),Fs.getMemberVouchersVivo(e).then(e=>{this.items=e.data.data||[],this.items=this.items.map((function(e){return{campaign_name:e.name,campaign_coupon_code:e.code,campaign_created_by:e.user_name,created_at:e.created_at,created_up:e.updated_at,status_id:e.status_id,status_name:e.status,id:e.id}}));const t=e.data.meta.pagination||null;if(!t)return null;this.loadingTable=!1,this.totalItems=t.total;let a=this.totalItems/this.limit;this.pagination.pageCount=a%this.limit===0?a:parseInt(a)+1,this.pagination.currentPage=this.pagination.currentPage||1}).catch(e=>{this.loadingTable=!1})},finalizeCampaign(e){this.$bus.emit("open-finish-campaign-confirmation-modal",{campaign:e})},getPage(e){this.pagination.currentPage=e,this.offset=1===this.pagination.currentPage?this.offset:(this.pagination.currentPage-1)*this.limit,this.getCampaignsList()},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){this.pagination.currentPage>1&&this.pagination.currentPage--,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage<this.totalPages&&this.pagination.currentPage++,this.getPage(this.pagination.currentPage)}},watch:{},computed:{}},IM=EM,hM=(a("d0df"),Object(I["a"])(IM,rM,lM,!1,null,"2fc7a08a",null)),OM=hM.exports,pM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"brick-title"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"mt-8 mb-6"},[t(at["a"],{attrs:{color:"blue"}},[e._v("\n          mdi-file-document-outline\n        ")]),t("span",{staticClass:"font-weight-bold davygrey--text",staticStyle:{"font-size":"16px"}},[e._v("\n          "+e._s(e.$t("coupons.change_history"))+"\n        ")])],1)])],1),t("div",{staticClass:"call-reason-title",staticStyle:{"background-color":"white"}},e._l(e.changesHistory,(function(a){return t("div",[t("span",{staticClass:"span_date"},[e._v(" "+e._s(a.created_at)+" ")]),t("span",[e._v(" "+e._s(a.user_name)+" ")])])})),0)],1)},SM=[],CM={name:"ChangeHistory",props:["loading"],data(){return{changesHistory:[{voucher_id:1,field:"quantity",value:"1000",edition_number:1,user_id:1,user_name:"luiz",created_at:"2022-02-10 10:00"},{voucher_id:1,field:"quantity",value:"1000",edition_number:1,user_id:1,user_name:"luiz",created_at:"2022-02-10 10:00"},{voucher_id:1,field:"quantity",value:"1000",edition_number:1,user_id:1,user_name:"luiz",created_at:"2022-02-10 10:00"},{voucher_id:1,field:"quantity",value:"1000",edition_number:1,user_id:1,user_name:"luiz",created_at:"2022-02-10 10:00"},{voucher_id:1,field:"quantity",value:"1000",edition_number:1,user_id:1,user_name:"luiz",created_at:"2022-02-10 10:00"},{voucher_id:1,field:"quantity",value:"1000",edition_number:1,user_id:1,user_name:"luiz",created_at:"2022-02-10 10:00"}]}},created(){this.init()},methods:{init(){}},computed:{}},TM=CM,RM=(a("601a"),Object(I["a"])(TM,pM,SM,!1,null,"9885def0",null)),DM=RM.exports,gM={name:"CampaignsControl",components:{CampaignsSearch:eM,CampaignsFilters:oM,CampaignsList:OM,ChangeHistory:DM},mixins:[ve],data(){return{loadingCampaignList:!1,CampaignList:[],search:null,filters:null}},methods:{handleSearch(e){this.search=e},handleFilter(e){this.filters=e}}},LM=gM,fM=(a("9cd0"),Object(I["a"])(LM,Kb,Zb,!1,null,"7c9a8700",null)),NM=fM.exports,kM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"edit-campaign"},[t("CampaignInfoForm",{attrs:{inViewMode:e.inViewMode,voucherInformation:e.voucherInformation},on:{handleSave:e.prepareSaveData,handleError:e.cancelSave}}),t("ServiceTypesForm",{attrs:{inViewMode:e.inViewMode,voucherInformation:e.voucherInformation},on:{handleSave:e.prepareSaveData,handleError:e.cancelSave}}),t("CouponUsageForm",{attrs:{inViewMode:e.inViewMode,voucherInformation:e.voucherInformation},on:{handleSave:e.prepareSaveData,handleError:e.cancelSave}}),t("DefinedCpfListUpload",{attrs:{inViewMode:e.inViewMode,voucherInformation:e.voucherInformation},on:{handleSave:e.prepareSaveData,handleError:e.cancelSave}}),t("ChangeHistory"),t("div",{staticClass:"d-flex flex-column align-center mb-10"},[t("ErrorText")],1),t("div",{staticClass:"save-container d-flex align-center mb-10"},[t(Rs["a"]),e.inViewMode?e._e():t(r["a"],{staticClass:"mr-4",attrs:{loading:e.loading,color:"primary",height:"50",width:"320"},on:{click:e.handleSave}},[t(at["a"],{staticClass:"mr-2"},[e._v("\n        mdi-content-save\n      ")]),t("span",[e._v("\n        "+e._s(e.$t("general.save"))+"\n      ")])],1),t(r["a"],{class:{"ml-4":!e.inViewMode},attrs:{outlined:!e.inViewMode,width:e.inViewMode?482:320,color:"primary",height:"50"},on:{click:e.closeEdition}},[t("span",[e._v("\n        "+e._s(e.inViewMode?e.$t("general.back"):e.$t("general.cancel"))+"\n      ")])]),t(Rs["a"])],1)],1)},vM=[],bM={name:"EditCampaign",components:{ServiceTypesForm:Ob,CampaignInfoForm:ob,CouponUsageForm:vb,DefinedCpfListUpload:wb,ErrorText:pi,ChangeHistory:DM},props:["cuponBaseInfo","inViewMode"],data(){return{loading:!1,saveData:{},voucherInformation:{},form_keys:{}}},created(){Object.values(this.$consts.UPDATE_CAMPAIGN_FORMS).forEach(e=>this.form_keys[e]=!1),this.voucherInformation=voucherInformation.voucher_information[0]},methods:{handleSave(){this.loading=!0,this.$bus.emit("coupons-edit-campaign")},closeEdition(){this.$bus.emit("confirm-close-edit-coupons-tab")},prepareSaveData(e){null!==this.form_keys[e.name]&&(this.form_keys[e.name]=!0),this.saveData={...this.saveData,...e.data};let t=!0;if(Object.values(this.form_keys).forEach(e=>{t&&!e&&(t=!1)}),!t)return;let a={voucher_id:2222,information:{quantity:this.saveData.quantity,usage_limit_per_cpf:this.saveData.usage_limit_per_cpf}};ab.voucherUpdate(a).then(e=>{this.$bus.emit("open-snackbar",{message:"create_campaign_success"})}).catch(e=>{console.error(e),this.$bus.emit("open-snackbar",{message:"create_campaign_error"})}).finally(()=>{this.loading=!1})},cancelSave(){this.resetData(),this.loading=!1}}},MM=bM,PM=(a("72a7"),Object(I["a"])(MM,kM,vM,!1,null,"0b5e2a0b",null)),UM=PM.exports,yM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"create-gift-cards"},[t("div",{staticClass:"mb-10"},[t(at["a"],{attrs:{color:"blue"}},[e._v("\n      mdi-file-edit-outline\n    ")]),t("span",{staticClass:"font-weight-bold davygrey--text"},[e._v("\n      "+e._s(e.$t("coupons.create_gift_cards"))+"\n    ")])],1),t("CreateGiftCardsForm")],1)},$M=[],xM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"create-gift-cards-form"},[e._l(e.formsArray,(function(a,n){return t(re["a"],{key:n,staticClass:"form mb-10"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{attrs:{"error-messages":e.productCodeUpcErrors(n),label:e.$t("coupons.product_code_upc"),height:"50",required:"",outlined:""},on:{blur:function(t){return e.$v.formsArray.$each[n].product_code_upc.$touch()}},model:{value:a.product_code_upc,callback:function(t){e.$set(a,"product_code_upc",t)},expression:"form.product_code_upc"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"8"}},[t(de["a"],{attrs:{"error-messages":e.productErrors(n),label:e.$t("coupons.product"),height:"50",required:"",outlined:""},on:{blur:function(t){return e.$v.formsArray.$each[n].product.$touch()}},model:{value:a.product,callback:function(t){e.$set(a,"product",t)},expression:"form.product"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{attrs:{"error-messages":e.amountCardErrors(n),label:e.$t("coupons.amount_card"),height:"50",required:"",outlined:"",type:"number"},on:{blur:function(t){return e.$v.formsArray.$each[n].amount_card.$touch()}},model:{value:a.amount_card,callback:function(t){e.$set(a,"amount_card",t)},expression:"form.amount_card"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:s}){return[t(de["a"],e._g(e._b({attrs:{value:e.formatDuedate(n),disabled:!!a.undetermined_time,"error-messages":e.duedateErrors(n),label:e.$t("coupons.duedate"),placeholder:"DD/MM/YYYY",height:"50",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.formatDuedate(n)}}},"v-text-field",s,!1),i))]}}],null,!0),model:{value:e.duedatePicker[n],callback:function(t){e.$set(e.duedatePicker,n,t)},expression:"duedatePicker[index]"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,min:e.$moment().add(1,"d").format("YYYY-MM-DD HH:mm:ss"),max:e.$moment().add(4,"y").format("YYYY-MM-DD HH:mm:ss"),locale:"pt-br"},on:{input:function(t){e.duedatePicker[n]=!1}},model:{value:a.duedate,callback:function(t){e.$set(a,"duedate",t)},expression:"form.duedate"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(St["a"],{staticClass:"ma-0 pa-0",attrs:{label:e.$t("coupons.undetermined_time"),height:"50"},model:{value:a.undetermined_time,callback:function(t){e.$set(a,"undetermined_time",t)},expression:"form.undetermined_time"}})],1)],1),t(ce["a"],[n+1==e.formsArray.length?t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(r["a"],{staticClass:"white--text mb-8",attrs:{disabled:e.loading,color:"blue",outlined:"",height:"34"},on:{click:e.addNewForm}},[t(at["a"],{staticClass:"mr-2",attrs:{color:"blue",size:"16"}},[e._v("\n            mdi-plus\n          ")]),e._v("\n          "+e._s(e.$t("coupons.product_plus"))+"\n        ")],1)],1):t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Rs["a"])],1)],1)],1)})),t(ce["a"],{staticClass:"mb-10"},[t(oe["a"],{staticClass:"d-flex align-center",attrs:{cols:"12",md:"12"}},[t(Rs["a"]),t(r["a"],{staticClass:"white--text",attrs:{loading:e.loading,color:"primary",dark:"",height:"50",width:"482"},on:{click:e.openConfirmationModal}},[t(at["a"],{staticClass:"mr-2"},[e._v("\n          mdi-content-save\n        ")]),e._v("\n        "+e._s(e.$t("coupons.button_code_csv"))+"\n      ")],1),t(Rs["a"])],1)],1),t("NavigationConfirmationModal",{on:{onConfirm:e.saveForm}})],2)},VM=[],GM={name:"CreateGiftCardsForm",components:{NavigationConfirmationModal:dg},data(){return{loading:!1,duedatePicker:{},formsArray:[],formObject:{product_code_upc:null,product:null,amount_card:null,duedate:null,undetermined_time:null}}},created(){this.addNewForm()},methods:{formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},formatDuedate(e){if(this.formsArray[e].duedate)return this.$v.formsArray.$each[e].duedate.$touch(),this.$moment(this.formsArray[e].duedate).format("DD/MM/YYYY")},addNewForm(){this.formsArray.push({...this.formObject})},openConfirmationModal(){this.$v.$touch(),this.$v.$invalid||this.$bus.emit("open-navigation-confirmation-modal",this.$t("coupons.will_be_generated").replace("NUMBER",this.formsArray.length),this.$t("general.cancel"),this.$t("general.continue"))},saveForm(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.$v.$reset(),alert(this.formsArray.length+' lotes foram "gerados".'),this.formsArray=[],this.$nextTick(()=>{this.addNewForm()})},2e3)}},computed:{productCodeUpcErrors(){return e=>{const t=[];return this.$v.formsArray.$each[e].product_code_upc.$dirty?(!this.$v.formsArray.$each[e].product_code_upc.required&&t.push(this.$t("general.required")),t):t}},productErrors(){return e=>{const t=[];return this.$v.formsArray.$each[e].product.$dirty?(!this.$v.formsArray.$each[e].product.required&&t.push(this.$t("general.required")),t):t}},amountCardErrors(){return e=>{const t=[];return this.$v.formsArray.$each[e].amount_card.$dirty?(!this.$v.formsArray.$each[e].amount_card.required&&t.push(this.$t("general.required")),t):t}},duedateErrors(){return e=>{const t=[];return this.$v.formsArray.$each[e].duedate.$dirty?(!this.$v.formsArray.$each[e].duedate.required&&t.push(this.$t("general.required")),t):t}}},validations:{formsArray:{$each:{product_code_upc:{required:Ae["required"]},product:{required:Ae["required"]},amount_card:{required:Ae["required"]},duedate:{required:Object(Ae["requiredIf"])((function(e){return!e.undetermined_time}))},undetermined_time:{}}}}},FM=GM,BM=(a("735b"),Object(I["a"])(FM,xM,VM,!1,null,"62c57b2a",null)),wM=BM.exports,HM={name:"CreateGiftsCards",components:{CreateGiftCardsForm:wM}},qM=HM,YM=(a("c2c1"),Object(I["a"])(qM,yM,$M,!1,null,"b01f75aa",null)),jM=YM.exports,KM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gift-cards-control"},[t("GiftCardsSearch",{attrs:{disable:e.disablingBatches,hasGiftCardsSelected:e.hasGiftCardsSelected,loading:e.loadingBatches,selectedGiftCards:e.selectedGiftCards},on:{onSearch:e.handleSearch}}),t("GiftCardsFilters",{attrs:{disable:e.disablingBatches,loading:e.loadingBatches},on:{onFilter:e.handleFilter}}),e.hasGiftCardsSelected?t("GiftCardsDisableButton",{attrs:{selectedGiftCards:e.selectedGiftCards},on:{onDisabling:e.handleDisabling,onDisable:e.handleDisable}}):e._e(),t("GiftCardsList",{attrs:{batchList:e.batchList,disable:e.disablingBatches,filters:e.filters,loading:e.loadingBatches,search:e.search},on:{onGiftCardSelection:e.handleGiftCardSelection}})],1)},ZM=[],QM=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gift-cards-search mb-9"},[t("div",{staticClass:"mb-5"},[t("h3",{staticClass:"davygrey--text"},[e._v("\n      "+e._s(e.$t("coupons.search_title"))+"\n    ")])]),t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"search",attrs:{disabled:e.loading,placeholder:e.$t("coupons.search_placeholder"),height:"48","hide-details":"",outlined:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(r["a"],{attrs:{disabled:e.disable,loading:e.loading,color:"davygrey",dark:"",height:"48"},on:{click:function(t){return e.$emit("onSearch",e.search)}}},[t(at["a"],{attrs:{size:"28"}},[e._v("search")])],1),e.hasGiftCardsSelected?t(r["a"],{staticClass:"ml-6 my-2",attrs:{color:"primary",height:"35"},on:{click:e.downloadSelectedGiftCards}},[t(at["a"],[e._v("\n        mdi-download\n      ")]),e._v("\n      Baixar .csv da pesquisa\n    ")],1):e._e()],1)])},JM=[],WM={name:"GiftCardsSearch",props:["disable","hasGiftCardsSelected","loading","selectedGiftCards","onSearch"],data(){return{search:""}},methods:{downloadSelectedGiftCards(){alert("Teste: Download dos gift cards dos lotes selecionados")}}},XM=WM,zM=(a("a270"),Object(I["a"])(XM,QM,JM,!1,null,"abea991a",null)),eP=zM.exports,tP=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gift-cards-filter mb-8"},[t("div",{staticClass:"mb-5"},[t("h3",{staticClass:"davygrey--text"},[e._v("\n      "+e._s(e.$t("coupons.filters"))+"\n    ")])]),t("div",{staticClass:"d-flex flex-wrap"},[t(de["a"],{staticClass:"filter-field mr-6 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.filter.product_code"),placeholder:e.$t("general.type"),height:"50","hide-details":"",outlined:""},model:{value:e.filter.product_code,callback:function(t){e.$set(e.filter,"product_code",t)},expression:"filter.product_code"}}),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"255px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"filter-field mr-6 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.filter.creation_date"),placeholder:e.$t("general.empty_date_placeholder"),height:"50px","hide-details":"",outlined:"",readonly:""},model:{value:e.creationDateFormated,callback:function(t){e.creationDateFormated=t},expression:"creationDateFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.creationDatePicker,callback:function(t){e.creationDatePicker=t},expression:"creationDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,locale:"pt-br"},on:{input:function(t){e.creationDatePicker=!1}},model:{value:e.filter.creation_date,callback:function(t){e.$set(e.filter,"creation_date",t)},expression:"filter.creation_date"}})],1),t($t["a"],{staticClass:"filter-field select mr-4 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.filter.created_by"),loading:e.loadingCreatedBy,items:e.listCreatedBy,"item-text":"name","item-value":"user_id",height:"50","hide-details":"",outlined:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:!!e.filter.created_by,expression:"!!filter.created_by"}],attrs:{color:"red"},on:{click:e.clearCreatedBy}},[e._v("\n          mdi-close-circle\n        ")])]},proxy:!0}]),model:{value:e.filter.created_by,callback:function(t){e.$set(e.filter,"created_by",t)},expression:"filter.created_by"}}),t($t["a"],{staticClass:"filter-field select mr-4 mb-2",attrs:{disabled:e.loading,label:e.$t("coupons.filter.status"),loading:e.loadingStatus,items:e.listStatus,"item-text":"translation","item-value":"id",height:"50","hide-details":"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function(a){return[t("span",{class:e.$consts.GIFT_CARDS_STATUS_COLORS[a.item.status.toUpperCase()]+"--text"},[e._v("\n          "+e._s(e.$t("status."+a.item.status))+"\n        ")])]}},{key:"item",fn:function(a){return[t("span",{class:e.$consts.GIFT_CARDS_STATUS_COLORS[a.item.status.toUpperCase()]+"--text"},[e._v("\n          "+e._s(e.$t("status."+a.item.status))+"\n        ")])]}},{key:"append-outer",fn:function(){return[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:!!e.filter.status,expression:"!!filter.status"}],attrs:{color:"red"},on:{click:e.clearStatus}},[e._v("\n          mdi-close-circle\n        ")])]},proxy:!0}]),model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}}),t(r["a"],{staticClass:"white--text mb-2",attrs:{disabled:e.disable,loading:e.loading,color:"blue",height:"50",width:"138"},on:{click:function(t){return e.$emit("onFilter",e.filter)}}},[e._v("\n      "+e._s(e.$t("general.filter"))+"\n    ")])],1)])},aP=[],nP={name:"GiftCardsFilters",props:["disable","loading","onFilter"],data(){return{loadingCreatedBy:!1,loadingStatus:!1,creationDatePicker:!1,listCreatedBy:[],listStatus:[],filter:{product_code:null,creation_date:null,created_by:null,status:null}}},created(){this.getCreatedByList(),this.getStatusList()},methods:{formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},clearCreatedBy(){this.filter.created_by=null},clearStatus(){this.filter.status=null},getCreatedByList(){this.loadingCreatedBy=!0,setTimeout(()=>{this.listCreatedBy=[{name:"William tem mtos filhos",user_id:3},{name:"William 2",user_id:5}],this.loadingCreatedBy=!1},3e3)},getStatusList(){this.loadingStatus=!0,setTimeout(()=>{this.listStatus=[{id:1,status:"active"},{id:2,status:"expired"},{id:3,status:"used"}],this.loadingStatus=!1},2e3)}},computed:{creationDateFormated(){return this.filter.creation_date?this.$moment(this.filter.creation_date).format("DD/MM/YYYY"):""}}},iP=nP,sP=(a("c68e"),Object(I["a"])(iP,tP,aP,!1,null,"f9d8ae82",null)),oP=sP.exports,rP=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-4"},[t(r["a"],{attrs:{loading:e.loading,color:"red",dark:"",height:"35",width:"210"},on:{click:e.onClick}},[e._v("\n    "+e._s(e.$t("coupons.disable_selected"))+"\n  ")]),t("NavigationConfirmationModal",{on:{onConfirm:e.disableSelected}})],1)},lP=[],cP={name:"GiftCardsDisableButton",components:{NavigationConfirmationModal:dg},props:["selectedGiftCards","onDisabling","onDisable"],data(){return{loading:!1}},methods:{onClick(){this.$bus.emit("open-navigation-confirmation-modal",this.$t("coupons.delete_gift_cards_modal_text"))},disableSelected(){this.loading=!0,this.$emit("onDisabling"),clearTimeout(this.responseTimeout),this.responseTimeout=setTimeout(()=>{this.loading=!1,this.$emit("onDisable")},2e3)}}},dP=cP,mP=Object(I["a"])(dP,rP,lP,!1,null,"135ce93c",null),uP=mP.exports,AP=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gift-cards-list mb-10"},[e.loading&&!e.batchList.length?t("div",{staticClass:"text-center"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):e.batchList.length?t(Ju["a"],{attrs:{accordion:"",flat:"",multiple:""},model:{value:e.batches,callback:function(t){e.batches=t},expression:"batches"}},e._l(e.batchList,(function(a,n){return t(Ku["a"],{key:n,staticClass:"mb-2 batch",attrs:{disabled:e.loading||e.disable}},[t(Qu["a"],{staticClass:"davygrey--text font-weight-bold pl-2 py-2",attrs:{"hide-actions":""}},[t("div",{staticClass:"d-flex align-center"},[t(at["a"],{staticClass:"mr-9",attrs:{color:"blue"}},[e._v("\n            "+e._s(e.batches.includes(n)?"mdi-chevron-down":"mdi-chevron-right")+"\n          ")]),e.loading?t(nt["a"],{staticClass:"mr-5",attrs:{size:22,width:3,color:"primary",indeterminate:""}}):e._e(),e._v("\n\n          "+e._s(e.$t("coupons.batch"))+" "+e._s(a.gift_card_batch_id)+"\n        ")],1),t("GiftCardsBatchDownloadButton",{attrs:{batch:a,disabled:e.loading||e.disable}})],1),t(Zu["a"],{staticClass:"py-4",attrs:{color:"white"}},[t("GiftCardsBatchCardsList",{attrs:{batch:a,disable:e.disable,filters:e.filters,forceUpdate:!!e.batches.includes(n),search:e.search},on:{onGiftCardSelection:e.handleGiftCardSelection}})],1)],1)})),1):e._e()],1)},_P=[],EP=function(){var e=this,t=e._self._c;return t(r["a"],{attrs:{color:e.statusColors[e.statusId],disabled:e.disabled,loading:1==e.statusId,"max-width":"185",outlined:""},on:{click:e.onClick,mouseenter:e.onHover},nativeOn:{click:function(e){e.stopPropagation()}},scopedSlots:e._u([{key:"loader",fn:function(){return[t("div",[t(nt["a"],{staticClass:"mr-2",attrs:{size:20,width:2,indeterminate:""}}),e._v("\n      "+e._s(e.$t("coupons.download_button_status.processing"))+"\n    ")],1)]},proxy:!0}])},[t(at["a"],{staticClass:"mr-2"},[e._v("\n    "+e._s(e.statusIcons[e.statusId])+"\n  ")]),e._v("\n  "+e._s(e.$t("coupons.download_button_status."+e.statusName))+"\n\n  ")],1)},IP=[],hP={name:"GiftCardsBatchDownloadButton",props:["batch","disabled"],data(){return{statusId:0,statusName:"",statusColors:{0:"davygrey",1:"davygrey",2:"davygrey",3:"red"},statusIcons:{0:"mdi-restore",1:"",2:"mdi-download",3:"mdi-alert"}}},created(){this.statusId=this.batch.status_id,this.statusName=this.batch.status_name,this.$bus.on("mock-up-event-processing-finish",e=>{this.batch.gift_card_batch_id===e.gift_card_batch_id&&(this.statusId=e.status_id,this.statusName=e.status_name)})},methods:{onHover(){3===this.statusId&&(this.statusId=0,this.statusName="try_again")},onClick(){switch(this.statusId){case 0:this.tryAgain();break;case 2:this.download();break;default:break}},tryAgain(){this.statusId=1},download(){alert("Teste: Download de lote "+this.batch.gift_card_batch_id)}},watch:{statusId(){1===this.statusId&&setTimeout(()=>{let e={gift_card_batch_id:this.batch.gift_card_batch_id,status_id:2,status_name:"job_done"};this.$bus.emit("mock-up-event-processing-finish",e)},3e3)}}},OP=hP,pP=Object(I["a"])(OP,EP,IP,!1,null,"e581bf4a",null),SP=pP.exports,CP=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gift-cards-batch-cards-list"},[e.loading?t("div",{staticClass:"text-center"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.items,"items-per-page":e.limit,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"hide-default-footer":"","show-select":""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"item.created_at",fn:function({item:a}){return[t("span",[e._v(e._s(e.$moment(a.created_at).format("DD/MM/YYYY")))])]}},{key:"item.status_name",fn:function({item:a}){return[t("span",{staticClass:"font-weight-bold",class:e.$consts.GIFT_CARDS_STATUS_COLORS[a.status_name.toUpperCase()]+"--text"},[e._v("\n        "+e._s(e.$t("status.coupons."+a.status_name.toLowerCase()))+"\n      ")])]}},{key:"item.actions",fn:function({item:a}){return[t(r["a"],{staticClass:"white--text",attrs:{disabled:e.disable,color:"primary",height:"35",width:"165"},on:{click:function(t){return e.viewGiftCardInfo(a)}}},[t("span",[e._v(e._s(e.$t("coupons.view")))])])]}}]),model:{value:e.selectedGiftCards,callback:function(t){e.selectedGiftCards=t},expression:"selectedGiftCards"}}),e.pagination.pageCount>1?t(_t["a"],{staticClass:"pagination",attrs:{"total-visible":e.limit,length:e.pagination.pageCount},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1)},TP=[],RP={name:"GiftCardsBatchCardsList",props:["batch","disable","filters","forceUpdate","search","onGiftCardSelection"],data(){return{loading:!1,page:1,totalPages:0,limit:8,offset:0,items:[],selectedGiftCards:[],sortBy:"pin",sortDesc:!1,pagination:{pageCount:0,currentPage:1},headers:[{text:this.$t("coupons.gift_cards_table.pin"),align:"center",value:"pin",sortable:!0},{text:this.$t("coupons.gift_cards_table.product_name"),align:"center",value:"program_translate_name",sortable:!0},{text:this.$t("coupons.gift_cards_table.product_code"),align:"center",value:"product_unique_code",sortable:!0},{text:this.$t("coupons.gift_cards_table.creation_date"),align:"center",value:"created_at",sortable:!0},{text:this.$t("coupons.gift_cards_table.status"),align:"center",value:"status_name",sortable:!0},{text:this.$t("general.action"),align:"center",value:"actions",sortable:!1}]}},created(){this.getBatchGiftCardsList()},methods:{getBatchGiftCardsList(){this.loading=!0;let e={gift_card_batch_id:this.batch.gift_card_batch_id,search:this.search,filters:{product_unique_code:this.filters?this.filters.product_code:null,created_at:this.filters?this.filters.creation_date:null,user_id:this.filters?this.filters.created_by:null,status_id:this.filters?this.filters.status:null},order:{column:this.sortBy,order:this.sortDesc?"desc":"asc"},limit:this.limit,offset:this.offset,page:this.pagination.currentPage||1};!this.search&&delete e["search"],this.filters?(!this.filters.product_code&&delete e.filters["product_unique_code"],!this.filters.creation_date&&delete e.filters["created_at"],!this.filters.created_by&&delete e.filters["user_id"],!this.filters.status&&delete e.filters["status_id"]):delete e["filters"],clearTimeout(this.responseTimeout),this.responseTimeout=setTimeout(()=>{let e={gift_cards:[{product_unique_code:"terter",pin:"312347",program_translate_name:"Consulta Por V
 foi desconectado deste atendimento pelo administrador."),this.$bus.emit("restart-queue-update"),this.$bus.emit("close-stream"),this.$bus.emit("end-session"),this.$bus.emit("confirm-close-patient-dialog",this.$store.state.Data.CaseAttendance),this.$bus.emit("patient-canceled"),this.$store.dispatch(this.$consts.SCREENING_ACTIONS.CLEAR),setTimeout(()=>{this.$bus.emit("toggle-loading",!1)},2e3))})}}),this.$bus.on("open-triage-page",e=>{if(this.persistentDocTabs&&this.persistentDocTabs.length>=1)return this.$bus.emit("open-tabs-modal"),void this.$bus.emit("stop-access-attandance-load");this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_HISTORY_MODE,{value:!1}),this.active_triage=!1,this.active_history=!1,e.member_id||(e.member_id=e.id),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET,e),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_HEADERS,e),this.openTabByAttendance(e),this.$bus.emit("socket-doctor-connected-status",!0),this.$bus.emit("stop-queue-update",!0)}),this.$bus.on("tmp-show-history",e=>{this.tmpShow=e}),this.$bus.on("close-temp-data-tab",()=>{this.$bus.emit("ended-attendance"),this.loading_patient_page_bool=!1,this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_ALL_SELECTED_CALL_REASONS),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.UNSET_SELECTED_PROGRAMS),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.TRIAGEM_ENFERMAGEM_ACTIONS.CLEAR_TRIAGEM),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.CLEAR_BRICK),this.persistentDocTabs=[],this.persistentTabs=[],this.data=[];let e=this.persistentDocTabs.indexOf(this.tempData);this.persistentDocTabs.splice(e,1),localStorage.setItem("userList",JSON.stringify(this.persistentDocTabs)),this.clearUserTabs(),this.active_tab=0,this.active_doc_tab=null,this.loading_patient_page_bool=!1,this.$store.state.Data.CaseAttendance&&this.$store.state.Data.CaseAttendance.info&&this.$store.state.Data.CaseAttendance.info.case_attendance_id&&localStorage.removeItem("attendance.original_doctor_"+this.$store.state.Data.CaseAttendance.info.case_attendance_id)}),this.$bus.on("confirm-close-patient-dialog",e=>{if(this.loading_patient_page_bool=!1,this.$store.state.Data.CaseAttendance&&this.$store.state.Data.CaseAttendance.info&&this.$store.state.Data.CaseAttendance.info.case_attendance_id&&(this.sockets.unsubscribe("tdoc_"+this.$store.state.Data.CaseAttendance.info.case_attendance_id),localStorage.removeItem("attendance.original_doctor_"+this.$store.state.Data.CaseAttendance.info.case_attendance_id)),this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save"),this.$bus.emit("ended-attendance"),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_ALL_SELECTED_CALL_REASONS),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.TRIAGEM_ENFERMAGEM_ACTIONS.CLEAR_TRIAGEM),this.active_history=!1,this.persistentTabs){let t=this.persistentTabs.indexOf(e);this.persistentTabs.splice(t,1),localStorage.setItem("userList",JSON.stringify(this.persistentTabs))}if(this.persistentDocTabs){let t=this.persistentDocTabs.indexOf(e);this.persistentDocTabs.splice(t,1),localStorage.setItem("userList",JSON.stringify(this.persistentDocTabs))}this.clearUserTabs(),this.active_tab=0,this.active_doc_tab=null}),this.$bus.on("user-profile",e=>{this.data=[e],this.filterItems()}),this.persistentTabs&&this.getTabs(),this.persistentDocTabs&&this.getDocTabs(),this.$bus.on("open-emergency-tab",e=>{this.openEmergencyTab(e)}),this.$bus.on("confirm-close-emergency-pass",e=>{this.loading_patient_page_bool=!1,this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save"),this.$bus.emit("ended-attendance");let t=this.persistentEmergencyTabs.indexOf(e);this.persistentEmergencyTabs.splice(t,1),this.persistentEmergencyTabs.length>0&&localStorage.setItem("emergencyList",JSON.stringify(this.persistentEmergencyTabs)),this.clearEmergencyTabs(),this.active_tab=0,this.active_emergency_tab=null,this.$store.state.Data.CaseAttendance&&this.$store.state.Data.CaseAttendance.info&&this.$store.state.Data.CaseAttendance.info.case_attendance_id&&localStorage.removeItem("attendance.original_doctor_"+this.$store.state.Data.CaseAttendance.info.case_attendance_id)}),this.$bus.on("open-aso-tab",e=>{if(this.persistentDocTabs&&this.persistentDocTabs.length>=1)return this.$bus.emit("open-tabs-modal"),void this.$bus.emit("stop-access-attandance-load");this.openAsoTab(e)}),this.$bus.on("confirm-close-aso-pass",e=>{this.loading_patient_page_bool=!1,this.handleCloseAsoTab(e)}),this.$bus.on("change-attend-tab-to-history",()=>{this.changeSubTab({item:"hist"})}),this.getEmergencyTabs(),this.getEmergencyPatientName(),this.getAsoTabs(),this.getAsoPatientName(),this.getClassification(),this.getContactTimes(),this.getCivilStates(),this.getScholarships(),this.getDeficiencies(),this.getDisability()},beforeDestroy(){this.$bus.off("toggle-edit-history"),this.$bus.off("open-history-mode"),this.$bus.off("open-patient-page"),this.$bus.off("open-triage-page"),this.$bus.off("tmp-show-history"),this.$bus.off("close-temp-data-tab"),this.$bus.off("confirm-close-patient-dialog"),this.$bus.off("user-profile"),this.$bus.off("open-emergency-tab"),this.$bus.off("confirm-close-emergency-pass"),this.$bus.off("open-aso-tab"),this.$bus.off("confirm-close-aso-pass"),this.$bus.off("change-attend-tab-to-history"),this.$root.$off("toggle-loading",this.toggleLoading)},methods:{...Object(K["c"])("Data/CaseAttendance",["setCertificationPending"]),toggleLoading(e){this.showLoading=!!e},getLocalTime(e){const[t,a,n]=e.split(":"),i=new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),t,a,n)),s=new Date(i),o=s.getDate().toString().padStart(2,"0"),r=(s.getMonth()+1).toString().padStart(2,"0"),l=s.getFullYear(),c=s.getHours().toString().padStart(2,"0"),d=s.getMinutes().toString().padStart(2,"0");return`${o}/${r}/${l} ${c}:${d}`},getFormattedDateTime(e,t){const[a,n,i]=e.split("-"),[s,o,r]=t.split(":"),l=new Date(Date.UTC(a,n-1,i,s,o,r)),c=new Date(l),d=c.getDate().toString().padStart(2,"0"),m=(c.getMonth()+1).toString().padStart(2,"0"),u=c.getFullYear().toString().slice(2),A=c.getHours().toString().padStart(2,"0"),_=c.getMinutes().toString().padStart(2,"0"),E=`${d}/${m}/${u}`,I=`${A}:${_}`;return`${E} - ${I}`},getClassification(){Qt.getClassification().then(e=>{let t=e.data.sort((e,t)=>e.urgency_level-t.urgency_level);this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_CLASSIFICATIONS,t)}).catch(e=>{console.error(e)})},getContactTimes(){JE.getMemberContactTimes().then(e=>{this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_CONTACT_TIMES,e.data)}).catch(e=>{console.error(e)})},getCivilStates(){JE.getCivilStates().then(e=>{this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_CIVIL_STATES,e.data)}).catch(e=>{console.error(e)})},getScholarships(){JE.getScholarships().then(e=>{this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_SCHOLARSHIPS,e.data)}).catch(e=>{console.error(e)})},getDeficiencies(){JE.getDeficiencies().then(e=>{this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_DEFICIENCIES,e.data)}).catch(e=>{console.error(e)})},getDisability(){JE.getDisability().then(e=>{this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_DISABILITY,e.data)}).catch(e=>{console.error(e)})},changeTab(e){"attend"==e.list?this.active_tab=e.tab:this.active_tab=null,"emergency-pass"==e.list?this.active_emergency_tab=e.tab:this.active_emergency_tab=null,"aso-pass"==e.list?this.active_aso_tab=e.tab:this.active_aso_tab=null,"patient"==e.list?(this.active_sub_tab=e.tab,"pat"==this.display?this.display="pat":this.display="hist",this.tabClick("spat",200),this.name=e.name):(this.active_sub_tab=null,"pat"==this.display?this.display="pat":this.display="hist"),"doctor-patient"==e.list?(this.active_doc_tab=e.tab,this.name=e.name):this.active_doc_tab=null},changeSubTab(e){this.active_history="hist"===e.item,this.display=e.item,this.active_history||this.closeHistoryMode(),this.$bus.emit("check-certify-pending"),this.$bus.emit("change-sub-tab-"+e.item)},closeHistoryMode(){this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_HISTORY_MODE,{value:!1})},closeTab(e){let t={dialog:!0,item:"patient",data:e};this.$store.dispatch(this.$consts.SCREENING_ACTIONS.CLEAR),this.$bus.emit("close-patient-dialog",t),this.$bus.emit("restart-queue-update")},closeDocAttendTab(e){let t={dialog:!0,item:"patient",data:e};this.active_history?this.$bus.emit("close-patient-dialog",t):(this.tempData=e,1!==this.$store.state.Data.CaseAttendance.info.program_step?this.$bus.emit("close-temp-data-tab"):this.$bus.emit("show-close-tab-warn"))},closeEmergencyTab(e){let t={dialog:!0,item:"emergencyPass",data:e};this.$bus.emit("close-emergency-pass-dialog",t),this.$bus.emit("restart-queue-update")},closeAsoTab(e){let t={dialog:!0,item:"asoPass",data:e};this.$bus.emit("close-aso-pass-dialog",t)},filterItems(){this.userList=this.data.filter((e,t)=>this.data.indexOf(e)>=t)},filterEmergencyItems(){this.emergencyList=this.emergencyTabs.filter((e,t)=>this.emergencyTabs.indexOf(e)>=t)},filterAsoItems(){this.asoList=this.asoTabs.filter((e,t)=>this.asoTabs.indexOf(e)>=t)},persistTabs(){this.persistentTabs=localStorage.setItem("userList",JSON.stringify(this.userList))},persistDocTabs(){this.persistentDocTabs=localStorage.setItem("userList",JSON.stringify(this.userList))},persistEmergencyTabs(){this.persistentEmergencyTabs=localStorage.setItem("emergencyList",JSON.stringify(this.emergencyList))},persistAsoTabs(){this.persistentAsoTabs=localStorage.setItem("asoList",JSON.stringify(this.asoList))},getTabs(){this.persistentTabs=JSON.parse(localStorage.getItem("userList"))},getDocTabs(){this.persistentDocTabs=JSON.parse(localStorage.getItem("userList"))},getEmergencyTabs(){this.persistentEmergencyTabs=JSON.parse(localStorage.getItem("emergencyList"))},getAsoTabs(){this.persistentAsoTabs=JSON.parse(localStorage.getItem("asoList"))},clearUserTabs(){this.persistentTabs&&0==this.persistentTabs.length&&(localStorage.removeItem("userList"),this.userList=[],this.data=[]),this.persistentDocTabs&&0==this.persistentDocTabs.length&&(localStorage.removeItem("userList"),this.userList=[],this.data=[])},clearEmergencyTabs(){this.persistentEmergencyTabs&&0==this.persistentEmergencyTabs.length&&(localStorage.removeItem("emergencyList"),this.emergencyList=[],this.emergencyTabs=[])},clearAsoTabs(){this.persistentAsoTabs&&0==this.persistentAsoTabs.length&&(localStorage.removeItem("asoList"),this.asoList=[],this.asoTabs=[])},tabClick(e,t){"doc-patient"==e&&(this.showLoading=!1),setTimeout(()=>{document.getElementById(e).click()},t)},openTabByAttendance(e){this.active_triage=!0,this.data=[e],this.filterItems(),this.persistTabs(),this.getTabs(),this.changeTab({tab:1,list:"patient"}),this.display="pat",this.tabClick("patient",500)},redirectDoctorToAttendance(e,t){let a=this.$store.state.Data.User.info.user_info.user_type;if("MEDICAL"!==a&&"EXTERNAL_MEDICAL"!==a&&"OPERATIONAL"!==a||!0!==Ge.roleCanAccess("MEDICAL",t))"OPERATIONAL"===a&&!0===Ge.roleCanAccess("OPERATIONAL",t)||"SUPER_ADMIN"===a&&!0===Ge.roleCanAccess("SUPER_ADMIN",t)?(this.data=[e],this.filterItems(),this.persistDocTabs(),this.getDocTabs(),this.changeTab({tab:1,list:"patient"}),"pat"==this.display?this.display="pat":this.display="hist",this.tabClick("doc-patient",500),this.$bus.emit("stop-loading-attend")):(this.$bus.emit("stop-access-attandance-load"),this.$bus.emit("open-snackbar",{message:"problem_accessing_attendance"}));else{if(t===this.$consts.QUEUE_ATTENDANCE_STATUS.RESERVED&&e.attendant_id!=this.$store.state.Data.User.info.user_info.id&&e.doctor_id!=this.$store.state.Data.User.info.user_info.id)return console.log("Is already Reserved"),this.$bus.emit("stop-access-attandance-load"),console.log("estou vindo do tabs"),void this.$bus.emit("open-snackbar",{message:"attendance_already_reserved",origin:"tabs"});if(t==this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING||t==this.$consts.QUEUE_ATTENDANCE_STATUS.CERTIFICATION_PENDING)return this.data=[e],this.filterItems(),this.persistDocTabs(),this.getDocTabs(),this.changeTab({tab:1,list:"patient"}),"pat"==this.display?this.display="pat":this.display="hist",this.tabClick("doc-patient",500),t==this.$consts.QUEUE_ATTENDANCE_STATUS.CERTIFICATION_PENDING&&this.setCertificationPending({certification_pending:!0}),void this.$bus.emit("stop-loading-attend");e.action&&"cancel"===e.action||(console.log("Changing to reserved"),Ge.changeStatus({case_attendance_id:e.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.RESERVED}).catch(e=>{401==e.code&&this.$bus.emit("logout"),console.error(e)})),this.data=[e],this.filterItems(),this.persistDocTabs(),this.getDocTabs(),this.changeTab({tab:1,list:"patient"}),"pat"==this.display?this.display="pat":this.display="hist",this.tabClick("doc-patient",500)}},openTabByDoctor(e){if(this.checkingStatusLoading)return!0;this.checkingStatusLoading=!0,Ge.getStatus({case_attendance_id:e.case_attendance_id}).then(t=>{let a=t.data.status.id,n=a==this.$consts.QUEUE_ATTENDANCE_STATUS.RESERVED||a==this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDING||a==this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING||a==this.$consts.QUEUE_ATTENDANCE_STATUS.PATIENT_CANCELED;this.$store.state.Data.FeatureFlag.FEATURE_AUTO_SERVICE_QUEUE&&(n=a==this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDING||a==this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING||a==this.$consts.QUEUE_ATTENDANCE_STATUS.PATIENT_CANCELED),n?Ge.get({case_attendance_id:e.case_attendance_id}).then(t=>{this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_IS_UNIMED_SOL,t.data.is_unimed_sol),null!=t.data.doctor_id&&t.data.doctor_id!=this.$store.state.Data.User.info.user_info.id?this.$bus.emit("stop-access-attandance-load"):e.nursequeue?this.redirectDoctorToAttendance(e,a):(this.$store.dispatch(this.$consts.QUEUE_ACTIONS.SET_INCOMING_QUEUE,{}),this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,e.patient_info),Ge.transferAttendance({case_attendance_id:e.case_attendance_id,user_id:this.$store.state.Data.User.info.user_info.id}).then(()=>{this.redirectDoctorToAttendance(e,a)}).catch(e=>{console.log("[INCEPTION] Atendimento j
(function(e){function t(t){for(var n,o,r=t[0],l=t[1],c=t[2],m=0,u=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},i={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0159":function(e,t,a){},"015d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAADZJREFUSMdjYBgFo2AUjDDw////hv///3fQ0nAYoK4laIZT1xIchlPHEgKG0ya4RsEoGAWkAwDiA3K7VrwhygAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNC0wMlQyMTo1OTo1OSswMDowMA6Wn2QAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDQtMDJUMjE6NTk6NTkrMDA6MDB/yyfYAAAAKHRFWHRzdmc6YmFzZS11cmkAZmlsZTovLy90bXAvbWFnaWNrLUwzOTlQQ2Fw1Jr0kQAAAABJRU5ErkJggg=="},"01c9":function(e,t,a){e.exports=a.p+"img/ic_perfil_sair.d4fcc2c4.svg"},"02b8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{fill:"#ffffff",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px"}},[t("path",{attrs:{d:"M 6 2 C 4.9057453 2 4 2.9057453 4 4 L 4 20 C 4 21.094255 4.9057453 22 6 22 L 18 22 C 19.094255 22 20 21.094255 20 20 L 20 8 L 14 2 L 6 2 z M 6 4 L 13 4 L 13 9 L 18 9 L 18 20 L 6 20 L 6 4 z M 8 12 L 8 14 L 16 14 L 16 12 L 8 12 z M 8 16 L 8 18 L 16 18 L 16 16 L 8 16 z"}})])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"02f5":function(e,t,a){"use strict";a("ed4b")},"0372":function(e,t,a){"use strict";a("bace")},"03c5":function(e,t,a){"use strict";a("e080")},"0408":function(e,t,a){"use strict";a("961b")},"041c":function(e,t,a){"use strict";a("f859")},"044f":function(e,t,a){},"0469":function(e,t,a){},"0477":function(e,t,a){"use strict";a("31fd")},"0492":function(e,t,a){},"0599":function(e,t,a){"use strict";a("c5ee")},"05bd":function(e,t,a){},"05fb":function(e,t,a){},"06cd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23.45",height:"31.232",viewBox:"0 0 23.45 31.232"}},[t("g",{attrs:{id:"ic_form_excluir",transform:"translate(-1192.74 -5.482)"}},[t("path",{attrs:{id:"Caminho_1078","data-name":"Caminho 1078",d:"M1195.586,36.472a3.284,3.284,0,0,1-.908-.878l-.424-.636V24.77c0-10.112,0-10.173-.394-10.294-.726-.242-1.12-1.18-1.12-2.756a3.054,3.054,0,0,1,.439-2.088c.606-.924,1.317-1.09,4.5-1.106l2.77-.014.106-.788a2.659,2.659,0,0,1,1.286-2,13.211,13.211,0,0,1,5.284.046,1.98,1.98,0,0,1,1.136,1.922v.788l3.164.06c2.936.06,3.224.106,3.769.5.788.56,1.075,1.468.984,3.1-.076,1.257-.12,1.378-.787,1.984l-.7.636-.016,9.884c0,7.146-.076,10.067-.228,10.537a2.541,2.541,0,0,1-.878,1.09l-.636.438h-8.446c-6.374,0-8.554-.06-8.9-.242Zm17.288-1.574c.272-.258.3-1.378.258-10.173l-.046-9.87-8.658-.046-8.66-.045v9.99c0,7.524.06,10.052.228,10.219s2.3.226,8.4.226c7.206,0,8.221-.03,8.478-.3ZM1199.3,33.444c-.288-.212-.318-.894-.273-8.448.046-7.584.076-8.22.394-8.416a.523.523,0,0,1,.652,0c.318.2.332.832.378,8.356.046,7.221.015,8.19-.242,8.448-.364.363-.484.378-.908.06Zm4.738,0c-.3-.212-.318-.894-.272-8.448.044-7.584.075-8.22.378-8.416a.544.544,0,0,1,.666,0c.3.2.332.832.378,8.356.046,7.221.016,8.19-.258,8.448-.348.363-.469.378-.892.06Zm4.738.03c-.3-.166-.334-.786-.334-8.492V16.656l.516-.122c1-.257,1-.166,1,8.554,0,7.478-.014,7.992-.332,8.28-.409.364-.409.364-.848.106Zm5.692-20.452a2.784,2.784,0,0,0,.228-1.316c0-1.786.65-1.68-10.34-1.68-8.387,0-9.537.045-9.794.3a3.538,3.538,0,0,0-.076,2.694c.332.334,19.648.334,19.982,0Zm-7.72-5.04c0-.864-.288-.984-2.392-.984-1.726,0-1.968.045-2.15.378a1.869,1.869,0,0,0-.2.756c0,.364.106.379,2.376.379h2.362Z",transform:"translate(0 0)",fill:"#00b5e2"}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"06df":function(e){e.exports=JSON.parse('{"data":[{"id":1,"cid_group_id":1,"code":"A00","name":"C
 liberando canal."),this.$bus.emit("open-snackbar",{message:"attendance_already_reserved",origin:"start_attendance"}),this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),Ke.eventEmit({channel_name:a,event_name:this.$consts.SOCKET_EVENTS.ATTENDANCE_UNLOCKED,event:{case_attendance_id:e,unlocked_by:t}}),this.loading=!1)}).catch(n=>{console.error("[START_ATTENDANCE] Erro ao validar atendimento:",n),Ke.eventEmit({channel_name:a,event_name:this.$consts.SOCKET_EVENTS.ATTENDANCE_UNLOCKED,event:{case_attendance_id:e,unlocked_by:t}});let i="error_validating_attendance_start_attendance",s=!0;n&&("NETWORK_ERROR"===n.code||n.message&&n.message.includes("Network Error"))?(i="network_error_try_again",s=!0):n&&("ECONNABORTED"===n.code||n.message&&n.message.includes("timeout"))?(i="timeout_error_try_again",s=!0):n&&n.response&&n.response.status>=500?(i="server_error_try_again",s=!0):n&&n.response&&(401===n.response.status||403===n.response.status)?(i="authorization_error_login_again",s=!1,this.$store.dispatch("Auth/logout")):n&&n.response&&409===n.response.status&&(i="attendance_already_reserved",s=!0),this.$bus.emit("open-snackbar",{message:i,origin:"start_attendance",canRetry:s,action:s?"retry":null}),this.loading=!1,this.message="start_attendance",this.snackbar=!1,this.disabled=!1,s&&(this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save")),this.$bus.emit("restart-queue-update")})},transferAttendance(){Ge.transferAttendance({case_attendance_id:this.attendanceInformation.case_attendance_id,user_id:this.$store.state.Data.User.info.user_info.id}).then(e=>{this.disabled=!1,this.snackbar=!1,this.hasVideo?this.cancelDisable=!0:this.changeStatusToAttending(),this.$store.state.Data.CaseAttendance.info.status_id!=this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING?this.$bus.emit("reserve-room"):(this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save"),this.$bus.emit("user-left-room"))}).catch(e=>{this.cancelAttendance(),console.error(e)}).finally(()=>{this.message="start_attendance",this.loading=!1})},changeStatusToAttending(){let e=!0;Ge.get({case_attendance_id:this.attendanceInformation.case_attendance_id}).then(t=>{t.data.doctor_id!=this.$store.state.Data.User.info.user_info.id&&t.data.attendant_id!=this.$store.state.Data.User.info.user_info.id?(e=!1,this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),this.inception=!0,this.showAlertMessageAndClose(this.$t("patient.attendance_patient_already_in_attending"))):Ge.changeStatus({case_attendance_id:this.attendanceInformation.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDING}).then(e=>{}).catch(e=>{this.showAlertMessageAndClose("Ocorreu um erro ao transferir o atendimento")})})},checkAttendanceStatus(){this.checkingLoading||(this.checkingLoading=!0,Ge.getStatus({case_attendance_id:this.attendanceInformation.case_attendance_id}).then(e=>{switch(e.data.status.id){case this.$consts.QUEUE_ATTENDANCE_STATUS.SCHEDULE_PENDING:this.showAlertMessageAndClose(this.$t("patient.attendance_schedule_pending"));break;case this.$consts.QUEUE_ATTENDANCE_STATUS.ENDED:case this.$consts.QUEUE_ATTENDANCE_STATUS.PATIENT_CANCELED:this.showAlertMessageAndClose(this.$t("patient.attendance_patient_canceled"));break;case this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDANT_CANCELED:this.showAlertMessageAndClose(this.$t("patient.attendance_attendant_canceled"));break;case this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDED:this.$bus.emit("user-left-room"),this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save"),this.stopAttendanceCheck=!0;break;case this.$consts.QUEUE_ATTENDANCE_STATUS.OPENED:break;default:Ge.get({case_attendance_id:this.attendanceInformation.case_attendance_id}).then(e=>{e.data.doctor_id!=this.$store.state.Data.User.info.user_info.id&&e.data.attendant_id!=this.$store.state.Data.User.info.user_info.id&&(this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),this.inception=!0,this.showAlertMessageAndClose(this.$t("patient.attendance_patient_already_in_attending"))),null!=e.data.transfered_by&&e.data.transfered_to==this.$store.state.Data.User.info.user_info.name&&this.$bus.emit("open-transfered-snackbar",{username:e.data.transfered_by})});break}}).finally(()=>{this.checkingLoading=!1}))},getAttendanceScreening(){Ge.getAttendanceScreening({case_attendance_id:this.attendanceInformation.case_attendance_id}).then(e=>{this.$bus.emit("receive-screening-data",e.data.triagem_enfermagem[0])}).catch(e=>{this.console.error("Ocorreu um erro ao buscar os atendimentos.")})},getProgramMap(e){let t=this.$store.state.Data.User.token,a={program_id:e,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BRICKS,a).then(e=>{let t=this.attendanceInformation.program_step,a=[],n=null;this.careType=e.data.program_info.care_type;for(let i in e.data.product_info){let s=e.data.product_info[i];s.step==t&&(a=s.bricks,n=s.name,this.current_product_id=s.id)}if(2==t&&67==e.data.program_id){let e=["emr_desfecho_psicologico","conclusao_atendimento"];for(let t in a)e.includes(t)||delete a[t]}if(2==t&&68==e.data.program_id){let e=["emr_desfecho_psicologico","chat_app"];for(let t in a)e.includes(t)&&delete a[t]}switch(this.programList=e.data.program_list,this.productBlocks=e.data.product_brick_info,this.callReasonInfo=e.data.call_reason_info,this.bricks_info=a,this.triageIds=this.getProductIds(),this.blocks=this.getTriageBlocks(),this.bricks=[],this.bricks=this.getBrickList(),this.bricks.forEach(e=>{"atendimento_video"==e.key&&(this.hasVideo=!0)}),this.processingData=!1,this.autoQueueFlag&&(this.$bus.emit("start-inactive-timer"),this.totalAttendancesOnQueue=this.$store.state.Data.General.numberOfAttendances,1==this.totalAttendancesOnQueue&&this.$bus.emit("open-last-attendance-on-queue-modal")),this.message="start_attendance",this.getProgramBricksData(),this.getCallReasonsCompany(),parseInt(this.$store.state.Data.CaseAttendance.info.status_id)){case this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING:case this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDING:case this.$consts.QUEUE_ATTENDANCE_STATUS.CERTIFICATION_PENDING:this.startAttendance();break}}).catch(()=>{})},getProductIds(){if(this.triageInfo){let e=this.triageInfo.map(e=>e.product_id);return e}return[this.current_product_id]},getTriageBlocks(){let e=this.triageIds.map(e=>this.productBlocks[e]);return e},getBrickList(){let e=[];for(let t in this.bricks_info)e.push(this.bricks_info[t]);return e},searchBrickList(e){let t=this.bricks.filter(t=>t.key==e);return t},sendBrickData(){this.$bus.emit("brick-list",this.bricks)},getProgramBricksData(){let e=this.$store.state.Data.User.token,t={case_attendance_id:this.attendanceInformation.case_attendance_id,token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BRICKS_DATA,t).then(e=>{this.brickDetails=e.data,this.sendBrickData()}).catch(e=>{})},getCallReasonsCompany(){let e=this.$store.state.Data.User.token,t={company_id:this.item.company_id,token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_REASONS_COMPANY,t).then(e=>{this.callReasonInfo=e.data.call_reason_info}).catch(e=>{})},sendBrickDataToComponent(e,t){this.$bus.emit(t,e)},setDoctorStreamConnected(e){let t=this.$store.state.Data.User.token,a={case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,patient_have_connected:this.doctor_have_connected,stream_type:"doctor",token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.SET_DOCTOR_STREAM_CONNECTED,a).then(e=>{this.doctor_have_connected&&!this.hasVideo&&(this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save"))}).catch(e=>{console.error(e)}).finally(()=>{this.$bus.emit("socket-doctor-connected-status",this.doctor_have_connected)})}},computed:{...Object(K["b"])("Data/CaseAttendance",{certificationPending:"getCertificationPending"}),hasConcludeComponent(){let e=[48,57];return this.attendance_proccess&&"PROGRAM"==this.saveType&&!e.includes(this.item.program_id)},featureEnabled(){return this.isFeatureEnabled}}},mS=dS,uS=(a("5f3f"),Object(I["a"])(mS,uI,AI,!1,null,null,null)),AS=uS.exports,_S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emergency"},[t("Patient",{attrs:{item:e.item}}),t("Triage",{attrs:{bricks:e.bricks,item:e.item}}),e.callReasonInfo&&e.callReasonInfo.length>0?t("CallReason",{attrs:{callReasonInfo:e.callReasonInfo}}):e._e(),e.item?t(ce["a"],{staticClass:"slider-container"},[t(oe["a"],{staticClass:"pr-0",attrs:{cols:"12",md:"6"}},[t("ClassificationSlider",{attrs:{level:0}})],1),t(oe["a"],{staticClass:"pr-0",attrs:{cols:"12",md:"6"}},[t("PrioritySlider",{attrs:{level:0}})],1)],1):e._e(),t("Programs",{attrs:{programList:e.programList}}),t("ProgramDetails"),t("TriageSaveComponent",{attrs:{item:e.item}})],1)},ES=[],IS={props:["item"],components:{Patient:$s,Programs:Do,ClassificationSlider:Xo,PrioritySlider:ir,Triage:so,TriageSaveComponent:vo,CallReason:Oo,ProgramDetails:_r},data(){return{callReasonInfo:null,programList:[],triage:!0,triageInfo:null,triageIds:[],productBlocks:null,blocks:[],bricks:[]}},created(){this.getCompanyMap(this.item.company_id)},methods:{getCompanyMap(e){this.triageInfo=this.$store.state.Data.Screening.triageInfo,this.programList=[],this.$store.state.Data.Screening.programList.forEach(e=>{R.ALLOWEDPROGRAMS.includes(e.program_info.name)&&this.programList.push(e.program_info)}),this.productBlocks=this.$store.state.Data.Screening.productBlocks,this.callReasonInfo=this.$store.state.Data.Screening.callReasonInfo,this.bricks=this.getBrickList(),setTimeout(()=>{this.sendBrickData()},500)},getBrickList(){let e=0===Object.keys(this.triageInfo.product_brick_info).length?null:Object.keys(this.triageInfo.product_brick_info)[0];return e?this.triageInfo.product_brick_info[e].brick_list:[]},sendBrickData(){this.$bus.emit("brick-list-screening",this.bricks)}}},hS=IS,OS=(a("5061"),Object(I["a"])(hS,_S,ES,!1,null,"1f57c63e",null)),pS=OS.exports,SS=function(){var e=this,t=e._self._c;return t("div",[t("Patient",{attrs:{item:e.item}}),t("Triage",{attrs:{item:e.item}}),t("Reasons",{attrs:{item:e.item}}),t("SaveComponent",{attrs:{item:e.item}})],1)},CS=[],TS=function(){var e=this,t=e._self._c;return t("div",{staticClass:"patient-data2"},[t("div",{staticClass:"patient-section mt-10 pl-3 pb-3"},[t("div",{staticClass:"mb-2"},[t("span",{staticClass:"patient-subtitle"},[e._v(e._s(e.$t("patient.patient_data"))+" ")])]),t("div",{staticClass:"d-flex ml-3"},[t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.name")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"sub-item"},[e._v(e._s(e.name))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.birthdate")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"sub-item"},[e._v(e._s(e._f("formatDateFilter")(e.birthdate)))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item text-uppercase"},[e._v(e._s(e.$t("patient.cpf")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"sub-item"},[e._v(e._s(e._f("formatCpfFilter")(e.cpf)))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.main_phone")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"sub-item"},[e._v(e._s(e._f("formatPhoneFilter")(e.phone)))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.gender")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"sub-item"},[e._v(e._s(e.gender))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.client")))]),t("div",{staticClass:"sub-general d-flex"},[t("span",{staticClass:"sub-item"},[e._v(e._s(e.client))])])])]),t("div",{staticClass:"d-flex ml-3"},[t("div",{staticClass:"d-flex mt-8 edit"},[t("div",[t(le["a"],{staticClass:"icon",attrs:{src:a("9b5d")}})],1),t("div",{staticClass:"edit"},[t("span",{staticClass:"sub-edit"},[e._v(e._s(e.$t("patient.edit_patient")))])])])])])])},RS=[],DS={props:["item"],data(){return{userInfo:[],name:"",birthdate:"",cpf:"",gender:"",phone:"",client:null,insuranceInfo:[],insurer:"",company:"",year:"",userData:null,clientName:"",asoId:null}},created(){this.$bus.on("send-edited-data",e=>{this.userData=e,this.getPatient(e.id)}),this.getPatient(this.item.asoId)},methods:{getPatient(e){let t=this.$store.state.Data.User.token,a=e,n={token:t,id:a};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_ASO_PASS,n).then(e=>{this.name=e.data.name,this.birthdate=e.data.birthdate,this.cpf=e.data.cpf,this.gender=e.data.gender,this.phone=e.data.phone,this.client=e.data.company_info.trading_name,this.clientName=this.client.name}).catch(e=>{})},editPatient(){let e={dialog:!0,name:this.name,birthdate:this.birthdate,cpf:this.cpf,selectedGender:this.gender,phone:this.phone,client:this.client,id:this.item.emergency_member_id};this.$bus.emit("edit-aso-pass",e)}}},gS=DS,LS=(a("7fc3"),Object(I["a"])(gS,TS,RS,!1,null,"5d39b0ba",null)),fS=LS.exports,NS=function(){var e=this,t=e._self._c;return t("div",{staticClass:"trr mt-6"},[t("div",{staticClass:"triage-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("patient.conducts")))]),e._v(e._s(e.$t("patient.nursing"))+"\n    ")]),t("div",{staticClass:"textareas d-flex"},[t("div",{staticClass:"mt-4 mr-5 areas"},[t(Ni["a"],{staticClass:"textarea-data",attrs:{"error-messages":e.summaryErrors,height:"100px",label:e.$t("patient.clinical_summary"),outlined:"","no-resize":""},on:{change:function(t){return e.sendDataToComponent()},blur:function(t){return e.$v.summary.$touch()}},model:{value:e.summary,callback:function(t){e.summary="string"===typeof t?t.trim():t},expression:"summary"}})],1),t("div",{staticClass:"mt-4 areas"},[t(Ni["a"],{staticClass:"textarea-data",attrs:{"error-messages":e.screeningErrors,height:"100px",label:e.$t("patient.triage"),outlined:"","no-resize":""},on:{change:function(t){return e.sendDataToComponent()},blur:function(t){return e.$v.triage.$touch()}},model:{value:e.triage,callback:function(t){e.triage="string"===typeof t?t.trim():t},expression:"triage"}})],1)])])},kS=[],vS={data(){return{summary:"",triage:"",disabled:!1}},created(){},methods:{sendDataToComponent(){let e={clinical_summary:this.summary,screening:this.triage};this.summary&&this.triage?this.disabled=!0:this.disabled=!1,this.$bus.emit("aso-triage-data",e),this.$bus.emit("aso-enable-save-from-triage",this.disabled)}},validations:{summary:{required:Ae["required"]},triage:{required:Ae["required"]}},computed:{summaryErrors(){const e=[];return this.$v.summary.$dirty?(!this.$v.summary.required&&e.push(this.$t("access_controls.required")),this.sendDataToComponent(),e):e},screeningErrors(){const e=[];return this.$v.triage.$dirty?(!this.$v.triage.required&&e.push(this.$t("access_controls.required")),this.sendDataToComponent(),e):e}}},bS=vS,MS=(a("2f11"),Object(I["a"])(bS,NS,kS,!1,null,null,null)),PS=MS.exports,US=function(){var e=this,t=e._self._c;return t("div",{staticClass:"save-patient-component mb-8",class:{"disabled-events":!e.triageOk||!e.programsOk}},[e.success?t("div",{staticClass:"pass-successful"},[e._v(e._s(e.$t("patient.pass_successful")))]):e._e(),t(r["a"],{staticClass:"save-bt",attrs:{color:"primary"},on:{click:function(t){return t.preventDefault(),e.getDataFromComponents()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)},yS=[],$S={props:["item"],data(){return{attendance:null,return_day:null,return_time:null,observations:null,screening:"",clinical_summary:"",triageOk:!1,programsOk:!1,success:!1}},created(){this.$bus.on("aso-program-data",e=>{this.attendance=e.attendance,this.return_day=e.best_return_day,this.return_time=e.return_time,this.observations=e.observations}),this.$bus.on("aso-triage-data",e=>{this.screening=e.screening,this.clinical_summary=e.clinical_summary}),this.$bus.on("aso-enable-save-from-triage",e=>{this.triageOk=e}),this.$bus.on("aso-enable-save-from-programs",e=>{this.programsOk=e})},methods:{getDataFromComponents(){let e={attendance:this.attendance,best_return_day:this.return_day,return_time:this.return_time,observations:this.observations,screening:this.screening,clinical_summary:this.clinical_summary};this.saveEmergencyPass(e)},saveEmergencyPass(e){this.success=!1;let t=e;t.emergency_member_id=1,t.token=this.$store.state.Data.User.token,t.is_aso=!0,this.$store.dispatch(this.$consts.USER_ACTIONS.SAVE_EMERGENCY_PROGRAM,t).then(e=>{this.success=!0}).catch(e=>{console.error(e)})}}},xS=$S,VS=(a("f34f"),Object(I["a"])(xS,US,yS,!1,null,"0441fd96",null)),GS=VS.exports,FS={props:["item"],components:{Patient:fS,Triage:PS,SaveComponent:GS,Reasons:Oo},data(){return{}}},BS=FS,wS=Object(I["a"])(BS,SS,CS,!1,null,null,null),HS=wS.exports,qS=function(){var e=this,t=e._self._c;return t("div",{staticClass:"health-history-main"},[e.APIMedList.length>0?t("div",{staticClass:"list-overlay",on:{click:e.clearMedList}}):e._e(),t("div",{staticClass:"health-section"},[t("div",{staticClass:"health-section-title"},[e._v(e._s(e.$t("health_history.summary")))]),t("div",{staticClass:"d-flex"},[t(Ni["a"],{attrs:{readonly:!e.editMode,disabled:!e.editMode,height:"100px",label:e.$t("health_history.summary"),outlined:"","no-resize":""},model:{value:e.summary,callback:function(t){e.summary=t},expression:"summary"}})],1)]),t("div",{staticClass:"health-section"},[t("div",{staticClass:"health-section-title d-flex"},[e._v(e._s(e.$t("health_history.points")))]),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###"],expression:"['###']"}],staticClass:"small-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.pamax"),height:"42px",outlined:""},model:{value:e.pamax,callback:function(t){e.pamax="string"===typeof t?t.trim():t},expression:"pamax"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###"],expression:"['###']"}],staticClass:"small-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.pamin"),height:"42px",outlined:""},model:{value:e.pamin,callback:function(t){e.pamin="string"===typeof t?t.trim():t},expression:"pamin"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###"],expression:"['###']"}],staticClass:"small-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.fc"),height:"42px",outlined:""},model:{value:e.fc,callback:function(t){e.fc="string"===typeof t?t.trim():t},expression:"fc"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###"],expression:"['###']"}],staticClass:"small-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.fr"),height:"42px",outlined:""},model:{value:e.fr,callback:function(t){e.fr="string"===typeof t?t.trim():t},expression:"fr"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["#####"],expression:"['#####']"}],staticClass:"small-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.glijejum"),height:"42px",outlined:""},model:{value:e.glijejum,callback:function(t){e.glijejum="string"===typeof t?t.trim():t},expression:"glijejum"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["#####"],expression:"['#####']"}],staticClass:"medium-text-field break-line",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.gliposprandial"),height:"42px",outlined:""},model:{value:e.gliposprandial,callback:function(t){e.gliposprandial="string"===typeof t?t.trim():t},expression:"gliposprandial"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["####"],expression:"['####']"}],staticClass:"medium-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.circabdom"),height:"42px",outlined:""},model:{value:e.circabdom,callback:function(t){e.circabdom="string"===typeof t?t.trim():t},expression:"circabdom"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###"],expression:"['###']"}],staticClass:"small-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.weight"),height:"42px",outlined:""},on:{change:e.imcCalculator},model:{value:e.weight,callback:function(t){e.weight="string"===typeof t?t.trim():t},expression:"weight"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###"],expression:"['###']"}],staticClass:"small-text-field",attrs:{readonly:!e.editMode,disabled:!e.editMode,label:e.$t("health_history.height"),height:"42px",outlined:""},on:{change:e.imcCalculator},model:{value:e.height,callback:function(t){e.height="string"===typeof t?t.trim():t},expression:"height"}}),t(de["a"],{staticClass:"small-text-field",attrs:{readonly:!0,disabled:!e.editMode,label:e.$t("health_history.imc"),height:"42px",outlined:""},model:{value:e.imc,callback:function(t){e.imc="string"===typeof t?t.trim():t},expression:"imc"}})],1),t("div",{staticClass:"health-section"},[t("div",{staticClass:"health-section-title"},[e._v(e._s(e.$t("health_history.chronicdisease")))]),e._l(e.chronicDiseaseList,(function(a,n){return t("div",{key:n,staticClass:"small-bottom-margin"},["CURRENT"==a.status?t("div",[e._v("\n        "+e._s(a.cid_name)+"\n        "),e.editMode?t(r["a"],{staticClass:"remove-button",attrs:{height:"18px",color:"#dd4433","x-small":""},on:{click:function(t){return e.remove(a)}}},[e._v("\n          X\n        ")]):e._e()],1):e._e()])})),0==e.chronicDiseaseList.length?t("div",{staticClass:"small-bottom-margin"},[e._v("\n      "+e._s(e.$t("health_history.noregisteredchronic"))+"\n    ")]):e._e(),"CHRONIC"==e.currentEditField&&e.editMode?t("div",{staticClass:"mt-5"},[t(se["a"],{staticClass:"sign-input",attrs:{label:e.$t("attendance.cid"),items:e.isSimpleCIDs?e.newFilteredCidList:e.newCidList,"append-icon":"keyboard_arrow_down","item-text":"formattedName","item-value":"id",height:"42px","return-object":"",outlined:""},on:{change:e.checkCid},scopedSlots:e._u([{key:"selection",fn:function(a){return[t("span",{staticClass:"text-color"},[e._v(e._s(a.item.formattedName))])]}},{key:"item",fn:function(a){return[t("span",{staticClass:"primary--text"},[e._v(e._s(a.item.formattedName))])]}}],null,!1,3974186080),model:{value:e.selectedCidId,callback:function(t){e.selectedCidId=t},expression:"selectedCidId"}}),t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.saveChronic()}}},[e._v("\n        "+e._s(e.$t("health_history.save_chronic"))+"\n      ")])],1):e._e(),"CHRONIC"!=e.currentEditField&&e.editMode?t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.setEditField("CHRONIC")}}},[t("span",[e._v(e._s(e.$t("health_history.add_chronic")))])]):e._e()],2),t("div",{staticClass:"health-section"},[t("div",{staticClass:"health-section-title"},[e._v(e._s(e.$t("health_history.allergies")))]),e._l(e.allergyList,(function(a,n){return t("div",{key:n,staticClass:"small-bottom-margin"},["CURRENT"==a.status?t("div",[e._v("\n        "+e._s(a.name)+" "),e.editMode?t(r["a"],{staticClass:"remove-button",attrs:{height:"18px",color:"red","x-small":""},on:{click:function(t){return e.remove(a)}}},[e._v(" X ")]):e._e()],1):e._e()])})),0==e.allergyList.length?t("div",{staticClass:"small-bottom-margin"},[e._v("\n      "+e._s(e.$t("health_history.noregisteredalergy"))+"\n    ")]):e._e(),"ALLERGY"==e.currentEditField&&e.editMode?t("div",{staticClass:"mt-5"},[t(de["a"],{staticClass:"search-input input-history-width",attrs:{label:e.$t("health_history.allergy"),height:"42px",outlined:"",clearable:""},model:{value:e.allergyName,callback:function(t){e.allergyName="string"===typeof t?t.trim():t},expression:"allergyName"}}),t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.saveAllergy()}}},[e._v("\n        "+e._s(e.$t("health_history.save_allergy"))+"\n      ")])],1):e._e(),"ALLERGY"!=e.currentEditField&&e.editMode?t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.setEditField("ALLERGY")}}},[t("span",[e._v(e._s(e.$t("health_history.add_allergy")))])]):e._e()],2),t("div",{staticClass:"health-section"},[t("div",{staticClass:"health-section-title"},[e._v(e._s(e.$t("health_history.medicine")))]),e._l(e.medicineList,(function(a,n){return t("div",{key:n,staticClass:"small-bottom-margin"},["CURRENT"==a.status?t("div",[e._v("\n        "+e._s(a.name)+" "),e.editMode?t(r["a"],{staticClass:"remove-button",attrs:{height:"18px",color:"red","x-small":""},on:{click:function(t){return e.remove(a)}}},[e._v(" X ")]):e._e()],1):e._e()])})),0==e.medicineList.length?t("div",{staticClass:"small-bottom-margin"},[e._v("\n      "+e._s(e.$t("health_history.noregisteredmedicine"))+"\n    ")]):e._e(),"MEDICINE"==e.currentEditField&&e.editMode?t("div",{staticClass:"mt-5"},[t(de["a"],{staticClass:"search-input input-history-width",attrs:{label:e.$t("health_history.medicine"),height:"42px",outlined:"",clearable:""},on:{change:e.getMedicineList},model:{value:e.medicineName,callback:function(t){e.medicineName="string"===typeof t?t.trim():t},expression:"medicineName"}}),e.APIMedList.length>0?t("div",{staticClass:"med-list-container input-history-width"},e._l(e.APIMedList,(function(a,n){return t("div",{staticClass:"med-list-item",on:{click:function(t){return e.addMedicineFromList(a)}}},[e._v("\n          "+e._s(a.Nome)+" - "),t("span",{staticClass:"med-subtitle"},[e._v(e._s(a.Label))])])})),0):e._e(),t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.saveMedicine()}}},[e._v(" "+e._s(e.$t("health_history.save_medicine")))])],1):e._e(),"MEDICINE"!=e.currentEditField&&e.editMode?t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.setEditField("MEDICINE")}}},[t("span",[e._v(e._s(e.$t("health_history.add_medicine")))])]):e._e()],2),t("div",{staticClass:"health-section"},[t("div",{staticClass:"health-section-title"},[e._v(e._s(e.$t("health_history.examList")))]),t($a["a"],{staticClass:"exam-table",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nome")]),t("th",{staticClass:"text-center",attrs:{width:"350"}},[e._v("Resultado")]),t("th",{staticClass:"text-center",attrs:{width:"60"}},[e._v("Data")]),t("th",{staticClass:"text-center",attrs:{width:"40"}},[e._v("Alterado")])])]),e._l(e.examList,(function(a,n){return t("tbody",{key:n,class:{"exam-altered":a.changed}},["CURRENT"==a.status?t("tr",[t("td",[e.editMode?t(r["a"],{staticClass:"remove-button",attrs:{height:"18px",color:"red","x-small":""},on:{click:function(t){return e.remove(a)}}},[e._v(" X ")]):e._e(),t("span",[e._v(e._s(a.name))])],1),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(a.exam_value))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(e.$moment(1e3*a.schedule_date).format("DD/MM/YYYY")))])]),t("td",{staticClass:"text-center",class:{"exam-altered-text":a.changed}},[t("span",{staticClass:"tb-items"},[e._v(e._s(a.changed?"Sim":"N
lida");let o={status:"CURRENT",name:this.examName,schedule_date:n/1e3,exam_value:this.examResult,changed:this.examChanged};this.examList.push(o),this.examName="",this.examDate="",this.examResult="",this.examChanged="",this.currentEditField=""},wantToCancel(){this.confirmCancel=!0},cancelEdit(){this.getHealthHistory(),this.editMode=!1,this.isSimpleCIDs=!0,this.$bus.emit("toggle-edit-history",!1),this.confirmCancel=!1},save(){this.error||(this.error="",this.editMode=!1,this.isSimpleCIDs=!0,this.$bus.emit("toggle-edit-history",!1),this.displayAddMedicine=!1,this.saveHealthHistory())},remove(e,t){e.status="HISTORY"},getHealthHistory(){let e={token:this.$store.state.Data.User.token,member_id:this.item.member_id};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_MEMBER_HEALTH_HISTORY,e).then(e=>{if(!e.data)return this.allergyList=[],this.medicineList=[],this.examList=[],this.chronicDiseaseList=[],this.pamax="",this.pamin="",this.glijejum="",this.gliposprandial="",this.fr="",this.fc="",this.weight="",this.height="",this.circabdom="",this.summary="",void this.imcCalculator();this.health_id=e.data.member_health_profile[0].id,this.allergyList=e.data.member_allergies?e.data.member_allergies:[],this.medicineList=e.data.member_medicines?e.data.member_medicines:[],this.examList=e.data.member_exams?e.data.member_exams:[],e.data.member_pathologies&&e.data.member_pathologies.length>0&&(this.chronicDiseaseList=e.data.member_pathologies.filter((e,t,a)=>t===a.findIndex(t=>t.cid_id===e.cid_id))),this.pamax=e.data.member_health_profile[0].max_blood_pressure?e.data.member_health_profile[0].max_blood_pressure:"",this.pamin=e.data.member_health_profile[0].min_blood_pressure?e.data.member_health_profile[0].min_blood_pressure:"",this.glijejum=e.data.member_health_profile[0].postmeal_glucose?e.data.member_health_profile[0].postmeal_glucose:"",this.gliposprandial=e.data.member_health_profile[0].fasting_glucose?e.data.member_health_profile[0].fasting_glucose:"",this.fr=e.data.member_health_profile[0].respiratory_frequency?e.data.member_health_profile[0].respiratory_frequency:"",this.fc=e.data.member_health_profile[0].heart_rate?e.data.member_health_profile[0].heart_rate:"",this.weight=e.data.member_health_profile[0].weight?e.data.member_health_profile[0].weight:"",this.height=e.data.member_health_profile[0].height?e.data.member_health_profile[0].height:"",this.circabdom=e.data.member_health_profile[0].abdominal_circumference?e.data.member_health_profile[0].abdominal_circumference:"",this.summary=e.data.member_health_profile[0].clinical_summary?e.data.member_health_profile[0].clinical_summary:"",this.imcCalculator()}).catch(e=>{})},saveHealthHistory(){let e={token:this.$store.state.Data.User.token,member_id:this.item.member_id,member_exams:this.examList,member_medicines:this.medicineList,member_allergies:this.allergyList,member_pathologies:this.chronicDiseaseList,member_health_profile:[{max_blood_pressure:this.pamax?this.pamax:0,min_blood_pressure:this.pamin?this.pamin:0,postmeal_glucose:this.glijejum?this.glijejum:0,fasting_glucose:this.gliposprandial?this.gliposprandial:0,respiratory_frequency:this.fr?this.fr:0,heart_rate:this.fc?this.fc:0,weight:this.weight?this.weight:0,height:this.height?this.height:0,abdominal_circumference:this.circabdom?this.circabdom:0,clinical_summary:this.summary?this.summary:0}]};""!=this.health_id&&(e.member_health_profile.id=this.health_id),this.$store.dispatch(this.$consts.USER_ACTIONS.SAVE_MEMBER_HEALTH_HISTORY,e).then(e=>{this.getHealthHistory()}).catch(e=>{})}},computed:{newFilteredCidList(){return this.filteredCid.filter(e=>!this.chronicDiseaseList.find(t=>t.cid_id==e.id))},newCidList(){return this.cidList.filter(e=>!this.chronicDiseaseList.find(t=>t.cid_id==e.id))}}},ZS=KS,QS=(a("3d5e"),Object(I["a"])(ZS,qS,YS,!1,null,"2a3367e2",null)),JS=QS.exports,WS=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"50vw"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"tabs-modal-section"},[t(l["a"],{staticClass:"cert-card-section"},[t(c["c"],{staticClass:"cert-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("attendance.attendances")))]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})]),t("div",{staticClass:"flex-container"},[t("p",{staticClass:"font-desc"},[e._v(e._s(e.$t("attendance.tab_attending")))]),t("div",{staticClass:"button-container"},[t(r["a"],{staticClass:"button",attrs:{color:"primary"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.ok")))])],1)])],1)],1)])],1)},XS=[],zS={data(){return{dialog:!1}},created(){this.$bus.on("open-tabs-modal",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-tabs-modal")},methods:{close(){this.dialog=!1,this.$bus.emit("toggle-loading",!1)}}},eC=zS,tC=(a("0599"),Object(I["a"])(eC,WS,XS,!1,null,"1db7f8b7",null)),aC=tC.exports,nC=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"request-section"},[t(l["a"],{staticClass:"c-card-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("attendance.nav_confirm")))]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),t(c["b"],{staticClass:"card-desc text-justify mb-3"},[e._v(e._s(e.$t("attendance.confirm_description")))]),t(c["a"],{staticClass:"buttons"},[t(r["a"],{staticClass:"primary--text ml-1",attrs:{color:"white",height:"37px",width:"226px",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("attendance.confirm_stop")))]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"226px"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.confirm_close")))])],1)],1)],1)])],1)},iC=[],sC={components:{},data(){return{dialog:!1,item:null,data:null}},created(){this.$bus.on("close-dialog",e=>{this.handleEventBus(e)}),this.$bus.on("close-control-tab",e=>{this.dialog=e.dialog,this.item=e.item}),this.$bus.on("close-new-company-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-edit-company-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-edit-access-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-call-list-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-view-call-list",e=>{this.handleEventBus(e)}),this.$bus.on("close-new-payer-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-patient-dialog",e=>{this.handleEventBus(e)}),this.$bus.on("close-edit-payer-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-emergency-pass-dialog",e=>{this.handleEventBus(e)}),this.$bus.on("close-aso-pass-dialog",e=>{this.handleEventBus(e)}),this.$bus.on("close-new-reason-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-edit-reason-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-new-attendance-center-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-edit-attendance-center-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-new-schedule-external-agent-tab",e=>{this.handleEventBus(e)}),this.$bus.on("close-edit-schedule-external-agent-tab",e=>{this.handleEventBus(e)})},methods:{close(){switch(this.item){case"newCompany":this.$bus.emit("confirm-new-company-close");break;case"editCompany":this.$bus.emit("confirm-close-edit-company-tab",this.data);break;case"editAccess":this.$bus.emit("confirm-close-edit-access",this.data);break;case"callList":this.$bus.emit("confirm-close-call-list",this.data);break;case"patient":this.$bus.emit("socket-doctor-connected-status",!1),this.$bus.emit("confirm-close-patient-dialog",this.data);break;case"viewCallList":this.$bus.emit("confirm-close-view-call-list",this.data);break;case"newPayer":this.$bus.emit("confirm-close-new-payer",this.data);break;case"editPayer":this.$bus.emit("confirm-close-edit-payer",this.data);break;case"emergencyPass":this.$bus.emit("confirm-close-emergency-pass",this.data);break;case"asoPass":this.$bus.emit("confirm-close-aso-pass",this.data);break;case"newReason":this.$bus.emit("confirm-close-new-reason",this.data);break;case"editReason":this.$bus.emit("confirm-close-edit-reason",this.data);break;case"newAttendanceCenter":this.$bus.emit("confirm-close-new-attendance-center",this.data);break;case"editAttendanceCenter":this.$bus.emit("confirm-close-edit-attendance-center",this.data);break;case"newScheduleExternalAgent":this.$bus.emit("confirm-close-new-schedule-external-agent",this.data);break;case"editScheduleExternalAgent":this.$bus.emit("confirm-close-edit-schedule-external-agent",this.data);break;default:this.$bus.emit("confirm-close",this.data);break}this.$bus.emit("close-stream"),this.$bus.emit("end-session"),this.dialog=!1},handleEventBus(e){this.dialog=e.dialog,this.item=e.item,this.data=e.data}}},oC=sC,rC=(a("4537"),Object(I["a"])(oC,nC,iC,!1,null,null,null)),lC=rC.exports,cC=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"523px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"exam-section"},[t(l["a"],{staticClass:"c-alert-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("attendance.nav_confirm")))]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),t(c["b"],{staticClass:"card-desc text-center"},[e._v("\n                "+e._s(e.$t("attendance.cancel_deny"))+"\n            ")]),t(c["a"],{staticClass:"int-button"},[t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"255px"},on:{click:function(t){e.dialog=!1}}},[t("span",[e._v(e._s(e.$t("attendance.ok")))])])],1)],1)],1)])],1)},dC=[],mC={components:{},data(){return{dialog:!1,item:null,data:null}},created(){this.$bus.on("show-close-tab-warn",()=>{this.dialog=!0})},beforeDestroy(){},methods:{close(){this.dialog=!1}}},uC=mC,AC=(a("61ef"),Object(I["a"])(uC,cC,dC,!1,null,null,null)),_C=AC.exports,EC=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"500",height:"300",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header mb-5"},[t("div",{staticClass:"card-header white--text"},[e._v("\n          "+e._s(e.$t("attendance.generate_documents"))+"\n        ")]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.handleClose()}}})])]),t(c["b"],{staticClass:"text-center primary--text"},[e._v("\n        "+e._s(e.$t("attendance.generating_documents_success"))+"\n      ")]),t(c["a"],{staticClass:"pb-5 d-flex justify-center"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary"},on:{click:e.handleClose}},[e._v("\n          "+e._s(e.$t("attendance.ok"))+"\n        ")])],1)],1)],1)],1)},IC=[],hC={data(){return{dialog:!1}},created(){this.$bus.on("open-documents-async-dialog",()=>this.dialog=!0)},beforeDestroy(){this.$bus.off("open-documents-async-dialog")},methods:{handleClose(){this.dialog=!1}}},OC=hC,pC=(a("5b93"),Object(I["a"])(OC,EC,IC,!1,null,"584add74",null)),SC=pC.exports,CC=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{staticClass:"confirmation-modal",attrs:{width:"601",height:"295"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("attendance.warning")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(l["a"],{staticClass:"confirmation-modal pa-10"},[t("div",{staticClass:"confirmation-description-container"},[t("p",{staticClass:"description-color ma-0"},[e._v(e._s(e.$t("attendance.information_saved_description")))])]),t("div",{staticClass:"card-container-btn mt-10"},[t(r["a"],{staticClass:"btn-attribuites btn-confirm",attrs:{color:"#5949A7"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.ok")))])],1)])],1)],1)],1)},TC=[],RC={components:{},data(){return{dialog:!1}},created(){this.$bus.on("open-confirmation-modal",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-confirmation-moda")},methods:{updateSearchQuery(e){this.searchQuery=e},close(){this.dialog=!1}}},DC=RC,gC=(a("c77f"),Object(I["a"])(DC,CC,TC,!1,null,"fa162d7c",null)),LC=gC.exports,fC=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabs-main mt-4"},[e.isManagerQueueList?t("div",[t("FilaDocumentosPendentes"),t("FilaGestao")],1):e.isAutomaticAttendance?t("div",[t("FilaDocumentosPendentes"),t("AutomaticCollapse")],1):e._e()])},NC=[],kC=a("a609"),vC=function(){var e=this,t=e._self._c;return t("div",{staticClass:"section"},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.attendance_list_collapse")))]),e._v("\n    "+e._s(e.$t("attendance.current_attendance"))+"\n  ")]),t("div",{staticClass:"toggle-control"},[t(kC["a"],{staticClass:"animated-toggle",attrs:{mandatory:""},model:{value:e.scheduleSearch,callback:function(t){e.scheduleSearch=t},expression:"scheduleSearch"}},[t("div",{staticClass:"toggle-background",class:{scheduled:"scheduled"===e.scheduleSearch,narrow:"scheduled"===e.scheduleSearch||"pa"===e.scheduleSearch,only:e.collapse_schedule&&!e.collapse_pa&&!e.collapse_all}}),e.collapse_all?t(r["a"],{class:{active:"all"===e.scheduleSearch},attrs:{value:"all",depressed:"",ripple:!1,disabled:"all"===e.scheduleSearch}},[t(at["a"],{attrs:{left:""}},[e._v("mdi-account-group")]),e._v("\n        "+e._s(e.$t("attendance.collapse_attendance_all"))+"\n      ")],1):e._e(),e.collapse_all||e.collapse_schedule?t(r["a"],{class:{active:"scheduled"===e.scheduleSearch},attrs:{value:"scheduled",disabled:"scheduled"===e.scheduleSearch,ripple:!1,depressed:""}},[t(at["a"],{attrs:{left:""}},[e._v("mdi-calendar")]),e._v("\n        "+e._s(e.$t("attendance.collapse_attendance_only_schedule"))+"\n      ")],1):e._e(),e.collapse_pa?t(r["a"],{class:{active:"pa"===e.scheduleSearch},attrs:{value:"pa",depressed:"",disabled:"pa"===e.scheduleSearch,ripple:!1}},[t(at["a"],{attrs:{left:""}},[e._v("mdi-account-group")]),e._v("\n        "+e._s(e.$t("attendance.collapse_attendance_only_pa"))+"\n      ")],1):e._e()],1),t(r["a"],{staticClass:"start-btn",attrs:{disabled:!e.canStart,color:e.buttonColor,loading:e.loadingAttend},on:{click:e.startAttendance}},[t(at["a"],{attrs:{left:""}},[e._v("mdi-play")]),e._v("\n      INICIAR\n    ")],1),t("div",{staticClass:"flex-grow-1 btn-info"},[e.nextCase&&"schedule"===e.type&&"green"===e.button&&!e.holdActionReconectingPusher?t("div",{staticClass:"mt-2 font-italic grey--text"},[t("strong",[e._v(e._s(e.$t("attendance.warning")))]),e._v("\n        "+e._s(e.$t("attendance.new_patient_in_minutes"))+"\n        "),t("strong",[e._v(e._s(e.timeRemainingFormatted))]),e._v("\n        "+e._s(e.$t("attendance.awaiting_moment"))+"\n      ")]):e.nextCase&&"pa"===e.type&&"green"===e.button?t("div",{staticClass:"mt-2 font-italic grey--text"},[t("strong",[e._v(e._s(e.$t("attendance.new_patient_pa")))])]):t("div",{staticClass:"mt-2 font-italic grey--text"},[t("strong",[e._v(e._s(e.$t("attendance.warning")))]),e._v("\n        "+e._s(e.$t("attendance.new_patient_in_minutes"))+"\n        "),t("strong",[e._v(e._s(e.timeRemainingFormatted))]),e._v("\n        "+e._s(e.$t("attendance.awaiting_moment"))+"\n      ")])])],1)])},bC=[],MC=a("782e"),PC=a.n(MC),UC={name:"AutomaticCollapse",components:{Search:_s},data(){return{pusher:null,channel:null,loadingAttendances:!1,caseAttendancesInfo:null,scheduleSearch:"all",canStart:!1,timeoutRef:null,timeRemaining:null,intervalId:null,button:null,buttonColor:"#4BC163",nextCase:null,type:null,collapse_all:!1,collapse_pa:!1,collapse_schedule:!1,checkingLoading:!1,inception:!1,stopAttendanceCheck:!1,reconnectingPusher:!1,holdActionReconectingPusher:!1,loadingAttend:!1}},created(){console.log("[PUSHER] Iniciando conex
lida"),this.isDateValid=!1),this.isDateValid},formatManualStartDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_start)||(this.form.vencimento_start="")},formatManualEndDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_end)||(this.form.vencimento_end="")},disableAccessOnTime(e){let t=Number.isInteger(e.sla)?e.sla:this.convertUtcOffset(`${e.due_date&&e.due_date.split(" ")[0]||""} ${e.due_time||""}`).unix();const a=t-300,n=this.$moment().unix();return n<a},canAttend(){return this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update","attendanceQueue.internalAttend.update","attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},access(e){if(this.loadingAction)return;this.loadingAction=!0;let t={token:this.$store.state.Data.User.token,program_id:e.program_id};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,t).then(t=>{e.program_info={id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type,care_type:t.data.program_info.care_type},this.attend(e)}).catch(e=>{this.loadingAction=!1,console.error(e)})},stopAutoReload(){clearTimeout(this.autoReloadRef),this.pauseAutoReload=!0},attend(e){this.data=e,Ge.attend({case_attendance_id:e.case_attendance_id}).then(e=>{e.data.can_attend?this.$bus.emit("open-patient-page",this.data):this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAction=!1})},saveStartDate(e){this.formatStartDate(e),this.$refs.startMenu.save(this.form.vencimento_start)},formatStartDate(e){const[t,a,n]=e.split("-");return this.form.vencimento_start=`${n}/${a}/${t}`,this.form.vencimento_start},saveEndDate(e){this.formatEndDate(e),this.$refs.endMenu.save(this.form.vencimento_end)},formatEndDate(e){const[t,a,n]=e.split("-");return this.form.vencimento_end=`${n}/${a}/${t}`,this.form.vencimento_end},resetForm(){this.lastPage=0,this.lastValue=null,this.form={nome_paciente:"",cpf:"",programa_nome:"",caso:"",companhia:"",status:"",vencimento_start:"",vencimento_end:"",doctor_name:""}},canCancel(e){let t=this.$store.state.Data.User.info.user_info.programs.filter(t=>t.id===e.program_information[0].id);return t.length>0&&t[0].cancel},getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeader(this.programObj.id).then(e=>{this.headers=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},getHeaderClassName(e){let t="filaAgendamentos-header header-"+e.replace(/_/g,"-");return"action"!==e&&(t+=" filaAgendamentos-pointer"),t},getLineClassName(e){return"filaAgendamentos-in-line filaAgendamentos-line-text header-"+e.replace(/_/g,"-")},showColumnData(e,t){let a={patient_name:"name",cpf:"cpf"},n={case_id:"case_id",company_name:"company_name",status:"status",attemps_number:"attempts",sla:"sla",interactions_number:"num_skip_qt",preferred_time:"contact_time"},i={program_name:"name"},s={doctor_name:"doctor_name"};if(a[e]&&"cpf"===e){const e=t.member&&t.member.length>0?t.member[0].cpf:null;if(!e||"n/a"===e.toLowerCase())return"N/A";const a=e.replace(/\D/g,"");return a.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")}if(n[e]){if("preferred_time"===e){if(Array.isArray(t.contact_times)){if(0==t.contact_times.length)return"-";let e=[...t.contact_times],a="";if("preferred_time"==this.sorting){let a=[...t.contact_times];e="asc"==this.orderBy?a.sort((e,t)=>e-t):a.sort((e,t)=>t-e)}return e.forEach((t,n)=>{let i=n+1;e.length>1&&i!==e.length?a+=this.$t("attendance.filaMeusAgendamentos.contact_times."+t)+", ":a+=this.$t("attendance.filaMeusAgendamentos.contact_times."+t)}),a}return null!=t.contact_times&&""!==t.contact_times?this.$t("attendance.filaMeusAgendamentos.contact_times."+t.contact_times):"-"}if("company_name"===e)return t.company_info&&t.company_info.nick_name?t.company_info.nick_name:t.company_name;if("sla"==e){let e=Number.isInteger(t.sla)?t.sla:this.convertUtcOffset(`${t.due_date.split(" ")[0]} ${t.due_time}`).unix();return this.$moment.unix(e).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")}return"status"==e?this.$t("attendance."+t.status):t[n[e]]}return i[e]?t.program_information[0][i[e]]:s[e]?!t.doctor_name&&t.attendant_info&&t.attendant_info.name?t.attendant_info.name:t.doctor_name:"-"},checkPass(e){let t=this.$moment(e.sla),a=this.$moment();return!t.isAfter(a)},changePage(){this.getAttendances()},getAttendances(e=!1){this.loadingAttendances=!0,clearTimeout(this.autoReloadRef),this.pauseAutoReload=!1;let t=this.form[this.selectedFilter.id];this.selectedFilter&&"vencimento_period"===this.selectedFilter.id&&(t=`${this.form.vencimento_start} - ${this.form.vencimento_end}`),(e||null!==this.lastValue&&this.lastValue!==t)&&(this.currentPage=1,this.lastPage=0),this.selectedFilter&&this.selectedFilter.id&&(e||this.lastValue!==t)&&(this.lastValue=t,this.lastPage=this.currentPage);let a={limit:10,offset:10*(this.currentPage-1),type:"programs_scheduled"};if(this.selectedFilter)if("vencimento_period"===this.selectedFilter.id&&this.form.vencimento_start&&this.form.vencimento_end){let e=this.$moment(this.form.vencimento_start,"DD/MM/YYYY HH:mm").unix(),t=this.$moment(this.form.vencimento_end,"DD/MM/YYYY HH:mm").unix();a.filter={field:"vencimento_period",start_at:e,end_at:t}}else"status"===this.selectedFilter.id&&this.form.status?a.filter={field:"status",value:this.form.status}:this.$v.form&&this.selectedFilter.id&&this.$v.form[this.selectedFilter.id]&&!this.$v.form[this.selectedFilter.id].$invalid&&(a.filter={field:this.selectedFilter.id,value:this.form[this.selectedFilter.id]});this.sorting&&(a.order={column:this.sorting,order_type:this.orderBy}),je.listQueueAttendancesV2(a).then(e=>{this.caseAttendances=e.data.attendances,this.total=e.data.total,this.totalPages=Math.ceil(this.total/10)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAttendances=!1,this.autoReloadRef=setTimeout(()=>{this.getAttendances()},this.$consts.SETTINGS.LISTTIMEOUT)})},order(e){if("action"!=e&&"status"!=e){if(this.sorting===e)return this.orderBy="asc"===this.orderBy?"desc":"asc",void this.getAttendances();this.sorting=e,this.orderBy="asc",this.getAttendances()}},getPatientName(e){return null==e||0===e?this.$t("attendance.filaMonitoramentoClinico.errors.no_patient_info"):e},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e),this.$bus.emit("cancel-attendance-modal-in-queue")},currentValidatorTouch(){this.currentValidator.$touch()}},computed:{currentValidator(){return this.$v.form&&this.selectedFilter&&this.selectedFilter.id&&this.$v.form[this.selectedFilter.id]?this.$v.form[this.selectedFilter.id]:null},currentValidatorCheck(){return!0},currentValidatorErrors(){const e=this.currentValidator;if(!e||!e.$error)return[];const t=[];return!1===e.required&&t.push(this.$t("attendance.filaAgendamentos.validator.required")),!1===e.numeric&&t.push(this.$t("attendance.filaAgendamentos.validator.numeric")),!1===e.minLength&&t.push(this.$t("attendance.filaAgendamentos.validator.minLength")),!1===e.maxLength&&t.push(this.$t("attendance.filaAgendamentos.validator.maxLength")),t.length>0?this.errorMessage=t[0]:this.errorMessage=null,t},currentMask(){return!(!this.selectedFilter||"cpf"!=this.selectedFilter.id)&&"###.###.###-##"}}},QC=ZC,JC=(a("ce1e"),Object(I["a"])(QC,jC,KC,!1,null,"70f82d7f",null)),WC=JC.exports,XC=function(){var e=this,t=e._self._c;return e.hasAccess?t("div",{staticClass:"filaEnfermeiraAtiva mt-8"},[t("div",{staticClass:"filaEnfermeiraAtiva-top-container"},[t("div",{staticClass:"filaEnfermeiraAtiva-title-container"},[t("img",{staticClass:"filaEnfermeiraAtiva-title-img mr-3",attrs:{src:a("b676")}}),t("p",{staticClass:"filaEnfermeiraAtiva-title-text",domProps:{innerHTML:e._s(e.$t("attendance.filaEnfermeiraAtiva.title"))}})]),t("div",{staticClass:"filaEnfermeiraAtiva-filter-container"},[t($t["a"],{staticClass:"filaEnfermeiraAtiva-filter-selector",attrs:{items:e.filters,label:e.$t("attendance.filaEnfermeiraAtiva.select_filter"),"return-object":"","item-text":"name","item-value":"id",height:"44px",width:"246px","min-height":"44px","min-width":"246px","max-height":"44px","max-width":"246px","append-icon":"keyboard_arrow_down",outlined:""},on:{change:function(t){return e.resetForm()}},model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}}),"vencimento_period"!==e.selectedFilter.id?t(oe["a"],{staticClass:"filaEnfermeiraAtiva-filter-text-field-box",attrs:{sm:"8"}},[e.currentMask&&"cpf"===e.selectedFilter.id?t(de["a"],{key:"filaEnfermeira.cpf",staticClass:"filaEnfermeiraAtiva-filter-text-field",attrs:{placeholder:e.$t("attendance.filaEnfermeiraAtiva.search"),height:"44px",width:"324px","min-height":"44px","min-width":"324px","max-height":"44px","max-width":"324px","error-messages":e.currentValidatorErrors,clearable:"",outlined:"","hide-details":""},on:{blur:function(t){return e.currentValidatorTouch()},input:t=>e.form[e.selectedFilter.id]="N/A"===t?"N/A":t.replace(/\D/g,"")},model:{value:e.form[e.selectedFilter.id],callback:function(t){e.$set(e.form,e.selectedFilter.id,"string"===typeof t?t.trim():t)},expression:"form[selectedFilter.id]"}}):e._e(),"cpf"!==e.selectedFilter.id?t(de["a"],{key:"filaEnfermeira.textfields",staticClass:"filaEnfermeiraAtiva-filter-text-field",attrs:{placeholder:e.$t("attendance.filaEnfermeiraAtiva.search"),height:"44px",width:"324px","min-height":"44px","min-width":"324px","max-height":"44px","max-width":"324px","error-messages":e.currentValidatorErrors,clearable:"",outlined:"","hide-details":""},on:{blur:function(t){return e.currentValidatorTouch()},input:t=>e.form.cpf=t.replace(/\D/g,"")},model:{value:e.form[e.selectedFilter.id],callback:function(t){e.$set(e.form,e.selectedFilter.id,"string"===typeof t?t.trim():t)},expression:"form[selectedFilter.id]"}}):e._e(),t(r["a"],{staticClass:"filaEnfermeiraAtiva-filter-btn",attrs:{height:"45px",color:"primary",tile:"",depressed:""},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e(),"vencimento_period"===e.selectedFilter.id?t(oe["a"],{staticClass:"filaEnfermeiraAtiva-filter-text-field-box-2 ml-2",attrs:{sm:"8"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"filaPA-filter-datefield-normalize mr-2",attrs:{label:e.$t("attendance.filaPA.start_date"),placeholder:"DD/MM/AAAA",height:"45px",outlined:"",clearable:"","error-messages":e.vencimentoStartErrors},on:{blur:e.validateDates},model:{value:e.form.vencimento_start,callback:function(t){e.$set(e.form,"vencimento_start",t)},expression:"form.vencimento_start"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"filaPA-filter-datefield-normalize",attrs:{label:e.$t("attendance.filaPA.end_date"),placeholder:"DD/MM/AAAA",height:"45px",outlined:"",clearable:"","error-messages":e.vencimentoEndErrors},on:{blur:e.validateDates},model:{value:e.form.vencimento_end,callback:function(t){e.$set(e.form,"vencimento_end",t)},expression:"form.vencimento_end"}}),t(r["a"],{staticClass:"filaEnfermeiraAtiva-filter-btn-2 ml-2",attrs:{height:"45px",color:"primary",tile:"",depressed:""},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.currentValidatorCheck&&e.currentValidatorErrors.length>0,expression:"!currentValidatorCheck && currentValidatorErrors.length > 0"}],staticClass:"filaEnfermeiraAtiva-error-messages-container"},[t("span",[e._v(e._s(e.errorMessage))])])]),t(Cr["a"],{staticClass:"pa-0",attrs:{height:"10end00px",type:"table",loading:e.loadingHeaders}},[t("div",[t("table",{staticClass:"filaEnfermeiraAtiva-table"},[t("thead",{staticClass:"filaEnfermeiraAtiva-header"},[t("tr",e._l(e.headers,(function(n){return t("th",{class:e.getHeaderClassName(n.header),on:{click:function(t){return e.order(n.header)}}},[e._v(e._s(e.$t("attendance.filaEnfermeiraAtiva."+n.header))+"\n            "),"action"!==n.header&&"request"!==n.header&&"status"!==n.header?t("img",{staticClass:"sort-arrow-position",class:{"sort-asc":e.sorting===n.header&&"asc"==e.orderBy},attrs:{src:a("d742")}}):e._e()])})),0)]),!e.loadingAttendances&&e.caseAttendances.length>0?t("tbody",e._l(e.caseAttendances,(function(n,i){return t("tr",{key:i,staticClass:"filaEnfermeiraAtiva-line",class:{"late-line":!n.is_parent&&e.checkPass(n),"upcoming-line-odd":!n.is_parent&&!e.checkPass(n)&&(i+1)%2!==0,"upcoming-line-pair":!n.is_parent&&!e.checkPass(n)&&(i+1)%2==0}},e._l(e.headers,(function(i){return t("td",{class:e.getLineClassName(i.header)},[t("div",{class:{"data-flex":"action"!==i.header,"action-flex":"action"===i.header}},["action"===i.header?[e.canAttend(n)?t(r["a"],{staticClass:"attend-button attend-button-background",attrs:{loading:e.loadingAction,disabled:e.loadingAction},on:{click:function(t){return e.access(n)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("72e8")}}),e._v("\n                  "+e._s(e.$t("attendance.attend"))+"\n                ")]):e._e()]:"patient_name"===i.header?[t("p",{staticClass:"line-patient-name"},[e._v(e._s(e.getPatientName(n.member_name)))]),e.hasSocialName(n)?t("div",{staticClass:"second-flag"},[t("img",{staticClass:"lgbt",attrs:{src:a("92a7")}})]):e._e(),t("div",{staticClass:"first-flag"},[n.patient_info?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.patient_info.vip,deficiencyIds:n.patient_info.disabilities}}):e._e()],1)]:[t("span",{staticClass:"text-wrap"},[e._v("\n                  "+e._s(e.showColumnData(i.header,n))+"\n                ")])]],2)])})),0)})),0):e._e()]),e.loadingAttendances?t("div",{staticClass:"filaEnfermeiraAtiva-data-loader-container"},[t(nt["a"],{attrs:{indeterminate:""}})],1):e._e(),e.loadingAttendances||0!=e.caseAttendances.length?e._e():t("div",{staticClass:"filaEnfermeiraAtiva-data-loader-container"},[t("p",{staticClass:"filaEnfermeiraAtiva-no-attendance"},[e._v(e._s(e.$t("attendance.filaEnfermeiraAtiva.no_attendance")))])]),e.loadingAttendances?e._e():t("div",{staticClass:"filaEnfermeiraAtiva-table text-center page-container-filaEnfermeiraAtiva"},[e.totalPages>0?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"5"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.previousPage()}},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)])])],1):e._e()},zC=[],eT={name:"filaEnfermeiraAtiva",components:{TransferButton:ta,DeficiencyIdentifierBars:Zt},mixins:[ve],data(){return{lastPage:0,lastValue:null,loadingTotal:!1,startMenu:!1,endMenu:!1,endMin:null,selected_date_start:"",selected_date_end:"",formattedDateEnd:"",vencimentoStartErrors:[],vencimentoEndErrors:[],isDateValid:!0,whitelistPrograms:[17],userPrograms:[],statuses:[{id:1,name:this.$t("attendance.OPENED")},{id:13,name:this.$t("attendance.RESERVED")},{id:12,name:this.$t("attendance.ATTENDING")},{id:16,name:this.$t("attendance.PENDING_PAYMENT")},{id:22,name:this.$t("attendance.DOCTOR_PENDING")},{id:24,name:this.$t("attendance.SCHEDULE_PENDING")},{id:26,name:this.$t("attendance.GENERATING_DOCUMENTS")}],urgencyLevels:[{id:1,name:this.$t("attendance.filaEnfermeiraAtiva.urgencies.no_urgency"),color:"#00B5E2"},{id:2,name:this.$t("attendance.filaEnfermeiraAtiva.urgencies.minor_urgency"),color:"#4BC163"},{id:3,name:this.$t("attendance.filaEnfermeiraAtiva.urgencies.urgency"),color:"#FDD145"},{id:4,name:this.$t("attendance.filaEnfermeiraAtiva.urgencies.high_urgency"),color:"#FF9900"},{id:5,name:this.$t("attendance.filaEnfermeiraAtiva.urgencies.emergency"),color:"#FF0000"}],total:0,sorting:null,orderBy:"desc",caseAttendances:[],loadingAttendances:!0,loadingHeaders:!0,loadingAction:!1,selectedFilter:{id:"nome_paciente",name:this.$t("attendance.filaEnfermeiraAtiva.filters.patient")},filters:[{id:"nome_paciente",name:this.$t("attendance.filaEnfermeiraAtiva.filters.patient")},{id:"cpf",name:this.$t("attendance.filaEnfermeiraAtiva.filters.cpf")},{id:"caso",name:this.$t("attendance.filaEnfermeiraAtiva.filters.case_id")},{id:"companhia",name:this.$t("attendance.filaEnfermeiraAtiva.filters.company")},{id:"programa_nome",name:this.$t("attendance.filaEnfermeiraAtiva.filters.program")},{id:"doctor_name",name:this.$t("attendance.filaEnfermeiraAtiva.filters.doctor_name")},{id:"vencimento_period",name:this.$t("attendance.filaEnfermeiraAtiva.filters.vencimento_period")}],form:{nome_paciente:"",cpf:"",programa_nome:"",status:"",caso:"",vencimento:"",doctor_name:"",vencimento_start:"",vencimento_end:"",companhia:"",urgencia:null},reverse:{},currentPage:1,totalPages:0,requiredPermissions:["attendanceQueue.generalAttendances.list","attendanceQueue.internalAttendances.list","attendanceQueue.myAttendances.list"],headers:[],hasAccess:!1,errorMessage:null,autoReloadRef:null,pauseAutoReload:!1}},validations:{form:{nome_paciente:{required:Ae["required"]},cpf:{required:Ae["required"],validCpfOrNA(e){return"N/A"===e||/^\d{11}$/.test(e)}},vencimento_period:{required:Ae["required"],validPeriod:function(){if(this.form.vencimento_start&&this.form.vencimento_end){const e=this.isValidDate(this.form.vencimento_start),t=this.isValidDate(this.form.vencimento_end);if(!e||!t)return!1;const a=this.$moment(this.form.vencimento_start,"DD/MM/YYYY"),n=this.$moment(this.form.vencimento_end,"DD/MM/YYYY");return a.isSameOrBefore(n)}return!0}},caso:{required:Ae["required"],numeric:Ae["numeric"]},programa_nome:{required:Ae["required"]},companhia:{required:Ae["required"]}}},created(){let e=this.$store.state.Data.User.info.user_info.queues;this.userPrograms=e.filter(e=>this.whitelistPrograms.includes(e.id)&&e.list);let t=this.checkAccessesControlFuncionality(this.requiredPermissions,this.$store.state.Data.User.info.role_info.funcionality_privilegies);this.$store.state.Data.User.info.user_info.programs;this.userPrograms.length>0&&t&&(this.hasAccess=!0,this.getHeaders(),this.getAttendances(),this.$bus.on("restart-queue-update",()=>{this.getAttendances()}),this.$bus.on("stop-queue-update",this.stopAutoReload))},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),this.$bus.off("restart-queue-update"),clearTimeout(this.autoReloadRef),this.pauseAutoReload=!0,this.loadingAttend=!1},methods:{isValidDate(e){if(!e||10!==e.length)return!1;const[t,a,n]=e.split("/").map(Number);if(!t||!a||!n)return!1;const i=new Date(n,a-1,t);return i.getFullYear()===n&&i.getMonth()===a-1&&i.getDate()===t},validateDates(){return this.vencimentoStartErrors=[],this.vencimentoEndErrors=[],this.isDateValid=!0,this.form.vencimento_start&&!this.isValidDate(this.form.vencimento_start)&&(this.vencimentoStartErrors.push("Data inv
lida"),this.isDateValid=!1),this.isDateValid},formatManualStartDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_start)||(this.form.vencimento_start="")},formatManualEndDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_end)||(this.form.vencimento_end="")},stopAutoReload(){clearTimeout(this.autoReloadRef),this.pauseAutoReload=!0},disableAccessOnTime(e){let t=Number.isInteger(e.sla)?e.sla:this.convertUtcOffset(`${e.due_date&&e.due_date.split(" ")[0]||""} ${e.due_time||""}`).unix();const a=t-300,n=this.$moment().unix();return n<a},resetForm(){this.lastPage=0,this.lastValue=null,this.form={nome_paciente:"",cpf:"",programa_nome:"",caso:"",companhia:"",status:"",vencimento_start:"",vencimento_end:"",doctor_name:""}},saveStartDate(e){this.formatStartDate(e),this.$refs.startMenu.save(this.form.vencimento_start)},formatStartDate(e){const[t,a,n]=e.split("-");return this.form.vencimento_start=`${n}/${a}/${t}`,this.endMin=`${t}-${a}-${n}`,this.form.vencimento_start},saveEndDate(e){this.formatEndDate(e),this.$refs.endMenu.save(this.form.vencimento_end)},formatEndDate(e){const[t,a,n]=e.split("-");return this.form.vencimento_end=`${n}/${a}/${t}`,this.form.vencimento_end},canCancel(e){let t=this.$store.state.Data.User.info.user_info.programs.filter(t=>t.id===e.program_information[0].id);return t.length>0&&t[0].cancel},getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeader(this.programObj.id).then(e=>{this.headers=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},getHeaderClassName(e){let t="filaMeusAgendamentos-header header-"+e.replace(/_/g,"-");return"action"!==e&&(t+=" filaMeusAgendamentos-pointer"),t},getLineClassName(e){return"filaMeusAgendamentos-in-line filaMeusAgendamentos-line-text header-"+e.replace(/_/g,"-")},showColumnData(e,t){let a={patient_name:"name",cpf:"cpf"},n={case_id:"case_id",company_name:"company_name",status:"status",attemps_number:"attempts",sla:"sla",interactions_number:"num_skip_qt",preferred_time:"contact_time"},i={program_name:"name"},s={doctor_name:"doctor_name"};if(a[e]&&"cpf"==e){if(t.member){let e="";if(Array.isArray(t.member)&&t.member.length>0?e=t.member[0].cpf:t.member.cpf&&(e=t.member.cpf),!e||"n/a"===e.toLowerCase())return"N/A";const a=e.replace(/\D/g,"");return a.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")}return"N/A"}if(n[e]){if("preferred_time"===e){if(Array.isArray(t.contact_times)){if(0==t.contact_times.length)return"-";let e=[...t.contact_times],a="";if("preferred_time"==this.sorting){let a=[...t.contact_times];e="asc"==this.orderBy?a.sort((e,t)=>e-t):a.sort((e,t)=>t-e)}return e.forEach((t,n)=>{let i=n+1;e.length>1&&i!==e.length?a+=this.$t("attendance.filaMeusAgendamentos.contact_times."+t)+", ":a+=this.$t("attendance.filaMeusAgendamentos.contact_times."+t)}),a}return null!=t.contact_times&&""!==t.contact_times?this.$t("attendance.filaMeusAgendamentos.contact_times."+t.contact_times):"-"}if("company_name"===e)return t.company_info&&t.company_info.nick_name?t.company_info.nick_name:t.company_name;if("sla"==e){let e=Number.isInteger(t.sla)?t.sla:this.convertUtcOffset(`${t.due_date.split(" ")[0]} ${t.due_time}`).unix();return this.$moment.unix(e).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")}return"status"==e?this.$t("attendance."+t.status):t[n[e]]}return i[e]?t.program_information[0][i[e]]:s[e]?!t.doctor_name&&t.attendant_info&&t.attendant_info.name?t.attendant_info.name:t.doctor_name:"-"},checkPass(e){let t=this.$moment.utc(e.sla).tz(Intl.DateTimeFormat().resolvedOptions().timeZone),a=this.$moment();return!t.isAfter(a)},access(e){if(this.loadingAction)return;this.loadingAction=!0;let t={token:this.$store.state.Data.User.token,program_id:e.program_id};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,t).then(t=>{e.program_info={id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type,care_type:t.data.program_info.care_type},this.attend(e)}).catch(e=>{this.loadingAction=!1,console.error(e)})},canAttend(){return this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update","attendanceQueue.internalAttend.update","attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},attend(e){this.data=e,Ge.attend({case_attendance_id:e.case_attendance_id}).then(e=>{e.data.can_attend?this.$bus.emit("open-patient-page",this.data):this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAction=!1})},changePage(){this.getAttendances()},nextPage(){},previousPage(){},getAttendances(e=!1){this.loadingAttendances=!0,clearTimeout(this.autoReloadRef),this.pauseAutoReload=!1;let t=this.form[this.selectedFilter.id];this.selectedFilter&&"vencimento_period"===this.selectedFilter.id&&(t=`${this.form.vencimento_start} - ${this.form.vencimento_end}`),(e||null!==this.lastValue&&this.lastValue!==t)&&(this.currentPage=1,this.lastPage=0),this.selectedFilter&&this.selectedFilter.id&&(e||this.lastValue!==t)&&(this.lastValue=t,this.lastPage=this.currentPage);let a={limit:10,offset:10*(this.currentPage-1),type:"programs_scheduled",user_id:this.$store.state.Data.User.info.user_info.id};if(this.reincidency&&(a.reincidency=!0),this.selectedFilter)if("vencimento_period"===this.selectedFilter.id&&this.form.vencimento_start&&this.form.vencimento_end){let e=this.$moment(this.form.vencimento_start,"DD/MM/YYYY HH:mm").unix(),t=this.$moment(this.form.vencimento_end,"DD/MM/YYYY HH:mm").unix();a.filter={field:"vencimento_period",start_at:e,end_at:t}}else"status"===this.selectedFilter.id&&this.form.status?a.filter={field:"status",value:this.form.status}:this.$v.form&&this.selectedFilter.id&&this.$v.form[this.selectedFilter.id]&&!this.$v.form[this.selectedFilter.id].$invalid&&(a.filter={field:this.selectedFilter.id,value:this.form[this.selectedFilter.id]});this.sorting&&(a.order={column:this.sorting,order_type:this.orderBy}),je.listQueueAttendancesV2(a).then(e=>{this.caseAttendances=[],this.caseAttendances=e.data.attendances,this.total=e.data.total,this.totalPages=Math.ceil(this.total/10)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAttendances=!1,this.autoReloadRef=setTimeout(()=>{this.getAttendances()},this.$consts.SETTINGS.LISTTIMEOUT)})},order(e){if("action"!=e&&"status"!=e){if(this.sorting===e)return this.orderBy="asc"===this.orderBy?"desc":"asc",void this.getAttendances();this.sorting=e,this.orderBy="asc",this.getAttendances()}},getPatientName(e){return null==e||0===e?this.$t("attendance.filaMonitoramentoClinico.errors.no_patient_info"):e},formatProgram(e){return e[0]},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e),this.$bus.emit("cancel-attendance-modal-in-queue")},currentValidatorTouch(){this.currentValidator.$touch()}},computed:{currentValidator(){return this.$v.form[this.selectedFilter.id]},currentValidatorCheck(){return!0},currentValidatorErrors(){const e=this.currentValidator;if(!e||!e.$error)return[];const t=[];return!1===e.required&&t.push(this.$t("attendance.filaMeusAgendamentos.validator.required")),!1===e.numeric&&t.push(this.$t("attendance.filaMeusAgendamentos.validator.numeric")),!1===e.minLength&&t.push(this.$t("attendance.filaMeusAgendamentos.validator.minLength")),!1===e.maxLength&&t.push(this.$t("attendance.filaMeusAgendamentos.validator.maxLength")),t.length>0?this.errorMessage=t[0]:this.errorMessage=null,t},currentMask(){return!(!this.selectedFilter||"cpf"!=this.selectedFilter.id)&&("N/A"!==this.form.cpf&&"###.###.###-##")}}},AT=uT,_T=(a("27ba"),Object(I["a"])(AT,dT,mT,!1,null,"7456aa8c",null)),ET=_T.exports,IT={components:{FilaMeusAgendamentos:ET,FilaMonitoramentoClinico:cT,FilaEnfermeiraAtiva:nT,FilaAgendamentos:WC,FilaPA:YC},mixins:[ve],data(){return{canAccessFilaPA:!1,canAccessFilaAgendamentos:!1,canAccessFilaEnfermeiraAtiva:!1,canAccessFilaMonitoramento:!1}},created(){let e=this.$store.state.Data.User.info.user_info.programs,t=this.$store.state.Data.User.info.user_info.queues;e.forEach(e=>{"immediate care"===e.care_type?this.canAccessFilaPA=!0:"schedule care"===e.care_type&&(this.canAccessFilaAgendamentos=!0)}),t.forEach(e=>{17===e.id?this.canAccessFilaEnfermeiraAtiva=!0:14===e.id&&(this.canAccessFilaMonitoramento=!0)})},beforeDestroy(){},methods:{}},hT=IT,pT=(a("3b09"),Object(I["a"])(hT,VC,GC,!1,null,"0b6bb07c",null)),ST=pT.exports,CT={name:"TabsNews",mixins:[ve],components:{FilaDocumentosPendentes:Qn,FilaGestao:ST,AutomaticCollapse:xC},data(){return{isAutomaticAttendance:!1,isManagerQueueList:!1}},mounted(){this.checkTabRender()},methods:{checkTabRender(){const e=this.$store.state.Data.User.info,t=e&&e.user_info,a=e&&e.role_info&&e.role_info.funcionality_privilegies;a&&this.checkAccessesControlFuncionality(["manage.attendanceQueue.list","manage.internalAttendanceQueue.list","manage.myAttendanceQueue.list"],a)?this.isManagerQueueList=!0:t&&Array.isArray(t.programs)&&t.programs.length>0&&this.$consts.ROLES_AUTOMATIC_COLLAPSE.includes(t.user_role_id)&&(this.isAutomaticAttendance=!0)}}},TT=CT,RT=(a("fb40"),Object(I["a"])(TT,fC,NC,!1,null,"144a2040",null)),DT=RT.exports,gT={name:"Tabs",components:{DeficiencyIdentifierBars:Zt,ConfirmationModal:LC,FilaMeusAtendimentos:ca,FilaAtendimentos:Pa,FilaAtendimentosExterno:ja,FilaMeusAtendimentosExterno:sn,FilaAtendimentosOperacional:hn,FilaDocumentosPendentes:Qn,Search:_s,ExternalSearch:Ss,Menu:tt,PatientMain:Qr,HistoryAttendance:GE,HistoryTabs:dI,DoctorPatientMain:AS,EmergencyPatient:pS,AsoPatient:HS,HealthHistory:JS,snackbar:GO,TabModal:aC,CloseTabConfirmation:lC,LeaveAttendanceAlert:_C,CancelAttendanceModal:rh,DocumentsAsyncWarningModal:SC,TransferAttendanceModal:dr,TabsNews:DT},mixins:[ve,p],data(){return{active_tab:0,is_visible:!1,tmpShow:!0,is_emergency:!1,clicked_details:!1,data:[],active_sub_tab:null,dialog:!1,confirm:!1,userList:[],persistentTabs:[],items:[],display:"pat",name:"",userRole:null,isVirtualClinic:!1,active_doc_tab:null,persistentDocTabs:[],tempData:null,emergencyTabs:[],emergencyList:[],persistentEmergencyTabs:[],active_emergency_tab:null,emergencyPatient:null,asoTabs:[],asoList:[],persistentAsoTabs:[],active_aso_tab:null,asoPatient:null,active_history:this.$store.state.Data.CaseAttendance.history_mode,active_triage:!1,loading_patient_page_bool:!1,loadingAttend:!1,isEditingHealthHistory:!1,chosenASOCompany:1,specialist:!1,specialistRoles:["Enfermeiro","Nutricionista","Coach Esportivo","Personal Trainer"],checkingStatusLoading:!1,canAccessPrograms:!1,canAccessOtherPrograms:!1,specialPrograms:[16,7,68,69,67],showLoading:!1}},created(){const e=this.$consts.NUTRITIONAL_PROGRAM.includes(this.$store.state.Data.CaseAttendance.info.program_id),t=this.$consts.SPORTIVE_PROGRAM.includes(this.$store.state.Data.CaseAttendance.info.program_id);e||t||!this.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")||this.$bus.$on("toggle-loading",this.toggleLoading),this.canAccessPrograms=this.$store.state.Data.User.info.user_info.programs.length>0,this.canAccessOtherPrograms=this.$store.state.Data.User.info.user_info.queues.length>0;let a=localStorage.getItem("userList");a&&localStorage.setItem("userList",JSON.stringify(JSON.parse(a).filter(e=>!e.triage))),this.userRole=this.$store.state.Data.User.info.role_info.role_id,this.specialist=this.specialistRoles.includes(this.$store.state.Data.User.info.role_info.role),this.isVirtualClinic=this.$store.state.Data.User.info.isVirtualClinic,this.$bus.on("toggle-edit-history",e=>{this.isEditingHealthHistory=e}),this.$bus.on("open-history-mode",e=>{this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_HISTORY_MODE,{value:!0}),e.member_id||(e.member_id=e.id)}),this.$bus.on("open-patient-page",e=>{if(!this.loading_patient_page_bool){if(this.persistentDocTabs&&this.persistentDocTabs.length>=1)return this.$bus.emit("open-tabs-modal"),void this.$bus.emit("stop-access-attandance-load");this.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")&&this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_LAST_ATTENDANCE_OWNER,e.doctor_id),e.program_info&&(this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,e.patient_info),this.$store.dispatch(this.$consts.QUEUE_ACTIONS.SET_INCOMING_QUEUE,{id:e.program_info.id,name:e.program_info.name,type:e.program_info.type})),this.is_emergency=!1,e.emergency_pass&&(this.is_emergency=!0),this.loading_patient_page_bool=!0,this.loadingAttend=!1,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_HISTORY_MODE,{value:!1}),this.active_triage=!1,this.active_history=!1,e.member_id||(e.member_id=e.id),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET,e),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_HEADERS,e),this.openTabByDoctor(e),this.loading_patient_page_bool=!1,this.sockets.subscribe("tdoc_"+e.case_attendance_id,e=>{"kick_doctor_in_attendance"===e.action&&(console.log("[KICK] Voc
lida"),this.isDateValid=!1),this.isDateValid},formatManualStartDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_start)||(this.form.vencimento_start="")},formatManualEndDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_end)||(this.form.vencimento_end="")},stopAutoReload(){clearTimeout(this.autoReloadRef),this.pauseAutoReload=!0},resetForm(){this.lastPage=0,this.lastValue=null,this.form={nome_paciente:"",cpf:"",programa_nome:"",caso:"",companhia:"",vencimento_start:"",vencimento_end:"",doctor_name:""}},saveStartDate(e){this.formatStartDate(e),this.$refs.startMenu.save(this.form.vencimento_start)},formatStartDate(e){const[t,a,n]=e.split("-");return this.form.vencimento_start=`${n}/${a}/${t}`,this.endMin=`${t}-${a}-${n}`,this.form.vencimento_start},saveEndDate(e){this.formatEndDate(e),this.$refs.endMenu.save(this.form.vencimento_end)},formatEndDate(e){const[t,a,n]=e.split("-");return this.form.vencimento_end=`${n}/${a}/${t}`,this.form.vencimento_end},access(e){if(this.loadingAction)return;this.loadingAction=!0,e.nursequeue=!0;let t={token:this.$store.state.Data.User.token,program_id:14};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,t).then(t=>{e.program_info={id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type,care_type:t.data.program_info.care_type},this.attend(e)}).catch(e=>{this.loadingAction=!1,console.error(e)})},attend(e){this.data=e,Ge.attend({case_attendance_id:e.case_attendance_id}).then(e=>{e.data.can_attend?this.$bus.emit("open-patient-page",this.data):this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAction=!1})},canCancel(e){let t=this.$store.state.Data.User.info.user_info.programs.filter(t=>t.id===e.program_information[0].id);return t.length>0&&t[0].cancel},canAttend(){let e=!1,t=this.$store.state.Data.User.info.user_info.queues;return t&&t.length>0&&t.forEach(t=>{14==t.id&&(e=t.attend)}),e&&this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update","attendanceQueue.internalAttend.update","attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},canTransfer(e){return this.checkAccessesControlFuncionality(["attendance.doctorTransfer.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeader(14).then(e=>{this.headers=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},getHeaderClassName(e){let t="filaMonitoramentoClinico-header header-"+e.replace(/_/g,"-");return"action"!==e&&(t+=" filaMonitoramentoClinico-pointer"),t},getLineClassName(e){return"filaMonitoramentoClinico-in-line filaMonitoramentoClinico-line-text header-"+e.replace(/_/g,"-")},showColumnData(e,t){let a={patient_name:"name",cpf:"cpf"},n={case_id:"case_id",company_name:"company_name",status:"status",attemps_number:"attempts",sla:"sla",interactions_number:"num_skip_qt"},i={program_name:"name",origin:"name"},s={request:"name"},o={doctor_name:"doctor_name"};if(s[e])return t.bricks.emr_desfecho[Object.keys(t.bricks.emr_desfecho)[0]]&&1==t.bricks.emr_desfecho[Object.keys(t.bricks.emr_desfecho)[0]].prescription?this.$t("attendance.filaMonitoramentoClinico.request_brick.with_prescription"):this.$t("attendance.filaMonitoramentoClinico.request_brick.no_prescription");if(a[e]&&"cpf"===e){const e=t.member&&t.member.length>0?t.member[0].cpf:null;if(!e||"n/a"===e.toLowerCase())return"N/A";const a=e.replace(/\D/g,"");return a.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")}if(n[e]){if("company_name"===e)return t.company_info&&t.company_info.nick_name?t.company_info.nick_name:t.company_name;if("sla"==e){let e=Number.isInteger(t.sla)?t.sla:this.convertUtcOffset(`${t.due_date.split(" ")[0]} ${t.due_time}`).unix();return this.$moment.unix(e).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")}return"status"==e?this.$t("attendance."+t.status):t[n[e]]}return i[e]?t.program_information[0][i[e]]:o[e]?!t.doctor_name&&t.attendant_info&&t.attendant_info.name?t.attendant_info.name:t.doctor_name:"-"},checkPass(e){let t=this.$moment.utc(e.sla).tz(Intl.DateTimeFormat().resolvedOptions().timeZone),a=this.$moment();return!t.isAfter(a)},changePage(){this.getAttendances()},nextPage(){},previousPage(){},getAttendances(e=!1){clearTimeout(this.autoReloadRef),this.pauseAutoReload=!1,this.loadingAttendances=!0;let t=this.form[this.selectedFilter.id];this.selectedFilter&&"vencimento_period"===this.selectedFilter.id&&(t=`${this.form.vencimento_start} - ${this.form.vencimento_end}`),(e||null!==this.lastValue&&this.lastValue!==t)&&(this.currentPage=1,this.lastPage=0),this.selectedFilter&&this.selectedFilter.id&&(e||this.lastValue!==t)&&(this.lastValue=t,this.lastPage=this.currentPage);let a={limit:10,offset:10*(this.currentPage-1),type:"nurse",queue_program_id:14};if(this.selectedFilter)if(this.$v.form[this.selectedFilter.id].$invalid||"vencimento_period"===this.selectedFilter.id)if("vencimento_period"===this.selectedFilter.id&&this.form.vencimento_start&&this.form.vencimento_end){let e=this.$moment(this.form.vencimento_start,"DD/MM/YYYY HH:mm").unix(),t=this.$moment(this.form.vencimento_end,"DD/MM/YYYY HH:mm").unix();a.filter={field:"vencimento_period",start_at:e,end_at:t}}else"urgencia"===this.selectedFilter.id&&this.form.urgencia?a.filter={field:"urgencia",value:this.form.urgencia}:"status"===this.selectedFilter.id&&this.form.status&&(a.filter={field:"status",value:this.form.status});else a.filter={field:this.selectedFilter.id,value:this.form[this.selectedFilter.id]};this.sorting&&(a.order={column:this.sorting,order_type:this.orderBy}),je.listQueueAttendancesV2(a).then(e=>{this.caseAttendances=e.data.attendances,this.total=e.data.total,this.totalPages=Math.ceil(this.total/10)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAttendances=!1,this.autoReloadRef=setTimeout(()=>{this.getAttendances()},this.$consts.SETTINGS.LISTTIMEOUT)})},order(e){if("action"!=e&&"request"!=e){if("origin"===e&&(e="program_name"),this.sorting===e)return this.orderBy="asc"===this.orderBy?"desc":"asc",void this.getAttendances();this.sorting=e,this.orderBy="asc",this.getAttendances()}},getPatientName(e){return null==e||0===e?this.$t("attendance.filaMonitoramentoClinico.errors.no_patient_info"):e},formatProgram(e){return e[0]},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e),this.$bus.emit("cancel-attendance-modal-in-queue")},currentValidatorTouch(){this.currentValidator.$touch()}},computed:{currentValidator(){return this.$v.form[this.selectedFilter.id]},currentValidatorCheck(){return!0},currentValidatorErrors(){const e=this.currentValidator;if(!e||!e.$error)return[];const t=[];return!1===e.required&&t.push(this.$t("attendance.filaMonitoramentoClinico.validator.required")),!1===e.numeric&&t.push(this.$t("attendance.filaMonitoramentoClinico.validator.numeric")),!1===e.minLength&&t.push(this.$t("attendance.filaMonitoramentoClinico.validator.minLength")),!1===e.maxLength&&t.push(this.$t("attendance.filaMonitoramentoClinico.validator.maxLength")),t.length>0?this.errorMessage=t[0]:this.errorMessage=null,t},currentMask(){return!(!this.selectedFilter||"cpf"!=this.selectedFilter.id)&&"###.###.###-##"}}},rT=oT,lT=(a("7ddc"),Object(I["a"])(rT,iT,sT,!1,null,"558d4677",null)),cT=lT.exports,dT=function(){var e=this,t=e._self._c;return e.hasAccess?t("div",{staticClass:"filaMeusAgendamentos"},[t("div",{staticClass:"filaMeusAgendamentos-top-container"},[t("div",{staticClass:"filaMeusAgendamentos-title-container"},[t("img",{staticClass:"filaMeusAgendamentos-title-img mr-3",attrs:{src:a("7695")}}),t("p",{staticClass:"filaMeusAgendamentos-title-text",domProps:{innerHTML:e._s(e.$t("attendance.filaMeusAgendamentos.title"))}})]),t("div",{staticClass:"filaMeusAgendamentos-filter-container"},[t($t["a"],{staticClass:"filaMeusAgendamentos-filter-selector",attrs:{items:e.filters,label:e.$t("attendance.filaMeusAgendamentos.select_filter"),"return-object":"","item-text":"name","item-value":"id",height:"44px",width:"246px","min-height":"44px","min-width":"246px","max-height":"44px","max-width":"246px","append-icon":"keyboard_arrow_down",outlined:""},on:{change:function(t){return e.resetForm()}},model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}}),"vencimento_period"!==e.selectedFilter.id&&"status"!==e.selectedFilter.id?t(oe["a"],{staticClass:"filaMeusAgendamentos-filter-text-field-box",attrs:{sm:"8"}},[e.currentMask&&"cpf"===e.selectedFilter.id?t(de["a"],{key:"filaMeusAgendamentos.cpf",staticClass:"filaMeusAgendamentos-filter-text-field",attrs:{placeholder:e.$t("attendance.filaMeusAgendamentos.search"),height:"44px",width:"324px","min-height":"44px","min-width":"324px","max-height":"44px","max-width":"324px","error-messages":e.currentValidatorErrors,clearable:"",outlined:"","hide-details":""},on:{blur:function(t){return e.currentValidatorTouch()},input:t=>e.form[e.selectedFilter.id]="N/A"===t?"N/A":t.replace(/\D/g,"")},model:{value:e.form[e.selectedFilter.id],callback:function(t){e.$set(e.form,e.selectedFilter.id,"string"===typeof t?t.trim():t)},expression:"form[selectedFilter.id]"}}):e._e(),"cpf"!==e.selectedFilter.id?t(de["a"],{key:"filaMeusAgendamentos.textfields",staticClass:"filaMeusAgendamentos-filter-text-field",attrs:{placeholder:e.$t("attendance.filaMeusAgendamentos.search"),height:"44px",width:"324px","min-height":"44px","min-width":"324px","max-height":"44px","max-width":"324px","error-messages":e.currentValidatorErrors,clearable:"",outlined:"","hide-details":""},on:{blur:function(t){return e.currentValidatorTouch()}},model:{value:e.form[e.selectedFilter.id],callback:function(t){e.$set(e.form,e.selectedFilter.id,"string"===typeof t?t.trim():t)},expression:"form[selectedFilter.id]"}}):e._e(),t(r["a"],{staticClass:"filaMeusAgendamentos-filter-btn",class:{"filaMeusAgendamentos-filter-btn-disabled":!e.currentValidatorCheck},attrs:{height:"45px",color:"primary",tile:"",depressed:""},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e(),"vencimento_period"===e.selectedFilter.id?t(oe["a"],{staticClass:"filaMeusAgendamentos-filter-text-field-box-2 ml-2",attrs:{sm:"8"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"filaPA-filter-datefield-normalize mr-2",attrs:{label:e.$t("attendance.filaPA.start_date"),placeholder:"DD/MM/AAAA",height:"45px",outlined:"",clearable:"","error-messages":e.vencimentoStartErrors},on:{blur:e.validateDates},model:{value:e.form.vencimento_start,callback:function(t){e.$set(e.form,"vencimento_start",t)},expression:"form.vencimento_start"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"filaPA-filter-datefield-normalize",attrs:{label:e.$t("attendance.filaPA.end_date"),placeholder:"DD/MM/AAAA",height:"45px",outlined:"",clearable:"","error-messages":e.vencimentoEndErrors},on:{blur:e.validateDates},model:{value:e.form.vencimento_end,callback:function(t){e.$set(e.form,"vencimento_end",t)},expression:"form.vencimento_end"}}),t(r["a"],{staticClass:"filaMeusAgendamentos-filter-btn-2 ml-2",attrs:{height:"45px",color:"primary",tile:"",depressed:"",disabled:!e.isDateValid},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e(),e.selectedFilter&&"status"===e.selectedFilter.id?t(oe["a"],{staticClass:"filaMeusAgendamentos-filter-text-field-box-2 ml-2",attrs:{sm:"8"}},[t($t["a"],{staticClass:"filaMeusAgendamentos-filter-selector-2",attrs:{items:e.statuses,label:e.$t("attendance.filaMeusAgendamentos.search"),"item-text":"name","item-value":"id",height:"44px",width:"311px","min-height":"44px","min-width":"311px","max-height":"44px","max-width":"311px","append-icon":"keyboard_arrow_down",outlined:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),t(r["a"],{staticClass:"filaMeusAgendamentos-filter-btn-2 ml-2",attrs:{height:"45px",color:"primary",tile:"",depressed:""},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.currentValidatorCheck&&e.currentValidatorErrors.length>0,expression:"!currentValidatorCheck && currentValidatorErrors.length > 0"}],staticClass:"filaMeusAgendamentos-error-messages-container"},[t("span",[e._v(e._s(e.errorMessage))])])]),t(Cr["a"],{staticClass:"pa-0",attrs:{height:"1000px",type:"table",loading:e.loadingHeaders}},[t("div",[t("table",{staticClass:"filaMeusAgendamentos-table"},[t("thead",{staticClass:"filaMeusAgendamentos-header"},[t("tr",e._l(e.headers,(function(n){return"doctor_name"!==n.header?t("th",{class:e.getHeaderClassName(n.header),on:{click:function(t){return e.order(n.header)}}},[e._v(e._s(e.$t("attendance.filaMeusAgendamentos."+n.header))+"\n            "),"action"!==n.header&&"status"!==n.header?t("img",{staticClass:"sort-arrow-position",class:{"sort-asc":e.sorting===n.header&&"asc"==e.orderBy},attrs:{src:a("d742")}}):e._e()]):e._e()})),0)]),!e.loadingAttendances&&e.caseAttendances.length>0?t("tbody",e._l(e.caseAttendances,(function(n,i){return t("tr",{key:i,staticClass:"filaMeusAgendamentos-line",class:{"reincidency-lane":!0===n.is_parent,"late-line":!n.is_parent&&e.checkPass(n),"upcoming-line-odd":!n.is_parent&&!e.checkPass(n)&&(i+1)%2!==0,"upcoming-line-pair":!n.is_parent&&!e.checkPass(n)&&(i+1)%2==0}},e._l(e.headers,(function(i){return"doctor_name"!==i.header?t("td",{class:e.getLineClassName(i.header)},[t("div",{class:{"data-flex":"action"!==i.header,"action-flex":"action"===i.header}},["action"===i.header?[e.canAttend(n)?t(r["a"],{staticClass:"attend-button attend-button-background",attrs:{loading:e.loadingAction,disabled:e.loadingAction||e.disableAccessOnTime(n)},on:{click:function(t){return e.access(n)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("72e8")}}),e._v("\n                  "+e._s(e.$t("attendance.attend"))+"\n                ")]):e._e(),e.canCancel(n)?t(r["a"],{staticClass:"cancel-button cancel-button-background",attrs:{loading:e.loadingAction,disabled:e.loadingAction},on:{click:function(t){return e.cancel(n.case_attendance_id)}}},[t("img",{staticClass:"cancel-button-icon",attrs:{src:a("66b4")}}),e._v("\n                  "+e._s(e.$t("attendance.cancel"))+"\n                ")]):e._e()]:"patient_name"===i.header?[t("p",{staticClass:"line-patient-name"},[e._v(e._s(e.getPatientName(n.member_name)))]),e.hasSocialName(n)?t("div",{staticClass:"second-flag"},[t("img",{staticClass:"lgbt",attrs:{src:a("92a7")}})]):e._e(),t("div",{staticClass:"first-flag"},[n.patient_info?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.patient_info.vip,deficiencyIds:n.patient_info.disabilities}}):e._e()],1)]:[t("span",{staticClass:"text-wrap"},[e._v("\n                  "+e._s(e.showColumnData(i.header,n))+"\n                ")])]],2)]):e._e()})),0)})),0):e._e()]),e.loadingAttendances?t("div",{staticClass:"filaMeusAgendamentos-data-loader-container"},[t(nt["a"],{attrs:{indeterminate:""}})],1):e._e(),e.loadingAttendances||0!=e.caseAttendances.length?e._e():t("div",{staticClass:"filaMeusAgendamentos-data-loader-container"},[t("p",{staticClass:"filaMeusAgendamentos-no-attendance"},[e._v(e._s(e.$t("attendance.filaMeusAgendamentos.no_attendance")))])]),e.loadingAttendances?e._e():t("div",{staticClass:"filaMeusAgendamentos-table text-center page-container-filaMeusAgendamentos"},[e.totalPages>0?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"5"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.previousPage()}},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)])])],1):e._e()},mT=[],uT={name:"filaMeusAgendamentos",components:{TransferButton:ta,DeficiencyIdentifierBars:Zt},mixins:[ve],data(){return{lastPage:0,lastValue:null,reincidency:!1,loadingTotal:!1,startMenu:!1,endMenu:!1,endMin:null,selected_date_start:"",selected_date_end:"",formattedDateEnd:"",vencimentoStartErrors:[],vencimentoEndErrors:[],isDateValid:!0,whitelistPrograms:[58,62,61,66,59,65,64,55,63,70,4,10,5,54,57,71],userPrograms:[],statuses:[{id:1,name:this.$t("attendance.OPENED")},{id:13,name:this.$t("attendance.RESERVED")},{id:12,name:this.$t("attendance.ATTENDING")},{id:16,name:this.$t("attendance.PENDING_PAYMENT")},{id:22,name:this.$t("attendance.DOCTOR_PENDING")},{id:24,name:this.$t("attendance.SCHEDULE_PENDING")},{id:26,name:this.$t("attendance.GENERATING_DOCUMENTS")}],urgencyLevels:[{id:1,name:this.$t("attendance.filaMeusAgendamentos.urgencies.no_urgency"),color:"#00B5E2"},{id:2,name:this.$t("attendance.filaMeusAgendamentos.urgencies.minor_urgency"),color:"#4BC163"},{id:3,name:this.$t("attendance.filaMeusAgendamentos.urgencies.urgency"),color:"#FDD145"},{id:4,name:this.$t("attendance.filaMeusAgendamentos.urgencies.high_urgency"),color:"#FF9900"},{id:5,name:this.$t("attendance.filaMeusAgendamentos.urgencies.emergency"),color:"#FF0000"}],total:0,sorting:null,orderBy:"desc",caseAttendances:[],loadingAttendances:!0,loadingHeaders:!0,loadingAction:!1,selectedFilter:{id:"nome_paciente",name:this.$t("attendance.filaMeusAgendamentos.filters.patient")},filters:[{id:"nome_paciente",name:this.$t("attendance.filaMeusAgendamentos.filters.patient")},{id:"cpf",name:this.$t("attendance.filaMeusAgendamentos.filters.cpf")},{id:"caso",name:this.$t("attendance.filaMeusAgendamentos.filters.case_id")},{id:"companhia",name:this.$t("attendance.filaMeusAgendamentos.filters.company")},{id:"programa_nome",name:this.$t("attendance.filaMeusAgendamentos.filters.program")},{id:"status",name:this.$t("attendance.filaMeusAgendamentos.filters.status")},{id:"vencimento_period",name:this.$t("attendance.filaMeusAgendamentos.filters.vencimento_period")}],form:{nome_paciente:"",cpf:"",programa_nome:"",caso:"",companhia:"",status:"",vencimento_start:"",vencimento_end:"",doctor_name:""},reverse:{},currentPage:1,totalPages:0,requiredPermissions:["attendanceQueue.generalAttendances.list","attendanceQueue.internalAttendances.list","attendanceQueue.myAttendances.list"],headers:[],hasAccess:!1,errorMessage:null,autoReloadRef:null,pauseAutoReload:!1,programObj:null}},validations:{form:{nome_paciente:{required:Ae["required"]},cpf:{required:Ae["required"],validCpfOrNA(e){return"N/A"===e||/^\d{11}$/.test(e)}},caso:{required:Ae["required"],numeric:Ae["numeric"]},programa_nome:{required:Ae["required"]},companhia:{required:Ae["required"]},status:{required:Ae["required"]},vencimento_period:{required:Ae["required"],validPeriod:function(){if(this.form.vencimento_start&&this.form.vencimento_end){const e=this.isValidDate(this.form.vencimento_start),t=this.isValidDate(this.form.vencimento_end);if(!e||!t)return!1;const a=this.$moment(this.form.vencimento_start,"DD/MM/YYYY"),n=this.$moment(this.form.vencimento_end,"DD/MM/YYYY");return a.isSameOrBefore(n)}return!0}},doctor_name:{required:Ae["required"]}}},created(){let e=this.$store.state.Data.User.info.user_info.programs;this.userPrograms=e.filter(e=>this.whitelistPrograms.includes(e.id)&&e.list);let t=this.checkAccessesControlFuncionality(this.requiredPermissions,this.$store.state.Data.User.info.role_info.funcionality_privilegies);this.userPrograms.length>0&&t&&(this.userPrograms.forEach(e=>{this.$consts.AUTOMATIC_COLLAPSE_SCHEDULE.includes(e.id)&&(this.programObj=e)}),this.hasAccess=!0,this.getHeaders(),this.getAttendances(),this.$bus.on("restart-queue-update",()=>{this.getAttendances()}),this.$bus.on("stop-queue-update",this.stopAutoReload))},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),this.$bus.off("restart-queue-update"),clearTimeout(this.autoReloadRef),this.pauseAutoReload=!0,this.loadingAttend=!1},methods:{isValidDate(e){if(!e||10!==e.length)return!1;const[t,a,n]=e.split("/").map(Number);if(!t||!a||!n)return!1;const i=new Date(n,a-1,t);return i.getFullYear()===n&&i.getMonth()===a-1&&i.getDate()===t},validateDates(){return this.vencimentoStartErrors=[],this.vencimentoEndErrors=[],this.isDateValid=!0,this.form.vencimento_start&&!this.isValidDate(this.form.vencimento_start)&&(this.vencimentoStartErrors.push("Data inv
lida"),this.isDateValid=!1),this.isDateValid},formatManualStartDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_start)||(this.form.vencimento_start="")},formatManualEndDate(){/^\d{2}\/\d{2}\/\d{4}$/.test(this.form.vencimento_end)||(this.form.vencimento_end="")},stopAutoReload(){clearTimeout(this.autoReloadRef),this.pauseAutoReload=!0},resetForm(){this.lastPage=0,this.lastValue=null,this.form={nome_paciente:"",cpf:"",programa_nome:"",caso:"",companhia:"",vencimento_start:"",vencimento_end:"",urgencia:null}},saveStartDate(e){const[t,a,n]=e.split("-");this.form.vencimento_start=`${n}/${a}/${t}`,this.endMin=`${t}-${a}-${n}`,this.$refs.startMenu.save(this.form.vencimento_start)},saveEndDate(e){const[t,a,n]=e.split("-");this.form.vencimento_end=`${n}/${a}/${t}`,this.$refs.endMenu.save(this.form.vencimento_end)},access(e){if(this.loadingAction)return;this.loadingAction=!0,e.nursequeue=!0;let t={token:this.$store.state.Data.User.token,program_id:17};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_DATA,t).then(t=>{e.program_info={id:t.data.program_info.id,name:t.data.program_info.name,type:t.data.program_info.type,care_type:t.data.program_info.care_type},this.attend(e)}).catch(e=>{this.loadingAction=!1,console.error(e)})},attend(e){this.data=e,Ge.attend({case_attendance_id:e.case_attendance_id}).then(e=>{e.data.can_attend?this.$bus.emit("open-patient-page",this.data):this.$bus.emit("open-snackbar",{message:"attendance_already_reserved"})}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAction=!1})},canCancel(e){let t=this.$store.state.Data.User.info.user_info.programs.filter(t=>t.id===e.program_information[0].id);return t.length>0&&t[0].cancel},canAttend(){let e=!1,t=this.$store.state.Data.User.info.user_info.queues;return t&&t.length>0&&t.forEach(t=>{17==t.id&&(e=t.attend)}),e&&this.checkAccessesControlFuncionality(["attendanceQueue.generalAttend.update","attendanceQueue.internalAttend.update","attendanceQueue.myAttend.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},canTransfer(e){return this.checkAccessesControlFuncionality(["attendance.doctorTransfer.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeader(17).then(e=>{this.headers=e.data}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},getHeaderClassName(e){let t="filaEnfermeiraAtiva-header header-"+e.replace(/_/g,"-");return"action"!==e&&(t+=" filaEnfermeiraAtiva-pointer"),t},getLineClassName(e){return"filaEnfermeiraAtiva-in-line filaEnfermeiraAtiva-line-text header-"+e.replace(/_/g,"-")},showColumnData(e,t){let a={patient_name:"name",cpf:"cpf"},n={case_id:"case_id",company_name:"company_name",status:"status",attemps_number:"attempts",sla:"sla",interactions_number:"num_skip_qt"},i={program_name:"name"},s={request:"name"},o={doctor_name:"doctor_name"};if(s[e])return t.bricks.emr_desfecho[Object.keys(t.bricks.emr_desfecho)[0]]&&1==t.bricks.emr_desfecho[Object.keys(t.bricks.emr_desfecho)[0]].prescription?this.$t("attendance.filaEnfermeiraAtiva.request_brick.with_prescription"):this.$t("attendance.filaEnfermeiraAtiva.request_brick.no_prescription");if(a[e]&&"cpf"===e){const e=t.member&&t.member.length>0?t.member[0].cpf:null;if(!e||"n/a"===e.toLowerCase())return"N/A";const a=e.replace(/\D/g,"");return a.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")}if(n[e]){if("company_name"===e)return t.company_info&&t.company_info.nick_name?t.company_info.nick_name:t.company_name;if("sla"==e){let e=Number.isInteger(t.sla)?t.sla:this.convertUtcOffset(`${t.due_date.split(" ")[0]} ${t.due_time}`).unix();return this.$moment.unix(e).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")}return"status"==e?this.$t("attendance."+t.status):t[n[e]]}return i[e]?t.program_information[0][i[e]]:o[e]?!t.doctor_name&&t.attendant_info&&t.attendant_info.name?t.attendant_info.name:t.doctor_name:"-"},checkPass(e){let t=this.$moment.utc(e.sla).tz(Intl.DateTimeFormat().resolvedOptions().timeZone),a=this.$moment();return!t.isAfter(a)},changePage(){this.getAttendances()},nextPage(){},previousPage(){},getAttendances(e=!1){this.loadingAttendances=!0,clearTimeout(this.autoReloadRef),this.pauseAutoReload=!1;let t=this.form[this.selectedFilter.id];this.selectedFilter&&"vencimento_period"===this.selectedFilter.id&&(t=`${this.form.vencimento_start} - ${this.form.vencimento_end}`),(e||null!==this.lastValue&&this.lastValue!==t)&&(this.currentPage=1,this.lastPage=0),this.selectedFilter&&this.selectedFilter.id&&(e||this.lastValue!==t)&&(this.lastValue=t,this.lastPage=this.currentPage);let a={limit:10,offset:10*(this.currentPage-1),type:"nurse",queue_program_id:17};if(this.selectedFilter){const e=this.$v.form&&this.$v.form[this.selectedFilter.id];if(e&&!e.$invalid&&"vencimento_period"!==this.selectedFilter.id)a.filter={field:this.selectedFilter.id,value:this.form[this.selectedFilter.id]};else if("vencimento_period"===this.selectedFilter.id&&this.form.vencimento_start&&this.form.vencimento_end){let e=this.$moment(this.form.vencimento_start,"DD/MM/YYYY").unix(),t=this.$moment(this.form.vencimento_end,"DD/MM/YYYY").unix();a.filter={field:"vencimento_period",start_at:e,end_at:t}}else!e&&this.form[this.selectedFilter.id]&&(a.filter={field:this.selectedFilter.id,value:this.form[this.selectedFilter.id]})}this.sorting&&(a.order={column:this.sorting,order_type:this.orderBy}),je.listQueueAttendancesV2(a).then(e=>{this.caseAttendances=e.data.attendances,this.total=e.data.total,this.totalPages=Math.ceil(this.total/10)}).catch(e=>{console.error(e)}).finally(()=>{this.loadingAttendances=!1,this.autoReloadRef=setTimeout(()=>{this.getAttendances()},this.$consts.SETTINGS.LISTTIMEOUT)})},order(e){if("action"!=e&&"request"!=e){if(this.sorting===e)return this.orderBy="asc"===this.orderBy?"desc":"asc",void this.getAttendances();this.sorting=e,this.orderBy="asc",this.getAttendances()}},getPatientName(e){return null==e||0===e?this.$t("attendance.filaMonitoramentoClinico.errors.no_patient_info"):e},formatProgram(e){return e[0]},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e),this.$bus.emit("cancel-attendance-modal-in-queue")},currentValidatorTouch(){this.currentValidator.$touch()}},computed:{currentValidator(){return this.$v.form&&this.$v.form[this.selectedFilter.id]||{$invalid:!1,$error:!1}},currentValidatorCheck(){return!0},currentValidatorErrors(){const e=this.currentValidator;if(!e||!e.$error)return[];const t=[];return!1===e.required&&t.push(this.$t("attendance.filaEnfermeiraAtiva.validator.required")),!1===e.numeric&&t.push(this.$t("attendance.filaEnfermeiraAtiva.validator.numeric")),!1===e.minLength&&t.push(this.$t("attendance.filaEnfermeiraAtiva.validator.minLength")),!1===e.maxLength&&t.push(this.$t("attendance.filaEnfermeiraAtiva.validator.maxLength")),t.length>0?this.errorMessage=t[0]:this.errorMessage=null,t},currentMask(){return!(!this.selectedFilter||"cpf"!=this.selectedFilter.id)&&"###.###.###-##"}}},tT=eT,aT=(a("3883"),Object(I["a"])(tT,XC,zC,!1,null,"0efaa746",null)),nT=aT.exports,iT=function(){var e=this,t=e._self._c;return e.hasAccess?t("div",{staticClass:"filaMonitoramentoClinico mt-8"},[t("div",{staticClass:"filaMonitoramentoClinico-top-container"},[t("div",{staticClass:"filaMonitoramentoClinico-title-container"},[t("img",{staticClass:"filaMonitoramentoClinico-title-img mr-3",attrs:{src:a("b676")}}),t("p",{staticClass:"filaMonitoramentoClinico-title-text",domProps:{innerHTML:e._s(e.$t("attendance.filaMonitoramentoClinico.title"))}})]),t("div",{staticClass:"filaMonitoramentoClinico-filter-container"},[t($t["a"],{staticClass:"filaMonitoramentoClinico-filter-selector",attrs:{items:e.filters,label:e.$t("attendance.filaMonitoramentoClinico.select_filter"),"return-object":"","item-text":"name","item-value":"id",height:"44px",width:"246px","append-icon":"keyboard_arrow_down",outlined:""},on:{change:function(t){return e.resetForm()}},model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}}),"vencimento_period"!==e.selectedFilter.id&&"status"!==e.selectedFilter.id?t(oe["a"],{staticClass:"filaMonitoramentoClinico-filter-text-field-box",attrs:{sm:"8"}},[e.currentMask&&"cpf"===e.selectedFilter.id?t(de["a"],{key:"filaMonitoramentoClinico.cpf",staticClass:"filaMonitoramentoClinico-filter-text-field",attrs:{placeholder:e.$t("attendance.filaMonitoramentoClinico.search"),height:"44px",width:"324px","error-messages":e.currentValidatorErrors,clearable:"",outlined:"","hide-details":""},on:{blur:function(t){return e.currentValidatorTouch()},input:t=>e.form.cpf="N/A"===t?"N/A":t.replace(/\D/g,"")},model:{value:e.form[e.selectedFilter.id],callback:function(t){e.$set(e.form,e.selectedFilter.id,"string"===typeof t?t.trim():t)},expression:"form[selectedFilter.id]"}}):e._e(),"cpf"!==e.selectedFilter.id?t(de["a"],{key:"filaMonitoramentoClinico.textfields",staticClass:"filaMonitoramentoClinico-filter-text-field",attrs:{placeholder:e.$t("attendance.filaMonitoramentoClinico.search"),height:"44px",width:"324px","error-messages":e.currentValidatorErrors,clearable:"",outlined:"","hide-details":""},on:{blur:function(t){return e.currentValidatorTouch()}},model:{value:e.form[e.selectedFilter.id],callback:function(t){e.$set(e.form,e.selectedFilter.id,"string"===typeof t?t.trim():t)},expression:"form[selectedFilter.id]"}}):e._e(),t(r["a"],{staticClass:"filaMonitoramentoClinico-filter-btn",class:{"filaMonitoramentoClinico-filter-btn-disabled":!e.currentValidatorCheck},attrs:{height:"45px",color:"primary",tile:"",depressed:""},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e(),"vencimento_period"===e.selectedFilter.id?t(oe["a"],{staticClass:"filaMonitoramentoClinico-filter-text-field-box-2 ml-2",attrs:{sm:"8"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"filaPA-filter-datefield-normalize mr-2",attrs:{label:e.$t("attendance.filaPA.start_date"),placeholder:"DD/MM/AAAA",height:"45px",outlined:"",clearable:"","error-messages":e.vencimentoStartErrors},on:{blur:e.validateDates},model:{value:e.form.vencimento_start,callback:function(t){e.$set(e.form,"vencimento_start",t)},expression:"form.vencimento_start"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"filaPA-filter-datefield-normalize",attrs:{label:e.$t("attendance.filaPA.end_date"),placeholder:"DD/MM/AAAA",height:"45px",outlined:"",clearable:"","error-messages":e.vencimentoEndErrors},on:{blur:e.validateDates},model:{value:e.form.vencimento_end,callback:function(t){e.$set(e.form,"vencimento_end",t)},expression:"form.vencimento_end"}}),t(r["a"],{staticClass:"filaMonitoramentoClinico-filter-btn-2 ml-2",attrs:{height:"45px",color:"primary",tile:"",depressed:"",disabled:!e.isDateValid},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e(),"status"===e.selectedFilter.id?t(oe["a"],{staticClass:"filaMonitoramentoClinico-filter-text-field-box-2 ml-2",attrs:{sm:"8"}},[t($t["a"],{staticClass:"filaMonitoramentoClinico-filter-selector-2",attrs:{items:e.statuses,label:e.$t("attendance.filaMonitoramentoClinico.search"),"item-text":"name","item-value":"id",height:"44px",width:"311px","min-height":"44px","min-width":"311px","max-height":"44px","max-width":"311px","append-icon":"keyboard_arrow_down",outlined:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),t(r["a"],{staticClass:"filaMonitoramentoClinico-filter-btn-2 ml-2",attrs:{height:"45px",color:"primary",tile:"",depressed:""},on:{click:function(t){return e.getAttendances(!0)}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.currentValidatorCheck&&e.currentValidatorErrors.length>0,expression:"!currentValidatorCheck && currentValidatorErrors.length > 0"}],staticClass:"filaMonitoramentoClinico-error-messages-container"},[t("span",[e._v(e._s(e.errorMessage))])])]),t(Cr["a"],{staticClass:"pa-0",attrs:{height:"10end00px",type:"table",loading:e.loadingHeaders}},[t("div",[t("table",{staticClass:"filaMonitoramentoClinico-table"},[t("thead",{staticClass:"filaMonitoramentoClinico-header"},[t("tr",e._l(e.headers,(function(n){return t("th",{class:e.getHeaderClassName(n.header),on:{click:function(t){return e.order(n.header)}}},[e._v(e._s(e.$t("attendance.filaMonitoramentoClinico."+n.header))+"\n            "),"action"!==n.header&&"request"!==n.header?t("img",{staticClass:"sort-arrow-position",class:{"sort-asc":e.sorting===n.header&&"asc"==e.orderBy},attrs:{src:a("d742")}}):e._e()])})),0)]),!e.loadingAttendances&&e.caseAttendances.length>0?t("tbody",e._l(e.caseAttendances,(function(n,i){return t("tr",{key:i,staticClass:"filaMonitoramentoClinico-line",class:{"late-line":!n.is_parent&&e.checkPass(n),"upcoming-line-odd":!n.is_parent&&!e.checkPass(n)&&(i+1)%2!==0,"upcoming-line-pair":!n.is_parent&&!e.checkPass(n)&&(i+1)%2==0}},e._l(e.headers,(function(i){return t("td",{class:e.getLineClassName(i.header)},[t("div",{class:{"data-flex":"action"!==i.header,"action-flex":"action"===i.header}},["action"===i.header?[e.canAttend(n)?t(r["a"],{staticClass:"attend-button attend-button-background",attrs:{loading:e.loadingAction,disabled:e.loadingAction},on:{click:function(t){return e.access(n)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("72e8")}}),e._v("\n                  "+e._s(e.$t("attendance.attend"))+"\n                ")]):e._e()]:"patient_name"===i.header?[t("p",{staticClass:"line-patient-name"},[e._v(e._s(e.getPatientName(n.member_name)))]),e.hasSocialName(n)?t("div",{staticClass:"second-flag"},[t("img",{staticClass:"lgbt",attrs:{src:a("92a7")}})]):e._e(),t("div",{staticClass:"first-flag"},[n.patient_info?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.patient_info.vip,deficiencyIds:n.patient_info.disabilities}}):e._e()],1)]:[t("span",{staticClass:"text-wrap"},[e._v("\n                  "+e._s(e.showColumnData(i.header,n))+"\n                ")])]],2)])})),0)})),0):e._e()]),e.loadingAttendances?t("div",{staticClass:"filaMonitoramentoClinico-data-loader-container"},[t(nt["a"],{attrs:{indeterminate:""}})],1):e._e(),e.loadingAttendances||0!=e.caseAttendances.length?e._e():t("div",{staticClass:"filaMonitoramentoClinico-data-loader-container"},[t("p",{staticClass:"filaMonitoramentoClinico-no-attendance"},[e._v("\n          "+e._s(e.$t("attendance.filaMonitoramentoClinico.no_attendance")))])]),e.loadingAttendances?e._e():t("div",{staticClass:"filaMonitoramentoClinico-table text-center page-container-filaMonitoramentoClinico"},[e.totalPages>0?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"5"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.previousPage()}},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)])])],1):e._e()},sT=[],oT={name:"filaMonitoramentoClinico",components:{TransferButton:ta,DeficiencyIdentifierBars:Zt},mixins:[ve],data(){return{lastPage:0,lastValue:null,loadingTotal:!1,startMenu:!1,endMenu:!1,endMin:null,selected_date_start:"",selected_date_end:"",formattedDateEnd:"",vencimentoStartErrors:[],vencimentoEndErrors:[],isDateValid:!0,whitelistPrograms:[14],userPrograms:[],statuses:[{id:1,name:this.$t("attendance.OPENED")},{id:13,name:this.$t("attendance.RESERVED")},{id:12,name:this.$t("attendance.ATTENDING")},{id:16,name:this.$t("attendance.PENDING_PAYMENT")},{id:22,name:this.$t("attendance.DOCTOR_PENDING")},{id:24,name:this.$t("attendance.SCHEDULE_PENDING")},{id:26,name:this.$t("attendance.GENERATING_DOCUMENTS")}],urgencyLevels:[{id:1,name:this.$t("attendance.filaMonitoramentoClinico.urgencies.no_urgency"),color:"#00B5E2"},{id:2,name:this.$t("attendance.filaMonitoramentoClinico.urgencies.minor_urgency"),color:"#4BC163"},{id:3,name:this.$t("attendance.filaMonitoramentoClinico.urgencies.urgency"),color:"#FDD145"},{id:4,name:this.$t("attendance.filaMonitoramentoClinico.urgencies.high_urgency"),color:"#FF9900"},{id:5,name:this.$t("attendance.filaMonitoramentoClinico.urgencies.emergency"),color:"#FF0000"}],total:0,sorting:null,orderBy:"desc",caseAttendances:[],loadingAttendances:!0,loadingHeaders:!0,loadingAction:!1,selectedFilter:{id:"nome_paciente",name:this.$t("attendance.filaMonitoramentoClinico.filters.patient")},filters:[{id:"nome_paciente",name:this.$t("attendance.filaMonitoramentoClinico.filters.patient")},{id:"cpf",name:this.$t("attendance.filaMonitoramentoClinico.filters.cpf")},{id:"caso",name:this.$t("attendance.filaMonitoramentoClinico.filters.case_id")},{id:"companhia",name:this.$t("attendance.filaMonitoramentoClinico.filters.company")},{id:"programa_nome",name:this.$t("attendance.filaMonitoramentoClinico.filters.program")},{id:"doctor_name",name:this.$t("attendance.filaMonitoramentoClinico.filters.doctor_name")},{id:"vencimento_period",name:this.$t("attendance.filaMonitoramentoClinico.filters.vencimento_period")}],form:{nome_paciente:"",cpf:"",programa_nome:"",caso:"",companhia:"",status:"",vencimento_start:"",vencimento_end:""},reverse:{},currentPage:1,totalPages:0,requiredPermissions:["attendanceQueue.generalAttendances.list","attendanceQueue.internalAttendances.list","attendanceQueue.myAttendances.list"],headers:[],hasAccess:!1,errorMessage:null,autoReloadRef:null,pauseAutoReload:!1}},validations:{form:{nome_paciente:{required:Ae["required"]},cpf:{required:Ae["required"],validCpfOrNA(e){return"N/A"===e||/^\d{11}$/.test(e)}},caso:{required:Ae["required"],numeric:Ae["numeric"]},programa_nome:{required:Ae["required"]},companhia:{required:Ae["required"]},vencimento_period:{required:Ae["required"],validPeriod:function(){if(this.form.vencimento_start&&this.form.vencimento_end){const e=this.isValidDate(this.form.vencimento_start),t=this.isValidDate(this.form.vencimento_end);if(!e||!t)return!1;const a=this.$moment(this.form.vencimento_start,"DD/MM/YYYY"),n=this.$moment(this.form.vencimento_end,"DD/MM/YYYY");return a.isSameOrBefore(n)}return!0}},status:{required:Ae["required"]},doctor_name:{required:Ae["required"]}}},created(){let e=this.$store.state.Data.User.info.user_info.queues;this.userPrograms=e.filter(e=>this.whitelistPrograms.includes(e.id)&&e.list);let t=this.checkAccessesControlFuncionality(this.requiredPermissions,this.$store.state.Data.User.info.role_info.funcionality_privilegies);this.$store.state.Data.User.info.user_info.programs;this.userPrograms.length>0&&t&&(this.hasAccess=!0,this.getHeaders(),this.getAttendances(),this.$bus.on("restart-queue-update",()=>{this.getAttendances()}),this.$bus.on("stop-queue-update",this.stopAutoReload))},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),this.$bus.off("restart-queue-update"),clearTimeout(this.autoReloadRef),this.pauseAutoReload=!0,this.loadingAttend=!1},methods:{isValidDate(e){if(!e||10!==e.length)return!1;const[t,a,n]=e.split("/").map(Number);if(!t||!a||!n)return!1;const i=new Date(n,a-1,t);return i.getFullYear()===n&&i.getMonth()===a-1&&i.getDate()===t},validateDates(){return this.vencimentoStartErrors=[],this.vencimentoEndErrors=[],this.isDateValid=!0,this.form.vencimento_start&&!this.isValidDate(this.form.vencimento_start)&&(this.vencimentoStartErrors.push("Data inv
lido."}},beforeDestroy(){this.$bus.off("open-digital-certification-modal"),this.progressInterval&&clearInterval(this.progressInterval)},validations:{pin:{required:Ae["required"]}},computed:{...Object(K["b"])("Data/CaseAttendance",{certificationPending:"getCertificationPending"}),...Object(K["b"])("Data/DigitalCertification",{renewTimeExpires:"getExpiresIn",tokenAccess:"getAccessToken"}),formattedTimeRemaining(){const e=Math.floor(this.maxTimeRemainingInSecondsToSendCertificationRequest/60),t=this.maxTimeRemainingInSecondsToSendCertificationRequest%60;return`${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}`},authErrors(){const e=[];return this.$v.pin.$dirty?(!this.$v.pin.required&&e.push(this.$t("access_controls.required")),this.failed&&e.push(this.$t("patient.auth_error")),e):e}}},yn=Un,$n=(a("8c95"),Object(I["a"])(yn,bn,Mn,!1,null,null,null)),xn=$n.exports,Vn={props:["case_id"],mixins:[ve,p],components:{CertificationModal:vn,DigitalCertification:xn},data(){return{pendingDocs:!1,case_attendance_id:null,dialogCertification:!1,dialogSaveAttendance:!1,item:null,data:{},visible:!0,cpf:this.$store.state.Data.User.info.user_info.cpf,pin:"",document:null,token_user:"",failed:!1,loading:!1,certified_document_url:"",original_document_url:"",success:!1,error:!1,disabled:!1,brickSaveError:"",saveError:!1,brickHasCorruptData:!1,savePayload:{},whatsapp:!1,invalidPhone:!1,celphone:this.$store.state.Data.Patient.info&&null!=this.$store.state.Data.Patient.info.phone&&""!=this.$store.state.Data.Patient.info.phone?this.$store.state.Data.Patient.info.phone:"",celphoneSend:"",attendancesToProcess:[],certification_options:[{label:"Valid",value:"valid"},{label:"CertiSign",value:"certi_sign"}],selectedCertification:"certi_sign",whatsappEnable:!1,checkFailed:!1,testFailed:!1,generateDocuments:!1,saveSuccess:!1,fieldError:!1,confirmedCloseCertification:!1,canSendDocument:!1,hasToken:!1,accessToken:null}},created(){this.clearComponentData(),this.tokenAccess&&(this.hasToken=!0,this.accessToken=this.tokenAccess),this.$store.state.Data.Patient.info&&(this.celphone=null!=this.$store.state.Data.Patient.info.phone||""!=this.$store.state.Data.Patient.info.phone?this.$store.state.Data.Patient.info.phone:""),this.whatsappEnable=!0,this.celphone=this.$store.state.Data.Patient.info&&null!=this.$store.state.Data.Patient.info.phone&&""!=this.$store.state.Data.Patient.info.phone?this.$store.state.Data.Patient.info.phone:"",this.case_attendance_id=this.case_id,this.checkFailed="tdocop.com.br"!=window.location.host,this.$bus.on("save-doctor-attendance",e=>{e?(this.hasToken=e.hasToken,this.dialogCertification=!0,this.generateDocuments=!(!e||!e.generate_documents)&&e.generate_documents,this.celphone=e&&e.member[0].phone?e.member[0].phone:null,this.$store.state.Data.Patient.info&&null!=this.$store.state.Data.Patient.info.phone&&(this.celphone=this.$store.state.Data.Patient.info.phone),this.item=e,this.$bus.emit("open-digital-certification-modal",{hasToken:this.hasToken,inAttendance:!0,pendingDocs:this.pendingDocs})):this.certificationPending?(this.tokenAccess&&(this.accessToken=this.tokenAccess,this.hasToken=!0),this.pendingDocs=!0,this.saveSuccess=!0,this.dialogSaveAttendance=!1,this.dialogCertification=!0,this.$bus.emit("open-digital-certification-modal",{hasToken:this.hasToken,inAttendance:!0,pendingDocs:this.pendingDocs})):this.dialogSaveAttendance=!0}),this.$bus.on("error-save-brick",e=>{this.saveError=!0,this.success=!1,this.brickSaveError=e,this.loading=!1,this.disabled=!1}),this.$bus.on("save-doctor-enable",()=>{this.loading=!1,this.disabled=!1}),this.$bus.on("doctor-finish-attendance",()=>{this.finishAttendance(!0)}),this.$bus.on("save-doctor-finish",()=>{this.endAttendance()}),this.$bus.on("receive-document-data",e=>{this.case_attendance_id=e.case_attendance_id}),this.$bus.on("receive-brick-data",e=>{this.brickHasCorruptData||(this.brickHasCorruptData=!!e.brickHasCorruptData),e.brick_key&&(this.data[e.brick_key]=e.brick_data)}),this.$bus.on("send-patient-data",e=>{this.item=e}),this.$bus.on("ended-attendance-to-process",e=>{this.attendancesToProcess.push(e)}),this.$bus.on("cancel-certification-attendance",e=>{this.cancelCertificationAttendance(e)});let e=this.$store.state.Data.CaseAttendance.info.program_id,t=this.$store.state.Data.User.info.user_info.programs;this.canSendDocument=!1,t&&t.length>0&&t.forEach(t=>{e==t.id&&!0===t.send_document&&(this.canSendDocument=!0)}),this.$bus.on("renew-certify-attendance",e=>{this.selectedCertification=e.provider,this.accessToken=e.accessToken,this.whatsapp=e.whatsapp,this.dialogCertification=!1,this.celphone=e.celphone?e.celphone:this.celphone,this.testFailed=e.test_failed,this.saveCertification()})},beforeDestroy(){this.clearComponentData()},methods:{...Object(K["c"])("Data/CaseAttendance",["setCertificationPending"]),clearComponentData(){this.$bus.off("renew-certify-attendance"),this.$bus.off("save-doctor-attendance"),this.$bus.off("receive-document-data"),this.$bus.off("receive-brick-data"),this.$bus.off("send-patient-data"),this.$bus.off("error-save-brick"),this.$bus.off("save-doctor-enable"),this.$bus.off("save-doctor-finish"),this.$bus.off("ended-attendance-to-process"),this.$bus.off("doctor-finish-attendance"),this.$bus.off("certify-attendance")},saveAttendance(){let e=Object.keys(this.$store.state.Data.CaseAttendance.info).length>0&&!1===this.generateDocuments?this.$store.state.Data.CaseAttendance.info:this.item;this.saveError=!1,this.saveSuccess=!1,this.brickSaveError="",this.$v.$touch(),this.$bus.emit("request-save-data");let t=Ge.getInvalidData(Object.keys(this.$store.state.Data.Bricks.AttendanceBricks.bricks).length>0?this.$store.state.Data.Bricks.AttendanceBricks.bricks:e.bricks);0===t.length?(this.disabled=!0,this.loading=!0,this.failed=!1,this.attendancesToProcess.length>0&&(this.attendancesToProcess.map(t=>t.case_attendance_id=e.case_attendance_id),this.data.attendances_to_proccess=this.attendancesToProcess),this.savePayload={token:this.$store.state.Data.User.token,patient_id:e.patient_info.id,user_id:this.$store.state.Data.User.info.user_info.id,case_id:e.case_id||this.case_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING,program_id:e.program_information[0].id||this.item.program_id,program_step:1,due_date:this.$moment(e.due_date).format("YYYY-MM-DD"),due_time:e.due_time,bricks:JSON.stringify(this.data),case_attendance_id:e.case_attendance_id},this.savePayload.bricks=JSON.parse(this.savePayload.bricks),this.savePayload.bricks=JSON.stringify(this.savePayload.bricks),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ADD,this.savePayload).then(()=>{Ge.changeStatus({case_attendance_id:e.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.CERTIFICATION_PENDING}).then(()=>{this.saveSuccess=!0,this.disabled=!1,this.loading=!1,this.$v.pin.$reset(),this.setCertificationPending({certification_pending:!0})}).catch(e=>{503==e.status?this.brickSaveError="N
lido:",t),!1}}},watch:{digitalCertificationSwitch:function(e){this.checkSwitchDigitalCertification(e)},expiresIn(e){this.expirationTime=new Date(Date.now()+1e3*e),this.startTimer()}},computed:{effectiveSwitchValue(){return!!this.disabledSwitch||this.digitalCertificationSwitch},hasOnlineUsers(){return"EXTERNAL"!==this.userType&&"EXTERNAL_MEDICAL"!==this.userType},expiresIn(){return this.$store.getters[this.$consts.DIGITAL_CERTIFICATION_ACTIONS.EXPIRES_IN]}}},AU=uU,_U=(a("ea75"),Object(I["a"])(AU,W,X,!1,null,"21e2de1c",null)),EU=_U.exports,IU=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[t("div",{staticClass:"sidebar"},[t("img",{staticClass:"teladoc-logo",attrs:{src:a("ccd4")}})]),t("div",{staticClass:"login-section"},[e.resetOk?t("div",{staticClass:"success-message"},[t("span",[e._v(e._s(e.$t("login.register_password_success")))])]):e._e(),e.login?t("LoginForm"):e._e(),e.reset?t("SetNewPassword"):e._e()],1),t("DisconnectedByInactivityModal")],1)},hU=[],OU=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"test"},[t("div",{staticClass:"l-header-section"},[t("div",{staticClass:"image"},[t("img",{staticClass:"logo",attrs:{src:a("ca74")}})]),t("div",{staticClass:"vertical-bar"}),t("div",{staticClass:"header-title"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("login.operations")))])])]),t("div",{staticClass:"login-form"},[t("form",[t(de["a"],{staticClass:"custom-input-login",attrs:{label:e.$t("login.email"),height:"37.5",outlined:"",autocomplete:"username"},on:{blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}}),t(de["a"],{staticClass:"custom-input-login",attrs:{label:e.$t("login.password"),height:"37.5",type:e.visible?"password":"text","append-icon":e.visible?"visibility":"visibility_off",autocomplete:"current-password",outlined:""},on:{"click:append":function(t){e.visible=!e.visible},blur:function(t){return e.$v.password.$touch()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),e.$v.email.email?e._e():t("div",{staticClass:"error-messages"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.email_invalid")))]),t("img",{staticClass:"warning-icon mt-1",attrs:{src:a("dfbb")}})]),e.$v.password.minLength?e._e():t("div",{staticClass:"error-messages"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.required_field")))]),t("img",{staticClass:"warning-icon mt-1",attrs:{src:a("dfbb")}})]),e.hasError?t("div",{staticClass:"error-messages"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.login_error")))]),t("img",{staticClass:"warning-icon mt-1",attrs:{src:a("dfbb")}})]):e._e(),t("div",{staticClass:"remember-forgot"},[t("div",{staticClass:"checkbox"},[t(St["a"],{staticClass:"check",attrs:{color:"blue",label:e.$t("login.remind_me")},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}})],1),t("div",{staticClass:"text-spot",on:{click:function(t){return e.goToForgotPassword()}}},[t("span",{staticClass:"forgot-text"},[e._v(e._s(e.$t("login.forgot")))])])]),t(r["a"],{staticClass:"primary mb-10",attrs:{block:"",height:"37.5",width:"100%",loading:e.loading},on:{click:function(t){return e.login()}}},[t("span",{staticClass:"login-btn"},[e._v(e._s(e.$t("login.enter")))])]),t("form",{on:{submit:function(t){return t.preventDefault(),e.validateCaptcha()}}},[t("div",{staticClass:"g-recaptcha",attrs:{id:"g-recaptcha","data-sitekey":e.sitekey}})]),e.noRecaptcha?t("div",{staticClass:"recaptcha-message"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.recaptcha_required")))]),t("img",{staticClass:"warning-icon",attrs:{src:a("dfbb")}})]):e._e()],1)]),t("ForgotPassword")],1)])},pU=[],SU={name:"LoginForm",components:{ForgotPassword:Le},mixins:[g],data(){return{remember_me:!1,email:null,password:null,visible:!0,sitekey:"6LeymuIUAAAAAG4Lf7TVnRT4XrBSDotx5Q0Ic2Gg",validated:!1,errors:"",dialog:!1,widgetId:0,hasError:!1,data:"",loading:!1,checkbox:!1,noRecaptcha:!1}},created(){setTimeout(()=>{this.onloadCallback()},500);JSON.parse(localStorage.getItem("user-info"))},methods:{login(){if(this.$v.$touch(),!this.$v.$invalid){if(this.validateCaptcha(),!this.validated)return!1;{this.noRecaptcha=!1,this.loading=!0;let e={email:this.email,password:this.password};localStorage.removeItem("user-info"),localStorage.removeItem("token"),localStorage.removeItem("companies"),Te.login(e).then(async t=>{await this.$store.dispatch(this.$consts.USER_ACTIONS.SET_TOKEN,t.data.token),await this.$store.dispatch(this.$consts.USER_ACTIONS.SET_INFO,t.data),await this.$store.dispatch(this.$consts.USER_ACTIONS.REMEMBER_ME,this.checkbox),await this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR,e),await this.handleSession(),this.$router.push({name:"Home"})}).catch(e=>{this.hasError=!0,console.error(e)}).finally(()=>{this.loading=!1})}}},goToForgotPassword(){this.dialog=!0,this.$bus.emit("dialog",this.dialog)},validateCaptcha(){return this.noRecaptcha=!1,this.validated=!0,this.noRecaptcha=!1,!0},reset(){window.grecaptcha.reset(this.widgetId)},onloadCallback(){window.grecaptcha&&(this.widgetId=window.grecaptcha.render("g-recaptcha",{sitekey:this.sitekey,callback:e=>{this.validateCaptcha()}}))}},validations:{email:{required:Ae["required"],email:Ae["email"]},password:{required:Ae["required"],minLength:Object(Ae["minLength"])(1)}}},CU=SU,TU=(a("cf362"),Object(I["a"])(CU,OU,pU,!1,null,null,null)),RU=TU.exports,DU=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"header-section"},[t("div",{staticClass:"image"},[t("img",{staticClass:"logo",attrs:{src:a("ca74")}})]),t("div",{staticClass:"vertical-bar"}),t("div",{staticClass:"header-title"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("login.register_password")))])])]),t("div",{staticClass:"login-form"},[t("form",[t(de["a"],{staticClass:"custom-input",attrs:{label:e.$t("login.new_password"),height:"37px",type:e.visible?"password":"text","append-icon":e.visible?"visibility":"visibility_off",outlined:""},on:{"click:append":function(t){e.visible=!e.visible}},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),t(de["a"],{staticClass:"custom-input",attrs:{label:e.$t("login.repeat_password"),height:"37px",type:e.repeatVisible?"password":"text","append-icon":e.repeatVisible?"visibility":"visibility_off",outlined:""},on:{"click:append":function(t){e.repeatVisible=!e.repeatVisible}},model:{value:e.repeatPassword,callback:function(t){e.repeatPassword="string"===typeof t?t.trim():t},expression:"repeatPassword"}}),e.$v.repeatPassword.sameAsPassword?e._e():t("div",{staticClass:"error-messages"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.password_match_error")))]),t("img",{staticClass:"warning-icon mt-1",attrs:{src:a("dfbb")}})]),e.hasError?t("div",{staticClass:"error-messages"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.expired_token")))]),t("img",{staticClass:"warning-icon mt-1",attrs:{src:a("dfbb")}})]):e._e(),e.$v.repeatPassword.sameAsPassword&&!e.$v.password.minLength?t("div",{staticClass:"error-messages"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.min_length")))]),t("img",{staticClass:"warning-icon mt-1",attrs:{src:a("dfbb")}})]):e._e(),e.weakPassword?t("div",{staticClass:"error-messages"},[t("span",{staticClass:"error-message red--text"},[e._v(e._s(e.$t("login.weak_password")))]),t("img",{staticClass:"warning-icon mt-1",attrs:{src:a("dfbb")}})]):e._e(),t(r["a"],{staticClass:"primary mb-10",attrs:{block:"",width:"100%",height:"37px","min-width":"calc(386px*0.75)",loading:e.loading},on:{click:function(t){return e.registerNewPassword()}}},[t("span",{staticClass:"submit-btn"},[e._v(e._s(e.$t("login.register_new_password")))])])],1)]),t("ForgotPassword")],1)},gU=[],LU=a("1dce"),fU=a.n(LU),NU={name:"LoginForm",components:{ForgotPassword:Le},mixins:[LU["validationMixin"]],data(){return{password:null,repeatPassword:null,tempPassword:null,visible:!0,repeatVisible:!0,tempVisible:!0,sitekey:"6LeymuIUAAAAAG4Lf7TVnRT4XrBSDotx5Q0Ic2Gg",validated:!1,showBorder:!1,errors:"",widgetId:0,token:"",hasError:!1,loading:!1,weakPassword:!1}},created(){},methods:{validatePassword(e){return!!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$#!%*?&])[A-Za-z\d@$#!%*?&]{8,}$/.test(e)},checkTempPassword(){},registerNewPassword(){if(this.$v.$touch(),!this.validatePassword(this.password))return this.weakPassword=!0,!1;if(this.$v.$invalid)return!1;{this.loading=!0,this.weakPassword=!1;let e={token:this.$route.query.token,password:this.password};Te.setNewPassword(e).then(e=>{this.$bus.emit("login")}).catch(e=>{console.error(e),"invalid_token"==e&&(this.hasError=!0,setTimeout(()=>{this.$bus.emit("reset-error")},3e3))}).finally(()=>{this.loading=!1})}}},validations:{password:{required:Ae["required"],minLength:Object(Ae["minLength"])(6)},repeatPassword:{required:Ae["required"],minLength:Object(Ae["minLength"])(6),sameAsPassword:Object(Ae["sameAs"])("password")}}},kU=NU,vU=(a("d8c1"),Object(I["a"])(kU,DU,gU,!1,null,null,null)),bU=vU.exports,MU=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"300",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header mb-5"},[t("div",{staticClass:"card-header white--text"},[e._v("\n          "+e._s(e.$t("login.inactivity_title"))+"\n        ")]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.handleClose()}}})])]),t(c["b"],{staticClass:"d-flex justify-center"},[e._v("\n        "+e._s(e.$t("login.inactivity_text"))+"\n      ")]),t(c["a"],{staticClass:"pb-5 d-flex justify-center"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary"},on:{click:e.handleClose}},[e._v("\n          "+e._s(e.$t("login.continue"))+"\n        ")])],1)],1)],1)],1)},PU=[],UU={data(){return{dialog:!1}},created(){this.$bus.on("disconnected-by-inactivity-dialog",()=>this.dialog=!0)},beforeDestroy(){this.$bus.off("disconnected-by-inactivity-dialog")},methods:{handleClose(){this.dialog=!1}}},yU=UU,$U=(a("c50f"),Object(I["a"])(yU,MU,PU,!1,null,"d5927bea",null)),xU=$U.exports,VU={name:"Login",components:{LoginForm:RU,SetNewPassword:bU,DisconnectedByInactivityModal:xU},data(){return{login:!0,reset:!1,resetOk:!1}},created(){this.$bus.on("login",e=>{this.login=!0,this.reset=!1,this.resetOk=!0,this.$router.push({path:"/login"})}),this.$bus.on("reset-error",()=>{this.login=!0,this.reset=!1,this.resetOk=!1,this.$router.push({path:"/login"})}),this.$route.query.token&&(this.login=!1,this.reset=!0,this.resetOk=!1),this.checkBackHistory()},mounted(){if("true"==this.$route.query.inactivity){let e=Object.assign({},this.$route.query);delete e.inactivity,this.$router.replace({query:e}),this.$bus.emit("disconnected-by-inactivity-dialog")}},methods:{checkBackHistory(){let e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user-info"));e&&e==t.token&&this.$router.go("/home")}}},GU=VU,FU=(a("b08a"),Object(I["a"])(GU,IU,hU,!1,null,"837180e4",null)),BU=FU.exports,wU=function(){var e=this,t=e._self._c;return t("div",[e._v("Not Found")])},HU=[],qU={name:"Not Found"},YU=qU,jU=Object(I["a"])(YU,wU,HU,!1,null,null,null),KU=jU.exports;n["a"].use(Q["a"]);const ZU=new Q["a"]({mode:"history",routes:[{path:"/",redirect:"/login",secure:!1},{path:"/home",name:"Home",component:EU,secure:!0},{path:"/login",name:"Login",component:BU},{path:"/atender",name:"Tabs",component:NT,secure:!0},{path:"/controls",name:"Controls",component:Hv,secure:!0},{path:"/schedule",name:"Schedule",component:aU,secure:!0},{path:"/coupons",name:"Coupons",component:VP,secure:!0},{path:"/notfound",name:"Not Found",component:KU,secure:!1},{path:"*",redirect:"/login",secure:!1}]});ZU.beforeEach((e,t,a)=>{let n=sessionStorage.getItem("token"),i=JSON.parse(localStorage.getItem("user-info"));ZU.options.routes.forEach(t=>{if(e.matched[0].path===t.path&&t.secure&&(!n||n!=i.token))return a("/login");if(e.matched[0].path===t.path&&!t.secure){if(!i||!n||n!=i.token)return a();ZU.push({path:"/home"})}}),a()});var QU=ZU,JU={setToken({commit:e},t){e("setToken",t),sessionStorage.setItem("token",t)},setInfo({commit:e},t){e("setInfo",t),localStorage.setItem("user-info",JSON.stringify(t))},rememberMe({commit:e},t){e("setRemeberMe",t)},update({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.MEMBER_UPDATE,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},streamStart({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("case_attendance_id",t.case_attendance_id),C.a.post(R.ENDPOINTS.STREAM_START,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},userSearch({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),t.limit&&n.append("limit",t.limit),t.offset&&n.append("offset",t.offset),t.name&&n.append("filters[name]",t.name),t.user_type&&n.append("filters[user_type]",t.user_type),C.a.post(R.ENDPOINTS.SEARCH_USERS,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},newCallList({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("name",t.name),t.id&&n.append("id",t.id),n.append("company_id",t.company_id),t.file&&n.append("file_url",t.file),C.a.post(R.ENDPOINTS.NEW_CALL_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},assetCreate({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("file",t.file),t.path&&n.append("path",t.path),t.make_unique&&n.append("make_unique",t.make_unique),C.a.post(R.ENDPOINTS.ASSET_CREATE,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listCallList({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.LIST_CALL_LIST,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getCallList({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("id",t.id),C.a.post(R.ENDPOINTS.GET_CALL_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},deleteCallList({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("id",t.id),C.a.post(R.ENDPOINTS.DELETE_CALL_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},newPayer({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("payer_info[name]",t.name),n.append("payer_info[payer_status]",t.status),n.append("payer_info[document]",t.document),n.append("payer_info[trading_name]",t.trading_name),n.append("payer_info[country]",t.country),n.append("payer_info[address]",t.address),n.append("payer_info[economic_activity]",t.economic_activity),n.append("payer_info[legal_nature]",t.legal_nature),n.append("payer_extra_info[internal_manager_name]",t.internal_manager_name),n.append("payer_extra_info[internal_manager_phone]",t.internal_manager_phone),n.append("payer_extra_info[company_manager_name]",t.company_manager_name),n.append("payer_extra_info[company_manager_phone]",t.company_manager_phone),n.append("payer_contract[expiration_date]",t.expiration_date),n.append("payer_contract[readjustment_frequency]",t.readjustment_frequency),n.append("payer_contract[index_type]",t.index_type),n.append("payer_contract[filename]",t.file),n.append("payer_info[ie]",t.ie),n.append("payer_info[payer_status]","ACTIVE"),n.append("path","contracts"),n.append("make_unique","true"),C.a.post(R.ENDPOINTS.NEW_PAYER,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getPayer({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("payer_id",t.payer_id),C.a.post(R.ENDPOINTS.GET_PAYER,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},updatePayer({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("payer_id",t.payer_id),n.append("payer_contract[filename]",t.filename),t.index_type&&n.append("payer_contract[index_type]",t.index_type),t.readjustment_frequency&&n.append("payer_contract[readjustment_frequency]",t.readjustment_frequency),t.expiration_date&&n.append("payer_contract[expiration_date]",t.expiration_date),C.a.post(R.ENDPOINTS.UPDATE_PAYER,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},deletePayer({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("payer_id",t.payer_id),C.a.post(R.ENDPOINTS.DELETE_PAYER,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listPrograms({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.PROGRAM_LIST,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},createCompany({commit:e},t){return new Promise((e,a)=>{let n={company_info:{name:t.name,company_status:t.status,document:t.document,trading_name:t.trading_name,ie:t.ie,country:t.country,address:t.address,economic_activity:t.economic_activity,legal_nature:t.legal_nature,mother_company:t.mother,foreign_company:t.foreign,flavour_id:t.flavour_id,inheritance:t.inheritance,code_ans:t.code_ans||null,flag_tiss:void 0!==t.flag_tiss&&t.flag_tiss,operator_code:t.operator_code||null,webservice:t.webservice||null,credentials:t.credentials||null}};t.company_id&&(n.company_info.company_id=t.company_id),t.contractee&&(n.company_info.contractee=t.contractee),t.benefit_sponsor&&(n.company_info.benefit_sponsor=t.benefit_sponsor),n.company_extra_info={payer_id:t.payer_id,internal_manager_name:t.internal_manager_name,internal_manager_phone:t.internal_manager_phone,company_manager_name:t.company_manager_name,company_manager_phone:t.company_manager_phone,hr_contact_name:t.hr_contact_name,hr_contact_phone:t.hr_contact_phone,expiration_date:t.expiration_date,readjustment_frequency:t.readjustment_frequency,index_type:t.index_type,filename:t.filename},n.make_unique=!0,n.path="contracts",n.program_ids=t.program_ids?t.program_ids:null,C.a.post(R.ENDPOINTS.COMPANY_CREATE,n,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},checkUniqueCnpj({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("cnpj",parseInt(t.cnpj,10)),t.type&&n.append("type",t.type),C.a.post(R.ENDPOINTS.CHECK_UNIQUE_CNPJ,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},createGroup({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.GROUP_CREATE,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},updateGroup({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.GROUP_UPDATE,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},updateCompany({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.COMPANY_UPDATE,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getMember({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.GET_MEMBER,{member_id:t.member_id,emergency_member:t.emergency_member},{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},beneficiaryStatus({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("company_id",parseInt(t.company_id,10)),C.a.post(R.ENDPOINTS.BENEFICIARY_STATUS,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getProgramByCompany({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),isNaN(t.company_id)||null==t.company_id?this.getB2CCompany().then(i=>{t.company_id=i.data.company_id,n.append("company_id",parseInt(t.company_id,10)),C.a.post(R.ENDPOINTS.GET_PROGRAM_BY_COMPANY,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})}).catch(e=>{console.error(e)}):(n.append("company_id",parseInt(t.company_id,10)),C.a.post(R.ENDPOINTS.GET_PROGRAM_BY_COMPANY,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)}))})},getB2CCompany(){return new Promise((e,t)=>{let a=new FormData;C.a.post(R.ENDPOINTS.GET_B2C_COMPANY,a,{headers:{"Content-Type":"multipart/form-data",token:payload.token}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},getProgramData({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),n.append("program_id",parseInt(e.program_id,10)),C.a.post(R.ENDPOINTS.GET_PROGRAM_DATA,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getProgramBricks({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),n.append("program_id",parseInt(e.program_id,10)),C.a.post(R.ENDPOINTS.GET_PROGRAM_BRICKS,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getProgramBricksData({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("case_attendance_id",parseInt(t.case_attendance_id,10)),C.a.post(R.ENDPOINTS.GET_PROGRAM_BRICKS_DATA,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getCallReasonsCompany({commit:e},t){return new Promise((e,a)=>{let n=new FormData;n.append("token",t.token),n.append("company_id",parseInt(t.company_id,10)),C.a.post(R.ENDPOINTS.GET_CALL_REASONS_COMPANY,n,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listPatientGeneralState({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),C.a.post(R.ENDPOINTS.LIST_PATIENT_GENERAL_STATE,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listPatientBreathingPattern({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),C.a.post(R.ENDPOINTS.LIST_PATIENT_BREATHING_PATTERN,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},symptomList({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),C.a.post(R.ENDPOINTS.SYMPTOM_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},groupCidList({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),n.append("symptom_id",parseInt(e.symptom_id,10)),C.a.post(R.ENDPOINTS.GROUPCID_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},cidList({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),C.a.post(R.ENDPOINTS.CID_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},ciapList({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),C.a.post(R.ENDPOINTS.CIAP_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},brickWall({},e){return new Promise((t,a)=>{new FormData;let n=e.brickList.join("%2C");C.a.get(`${R.ENDPOINTS.BRICK_WALL}?bricks=${n}`,{headers:{"Content-Type":"multipart/form-data",token:e.token},token:e.token}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},certsignAuth({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),n.append("cpf",e.cpf),n.append("pin",e.pin),n.append("provider",e.provider),n.append("case_attendance_id",e.case_attendance_id),n.append("expiration_time",e.expiration_time),C.a.post(R.ENDPOINTS.CERTSIGN_AUTH,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listReasonList({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),n.append("limit",e.limit),n.append("offset",e.offset),e.search&&n.append("search",e.search),C.a.post(R.ENDPOINTS.LIST_REASON_LIST,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listReasonStatus({},e){return new Promise((t,a)=>{let n=new FormData;n.append("token",e.token),C.a.get(R.ENDPOINTS.LIST_REASON_STATUS,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},documentCertify({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.DOCUMENT_CREATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data?e.response.data.error||e.response.data.error.code:e.response.data)})})},certificationAuthCheck({},e){return new Promise((t,a)=>{let n=new FormData;n.append("authorization_code",e.authorization_code),C.a.post(R.ENDPOINTS.CERTIFICATION_AUTH_CHECK,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},createReasonCall({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.CREATE_REASON_CALL,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getReasonCall({},e){return new Promise((t,a)=>{let n=new FormData;n.append("call_reason_id",e.id),C.a.post(R.ENDPOINTS.GET_REASON,n,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},updateReasonCall({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.UPDATE_REASON_CALL,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},createEmergencyPass({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.CREATE_EMERGENCY_PASS,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getEmergencyPassData({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_EMERGENCY_PASS,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},saveEmergencyProgram({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.SAVE_EMERGENCY_PROGRAM,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},updateEmergencyPass({},e){return new Promise((t,a)=>{let n=new FormData;n.append("id",e.id),e.name&&n.append("emergency_member_info[name]",e.name),e.cpf&&n.append("emergency_member_info[cpf]",e.cpf),e.phone&&n.append("emergency_member_info[phone]",e.phone),e.birthdate&&n.append("emergency_member_info[birthdate]",e.birthdate),e.gender&&n.append("emergency_member_info[gender]",e.gender),e.company_id&&n.append("emergency_member_info[company_id]",e.company_id),C.a.post(R.ENDPOINTS.UPDATE_EMERGENCY_PASS,n,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},createAsoPass({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.CREATE_ASO_PASS,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getAsoPass({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_ASO_PASS,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},updateAsoPass({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.UPDATE_ASO_PASS,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listAsoByCompany({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.LIST_ASO_PASS,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},queueEnumerate({},e){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.QUEUE_ENUMERATE).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listflavour({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.LIST_FLAVOUR,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getMemberHealthHistory({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.GET_MEMBER_HEALTH_HISTORY,{member_id:t.member_id},{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},saveMemberHealthHistory({commit:e},t){let a=t.token;return delete t["token"],new Promise((e,n)=>{C.a.post(R.ENDPOINTS.SAVE_MEMBER_HEALTH_HISTORY,t,{headers:{"Content-Type":"application/json",token:a}}).then(t=>{e(t.data)}).catch(e=>{n(e.response.data.error||e.response.data.error.code)})})},setDoctorStreamConnected({},e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.SET_DOCTOR_STREAM_CONNECTED,e,{headers:{"Content-Type":"application/json",token:e.token}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getThemes({commit:e},t){return new Promise((e,a)=>{C.a.get(R.ENDPOINTS.GET_THEMES,{params:t,headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getTransferUserList({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.TRANSFER_USER_LIST,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},updateTransferUser({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.TRANSFER_USER_UPDATE,t,{headers:{"Content-Type":"application/json",token:t.token}}).then(t=>{e(t.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})}},WU={setToken(e,t){e.token=t},setInfo(e,t){t.isVirtualClinic=!0;let a=t.user_info.companies;null!=a?a.forEach(e=>{"virtual_clinic"!=e.company_type_name&&(t.isVirtualClinic=!1)}):t.isVirtualClinic=!1,e.info=t},setRemeberMe(e,t){e.remember=t}};const XU=()=>({token:sessionStorage.getItem("token")?sessionStorage.getItem("token"):null,info:JSON.parse(localStorage.getItem("user-info"))?JSON.parse(localStorage.getItem("user-info")):null});var zU={namespaced:!0,state:XU,getters:Z,actions:JU,mutations:WU},ey={},ty={setInformation({commit:e},t){e("setInformation",t)},removeInformation({commit:e},t){e("removeInformation",t)}},ay={setInformation(e,t){let a=e.info;if(!a||a.length<1)return e.info=[t];let n=a.findIndex(e=>e.id===t.id);a[n]&&a.splice(n,1),a.push(t),a.sort((e,t)=>e.userType>t.userType?-1:e.userType<t.userType?1:e.name>t.name?-1:e.name<t.name?1:0),e.info=a},removeInformation(e,t){let a=e.info;if(!a||a.length<1)return e.info=[];let n=a.findIndex(e=>e.id===t.id);a[n]&&a.splice(n,1),e.info=a}};const ny=()=>({info:JSON.parse(localStorage.getItem("users-availability-info"))||null});var iy={namespaced:!0,state:ny,getters:ey,actions:ty,mutations:ay},sy={},oy={setTriagem({commit:e},t){e("setTriagem",t)},setPregnant({commit:e},t){e("setPregnant",t)},clearTriage({commit:e},t){e("clear",t)}},ry={setPregnant(e,t){e.pregnant=t},setTriagem(e,t){e.screening=t},clear(e,t){e.pregnant=!1,e.screening=""}};const ly=()=>({pregnant:!1,screening:""});var cy={namespaced:!0,state:ly,getters:sy,actions:oy,mutations:ry},dy={},my={setCallReasons({commit:e},t){e("setCallReasons",t)},setSelectedCallReasons({commit:e},t){e("setSelectedCallReasons",t)},unsetSelectedCallReasons({commit:e},t){e("unsetSelectedCallReasons",t)},unsetAllSelectedCallReasons({commit:e},t){e("unsetAllSelectedCallReasons",t)}},uy={setCallReasons(e,t){e.callReasons=t},setSelectedCallReasons(e,t){e.selectedCallReasons.push(t)},unsetSelectedCallReasons(e,t){let a=e.selectedCallReasons.indexOf(t);e.selectedCallReasons.splice(a,1)},unsetAllSelectedCallReasons(e,t){e.selectedCallReasons=[]}};const Ay=()=>({callReasons:[],selectedCallReasons:[]});var _y={namespaced:!0,state:Ay,getters:dy,actions:my,mutations:uy},Ey={},Iy={setProgram({commit:e},t){e("setProgram",t)},setSelectedProgram({commit:e},t){e("setSelectedProgram",t)},updateSelectedProgram({commit:e},t){e("updateProgramData",t)},unsetSelectedProgram({commit:e},t){e("unsetSelectedProgram",t)},unsetAll({commit:e},t){e("unsetAll",t)}},hy={setProgram(e,t){e.programs=t},setSelectedProgram(e,t){let a=e.selectedPrograms;if(!a)return void(e.selectedPrograms=[t]);const n=a.findIndex(e=>e.id===t.id);n>-1&&a.splice(n,1),a.push(t),e.selectedPrograms=a},updateProgramData(e,t){e.selectedPrograms.forEach(e=>{e.id==t.id&&(e.attendance=t.attendance,e.hour=t.hour,e.date=t.date,e.better_time_call=t.hour,e.note=t.note,e.pregnant=t.pregnant,e.pregnant_note=t.pregnant_note)})},unsetSelectedProgram(e,t){let a=e.selectedPrograms.indexOf(t);-1==a&&(a=e.selectedPrograms.findIndex(e=>e.id==t)),e.selectedPrograms.splice(a,1)},unsetAll(e,t){e.selectedPrograms=[]},setAnswer(e,t){let a=e.allAnswers.findIndex(e=>e.questionId===t.questionId);-1===a?e.allAnswers.push(t):e.allAnswers[a].answerId==t.answerId?e.allAnswers.splice(a,1):e.allAnswers[a]=t}};const Oy=()=>({programs:[],selectedPrograms:[]});var py={namespaced:!0,state:Oy,getters:Ey,actions:Iy,mutations:hy},Sy={},Cy={setBrick({commit:e},t){e("setBrick",t)},clearBricks({commit:e}){e("clearBricks")},removeBrick({commit:e},t){e("removeBrick",t)}},Ty={setBrick(e,t){t instanceof Array?t.forEach((t,a)=>{e.bricks[a]=t}):(e.bricks[t.brick_key]=t.brick_data,e.bricks[t.brick_key].isValid=t.isValid,e.bricks[t.brick_key].message=t.message);let a=JSON.stringify(e.bricks);localStorage.setItem("bricks",a),e.info=t},clearBricks(e,t){localStorage.removeItem("bricks"),e.bricks={},e.info={}},removeBrick(e,t){delete e.bricks[t.brick_key];let a=JSON.stringify(e.bricks);localStorage.setItem("bricks",a)}};const Ry=()=>({bricks:null!=window.localStorage.getItem("bricks")?JSON.parse(window.localStorage.getItem("bricks")):{},info:{}});var Dy={namespaced:!0,state:Ry,getters:Sy,actions:Cy,mutations:Ty},gy={namespaced:!0,modules:{Triagem_enfermagem:cy,CallReason:_y,Programs:py,AttendanceBricks:Dy},state:{},actions:{},mutations:{},getters:{}},Ly={getCaseAttendanceInfo(e){return e.info},getCertificationPending(e){return e.certification_pending},getDoubleBooking(e){return e.doubleBooking},getCaseAttendanceHeaders(e){return e.headers}},fy={create({commit:e},t){return new Promise((a,n)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.CREATE,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{a(t.data),e("setCaseAttendanceId",t.data.data)}).catch(e=>n(e.response.data.error.message||e.response.data.error.code))})},clear({commit:e}){e("clear",{})},add({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.ADD,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},removeAttendanceBooked({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.REMOVE_ATTENDANCE_BOOKED,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},finish({commit:e},t){return new Promise((e,a)=>{t={...t,with_payment:!0},C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.FINISH,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},cancel({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.CANCEL,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},accepted({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.ACCEPTED,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},set({commit:e},t){e("setCaseAttendanceInfo",t)},setHeaders({commit:e},t){e("setHeaders",t)},setIsUnimedSol({commit:e},t){e("setIsUnimedSol",t)},getCids({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.GET_CIDS,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getCallReason({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.GET_CALL_REASON,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},attemptCall({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.ATTEMPT_CALL,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},attemptCallHistory({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.ATTEMPT_CALL_HISTORY,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},setHistoryMode({commit:e},t){e("setHistoryMode",t)},setEmergencyMember({commit:e},t){e("setEmergencyMember",t)},setNotSuccess({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.NOT_SUCCESS,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},transferPatient({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.TRANSFER_PATIENT,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getScreening({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.GET_CASE_ATTENDANCE_SCREENING,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getWhatsappHistory({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.GET_WHATSAPP_HISTORY,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},sendWhatsapp({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.SEND_WHATSAPP,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},setSeletedStep({commit:e},t){e("setSeletedStep",t)},getCaseAttendanceCancelReasons({commit:e},t){return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE_CANCEL_REASONS,t,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},filteredDiseasesList({commit:e},t){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.FILTERED_DISEASES_LIST,{headers:{"Content-Type":"application/json",token:sessionStorage.getItem("token")}}).then(t=>{e(t.data.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},setDatetimeStartAttendance({commit:e},t){e("setDatetimeStartAttendance",t)}},Ny={setCaseAttendanceId(e,t){e.caseAttendanceId=t},setCaseAttendanceInfo(e,t){e.info=t,window.localStorage.setItem("case_attendance",JSON.stringify(t)),e.caseAttendanceId=t.case_attendance_id},setHeaders(e,t){e.headers=t},setIsUnimedSol(e,t){e.is_unimed_sol=t,window.localStorage.setItem("case_attendance_is_unimed_sol",t)},setHistoryMode(e,t){e.history_mode=t.value,window.localStorage.setItem("attendance_history_mode",JSON.stringify(t))},setEmergencyMember(e,t){e.info.member_id=t.member_id,e.info.emergency_pass=t.emergency_pass,window.localStorage.setItem("case_attendance",JSON.stringify(e.info))},setSeletedStep(e,t){e.selected_step=t.selected_step},clear(e,t){e.info={},window.localStorage.removeItem("case_attendance")},setDatetimeStartAttendance(e,t){e.datetime_start_attendance=t},setCertificationPending(e,t){e.certification_pending=t.certification_pending},setDoubleBooking(e,t){e.doubleBooking=t}};const ky=()=>({info:null!=window.localStorage.getItem("case_attendance")?JSON.parse(window.localStorage.getItem("case_attendance")):{},is_unimed_sol:!1,caseAttendanceId:null,history_mode:null!=window.localStorage.getItem("attendance_history_mode")&&JSON.parse(window.localStorage.getItem("attendance_history_mode")).value,selected_step:null,certification_pending:!1,doubleBooking:[],headers:[]});var vy={namespaced:!0,state:ky,getters:Ly,actions:fy,mutations:Ny},by={},My={setCompany({commit:e},t){e("setCompany",t)},setGroups({commit:e},t){e("setGroups",t)},setCompanyVouchers({commit:e},t){e("setCompanyVouchers",t)},changeFlavour({commit:e},t){e("changeFlavour",t)},changeFlavourInheritance({commit:e},t){e("changeFlavourInheritance",t)},changeNickName({commit:e},t){e("changeNickName",t)}},Py={setCompany(e,t){t.company_groups=e.info.company_groups||[],e.info=t,localStorage.setItem("company",JSON.stringify(e.info))},setGroups(e,t){e.info.company_groups=t,localStorage.setItem("company",JSON.stringify(e.info))},setCompanyVouchers(e,t){e.info.company_voucher_config=t,localStorage.setItem("company",JSON.stringify(e.info))},changeFlavour(e,t){e.info.company_info.flavour_id=t.flavour_id,e.info.company_info.flavour_code=t.flavour_code,localStorage.setItem("company",JSON.stringify(e.info))},changeFlavourInheritance(e,t){e.info.company_info.flavour_inheritance=t,localStorage.setItem("company",JSON.stringify(e.info))},changeNickName(e,t){e.info.company_info.nick_name=t,localStorage.setItem("company",JSON.stringify(e.info))}};const Uy=()=>({info:localStorage.getItem("company")?localStorage.getItem("company"):null});var yy={namespaced:!0,state:Uy,getters:by,actions:My,mutations:Py},$y={getAllClassifications:e=>{let t=[...e.classifications],a={urgency_level:null,urgency_alias:"all"};return t.find(e=>e==a)||t.unshift(a),t},getClassifications:e=>e.classifications,getPriorities:e=>e.priorities,getContactTimes:e=>e.contactTimes,getCivilStates:e=>e.civilStates,getScholarships:e=>e.scholarships,getDisability:e=>e.disabilities,getDeficiencies:e=>e.deficiencies,getScheduleAttendanceIdentifiers:e=>e.scheduleAttendanceIdentifiers,getNumberOfAttendances:e=>e.numberOfAttendances,getLastAttendanceOwner:e=>e.lastAttendanceOwner,getInceptionChecker:e=>e.inceptionChecker},xy={setClassifications({commit:e},t){e("setClassifications",t)},setPriorities({commit:e},t){e("setPriorities",t)},setContactTimes({commit:e},t){e("setContactTimes",t)},setCivilStates({commit:e},t){e("setCivilStates",t)},setScholarships({commit:e},t){e("setScholarships",t)},setDisability({commit:e},t){e("setDisability",t)},setDeficiencies({commit:e},t){e("setDeficiencies",t)},setScheduleAttendanceIdentifiers({commit:e},t){e("setScheduleAttendanceIdentifiers",t)},setMinimumAgePsychologist({commit:e},t){e("setMinimumAgePsychologist",t),localStorage.setItem("minimumAgePsychologist",t)},setNumberOfAttendances({commit:e},t){e("setNumberOfAttendances",t)},setLastAttendanceOwner({commit:e},t){e("setLastAttendanceOwner",t)},setInceptionChecker({commit:e},t){e("setInceptionChecker",t)}},Vy={setClassifications(e,t){e.classifications=t},setPriorities(e,t){e.priorities=t},setContactTimes(e,t){e.contactTimes=t},setCivilStates(e,t){e.civilStates=t},setScholarships(e,t){e.scholarships=t},setDisability(e,t){e.disabilities=t},setDeficiencies(e,t){e.deficiencies=t},setScheduleAttendanceIdentifiers(e,t){e.scheduleAttendanceIdentifiers=t},setMinimumAgePsychologist(e,t){e.minimumAgePsychologist=t},setNumberOfAttendances(e,t){localStorage.setItem("NumberOfAttendances",t),e.numberOfAttendances=t},setLastAttendanceOwner(e,t){localStorage.setItem("lastAttendanceOwner",t),e.lastAttendanceOwner=t},setInceptionChecker(e,t){e.inceptionChecker=t.value}};const Gy=()=>({classifications:[],priorities:[],contactTimes:[],civilStates:[],scholarships:[],disabilities:[],deficiencies:[],scheduleAttendanceIdentifiers:[],minimumAgePsychologist:localStorage.getItem("minimumAgePsychologist")?localStorage.getItem("minimumAgePsychologist"):null,numberOfAttendances:localStorage.getItem("NumberOfAttendances")?localStorage.getItem("NumberOfAttendances"):0,lastAttendanceOwner:localStorage.getItem("lastAttendanceOwner")?localStorage.getItem("lastAttendanceOwner"):null,inceptionChecker:!1});var Fy={namespaced:!0,state:Gy,getters:$y,actions:xy,mutations:Vy},By={getPatientInfo:e=>e.info,getPatientVouchers:e=>e.vouchers},wy={setPatient({commit:e},t){e("setPatient",t)},setPatientCompany({commit:e},t){e("setPatientCompany",t)},setPatientVouchers({commit:e},t){e("setPatientVouchers",t)}},Hy={setPatient(e,t){localStorage.setItem("patient-info",JSON.stringify(t)),e.info=t},setPatientCompany(e,t){localStorage.setItem("patient-company-info",t?JSON.stringify(t):null),e.company_info=t},setPatientVouchers(e,t){e.vouchers=t}};const qy=()=>({info:localStorage.getItem("patient-info")?JSON.parse(localStorage.getItem("patient-info")):null,company_info:"undefined"!=localStorage.getItem("patient-company-info")?JSON.parse(localStorage.getItem("patient-company-info")):null,vouchers:{}});var Yy={namespaced:!0,state:qy,getters:By,actions:wy,mutations:Hy},jy={},Ky={setIncomingQueue({commit:e},t){e("setIncomingQueue",t)},clearIncomingQueue({commit:e}){e("clearIncomingQueue")}},Zy={setIncomingQueue(e,t){localStorage.setItem("incoming-queue",JSON.stringify(t)),e.incoming_queue=t},clearIncomingQueue(e){localStorage.removeItem("incoming-queue"),e.incoming_queue=null}};const Qy=()=>({FILTERS:{URGENCY:"urgencia",COMPANY:"companhia",DUE_DATE:"vencimento",STATUS:"status",NAME:"nome_paciente",CASE:"caso"},allowedFilterskey:[{str:"urgency",value:"urgencia"},{str:"company",value:"companhia"},{str:"name",value:"nome_paciente"},{str:"case",value:"caso"}],incoming_queue:JSON.parse(localStorage.getItem("incoming-queue"))?JSON.parse(localStorage.getItem("incoming-queue")):null});var Jy={namespaced:!0,state:Qy,getters:jy,actions:Ky,mutations:Zy},Wy={},Xy={setCompanyScreening({commit:e},t){e("setCompanyScreening",t)},setCompanyCallReasons({commit:e},t){e("setCompanyCallReasons",t)},clearCompanyScreening({commit:e},t){e("clearCompanyScreening",t)}},zy={setCompanyScreening(e,t){e.triageInfo=t.screeningProgram,localStorage.setItem("screening.triageInfo",JSON.stringify(t.screeningProgram)),e.programList=t.programs,localStorage.setItem("screening.programList",JSON.stringify(t.programs));const a=null==t.screeningProgram.product_brick_info||void 0==typeof t.screeningProgram.product_brick_info?[]:t.screeningProgram.product_brick_info;e.productBlocks=a,localStorage.setItem("screening.productBlocks",JSON.stringify(a))},clearCompanyScreening(e,t){e.triageInfo={},localStorage.removeItem("screening.triageInfo"),e.programList=[],localStorage.removeItem("screening.programList"),e.productBlocks=[],localStorage.removeItem("screening.productBlocks"),e.callReasonInfo=[],localStorage.removeItem("screening.callReasonInfo")},setCompanyCallReasons(e,t){const a=null==t.screeningProgram.call_reason_info||void 0==typeof t.screeningProgram.call_reason_info?[]:t.screeningProgram.call_reason_info;e.callReasonInfo=a,localStorage.setItem("screening.callReasonInfo",JSON.stringify(a))}};const e$=()=>({triageInfo:null!=window.localStorage.getItem("screening.triageInfo")?JSON.parse(window.localStorage.getItem("screening.triageInfo")):{},programList:null!=window.localStorage.getItem("screening.programList")?JSON.parse(window.localStorage.getItem("screening.programList")):[],productBlocks:null!=window.localStorage.getItem("screening.productBlocks")?JSON.parse(window.localStorage.getItem("screening.productBlocks")):[],callReasonInfo:null!=window.localStorage.getItem("screening.callReasonInfo")?JSON.parse(window.localStorage.getItem("screening.callReasonInfo")):[]});var t$={namespaced:!0,state:e$,getters:Wy,actions:Xy,mutations:zy},a$={},n$={setAnswer({commit:e,state:t},a){e("setAnswer",a)},setRisk({commit:e,state:t},a){e("setRisk",a)},clear({commit:e}){e("clear")}},i$={setAnswer(e,t){let a=e.allAnswers.findIndex(e=>e.questionId===t.questionId);-1===a?e.allAnswers.push(t):e.allAnswers[a].answerId==t.answerId?e.allAnswers.splice(a,1):e.allAnswers[a]=t},setRisk(e,t){e.risk=t},clear(e){e.allAnswers.splice(0,e.allAnswers.length),e.risk=""}};const s$=()=>({questions:[],allAnswers:[],risk:""});var o$={namespaced:!0,state:s$,getters:a$,actions:n$,mutations:i$},r$={getAttendanceStatus:e=>e.attendanceStatus||[],getUserAttendanceStatus:e=>e.userAttendanceStatus||[],getAttendancesInQueueStatus:e=>e.attendancesInQueueStatus||[],getExternalAttendanceStatus:e=>e.externalAttendanceStatus||[],getUserExternalAttendanceStatus:e=>e.userExternalAttendanceStatus||[]},l$={setAttendanceStatus({commit:e},t){e("setAttendanceStatus",t)},setUserAttendanceStatus({commit:e},t){e("setUserAttendanceStatus",t)},setAttendancesInQueueStatus({commit:e},t){e("setAttendancesInQueueStatus",t)},setExternalAttendanceStatus({commit:e},t){e("setExternalAttendanceStatus",t)},setUserExternalAttendanceStatus({commit:e},t){e("setUserExternalAttendanceStatus",t)}},c$={setAttendanceStatus(e,t){e.attendanceStatus=t},setUserAttendanceStatus(e,t){e.userAttendanceStatus=t},setAttendancesInQueueStatus(e,t){e.attendancesInQueueStatus=t},setExternalAttendanceStatus(e,t){e.externalAttendanceStatus=t},setUserExternalAttendanceStatus(e,t){e.userExternalAttendanceStatus=t}};const d$=()=>({attendanceStatus:[],userAttendanceStatus:[],attendancesInQueueStatus:[],externalAttendanceStatus:[],userExternalAttendanceStatus:[]});var m$={namespaced:!0,state:d$,getters:r$,actions:l$,mutations:c$},u$={getAccessToken:e=>e.accessToken,getExpiresIn:e=>e.expiresIn,getTokenReceivedAt:e=>e.tokenReceivedAt,getTokenExpiresAt:e=>e.tokenExpiresAt},A$={setAccessToken({commit:e},{accessToken:t,expiresIn:a}){const n=new Date;e("SET_ACCESS_TOKEN",{accessToken:t,expiresIn:a,tokenReceivedAt:n})},clearAccessToken({commit:e}){e("CLEAR_ACCESS_TOKEN")}},_$={SET_ACCESS_TOKEN(e,t){e.accessToken=t.accessToken,e.expiresIn=t.expiresIn,e.tokenReceivedAt=t.tokenReceivedAt,e.tokenExpiresAt=t.tokenExpiresAt},CLEAR_ACCESS_TOKEN(e){e.accessToken=null,e.expiresIn=null,e.tokenReceivedAt=null,e.tokenExpiresAt=null}};const E$=()=>({accessToken:null,expiresIn:null,tokenReceivedAt:null,tokenExpiresAt:null});var I$={namespaced:!0,state:E$,getters:u$,actions:A$,mutations:_$},h$={},O$={addTransferInformation({commit:e},t){e("addTransferInformation",t)},clearTransferInformation({commit:e},t){e("clearTransferInformation",[])},deleteTransferInformation({commit:e},t){e("deleteTransferInformation",t)}},p$={addTransferInformation(e,t){e.transferInformation.push(t)},clearTransferInformation(e,t){e.transferInformation=[]},deleteTransferInformation(e,t){let a=e.transferInformation.find(e=>e.program_id==t.program_id),n=e.transferInformation.indexOf(a);-1!=n&&e.transferInformation.splice(n,1)}};const S$=()=>({transferInformation:[]});var C$={namespaced:!0,state:S$,getters:h$,actions:O$,mutations:p$},T$={getFeatureFlags(e){return e.featureFlags}},R$={addFeatureFlag({commit:e},t){e("addFeatureFlag",t)},clearFeatureFlags({commit:e},t){e("clearFeatureFlags",[])}},D$={addFeatureFlag(e,t){e[t.key]=t.value,e.featureFlags=t},clearFeatureFlags(e,t){null}};const g$=()=>({featureFlags:null});var L$={namespaced:!0,state:g$,getters:T$,actions:R$,mutations:D$},f$={},N$={addPreference({commit:e},t){e("addPreference",t)},clearPreference({commit:e},t){e("clearPreference",[])}},k$={addPreference(e,t){e[t.key]=t.value},clearPreference(e,t){null}};const v$=()=>({});var b$={namespaced:!0,state:v$,getters:f$,actions:N$,mutations:k$};n["a"].use(K["a"]);var M$={namespaced:!0,modules:{User:zU,Bricks:gy,CaseAttendance:vy,Company:yy,General:Fy,Patient:Yy,Queue:Jy,Screening:t$,UsersAvailability:iy,Nutri:o$,Vanellope:m$,DigitalCertification:I$,TransferAttendance:C$,FeatureFlag:L$,Preferences:b$},state:{},actions:{},mutations:{},getters:{}};const P$=new K["a"].Store({modules:{Data:M$},state:{},actions:{},mutations:{},getters:{}});var U$=P$,y$=a("b828"),$$=a("a925"),x$=a("3a60"),V$=a.n(x$),G$=a("1ad2"),F$=a.n(G$),B$=a("03cd"),w$=a.n(B$),H$=a("5132"),q$=a.n(H$),Y$=(a("23e4"),{login:{key:"value",required_field:"Campo senha 
lise","created_at":"2020-04-03 23:48:57.270833","updated_at":"2020-04-03 23:48:57.272881"},{"id":719,"ciap":"-62","name":"Procedimento administrativo","created_at":"2020-04-03 23:48:57.270833","updated_at":"2020-04-03 23:48:57.272881"},{"id":720,"ciap":"-63","name":"Consulta de seguimento n
 membro cadastrado."}}},created(){this.$bus.on("emergency-dialog-transfer-patient",e=>{this.transferPatient=e}),this.$bus.on("emergency-dialog",e=>{this.dialog=e}),this.$bus.on("emergency-dialog-ignore-screening",()=>{this.screening=!1}),this.$bus.on("edit-emergency-pass",e=>{this.dialog=e.dialog,this.isEdit=!0,this.getPatientDataToEdit(e)})},beforeDestroy(){this.$bus.off("edit-emergency-pass"),this.$bus.off("emergency-dialog"),this.$bus.off("emergency-dialog-transfer-patient")},methods:{close(){this.dialog=!1},openPatientProfile(){if(this.$v.$touch(),!this.$v.$invalid){let e=this.$store.state.Data.User.token,t={name:this.name,cpf:this.getRawCpfHelper(this.cpf),phone:this.getRawPhoneHelper(this.phone),company_id:this.client.id,group_id:this.group.id,gender:this.selectedGender,birthdate:this.birthdate,token:e};this.screening&&this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR),this.$store.dispatch(this.$consts.USER_ACTIONS.CREATE_EMERGENCY_PASS,t).then(e=>{this.dialog=!1,this.emergencyId=e.data.emergency_member_id,t.emergency_member_id=this.emergencyId,this.$store.state.Data.CaseAttendance.info.case_attendance_id&&this.$bus.emit("change-member-attendance-to-emergency",e.data.emergency_member_id),this.$bus.emit("emergency-id",this.emergencyId),this.screening=!0,this.$store.state.Data.CaseAttendance.info.case_attendance_id||this.screeningAttendancePreSetting()}).catch(e=>{this.submitError=this.getErrorMessage(e.message),console.error(e)})}},screeningAttendancePreSetting(){let e={};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR),this.getCallReasonsCompany(this.client.id),this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BY_COMPANY,{company_id:this.client.id}).then(t=>{if(t.data.forEach(t=>{t.program_info.is_screening&&"COMPANY"===t.program_info.type&&(e=t)}),0===Object.keys(e).length)return void this.$bus.emit("open-snackbar",{message:"no_company_screening"});let a={id:this.emergencyId,name:this.name,cpf:this.getRawCpfHelper(this.cpf),phone:this.getRawPhoneHelper(this.phone),gender:this.selectedGender,birthdate:this.birthdate,company:{id:this.client.id,name:this.client.name},company_id:this.client.id,group_id:this.group.id,emergency_pass:!0};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET,a),this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,a),this.$store.dispatch(this.$consts.SCREENING_ACTIONS.SET,{screeningProgram:e,programs:t.data}),this.$bus.emit("open-emergency-tab",{emergency_member_id:this.emergencyId})}).catch(e=>{})},getCallReasonsCompany(e){let t=this.$store.state.Data.User.token,a={company_id:e,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_REASONS_COMPANY,a).then(e=>{this.$store.dispatch(this.$consts.SCREENING_REASONS_ACTIONS.SET,{screeningProgram:e.data})}).catch(e=>{})},getErrorMessage(e){return void 0==this.errorTable[e]&&(this.errorTable[e]=e),this.errorTable[e]},updateEmergencyPass(){if(this.$v.$touch(),!this.$v.$invalid){let e=this.$store.state.Data.User.token,t={id:this.emergencyId,name:this.name,cpf:this.getRawCpfHelper(this.cpf),phone:this.getRawPhoneHelper(this.phone),company_id:this.client.id,group_id:this.group.id,gender:this.selectedGender,birthdate:this.birthdate,token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.UPDATE_EMERGENCY_PASS,t).then(e=>{this.dialog=!1,this.$bus.emit("send-edited-data",t),this.screeningAttendancePreSetting()}).catch(e=>{this.submitError=this.getErrorMessage(e.message),console.error(e)})}},formatBirthdate(e){if(this.formattedDate){const[t,a,n]=this.formattedDate.split("/");let i=Ne()(new Date,"DD/MM/YYYY").diff(Ne()(this.formattedDate,"DD/MM/YYYY"),"days");!i||i<0?(this.invalidBirthdate=!0,this.$refs.menu.save(e)):(this.invalidBirthdate=!1,this.birthdate=`${n}-${a}-${t}`,this.$refs.menu.save(this.formattedDate))}},handleSubmit(){this.isEdit?this.updateEmergencyPass():this.openPatientProfile()},saveDueDate(){this.formatDueDate(),this.$refs.menu.save(this.formattedDate)},formatDueDate(){if(this.birthdate){const[e,t,a]=this.birthdate.split("-");return this.formattedDate=`${a}/${t}/${e}`,this.formattedDate}},getPatientDataToEdit(e){this.name=e.name,this.cpf=this.formatCpfHelper(e.cpf),this.phone=this.formatPhoneHelper(e.phone),this.birthdate=e.birthdate,this.client=e.client,this.selectedGender=e.selectedGender,this.emergencyId=e.id,this.formatDueDate()},listCompanies(e=null){let t=window.localStorage.getItem("companies");if(t&&(t=JSON.parse(t)),t)return void(this.companies=t.data.company_list);this.loadingCompanies=!0;let a={redux:!0};e&&(a.filters={name:e}),this.searchTimeout=setTimeout(()=>{be.listCompany(a).then(e=>{this.companies=e.data.company_list}).catch(e=>{console.error(e)}).finally(()=>{this.loadingCompanies=!1})},400)},companyName(e){return e.nick_name?`${e.id} (${e.nick_name}) - ${e.name}`:`${e.id} - ${e.name}`},listCompanyGroups(){if(!this.client)return;this.group=null,this.loadingGroups=!0;let e={company_id:this.client.id};ti.getGroups(e).then(e=>{this.companyGroups=e.group_list}).catch(e=>{console.error(e)}).finally(()=>{this.loadingGroups=!1})}},computed:{nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),e):e},cpfErrors(){const e=[];return this.$v.cpf.$dirty?(!this.$v.cpf.required&&e.push(this.$t("access_controls.required")),!this.$v.cpf.minLength&&e.push(this.$t("access_controls.min_length")),e):e},birthdateErrors(){const e=[];return this.$v.formattedDate.$dirty?(this.$v.formattedDate.required||(e.push(this.$t("access_controls.required")),this.invalidBirthdate=!1),e):e},phoneErrors(){const e=[];return this.$v.phone.$dirty?(!this.$v.phone.required&&e.push(this.$t("access_controls.required")),!this.$v.phone.minLength&&e.push(this.$t("access_controls.min_length")),e):e},selectedGenderErrors(){const e=[];return this.$v.selectedGender.$dirty?(!this.$v.selectedGender.required&&e.push(this.$t("access_controls.required")),e):e},clientErrors(){const e=[];return this.$v.client.$dirty?(!this.$v.client.required&&e.push(this.$t("access_controls.required")),e):e},groupsErrors(){const e=[];return this.$v.group.$dirty?(!this.$v.group.required&&e.push(this.$t("access_controls.required")),e):e}},watch:{name(e){this.name=e.toUpperCase()},searchCompanies(e){clearTimeout(this.searchTimeout),this.listCompanies(e)}},validations:{name:{required:Ae["required"]},cpf:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},birthdate:{required:Object(Ae["requiredIf"])((function(){return!this.formattedDate}))},phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(18)},selectedGender:{required:Ae["required"]},client:{required:Ae["required"]},formattedDate:{required:Ae["required"]},group:{required:Object(Ae["requiredIf"])((function(){return this.client&&this.companyGroups.length>0}))}}},ci=li,di=(a("613f"),Object(I["a"])(ci,oi,ri,!1,null,"3798c215",null)),mi=di.exports,ui=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"615",height:"367px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("sao_caetano_pass.title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"fields-container"},[t("div",{staticClass:"row-flex"},[t(de["a"],{attrs:{height:"37px","error-messages":e.nameErrors,label:e.$t("sao_caetano_pass.name"),outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("div",{staticClass:"row-flex"},[t("div",[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],attrs:{height:"37px","error-messages":e.cpfErrors,label:e.$t("sao_caetano_pass.cpf"),outlined:""},on:{blur:function(t){return e.$v.cpf.$touch()}},model:{value:e.cpf,callback:function(t){e.cpf=t},expression:"cpf"}})],1),t("div",[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],attrs:{"error-messages":e.phoneErrors,height:"37px",label:e.$t("sao_caetano_pass.phone"),outlined:""},on:{blur:function(t){return e.$v.phone.$touch()}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)])]),t("div",{staticClass:"error-box-flex"},[t("ErrorText")],1),t("div",{staticClass:"confirm"},[t(r["a"],{staticClass:"white--text btn mb-8",attrs:{disabled:e.disabled,loading:e.loading,color:"primary",width:"252px",height:"37px"},on:{click:function(t){return e.checkEligibility()}}},[e._v("\n          "+e._s(e.$t("sao_caetano_pass.generate"))+"\n        ")])],1)],1)],1)],1)},Ai=[],_i=function(){var e=this,t=e._self._c;return e.display?t("div",{staticClass:"error-message-component"},[t("p",{staticClass:"error-text"},[e._v(e._s(e.$t("error_text."+e.message)))])]):e._e()},Ei=[],Ii={data:()=>({display:!1,message:""}),created(){this.$bus.on("show-error-message",e=>{this.message=e.message,this.display=e.display})},destroyed(){this.$bus.off("show-error-message")}},hi=Ii,Oi=(a("b5b2"),Object(I["a"])(hi,_i,Ei,!1,null,"d01e546a",null)),pi=Oi.exports,Si={getPatientInfo(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_PATIENT,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},checkEligibilitySaoCaetano(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.CHECK_ELIGIBILITY_SAO_CAETANO,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},Ci={components:{ErrorText:pi},mixins:[ve],data(){return{dialog:!1,items:[],name:"",cpf:"",phone:"",submitError:null,loading:!1}},created(){this.$bus.on("eligibility-sao-caetano-dialog",e=>{this.dialog=e})},beforeDestroy(){this.$bus.off("eligibility-sao-caetano-dialog")},validations:{name:{required:Ae["required"]},phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},cpf:{required:Ae["required"],minLength:Object(Ae["minLength"])(11)}},computed:{disabled(){return this.name.length<2||(this.phone.length<12||this.cpf.length<11)},nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),e):e},cpfErrors(){const e=[];return this.$v.cpf.$dirty?(!this.$v.cpf.required&&e.push(this.$t("access_controls.required")),!this.$v.cpf.minLength&&e.push(this.$t("access_controls.min_length")),e):e},phoneErrors(){const e=[];return this.$v.phone.$dirty?(!this.$v.phone.required&&e.push(this.$t("access_controls.required")),!this.$v.phone.minLength&&e.push(this.$t("access_controls.min_length")),e):e}},methods:{close(){this.dialog=!1},checkEligibility(){this.$bus.emit("show-error-message",{message:"",display:!1}),this.loading=!0;let e={name:this.name,cpf:this.getRawCpfHelper(this.cpf),phone:this.getRawPhoneHelper(this.phone)};Si.checkEligibilitySaoCaetano(e).then(e=>{e.eligibility?null!=e&&null!=e.data&&0!==e.data.length?(this.$bus.emit("access_patient_create_attendance",e.data),this.dialog=!1):this.$bus.emit("show-error-message",{message:"not_mapped",display:!0}):this.$bus.emit("show-error-message",{message:"patient_not_elegible",display:!0})}).catch(e=>{this.$bus.emit("show-error-message",{message:e,display:!0}),console.error(e)}).finally(()=>{this.loading=!1})}}},Ti=Ci,Ri=(a("b6ed"),Object(I["a"])(Ti,ui,Ai,!1,null,"caec0f40",null)),Di=Ri.exports,gi=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"800",height:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.currentState==e.MODAL_STATE.INFO?t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v("\n            "+e._s(e.$t("schedule.schedule_details"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e.loading?e._e():t("div",{staticClass:"d-flex flex-column justify-center align-center py-2"},[t("div",[t(nt["a"],{attrs:{indeterminate:"",color:"#350165"}})],1)]),e.loading?e._e():t("div",{staticClass:"fields-container"},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.case_attendance_id")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.case_attendance_id))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.patient_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.social_name||e.attendance.patient_name))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.patient_phone")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e._f("formatPhoneFilter")(e.attendance?e.attendance.patient_phone:"")))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.doctor_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance?e.attendance.doctor_name:""))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.contractee_company_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.company_info.contractee_company_name))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.client")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.company_info.nick_name||e.attendance.company_info.name))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.group_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.company_info.group_name))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.attendance_center_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance?e.attendance.attendance_center_name:""))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.schedule_time")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance?e.getDate():""))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.reason")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.reason||e.$t("schedule.emptyReason")))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data justify-center"},[e._v("\n            "+e._s(e.attendance?e.getStatusText(e.attendance.case_attendance_status):"")+"\n          ")])])]),t("div",{staticClass:"error-box-flex"},[t("ErrorText")],1),e.loading?t("div",{staticClass:"d-flex flex-column justify-center align-center py-2"},[t("div",[t(nt["a"],{attrs:{indeterminate:"",color:"#350165"}})],1)]):e._e()],1):e.currentState==e.MODAL_STATE.RESCHEDULE?t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v("\n            "+e._s(e.$t("schedule.change_schedule"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("RescheduledCaseAttendanceForm",{attrs:{attendance:e.attendance},on:{handleReturn:function(t){return e.changeModalState(e.MODAL_STATE.INFO)}}})],1):e.currentState==e.MODAL_STATE.REMOVE?t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v("\n            "+e._s(e.$t("schedule.cancel_attendance_title"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("CancelScheduleAttendanceForm",{attrs:{attendance:e.attendance,cancelReasons:e.cancelReasons,returnState:e.MODAL_STATE.INFO}})],1):e._e()],1)],1)},Li=[],fi={listUserSchedules(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.USER_LIST;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getUserSchedule(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.USER_GET;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getScheduleUserSlots(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.USER_SLOTS;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getAttendanceCenterList(e){return new Promise((t,a)=>{1==e.user_id&&delete e.user_id;let n=R.ENDPOINTS.SCHEDULE.ATENDANCE_CENTER_LIST;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getAtendanceCenterUserList(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.USER_CENTER_SCHEDULE_LIST;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getAtendanceCompanyUserList(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.USER_COMPANY_SCHEDULE_LIST;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},setUserSchedule(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.USER_SAVE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getWeekdays(){return new Promise((e,t)=>{let a=R.ENDPOINTS.SCHEDULE.WEEKDAYS;C.a.post(a,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},listCompanySchedules(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.COMPANY_LIST;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},setPresence(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.SET_PRESENCE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},verifyUserScheduleAvailability(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.VERIFY_USER_SCHEDULE_AVAILABILITY;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getCancelReasons(){return new Promise((e,t)=>{let a=R.ENDPOINTS.SCHEDULE.GET_CANCEL_REASONS;C.a.post(a,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getRoleSlotsWeekly(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.SCHEDULE_ROLE_SLOTS_WEEKLY;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},GetLessScheduledScheduler(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.SCHEDULES_VERIFY_SCHEDULER;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},RescheduleBookedCaseAttendance(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.RESCHEDULES_BOOKED_CASE_ATTENDANCE;C.a.put(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},RescheduleCaseAttendance(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.RESCHEDULES_CASE_ATTENDANCE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getScheduleAttendanceIdentifiers(){return new Promise((e,t)=>{let a=R.ENDPOINTS.SCHEDULE.SCHEDULE_ATTENDANCE_IDENTIFIERS;C.a.get(a,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getScheduleSlots(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.SCHEDULE_SLOTS;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},Ni=a("a844"),ki=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"fields-container"},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.patient_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.patient_name||e.attendance.patient_info.name))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.actual_scheduled_time")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.getDate()))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.attendance_center_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.attendance_center_name))])]),t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("attendance.attended_by")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.doctor_name||e.attendance.attendant_info.name))])]),e.isCalendarOpen?t("div",{staticClass:"d-flex flex-row mt-1 mb-2"},[t("RescheduleCalendar",{attrs:{caseAttendanceId:e.attendance.case_attendance_id,userScheduleId:e.attendance.chosenSchedule||e.attendance.user_schedule_id,doubleBooking:e.attendance.double_booking,memberId:e.memberId,companyId:e.companyId},on:{handleReschedule:function(t){return e.reschedule()}}})],1):t("div",{staticClass:"d-flex flex-column mt-3"},[t(de["a"],{attrs:{label:e.$t("attendance.new_date"),"error-messages":e.rescheduleDateTimeErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.form.rescheduleDateTime.$touch()},click:e.openCalendar},model:{value:e.form.rescheduleDateTime.format("DD/MM/YYYY HH:mm"),callback:function(t){e.$set(e.form.rescheduleDateTime,"format('DD/MM/YYYY HH:mm')",t)},expression:"form.rescheduleDateTime.format('DD/MM/YYYY HH:mm')"}}),t(Ni["a"],{attrs:{label:e.$t("attendance.reason"),"error-messages":e.reasonErrors,height:"150px","no-resize":"",outlined:""},on:{blur:function(t){return e.$v.form.reason.$touch()}},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)]),t("div",{staticClass:"buttons-panel pt-2 pb-6"},[e.returnState?t(r["a"],{staticClass:"btn",attrs:{loading:e.loading,color:"#350165",width:"120px",outlined:""},on:{click:e.returnHandler}},[e._v("\n      "+e._s(e.$t("attendance.return"))+"\n    ")]):e._e(),t(r["a"],{staticClass:"white--text btn",attrs:{loading:e.loading,disabled:e.isCalendarOpen,color:"primary",width:"120px"},on:{click:function(t){return e.saveReschedule()}}},[e._v("\n      "+e._s(e.$t("attendance.ok"))+"\n    ")])],1)])},vi=[],bi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"calendar-modal pa-0"},[t("CalendarView",{attrs:{sendUserId:!0,isReschedule:!0,canEditSchedules:!1,userScheduleId:e.userScheduleId,handleClickEvent:e.scheduleClick,lockPastDate:!0,"pre-selected-company":e.companyId,"member-id":e.memberId}}),t(d["a"],{attrs:{"max-width":"35vw"},model:{value:e.scheduleDialog,callback:function(t){e.scheduleDialog=t},expression:"scheduleDialog"}},[t("div",{staticClass:"schedule-modal"},[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("reschedule.confirmation_title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.closeSchedule()}}})])]),t("div",{staticClass:"calendar-modal"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("reschedule.confirm_new_date")))])])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("reschedule.schedule_time")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.$moment(e.attendance.date).format("DD/MM/YYYY HH:mm")))])])]),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{height:"100px",label:e.$t("reschedule.reason"),"error-messages":e.reasonErrors,counter:"300","no-resize":"",outlined:"",required:""},on:{blur:function(t){return e.$v.reason.$touch()}},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1)],1)],1)],1),t("div",{staticClass:"buttons-panel px-8 pb-8"},[t(r["a"],{staticClass:"white--text btn",attrs:{loading:e.loading,color:"primary"},on:{click:e.handleConfirm}},[e._v("\n        "+e._s(e.$t("reschedule.confirm"))+"\n      ")]),t(r["a"],{staticClass:"btn",attrs:{loading:e.loading,color:"#350165",outlined:""},on:{click:e.handleCancel}},[e._v("\n        "+e._s(e.$t("reschedule.choose_other"))+"\n      ")])],1)])],1)},Mi=[],Pi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"calendar-view-component"},[e.isReschedule?e._e():t("div",{staticClass:"calendar-bar d-flex justify-space-between"},[e.preSelectedCompany||e.hideCompany?e._e():t(se["a"],{staticClass:"clinic-dropdown",attrs:{label:e.$t("schedule.company_name"),"return-object":!0,items:e.companies,"no-data-text":e.$t("controls.noDataAvailable"),"hide-no-data":e.loadingCompanies,loading:e.loadingCompanies,disabled:e.preSelectedCompany,name:"attendance_center_company_list","append-icon":"keyboard_arrow_down","item-text":"name","item-value":"id",height:"37px",outlined:""},on:{change:e.updateOccupationList},model:{value:e.chosenCompany,callback:function(t){e.chosenCompany=t},expression:"chosenCompany"}}),!e.preSelectedOccupation&&e.showOccupation?t(se["a"],{staticClass:"clinic-dropdown",attrs:{label:e.$t("schedule.occupation"),"return-object":!0,items:e.occupation,"item-text":e.getOccupationOptionText,"no-data-text":e.$t("controls.noDataAvailable"),"hide-no-data":e.loadingOccupation,loading:e.loadingOccupation,disabled:e.preSelectedOccupation||!e.chosenCompany,name:"occupation_list","append-icon":"keyboard_arrow_down","item-value":"id",height:"37px",outlined:""},on:{change:e.updateAgentList},model:{value:e.chosenOccupation,callback:function(t){e.chosenOccupation=t},expression:"chosenOccupation"}}):e._e(),e._e(),t(se["a"],{staticClass:"clinic-dropdown",class:{"single-dropdown":e.preSelectedCompany&&e.preSelectedOccupation&&e.preSelectedAttendanceCenter},attrs:{label:e.$t("schedule.agent"),"return-object":!0,items:e.agents,"item-text":e.getAgentOptionText,"no-data-text":e.$t("controls.noDataAvailable"),"hide-no-data":e.loadingAgents,loading:e.loadingAgents,disabled:!e.chosenCompany,name:"agent_list","append-icon":"keyboard_arrow_down","item-value":"user_schedule_id",height:"37px",outlined:""},on:{change:e.updateEvents},model:{value:e.chosenAgent,callback:function(t){e.chosenAgent=t},expression:"chosenAgent"}})],1),t("div",{staticClass:"calendar-bar d-flex justify-space-between mb-4"},[t("div",{staticClass:"d-flex"},[t(St["a"],{staticClass:"checkbox mr-5",attrs:{label:e.$t("schedule.display_fullhours"),disabled:!e.chosenAgent},on:{change:function(t){return e.updateCalendarView(!1)}},model:{value:e.displayAllTimes,callback:function(t){e.displayAllTimes=t},expression:"displayAllTimes"}}),t(St["a"],{staticClass:"checkbox",attrs:{label:e.$t("schedule.display_week"),disabled:!e.chosenAgent},on:{change:function(t){return e.updateCalendarView(!0)}},model:{value:e.weekDisplay,callback:function(t){e.weekDisplay=t},expression:"weekDisplay"}})],1),t("div",{staticClass:"calendar-navigation d-flex align-center"},[t(r["a"],{staticClass:"button",attrs:{disabled:e.loadingCalendar||e.isPrevDisabled},on:{click:e.prev}},[t(at["a"],[e._v("chevron_left")])],1),t("div",{staticClass:"primary--text day-name"},[e._v("\n        "+e._s(e.getDisplayDate)+"\n      ")]),t(r["a"],{staticClass:"button",attrs:{disabled:e.loadingCalendar},on:{click:e.next}},[t(at["a"],[e._v("chevron_right")])],1)],1)]),t("Calendar",{attrs:{name:e.calendarName,loading:e.loadingCalendar,isReschedule:e.isReschedule,interval:e.schedule_interval,handleClickEvent:e.eventClickEvent,handleClickTime:e.timeClickEvent,scheduleEvents:e.events,calendarType:e.type,calendar_start:e.calendar_start,calendar_end:e.calendar_end,firstTime:e.attendance_center_start_time,endTime:e.attendance_center_end_time,hasSlotIcons:e.hasSlotIcons}})],1)},Ui=[],yi=a("a4f6"),$i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"calendar",class:{reschedule:e.isReschedule}},[e.loading?t("div",{staticClass:"calendar-loading d-flex justify-center"},[t(nt["a"],{staticClass:"align-self-center",attrs:{indeterminate:"",color:"primary"}})],1):e._e(),t(yi["a"],{ref:e.calendarName,attrs:{type:e.calendarType,events:e.loading?[]:e.filteredSheduleEvents,start:e.calendar_start,end:e.calendar_end,locale:"pt-br","interval-format":e.formattedInterval,intervalMinutes:e.interval,"event-color":e.getEventColor,"event-text-color":e.getEventTextColor,"interval-count":e.intervalAmount,"first-time":e.firstTime},on:{"click:event":e.internalEventClick,"click:time":e.internalTimeClick},scopedSlots:e._u([{key:"event",fn:function({event:a}){return[t(l["a"],{staticClass:"ma-0 pa-1",attrs:{color:a.color,height:"100%",width:"100%"}},[t("div",{staticClass:"ma-0 pa-0"},[a.event_type==e.$consts.SCHEDULE_EVENT_TYPES.BOOKED?t("div",[t("p",{class:`overflows ma-0 pa-0 font-weight-bold ${a.textColor}--text`},[e._v("\n              "+e._s(a.name)+"\n            ")]),t("div",{staticClass:"d-flex justify-space-between"},[t("span",{class:a.textColor+"--text"},[e._v("\n                "+e._s(e._f("formatCalendarSlotTime")(a.start))+" - "+e._s(e._f("formatCalendarSlotTime")(a.end))+"\n              ")]),e.hasSlotIcons?t("div",{class:`d-flex justify-space-around ${a.textColor}--text`},e._l(e.scheduleAttendanceIdentifiers,(function(n,i){return t("div",["phone_icon"===n.name&&n.rule.program_id.includes(a.programId)?t("div",{staticClass:"icon-background d-flex justify-center rounded-circle white mr-1"},[t(at["a"],{attrs:{color:"primary","x-small":""}},[e._v("\n                      mdi-phone\n                    ")])],1):e._e(),"video_icon"===n.name&&n.rule.program_id.includes(a.programId)?t("div",{staticClass:"icon-background d-flex justify-center rounded-circle white mr-1"},[t(at["a"],{attrs:{color:"primary","x-small":""}},[e._v("\n                      mdi-video\n                    ")])],1):e._e(),"drteladoc_icon"===n.name&&n.rule.company_id==a.companyId?t("div",{staticClass:"icon-background d-flex justify-center rounded-circle white"},[t("span",{staticClass:"dr_teladoc_icon ma-auto primary--text"},[e._v("\n                      Dr.\n                    ")])]):e._e()])})),0):e._e()])]):t("span",{class:`available-slot-text ma-0 pa-0 ${a.textColor}--text`},[t("b",[e._v(e._s(a.name))]),e._v(", "+e._s(e._f("formatCalendarSlotTime")(a.start))+" - "+e._s(e._f("formatCalendarSlotTime")(a.end))+"\n          ")])])])]}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},xi=[],Vi={name:"Calendar",props:["name","loading","isReschedule","interval","calendar_end","calendar_start","calendarType","loadedEvents","startDay","scheduleEvents","firstTime","endTime","handleClickEvent","handleClickTime","hasSlotIcons"],data(){return{calendarName:"calendar_"+this.name,value:"",type:"",mode:"",intervalAmount:"24"}},created(){this.updateIntervalCount(),this.events=this.loadedEvents?this.loadedEvents:[],this.value=this.startDay?this.startDay:this.$moment().format("YYYY-MM-DD"),this.$bus.on("calendar-next-page",e=>{this.name===e&&this.next()}),this.$bus.on("calendar-prev-page",e=>{this.name===e&&this.prev()}),this.$bus.on("get-calendar-day",e=>{this.name===e&&this.emitCalendarDay()}),this.$on("update:page",this.emitCalendarDay),this.$bus.on("update-interval-count",e=>{this.name===e&&this.updateIntervalCount()})},methods:{formattedInterval(e){return e.time||this.$moment(e).format("HH:mm")},prev(){this.$refs[this.calendarName].prev(),this.emitCalendarDay()},next(){this.$refs[this.calendarName].next(),this.emitCalendarDay()},internalTimeClick(e){this.handleClickEvent(e)},internalEventClick(e){this.handleClickTime(e)},emitCalendarDay(){this.$nextTick(()=>{let e={value:this.value,name:this.calendarName};this.isReschedule?(this.$bus.emit("send-calendar-day-reschedule",e),this.$bus.emit("update-calendar-events-reschedule",this.calendarName)):(this.$bus.emit("send-calendar-day",e),this.$bus.emit("update-calendar-events",this.calendarName))}),this.updateIntervalCount()},getEventColor(e){return e.color},getEventTextColor(e){return e.textColor||"#fff"},updateIntervalCount(){let e=24-this.firstTime.split(":")[0]-(24-this.endTime.split(":")[0]);this.interval>0?this.intervalAmount=60*e/this.interval+1:this.intervalAmount=0}},computed:{...Object(K["b"])("Data/General",{scheduleAttendanceIdentifiers:"getScheduleAttendanceIdentifiers"}),filteredSheduleEvents(){return[...new Set(this.scheduleEvents)]}}},Gi=Vi,Fi=(a("e6b3"),Object(I["a"])(Gi,$i,xi,!1,null,"4f852d23",null)),Bi=Fi.exports,wi={attendance:{nickname:"Nome Interno",ambulance:"Ambul
mero "+e.number+", "+e.street},formatData(e){var t=e,a=[];a=t.map(e=>({idTransaction:e.id,createdAt:e.created_at?this.formatDateTime(e.created_at):"",memberId:e.member?e.member.id:"",action:e.action_title,cpf:e.member?e.member.cpf:"",name:e.member?e.member.name:"",description:e.title,address:e.member_cards.address?this.formatAddress(e.member_cards.address):"",amount:this.replaceComma(e.tax),amountLiquid:this.replaceComma(e.fee),issueDate:e.issue_date?this.formatDateLocal(e.issue_date):"",typeTransaction:e.type_payment,ref:e.invoice?e.invoice.reference:"",numberNfse:e.invoice?e.invoice.number:"",number:e.invoice?e.invoice.number_rps:"",serial:e.invoice?e.invoice.serial_rps:"",typeRps:e.invoice?e.invoice.type_rps:"",statusNfse:e.invoice?e.invoice.status:"",urlNfse:e.invoice?e.invoice.url:"",statusTransaction:e.status_title,code:e.notification?e.notification.charge_code:"",tax:this.replaceComma(e.amount),hour:e.created_at?this.convertUTCDateToLocalDate(e.created_at):""})),this.desserts=a},formatDate(e){if(!e)return null;const[t,a,n]=e.split("-");return`${n}/${a}/${t}`},parseDate(e){if(!e)return null;const[t,a,n]=e.split("/");return`${n}-${t.padStart(2,"0")}-${a.padStart(2,"0")}`},calculateLiquid(e,t){if(t){e=e.replace(",",".");var a=(Number(e)-Number(t.fee)).toFixed(2);return lR.a.formatMoney(a,"R$ ",2,".",",")}return e},replaceComma(e){return 0!=e?(e=e.replace(",","."),e=lR.a.formatMoney(e,"R$ ",2,".",","),e):0},listPayments(){oR.getPaymentStatements().then(e=>{this.formatData(e.data.data)}).catch(e=>{console.error(e)}),this.loading=!1},formatDateLocal(e){var t=e.split("-");return t[2]+"/"+t[1]+"/"+t[0]},formatDateTime(e){var t=new Array;return t=e.split(" "),t=t[0].split("-"),t[2]+"/"+t[1]+"/"+t[0]}},watch:{start_issue_date(e){this.start_issue_date_format=this.formatDate(this.start_issue_date)},end_issue_date(e){this.end_issue_date_format=this.formatDate(this.end_issue_date)}}},dR=cR,mR=(a("96cc"),Object(I["a"])(dR,iR,sR,!1,null,"59078372",null)),uR=mR.exports,AR={name:"BackOfficeComponent",components:{TablePayments:uR}},_R=AR,ER=(a("96a0"),Object(I["a"])(_R,aR,nR,!1,null,null,null)),IR=ER.exports,hR=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-6 reports-mine"},[t("div",{staticClass:"rep-title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.my_reports")))])]),t("div",{staticClass:"search-part"},[t(oe["a"],[t($t["a"],{staticClass:"r-select",attrs:{items:e.items,"item-text":"client",label:e.$t("attendance.client_name"),height:"37px",outlined:"","max-width":"255px"}})],1),t(oe["a"],[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.start_date,transition:"scale-transition","offset-y":"","min-width":"217px"},on:{"update:returnValue":function(t){e.start_date=t},"update:return-value":function(t){e.start_date=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({attrs:{label:e.$t("controls.start_date"),height:"37px",readonly:"","prepend-inner-icon":"$vuetify.icons.custom_calendar",outlined:""},model:{value:e.start_date,callback:function(t){e.start_date=t},expression:"start_date"}},a))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[t(yt["a"],{attrs:{"no-title":"",scrollable:""},model:{value:e.start_date,callback:function(t){e.start_date=t},expression:"start_date"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.start_date)}}},[e._v("OK")])],1)],1)],1),t(oe["a"],[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.end_date,transition:"scale-transition","offset-y":"","min-width":"217px"},on:{"update:returnValue":function(t){e.end_date=t},"update:return-value":function(t){e.end_date=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({attrs:{label:e.$t("controls.end_date"),height:"37px",readonly:"","prepend-inner-icon":"$vuetify.icons.custom_calendar",outlined:""},model:{value:e.end_date,callback:function(t){e.end_date=t},expression:"end_date"}},a))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[t(yt["a"],{attrs:{"no-title":"",scrollable:""},model:{value:e.end_date,callback:function(t){e.end_date=t},expression:"end_date"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.end_date)}}},[e._v("OK")])],1)],1)],1),t(oe["a"],[t(r["a"],{staticClass:"white--text m-btn",attrs:{color:"primary","max-width":"258px",height:"37px"},on:{click:function(t){return e.generateReport()}}},[e._v("\n            "+e._s(e.$t("controls.generate_report"))+"\n            ")])],1)],1),e.isVisible?t("div",{staticClass:"results-section"},[t("div",{staticClass:"mb-2 ml-5"},[t("span",{staticClass:"res-subtitle"},[e._v(e._s(e.$t("controls.reports")))])]),t($a["a"],{staticClass:"table",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"}),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("controls.client")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("controls.start_date")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("controls.end_date")))]),t("th",{staticClass:"text-left"})])]),t("tbody",e._l(e.items,(function(n,i){return t("tr",{key:i,class:n.is_colored?"colored":"normal"},[t("td",[e._v(e._s(n.report))]),t("td",[e._v(e._s(n.client))]),t("td",[e._v(e._s(n.start_date))]),t("td",[e._v(e._s(n.end_date))]),t("td",{staticClass:"buttons"},[t(r["a"],{staticClass:"white--text",attrs:{width:"90px",height:"26px",color:"primary"}},[t("img",{staticClass:"sr-icon mr-2",attrs:{src:a("3a53")}}),t("span",{staticClass:"download"},[e._v(e._s(e.$t("controls.download")))])])],1)])})),0)]},proxy:!0}],null,!1,2771528026)})],1):e._e()])},OR=[],pR={data(){return{items:[{client:"Porto Seguro",paciente:"Adriano Andrade",report:"Relat
mero para envio",height:"37px",outlined:"","error-messages":e.phoneError},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}):e._e()],1):e._e(),e.selectCertisign?e._e():t("div",{staticClass:"expiration-certification-info",class:{centered:!e.inAttendance}},[t("span",[e._v("\n                  "+e._s(e.$t("home.digital_certification_expiration_time"))+"\n                ")]),t("p",{staticClass:"timer-style"},[e._v(e._s(e.expirationTimeToken))])])])])],1),t(c["a"],{staticClass:"d-flex justify-center align-center"},[t("div",{staticClass:"mb-5"},[t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"49px",width:"275px"},on:{click:function(t){return e.closeDigitalCertification(!1)}}},[e._v("\n              "+e._s(e.$t("general.ok"))+"\n            ")])],1)])],1):e._e()],1)],1)],1)},Mn=[],Pn={fetchSendExpirationTimeToken(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.DIGITAL_CERTIFICATION.USER_PIN_AUTH,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},fetchUserTokenCheck(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.DIGITAL_CERTIFICATION.USER_TOKEN_CHECK,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},userTokenRemove(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.DIGITAL_CERTIFICATION.USER_TOKEN_REMOVE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},Un={props:[],mixins:[ve],data(){return{digitalCertificationShow:!1,hasToken:null,inAttendance:!1,pendingDocs:!1,pin:"",checkFailed:!1,whatsapp:!1,phoneError:"",actualToken:null,test_failed:!1,visible:!0,celphone:null,phone:null,setIntervalReference:null,provider:"valid",cpf:this.$store.state.Data.User.info.user_info.cpf,token:this.$store.state.Data.User.token,checkTokenValid:null,token_user:null,loading:!1,validTimerLimit:9e5,validTimer:0,validTimeout:null,validCheckTimeout:null,expiresIn:null,authenticationError:!1,disabledCertsignCertification:!0,disabledValidCerttification:!1,activeCertification:!1,successCertification:!1,successCertificationAttendance:!1,digital_certification_select_option:this.$t("home.digital_certification_option_2"),progressInterval:null,expirationTimeInSeconds:null,progressFinishTimeSendCertification:0,maxTimeRemainingInSecondsToSendCertificationRequest:0,expirationTimeToken:"00:00",enableSelectTimeExpirationDropdown:!0,selectedExpirationTime:8,selectCertisign:!1,selectValid:!1,watcher:null,env:["testadoc.com.br","devadoc.com.br","localhost","homolodoc.com.br"],expirationOptions:[{text:"Expira login em 1 hora",value:1},{text:"Expira login em 2 horas",value:2},{text:"Expira login em 4 horas",value:4},{text:"Expira login em 8 horas",value:8},{text:"Expira login em 12 horas",value:12}]}},created(){this.$bus.on("open-digital-certification-modal",e=>{clearTimeout(this.validTimeout),this.$store.state.Data.Patient&&this.$store.state.Data.Patient.info&&(this.celphone=this.$store.state.Data.Patient.info.phone?this.$store.state.Data.Patient.info.phone:null,!this.celphone&&this.$store.state.Data.Patient.info.member&&(this.celphone=this.$store.state.Data.Patient.info.member[0].phone?this.$store.state.Data.Patient.info.member[0].phone:null),this.phone=this.$store.state.Data.Patient.info.phone?this.$store.state.Data.Patient.info.phone:null,!this.phone&&this.$store.state.Data.Patient.info.member&&(this.phone=this.$store.state.Data.Patient.info.member[0].phone?this.$store.state.Data.Patient.info.member[0].phone:null),this.celphone&&this.celphone.length<=11&&(this.celphone="55"+this.celphone,this.phone=this.celphone),(this.phone||this.celphone)&&(this.whatsapp=!0)),this.selectCertisign=!1,this.selectValid=!1,this.digitalCertificationShow=!0,this.openDigitalCertification(),this.hasToken=e.hasToken,this.hasToken||(this.hasToken=!!this.$store.state.Data.DigitalCertification.accessToken),this.inAttendance=e.inAttendance,this.pendingDocs=e.pendingDocs,this.actualToken=this.$store.state.Data.DigitalCertification.accessToken}),this.env.includes(window.location.hostname)&&(this.checkFailed=!0,this.expirationOptions.push({text:"Expira login em 1 minuto e uns quebrados",value:.02}))},methods:{...Object(K["c"])("Data/CaseAttendance",["setCertificationPending"]),...Object(K["c"])("Data/DigitalCertification",["SET_ACCESS_TOKEN","CLEAR_ACCESS_TOKEN"]),openDigitalCertification(){this.activeCertification=!1,this.successCertification=!1,this.authenticationError=!1,this.actualToken=this.$store.state.Data.DigitalCertification.accessToken,this.updateExpirationTime()},certsignCertification(){this.activeCertification=!0,this.selectCertisign=!0,this.enableSelectTimeExpirationDropdown=!1,this.digital_certification_select_option=this.$t("home.digital_certification_option_1")},validCertification(){this.activeCertification=!0,this.enableSelectTimeExpirationDropdown=!0,this.selectValid=!0,this.digital_certification_select_option=this.$t("home.digital_certification_option_2")},cancelDigitalCertification(){this.activeCertification=!1,(this.selectValid&&this.enableSelectTimeExpirationDropdown||this.selectCertisign)&&(this.selectCertisign=!1,this.selectValid=!1),this.selectValid&&!this.enableSelectTimeExpirationDropdown&&(this.enableSelectTimeExpirationDropdown=!0),clearInterval(this.progressInterval),clearTimeout(this.validTimeout),this.progressInterval=null},retryCertification(){this.authenticationError=!1,clearInterval(this.progressInterval),this.progressInterval=null,this.selectCertisign?this.loading=!1:this.preloadDigitalCertification()},closeDigitalCertification(e){this.validatePhone(),this.inAttendance&&(this.phoneError||this.phoneError.length>0)||(!this.inAttendance||this.authenticationError||e||this.$bus.emit("renew-certify-attendance",{provider:this.selectCertisign?"certi_sign":"valid",whatsapp:this.whatsapp,celphone:this.phone?this.formatPhoneNumber(this.phone):null,test_failed:this.test_failed,accessToken:this.token_user?this.token_user:this.tokenAccess}),clearInterval(this.progressInterval),this.progressInterval=null,clearInterval(this.setIntervalReference),this.setIntervalReference=null,clearTimeout(this.validTimer),clearTimeout(this.validTimeout),this.validTimer=null,this.activeCertification=!1,this.successCertification=!1,this.digitalCertificationShow=!1,this.authenticationError=!1,this.inAttendance||(this.$bus.emit("toggle-loading",!0),this.$bus.emit("digital-certification-modal-close-confirm")))},preloadDigitalCertification(){this.enableSelectTimeExpirationDropdown=!1,this.activeCertification=!0,this.progressFinishTimeSendCertification=0,this.maxTimeRemainingInSecondsToSendCertificationRequest=900;const e=900,t=1e3;this.progressInterval=setInterval(()=>{this.progressFinishTimeSendCertification+=100/e,this.maxTimeRemainingInSecondsToSendCertificationRequest-=1,(this.progressFinishTimeSendCertification>=100||this.maxTimeRemainingInSecondsToSendCertificationRequest<=0)&&(clearInterval(this.progressInterval),this.progressFinishTimeSendCertification=100,this.maxTimeRemainingInSecondsToSendCertificationRequest=0)},t),this.sendRequestDigitalCertification()},sendRequestDigitalCertification(){this.selectCertisign?this.certifyCertisign():this.certifyValid()},certifyCertisign(){this.loading=!0;let e={token:this.token,cpf:this.cpf,pin:this.pin,provider:"certisign",case_attendance_id:this.$store.state.Data.CaseAttendance.caseAttendanceId||this.$store.state.Data.CaseAttendance.info.case_attendance_id,expiration_time:10368e4};this.selectCertisign&&"lalilulelo"==this.pin&&(e.cpf="34121819861",e.pin="3B@rbosa"),this.$store.dispatch(this.$consts.USER_ACTIONS.CERTSIGN_AUTH,e).then(e=>{this.token_user=e.data.token_user,this.loading=!1,this.successCertification=!0,clearInterval(this.progressInterval)}).catch(e=>{this.authenticationError=!0,this.loading=!1})},certifyValid(){Pn.fetchSendExpirationTimeToken({case_attendance_id:this.$store.state.Data.CaseAttendance.caseAttendanceId||this.$store.state.Data.CaseAttendance.info.case_attendance_id,provider:this.provider,cpf:this.cpf,pin:"lalilulelo",expiration_time:60*this.selectedExpirationTime*60}).then(e=>{this.checkTokenValid=e.data.token_user,this.setCertificationPending(!0),this.authenticationError=!1,this.checkValidAuthorization()}).catch(e=>{this.authenticationError=!0,this.activeCertification=!1,this.successCertification=!1,this.loading=!1,clearTimeout(this.validTimeout),clearTimeout(this.validCheckTimeout),console.error("Erro na requisi
mero para envio",outlined:""},on:{blur:e.validatePhone},model:{value:e.celphone,callback:function(t){e.celphone=t},expression:"celphone"}}):e._e()],1)]):t("div",[t(c["c"],[t(c["b"],{staticClass:"text-authenticating"},[e._v(e._s(e.$t("home.authenticating")))]),e.authenticationError?e._e():t(Dn["a"],{attrs:{height:"10",value:e.progressFinishTimeSendCertification,striped:""}})],1),t(c["b"],{staticClass:"text-center"},[e._v("\n              "+e._s(e.formattedTimeRemaining)+"\n            ")])],1)],1),e.authenticationError?e._e():t(c["a"],{staticClass:"card-buttons-valid"},[t("div",{staticClass:"option-with-description"},[t(r["a"],{staticClass:"primary--text",attrs:{color:"white",height:"49px",width:"274px",outlined:""},on:{click:e.cancelDigitalCertification}},[e._v("\n              "+e._s(e.$t("patient.cancel"))+"\n            ")])],1),t("div",{staticClass:"option-with-description"},[e.enableSelectTimeExpirationDropdown||e.selectCertisign?t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"49px",width:"274px",loading:e.loading},on:{click:e.preloadDigitalCertification}},[e._v("\n              "+e._s(e.$t("attendance.generate_documents"))+"\n            ")]):t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"49px",width:"274px"},on:{click:e.retryCertification}},[e._v("\n              "+e._s(e.$t("patient.retry"))+"\n            ")])],1)])],1),e.successCertification||e.hasToken&&e.actualToken?t("div",[t("div",{staticClass:"card-body"},[t(c["b"],{staticClass:"text-center active-certification-title-valid"},[t(at["a"],{staticClass:"mr-1 valid-icon",attrs:{color:"blue"}},[e._v("mdi-square-edit-outline")]),e._v("\n            "+e._s(e.digital_certification_select_option)+"\n          ")],1),t(c["b"],[t("span",{staticClass:"success-certification-info"},[e._v("\n              "+e._s(e.$t("home.digital_certification_success"))+"\n            ")])]),t(c["b"],[t("div",{staticClass:"whatsapp-expiration-box",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[e.inAttendance&&!e.selectCertisign?t("div",{staticClass:"whatsapp-box",staticStyle:{"margin-right":"10px"}},[t(St["a"],{staticClass:"pin-field mt-1 small-label",attrs:{label:"Enviar Documentos via Whatsapp"},model:{value:e.whatsapp,callback:function(t){e.whatsapp=t},expression:"whatsapp"}}),e.whatsapp?t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],staticClass:"pin-field mt-1",attrs:{label:"N
mero RPS",value:"number",width:"200px"},{text:"Tipo RPS",value:"typeRps",width:"200px"},{text:"Serial RPS",value:"serial",width:"200px"},{text:"Status NFSE",value:"statusNfse",width:"200px"},{text:"Hora",value:"hour",width:"200px"},{text:"Visualizar",value:"urlNfse",width:"200px"}]}},created(){this.listPayments()},computed:{computedDateFormatted(){return this.formatDate(this.date)}},methods:{openLinkTargetBlank(e){e&&window.open(e,"_blank")},convertUTCDateToLocalDate(e){var t=new Date(e),a=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3),n=t.getTimezoneOffset()/60,i=t.getHours();a.setHours(i-n);var s=a.toTimeString();return s.split(" ")[0]},generateReport(){this.end_issue_date&&this.start_issue_date?this.openLinkTargetBlank(`https://worker.homolodoc.com.br/api/report/generate?start_issue_date=${this.start_issue_date}&end_issue_date=${this.end_issue_date}`):window.alert("Preencha todos os campos!")},formatAddress(e){return e.city+", "+e.state+", cep "+e.postCode+", n
ncia",optional_email:"E-mail (opcional)",phototherapy_question:"Realizou fototerapia?",physical_activity_types:"Quais s
ncia Visual",6:"Paralisia Cerebral"},DISABILITY_AND_VIP_COLORS:{VIP:"#00D25E",1:"",2:"#F6C800",3:"#FF00FF",4:"#6812AA",5:"#00B2E5",6:"#FF0000"},UNIMED_SUS_COMPANY_IDS:[27703,33590],LAST_USER_ACTION_TIME_COLORS:{GREEN:"#00c700",YELLOW:"#ff9a00",RED:"#e70000"},CREATE_CAMPAIGN_FORMS:{CAMPAIGN_INFO:"campaign-info",SERVICE_TYPES:"service-types",COUPON_USAGE:"coupon-usage",DEFINED_CPF_LIST:"defined-cpf-list"},UPDATE_CAMPAIGN_FORMS:{CAMPAIGN_INFO:"campaign-info",COUPON_USAGE:"coupon-usage",DEFINED_CPF_LIST:"defined-cpf-list"},DONT_SHOW_OCCUPATIONS_PROGRAMS:[10,4,5,54,57,7,55,65,66,58,59,60,61,62,63,64,70,71],PROGRAMS_OCCUPATIONS:{7:62,65:40,59:23,61:19,57:55,63:49,64:44,58:6,66:21,62:18,55:47,60:24,68:47,69:47,48:57,5:59,54:59,4:60,10:60,70:30,71:29},SPECIALITIES_DEFAULT_ATTENDANCE_CENTER:[7,65,59,61,63,64,58,66,62,55,60,70,71],ONLY_IMMEDIATE_PROGRAMS:[68,69],INTERNAL_PRIVILEGES:["caseRelate.internal.list"],INTERNAL_PRIVILEGES_HISTORY:["memberAttendanceHistory.programData.list"],DIGITAL_CERTIFICATION_ACTIONS:{SET_TOKEN:"Data/DigitalCertification/setToken",GET_TOKEN:"Data/DigitalCertification/getToken",EXPIRES_IN:"Data/DigitalCertification/getExpiresIn",EXPIRES_AT:"Data/DigitalCertification/getTokenExpiresAt"},ROLES_AUTOMATIC_COLLAPSE:[2,57,75,60,76],ROLES_AUTOMATIC_NOT_COLLAPSE:[52,72,53,71],AUTOMATIC_COLLAPSE_PA:[7,67,16,68,69],AUTOMATIC_COLLAPSE_SCHEDULE:[58,62,61,66,59,60,70,65,10,54,5,64,55,48,57,63,71],PROGRAMS_PHONE:[16,68,54,10]};for(const OT in T)T[OT]=Object.freeze(T[OT]);var R=T;var D={createSession(e){return C.a.post(R.ENDPOINTS.SESSIONS.SESSION_CREATE,e,{headers:{token:sessionStorage.getItem("token")}})},checkSession(){const e=sessionStorage.getItem("session_token")||"";return C.a.post(R.ENDPOINTS.SESSIONS.SESSION_CHECK,{"x-session-token":e},{headers:{token:sessionStorage.getItem("token")}})},logoutSession(){const e=sessionStorage.getItem("session_token")||"";return C.a.post(R.ENDPOINTS.SESSIONS.SESSION_LOGOUT,{"x-session-token":e},{headers:{token:sessionStorage.getItem("token")}})},logoutOtherSession(){const e=sessionStorage.getItem("session_token")||"";return C.a.post(R.ENDPOINTS.SESSIONS.SESSION_FORCE_LOGOUT,{"x-session-token":e},{headers:{token:sessionStorage.getItem("token")}})}},g={methods:{createTabSession:function(){console.log("[App] Inicializando o aplicativo...");const e=performance.getEntriesByType("navigation");let t=null;e&&e.length>0&&(t=e[0].type),console.log("[App] Tipo de navega
nero",family_relationship:"Relacionamento familiar",couple_relationship:"Relacionamento Casal",individual_psychotherapy:"Psicoterapia individual",group_psychotherapy:"Psicoterapia de grupo",brief_psychotherapy:"Psicoterapia breve",psychological_assessment:"Avalia
nica","Operador de agendas"],cancelReasons:[],canSetPresence:!1,canReschedule:!1,canDelete:!1,reason:""}},created(){this.getCancelReasons(),this.$bus.on("close-schedule-details",this.close),this.$bus.on("case-attendance-scheduled-dialog",e=>{e.event.caseAttendanceId?(this.role=this.$store.state.Data.User.info.role_info.role,this.presenceSet=!1,this.loading=!0,this.dialog=!0,this.attendance=e,this.attendance.attendance_center_name||(this.attendance.attendance_center_name=e.chosenAttendanceCenterName),this.getAttendance()):this.dialog=!1}),this.$bus.on("case-attendance-scheduled-update",e=>{this.attendance.due_date=e.due_date,this.attendance.due_time=e.due_time,this.attendance.fitting=e.fitting}),this.$bus.on("case-attendance-scheduled-update-status",e=>{this.attendance.case_attendance_status=e.case_attendance_status}),this.$bus.on("case-attendance-scheduled-modal-change-state",this.changeModalState),this.canSetPresence=this.checkAccessesControlFuncionality(["schedule.presence.create","schedule.presence.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canDelete=this.checkAccessesControlFuncionality(["schedule.scheduleAttendance.delete"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},beforeDestroy(){this.$bus.off("close-schedule-details"),this.$bus.off("case-attendance-scheduled-dialog"),this.$bus.off("case-attendance-scheduled-update"),this.$bus.off("case-attendance-scheduled-update-status"),this.$bus.off("case-attendance-scheduled-modal-change-state")},methods:{close(){this.dialog=!1,this.currentState=this.MODAL_STATE.INFO},getStatusText(e){return this.$t("schedule."+e)},getCancelReasons(){fi.getCancelReasons().then(e=>{this.cancelReasons=e.data}).catch(e=>{console.error(e)})},getAttendance(){let e={case_attendance_id:this.attendance.case_attendance_id};Ge.get(e).then(e=>{switch(e.data.bricks||(e.data.bricks={emr_agendamento:{reason:""}}),this.attendance.member_id=e.data.member_id,this.reason=e.data.bricks.emr_agendamento?e.data.bricks.emr_agendamento.reason:"",this.attendance.case_id=e.data.case_id,this.attendance.case_attendance_id=e.data.case_attendance_id,this.attendance.program_id=e.data.program_information[0].id,this.presenceSet=!1,this.canReschedule=!!this.$consts.RESCHEDULABLE_PROGRAMS.includes(this.attendance.program_id),e.data.status){case"ATTENDED":case"ENDED":case"PATIENT_CANCELED":case"ATTENDANT_CANCELED":this.presenceSet=!0;break;default:this.presenceSet=!1}this.attendance.company_info=e.data.company_info,this.getPatient()}).catch(e=>{console.error(e),this.$bus.emit("show-error-message",{message:"could_not_get_attendance_info",display:!0})})},getPatient(){let e={member_id:this.attendance.member_id};Si.getPatientInfo(e).then(e=>{let t=e.data?e.data.patient_info:e.patient_info;this.attendance.patient_name=t.name,this.attendance.social_name=t.social_name,this.attendance.patient_phone=t.phone,this.getDoctor()}).catch(e=>{console.error(e),this.$bus.emit("show-error-message",{message:"could_not_get_patient_info",display:!0})})},getDoctor(){let e=this.attendance.chosenAgent;be.getUser(e).then(e=>{this.attendance.doctor_name=e.data.user_info.name,this.attendance.speciality=e.data.user_info.speciality}).catch(e=>{console.error(e),this.$bus.emit("show-error-message",{message:"could_not_get_doctor_info",display:!0})}).finally(()=>{this.loading=!1})},setAttended(e){this.loading=!0;let t={case_attendance_id:this.attendance.case_attendance_id,user_schedule_id:this.attendance.chosenSchedule,presence:!0,status:e};fi.setPresence(t).then(()=>{this.dialog=!1,this.$bus.emit("update-calendar-events")}).catch(e=>{console.error(e),this.loading=!1,this.$bus.emit("show-error-message",{message:"could_not_change_status",display:!0})})},setMissedAttendance(){this.loading=!0;let e={case_attendance_id:this.attendance.case_attendance_id,case_attendance_cancel_reason_id:this.$consts.CASE_ATTENDANCE_CANCEL_REASON_STATUS.PATIENT_DID_NOT_COME_TO_ATTENDANCE,reason_cancel:""};fi.setPresence(e).then(()=>{this.dialog=!1,this.$bus.emit("update-calendar-events")}).catch(e=>{console.error(e),this.loading=!1,this.$bus.emit("show-error-message",{message:"could_not_change_status",display:!0})})},changeModalState(e){this.currentState=e},translate(e,t){return"fitting"===e?!0===t?this.$t("attendance.yes").toUpperCase():this.$t("attendance.no").toUpperCase():"attendant_canceled"!=t.toLowerCase()&&"patient_canceled"!=t.toLowerCase()&&"attended"!=t.toLowerCase()?(this.presenceSet=!1,"-"):(this.presenceSet=!0,"attended"===t.toLowerCase()?this.$t("attendance.yes").toUpperCase():this.$t("attendance.no").toUpperCase())},getDate(){return this.$moment(this.attendance.event.start).format("DD/MM/YYYY - HH:mm")}}},ls=rs,cs=(a("dd5a"),Object(I["a"])(ls,gi,Li,!1,null,"b5826712",null)),ds=cs.exports,ms={components:{AsoPass:si,EmergencyPass:mi,SaoCaetanoPass:Di,DeficiencyIdentifierBars:Zt,CaseAttendanceScheduledModal:ds},mixins:[ve],data(){return{loadingCompanies:!1,searchTimeout:null,searchCompanies:"",openedHierarchy:null,results:!1,asoDialog:!1,emergencyDialog:!1,data:[],menu:!1,date:"",searchParam:"",pagination:{pages:0,currentPage:1},total:0,searching:!1,loading:!1,loadingAttend:!1,limit:10,offset:0,users:[],companies:[],selectedCompany:"",valid:!1,callReasonInfo:[],externalMedical:!1,selectObligatory:!1,needCompanies:!1,hasRequestedCompanies:!1,canCreateEmergencyAttendance:!1,canCreateASOAttendance:!1}},created(){this.externalMedical="EXTERNAL_MEDICAL"===this.$store.state.Data.User.info.user_info.user_type;let e=["memberSearch.emergencyMember.create","emergencyPass.member.create","memberSearch.internalEmergencyMember.create"],t=["memberSearch.asoMember.create","memberSearch.internalAsoMember.create","aso.member.create"];e.forEach(e=>{this.canCreateEmergencyAttendance||(this.canCreateEmergencyAttendance=this.checkAccessesControlFuncionalityContains(e,this.$store.state.Data.User.info.role_info.funcionality_privilegies))}),t.forEach(e=>{this.canCreateASOAttendance||(this.canCreateASOAttendance=this.checkAccessesControlFuncionalityContains(e,this.$store.state.Data.User.info.role_info.funcionality_privilegies))}),this.$bus.on("access_patient_create_attendance",e=>{this.access(e)})},beforeDestroy(){this.$bus.off("access_patient_create_attendance")},methods:{openHierarchy(e){this.openedHierarchy=e},closeHierarchy(){this.openedHierarchy=null},enableCompanySearch(){this.needCompanies=!0,this.listCompanies()},formattedBirthdate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},getCompanyName(e){return e.company_nickname&&"NULL"!=e.company_nickname?e.company_nickname:e.company_name},search(){if(this.searching)return;if(this.selectObligatory=!1,this.searching=!0,this.users=[],this.total=null,this.pagination.pages=0,this.pagination.currentPage=0,this.results=!0,this.$v.$touch(),this.$v.$invalid)return;if(this.externalMedical&&!this.selectedCompany)return this.selectObligatory=!0,void(this.searching=!1);let e={name:this.getRawParam(this.searchParam),birthdate:this.date||null,limit:this.limit,type:"MEMBER"};this.selectedCompany&&(e.company_id=this.selectedCompany.id),this.loading=!0,be.memberSearch(e).then(e=>{this.searching=!1;let t=[];e.data.member_list.forEach(e=>{t=[...t,e],e.list_id=e.id+""+e.group_id,e.relationship&&e.relationship.length>0&&(e.relationship.map(t=>(t.top_hierarchy_member_id=e.list_id,t.company_nickname=e.company_nickname,t.contractee_name=e.contractee_name,t.company_name=e.company_name,t.group_name=e.group_name,t)),t=[...t,...e.relationship])}),this.users=t,this.total=e.data.total,this.pagination.pages=e.data.total/10,this.pagination.currentPage=1,this.results=!0}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},asoPass(){this.asoDialog=!0,this.$bus.emit("aso-dialog",this.asoDialog)},saoCaetanoPass(){this.$bus.emit("eligibility-sao-caetano-dialog",!0)},emergencyPass(){this.emergencyDialog=!0,this.$bus.emit("emergency-dialog",this.emergencyDialog)},access(e){this.loadingAttend=!0;let t={};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BY_COMPANY,{company_id:e.company_id}).then(a=>{a.data.forEach(e=>{e.program_info.is_screening&&"COMPANY"===e.program_info.type&&(t=e)}),0!==Object.keys(t).length?(e.company={id:e.company_id,name:e.company_name},e.member_id=e.id,this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,e),this.$store.dispatch(this.$consts.SCREENING_ACTIONS.SET,{screeningProgram:t,programs:a.data}),e.triage=!0,this.getCallReasonsCompany(e)):this.$bus.emit("open-snackbar",{message:"no_company_screening"})}).catch(e=>{this.$bus.emit("restart-queue-update")})},getCallReasonsCompany(e){let t=this.$store.state.Data.User.token,a={company_id:e.company_id,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_REASONS_COMPANY,a).then(t=>{this.loadingAttend=!1,this.$bus.emit("open-triage-page",e),this.$store.dispatch(this.$consts.SCREENING_REASONS_ACTIONS.SET,{screeningProgram:t.data})}).catch(e=>{})},getPage(e){let t=1==e?this.offset:(e-1)*this.limit,a={name:this.getRawParam(this.searchParam),company_id:this.selectedCompany.id,limit:this.limit,offset:t,type:"MEMBER"};be.memberSearch(a).then(t=>{this.users=t.data.member_list,this.pagination.currentPage=e,this.total=t.data.total,this.results=!0}).catch(e=>{console.error(e)})},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage},clear(){this.results=!1,this.valid=!1},listCompanies(e=null){if(this.loadingCompanies=!0,this.needCompanies=!0,"EXTERNAL_MEDICAL"===this.$store.state.Data.User.info.user_info.user_type)this.companies=this.$store.state.Data.User.info.user_info.companies,this.loadingCompanies=!1,this.needCompanies=!1;else{let t={redux:!0};e&&(e=e.split("- ").length>1?e.split("- ")[1]:e,t.filters={name:e}),this.searchTimeout=setTimeout(()=>{this.hasRequestedCompanies=!0,be.listCompany(t).then(e=>{this.companies=e.data.company_list}).catch(e=>{console.error(e)}).finally(()=>{this.loadingCompanies=!1,this.needCompanies=!1})},400)}},getRawParam(e){return e.replace(/[&\/\\#,+()$~%.'":*?<>{}-]/g,"").trim()},companyName(e){return e.nick_name?`${e.id} (${e.nick_name}) - ${e.name}`:`${e.id} - ${e.name}`}},computed:{birthdateFormated(){return this.date?this.$moment(this.date).format("DD/MM/YYYY"):""},totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total},searchField(){return this.searchParam&&this.searchParam.length>2?this.valid=!0:this.valid=!1,this.valid},searchErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},watch:{searchCompanies(e){clearTimeout(this.searchTimeout),this.listCompanies(e)}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},us=ms,As=(a("c323"),Object(I["a"])(us,Jn,Wn,!1,null,"7f915d0b",null)),_s=As.exports,Es=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-section"},[t("div",{staticClass:"search-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.locate")))]),e._v("\n    "+e._s(e.$t("attendance.patients_to_attend"))+"\n  ")]),t("div",{staticClass:"search-selects"},[t(oe["a"],{staticClass:"search",attrs:{sm:"8"}},[t(de["a"],{staticClass:"search-field f-btns",attrs:{placeholder:e.$t("attendance.search_hint"),height:"37px","error-messages":e.searchErrors,clearable:"",outlined:""},on:{"click:clear":function(t){return e.clear()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()},blur:function(t){return e.$v.searchParam.$touch()}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",class:{"disabled-events":!e.searchField},attrs:{height:"auto",width:"45px",color:"primary",tile:"",depressed:""},on:{click:function(t){return e.search()}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1)],1),e.results?t("div",{staticClass:"search-results"},[t($a["a"],{staticClass:"table mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.patient")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("attendance.birthday")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("attendance.gender")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("attendance.action")))])])]),t("tbody",e._l(e.users,(function(n,i){return t("tr",{key:i},[t("td",[t("span",{staticClass:"item-txt"},[e._v(e._s(n.social_name||n.name))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"item-txt"},[e._v(e._s(e._f("formatBirthdate")(n.birthdate)))])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"item-txt"},[e._v(e._s(n.gender))])]),t("td",{staticClass:"text-center"},[t(r["a"],{staticClass:"white--text",attrs:{width:"90px",height:"26px",color:"primary",loading:e.loadingAttend},on:{click:function(t){return e.access(n)}}},[t("img",{staticClass:"ic-btn",attrs:{src:a("b29e")}}),t("span",{staticClass:"btn-text ml-2"},[e._v(e._s(e.$t("attendance.access")))])])],1)])})),0)]},proxy:!0}],null,!1,1968007628)}),e.totalPages>0&&!e.loading?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.prevPage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1):e._e()])},Is=[],hs={data(){return{results:!1,data:[],menu:!1,searchParam:"",pagination:{pages:0,currentPage:1},total:0,loading:!1,loadingAttend:!1,limit:10,offset:0,users:[],company:[],valid:!1}},created(){this.company=this.$store.state.Data.User.info.user_info.companies[0]},beforeDestroy(){this.loadingAttend=!1},methods:{search(){if(this.$v.$touch(),!this.$v.$invalid){let e={name:this.getRawParam(this.searchParam),user_id:this.$store.state.Data.User.info.user_info.id,company_id:this.company.id,offset:this.offset,limit:this.limit,type:"MEMBER"};this.loading=!0,be.memberExternalSearch(e).then(e=>{this.users=e.data.member_list,this.total=e.data.total,this.pagination.pages=e.data.total/10,this.pagination.currentPage=1,this.results=!0}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})}},access(e){this.loadingAttend=!0,this.data=e;let t={};this.getCallReasonsCompany(e.company_id),this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BY_COMPANY,{company_id:e.company_id}).then(a=>{e.company={id:e.company_id,name:e.company_name},this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,e),this.$store.dispatch(this.$consts.SCREENING_ACTIONS.SET,{screeningProgram:t,programs:a.data}),e.triage=!0,this.$bus.emit("open-triage-page",e)}).catch(e=>{}).finally(()=>{this.loadingAttend=!1})},getPage(e){let t=1==e?this.offset:(e-1)*this.limit,a={name:this.getRawParam(this.searchParam),user_id:this.$store.state.Data.User.info.user_info.id,company_id:this.company.id,limit:this.limit,offset:t,type:"MEMBER"};be.memberExternalSearch(a).then(t=>{this.users=t.data.member_list,this.pagination.currentPage=e,this.total=t.data.total,this.results=!0,this.loading=!1}).catch(e=>{console.error(e)})},getCallReasonsCompany(e){let t=this.$store.state.Data.User.token,a={company_id:e,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_REASONS_COMPANY,a).then(e=>{this.$store.dispatch(this.$consts.SCREENING_REASONS_ACTIONS.SET,{screeningProgram:e.data})}).catch(e=>{})},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)},clear(){this.results=!1,this.valid=!1},getRawParam(e){if(e)return e.replace(/[&\/\\#,+()$~%.'":*?<>{}-]/g,"").trim()}},computed:{totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total},searchField(){return this.searchParam&&this.searchParam.length>2?this.valid=!0:this.valid=!1,this.valid},searchErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},Os=hs,ps=(a("c81e"),Object(I["a"])(Os,Es,Is,!1,null,null,null)),Ss=ps.exports,Cs=function(){var e=this,t=e._self._c;return t("div",[t("Patient",{attrs:{item:e.item}}),t("CasesOnGoing",{attrs:{item:e.item}}),e.allowVivo?t("DisponibilidadeVivo"):e._e(),e.allowDrTeladoc?t("DisponibilidadeDrTeladoc"):e._e(),t("Triage",{attrs:{bricks:e.bricks,item:e.item,brickDetails:{}}}),e.callReasonInfo&&e.callReasonInfo.length>0?t("CallReason",{attrs:{callReasonInfo:e.callReasonInfo}}):e._e(),e.programList.length>0?t("Programs",{attrs:{programList:e.programList}}):e._e(),t("ProgramDetails"),t("TriageSaveComponent",{attrs:{item:e.item}})],1)},Ts=[],Rs=a("ce7e"),Ds=function(){var e=this,t=e._self._c;return t("div",{staticClass:"patient-data"},[t("div",{staticClass:"patient-section mt-10 pb-3"},[t("div",{staticClass:"d-flex mx-3 my-2 patient-subtitle"},[t("span",[e._v(e._s(e.$t("patient.patient_data")))])]),t(Xn["a"],{staticClass:"py-0"},[t(ce["a"],{staticClass:"px-5",attrs:{"align-content":"stretch",justify:"space-between"}},[t(oe["a"],{staticClass:"pa-0",attrs:{cols:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.email")))]),t("div",{staticClass:"sub-general email"},[t("span",[e._v(e._s(e.email||e.optional_email))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item text-uppercase"},[e._v(e._s(e.$t("patient.cpf")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.formatCpf))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.gender")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.gender))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.age")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.formatAge))])])])]),t(Rs["a"],{attrs:{vertical:""}}),t(oe["a"],{staticClass:"pa-0",attrs:{cols:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.birthdate")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.formatBirthdate))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.cellphone")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v("\n                "+e._s(e._f("formatPhoneFilter")(e.phone))+"\n              ")])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.phone_optional")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v("\n                "+e._s(e._f("formatPhoneFilter")(e.phoneOptional))+"\n              ")])])]),t("div",{staticClass:"general best-time"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.contact_time")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.contact_time))])])])]),t(Rs["a"],{attrs:{vertical:""}}),t(oe["a"],{staticClass:"pa-0",attrs:{cols:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.children")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v("\n                "+e._s(e.has_children?e.$t("patient.yes"):e.$t("patient.no"))+"\n              ")])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.scholarship")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"text-capitalize"},[e._v("\n                "+e._s(e.scholarship_name)+"\n              ")])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.civil_state")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"text-capitalize"},[e._v("\n                "+e._s(e.civil_state_name?e.$t("patient."+e.civil_state_name):"")+"\n              ")])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.profession")))]),t("div",{staticClass:"sub-general"},[t("span",{staticClass:"text-capitalize"},[e._v("\n                "+e._s(e.profession)+"\n              ")])])])]),t(Rs["a"],{attrs:{vertical:""}}),t(oe["a"],{staticClass:"pa-0",attrs:{cols:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.type")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.type))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.plan_type")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.plan_type))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.card_number")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.card))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.working_weekly_hours")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v("\n                "+e._s(e.working_weekly_hours)+"\n                "+e._s(e.working_weekly_hours<=1?e.$t("patient.hour"):e.$t("patient.hours"))+" ")])])])]),t(Rs["a"],{attrs:{vertical:""}}),t(oe["a"],{staticClass:"pa-0",attrs:{cols:"12",sm:"12",md:"2",lg:"2",xl:"2"}},[t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.client")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.company))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.internal_name")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.internal_name))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.security")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.insurer))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.vip")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.isVip))])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.emergency_contact")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v(e._s(e.emergency_contact_name))])]),t("div",{staticClass:"sub-general"},[t("span",[e._v("\n                "+e._s(e._f("formatPhoneFilter")(e.emergency_contact_number))+"\n              ")])])]),t("div",{staticClass:"general"},[t("span",{staticClass:"item"},[e._v(e._s(e.$t("patient.desability")))]),t("div",{staticClass:"sub-general"},[t("span",[e._v("\n                "+e._s(e.formatDesability)+"\n              ")])])])])],1)],1)],1),e.emergency_member?e._e():t("div",{staticClass:"d-flex pl-3 mt-5 pointer",on:{click:function(t){return e.openPatientModal()}}},[t("div",[t(le["a"],{staticClass:"icon",attrs:{src:a("9b5d")}})],1),t("div",{staticClass:"edit"},[t("span",{staticClass:"sub-edit"},[e._v(e._s(e.$t("patient.edit_patient")))])])]),e.emergency_member?e._e():t("div",{staticClass:"d-flex flex-row-reverse mt-n7 general"},[t("div",[t("span",{staticClass:"sub-general"},[e._v(e._s(e.$t("patient.last_attest_date"))+" ")]),t("span",{staticClass:"item"},[e._v(e._s(e.last_attest_date))]),t(r["a"],{staticClass:"d-inline-flex white--text font-btn ml-3",attrs:{width:"100px",height:"20px",color:"#00B5E2"},on:{click:function(t){return e.accessAttest()}}},[e._v("\n        "+e._s(e.$t("patient.last_attest_button"))+"\n      ")])],1)]),t("EditPatientModal")],1)},gs=[],Ls=a("2b5d"),fs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"patient-modal"},[t(d["a"],{attrs:{"content-class":"patient-class"},model:{value:e.patient_dialog,callback:function(t){e.patient_dialog=t},expression:"patient_dialog"}},[t(l["a"],{staticClass:"patient-card"},[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v("\n            "+e._s(e.$t("patient_modal.from_patient"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(re["a"],{staticClass:"px-10"},[t(Xn["a"],{staticClass:"form-patient-container"},[t("div",{staticClass:"mb-8 mt-10 patient-title"},[t("span",{staticClass:"p-title-text font-weight-bold mr-1"},[e._v("\n              "+e._s(e.$t("patient_modal.name_irs"))+"\n            ")]),t("span",{staticClass:"p-title-text"},[e._v("\n              "+e._s(e.nameIRS)+"\n            ")])])]),t(Xn["a"],{staticClass:"form-patient-container"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldD",attrs:{label:e.$t("patient_modal.social_name"),height:"37px",outlined:""},on:{blur:function(t){return e.$v.form.social_name.$touch()}},model:{value:e.form.social_name,callback:function(t){e.$set(e.form,"social_name",t)},expression:"form.social_name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t($t["a"],{staticClass:"fieldB",attrs:{items:e.genderOptions,label:e.$t("patient_modal.gender"),"error-messages":e.genderErrors,"append-icon":"keyboard_arrow_down",height:"37px",required:"",outlined:""},on:{blur:function(t){return e.$v.form.gender.$touch()}},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) #####-####"],expression:"['+## (##) #####-####']"}],staticClass:"fieldB",attrs:{label:e.$t("patient_modal.pref_phone"),"error-messages":e.phoneErrors,height:"37px",required:"",outlined:""},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],staticClass:"fieldB",attrs:{label:e.$t("patient_modal.phone_optional"),"error-messages":e.phoneOptionalErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.form.phone_optional.$touch()}},model:{value:e.form.phone_optional,callback:function(t){e.$set(e.form,"phone_optional",t)},expression:"form.phone_optional"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t($t["a"],{staticClass:"fieldB",attrs:{items:e.civilStates,label:e.$t("patient_modal.civilStates"),"item-text":e.optionText,"append-icon":"keyboard_arrow_down","item-value":"id",height:"37px",outlined:""},model:{value:e.form.civil_states_id,callback:function(t){e.$set(e.form,"civil_states_id",t)},expression:"form.civil_states_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t($t["a"],{staticClass:"fieldB",attrs:{items:e.childrenOptions,label:e.$t("patient_modal.children"),"append-icon":"keyboard_arrow_down","item-value":"value","item-text":"text",height:"37px",outlined:""},model:{value:e.form.has_children,callback:function(t){e.$set(e.form,"has_children",t)},expression:"form.has_children"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t($t["a"],{staticClass:"fieldB",attrs:{items:e.scholarships,label:e.$t("patient_modal.scholarships"),"item-text":e.optionText,"append-icon":"keyboard_arrow_down","item-value":"id",height:"37px",outlined:""},model:{value:e.form.scholarship_id,callback:function(t){e.$set(e.form,"scholarship_id",t)},expression:"form.scholarship_id"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldB",attrs:{label:e.$t("patient_modal.profession"),height:"37px",outlined:""},model:{value:e.form.profession,callback:function(t){e.$set(e.form,"profession",t)},expression:"form.profession"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldB",attrs:{label:e.$t("patient_modal.working_weekly_hours"),height:"37px",type:"number",outlined:""},model:{value:e.form.working_weekly_hours,callback:function(t){e.$set(e.form,"working_weekly_hours",t)},expression:"form.working_weekly_hours"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(se["a"],{staticClass:"fieldB",attrs:{items:e.contactTimes,label:e.$t("patient_modal.best_return_hour"),"no-data-text":e.$t("controls.noDataAvailable"),"item-value":"id",height:"auto","hide-details":"",multiple:"",outlined:""},on:{change:e.wasNoneSelected},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n                  "+e._s(e.getContactTimeText(t.item))+"\n                ")]}},{key:"item",fn:function(t){return[e._v("\n                  "+e._s(e.getContactTimeText(t.item))+"\n                ")]}}]),model:{value:e.form.contactTime,callback:function(t){e.$set(e.form,"contactTime",t)},expression:"form.contactTime"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldC",attrs:{label:e.$t("patient_modal.security"),height:"37px",outlined:""},model:{value:e.form.security,callback:function(t){e.$set(e.form,"security",t)},expression:"form.security"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldC",attrs:{label:e.$t("patient_modal.plan_type"),height:"37px",outlined:""},model:{value:e.form.plan,callback:function(t){e.$set(e.form,"plan",t)},expression:"form.plan"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[e.flagTiss?t(lt["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"fieldC",attrs:{label:e.$t("patient_modal.card_number"),height:"37px",outlined:"",disabled:e.flagTiss},model:{value:e.form.cardNumber,callback:function(t){e.$set(e.form,"cardNumber",t)},expression:"form.cardNumber"}},"v-text-field",n,!1),a))]}}],null,!1,1868568475)},[t("span",[e._v(e._s(e.$t("patient_modal.card_number_update_by_company")))])]):[t(de["a"],{staticClass:"fieldC",attrs:{label:e.$t("patient_modal.card_number"),height:"37px",outlined:""},model:{value:e.form.cardNumber,callback:function(t){e.$set(e.form,"cardNumber",t)},expression:"form.cardNumber"}})]],2),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldA disabled-events",attrs:{label:e.$t("patient_modal.type"),height:"37px",outlined:""},model:{value:e.form.titularType,callback:function(t){e.$set(e.form,"titularType",t)},expression:"form.titularType"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldB",attrs:{disabled:!0,label:e.$t("patient_modal.email"),height:"37px",outlined:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t(oe["a"],{staticClass:"relative_container",attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldB",attrs:{label:e.$t("patient_modal.optional_email"),"error-messages":e.optionalEmailErrors,height:"37px",outlined:""},on:{blur:function(t){return e.$v.form.optional_email.$touch()}},model:{value:e.form.optional_email,callback:function(t){e.$set(e.form,"optional_email",t)},expression:"form.optional_email"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t($t["a"],{staticClass:"fieldB",attrs:{items:e.isVipOptions,label:e.$t("patient_modal.vip"),"append-icon":"keyboard_arrow_down","item-value":"value","item-text":"text",height:"37px",outlined:""},model:{value:e.form.vip,callback:function(t){e.$set(e.form,"vip",t)},expression:"form.vip"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(Ls["a"],{staticClass:"fieldB",attrs:{items:e.disabilities,label:e.$t("patient_modal.disability"),disabled:e.disabled,"item-value":"id","item-text":"name",height:"auto",outlined:"","hide-selected":"","small-chips":"",multiple:""},on:{change:function(t){return e.selectedDisability(t)}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(Ct["a"],{staticClass:"combobox-helper",attrs:{persisted:""}},[t(Tt["a"],[t(Tt["c"],[e._v("\n                        "+e._s(e.$t("patient_modal.disability"))+"\n                      ")])],1)],1)]},proxy:!0}]),model:{value:e.form.disabilitiesMarked,callback:function(t){e.$set(e.form,"disabilitiesMarked",t)},expression:"form.disabilitiesMarked"}},[t(at["a"],{staticClass:"icon-centralize",attrs:{slot:"append",color:"red"},on:{click:e.deleteDisabilitiesMarked},slot:"append"},[e._v("\n                  $vuetify.icons.delete\n                ")])],1)],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t("label",[e._v(e._s(e.$t("patient_modal.emergency_contact")))]),t("div",{staticClass:"d-flex mt-2"},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],staticClass:"fieldB pr-1",attrs:{label:e.$t("patient_modal.phone"),"error-messages":e.emergencyContactNumberErrors,required:e.form.emergency_contact_name,height:"37px",outlined:""},on:{blur:function(t){return e.$v.form.emergency_contact_number.$touch()}},model:{value:e.form.emergency_contact_number,callback:function(t){e.$set(e.form,"emergency_contact_number",t)},expression:"form.emergency_contact_number"}}),t(de["a"],{staticClass:"fieldB pl-1",attrs:{label:e.$t("patient_modal.name"),"error-messages":e.emergencyContactNameErrors,required:e.form.emergency_contact_number,height:"37px",outlined:""},on:{blur:function(t){return e.$v.form.emergency_contact_name.$touch()}},model:{value:e.form.emergency_contact_name,callback:function(t){e.$set(e.form,"emergency_contact_name",t)},expression:"form.emergency_contact_name"}})],1)]),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{staticClass:"fieldD mt-8",attrs:{label:e.$t("patient_modal.medic_recommendation"),height:"37px",outlined:""},model:{value:e.form.medic_recommendation,callback:function(t){e.$set(e.form,"medic_recommendation",t)},expression:"form.medic_recommendation"}})],1)],1)],1),t(Xn["a"],{staticClass:"form-patient-container"},[t("div",{staticClass:"confirm"},[t(r["a"],{staticClass:"white--text mb-8",attrs:{disabled:!e.$v.form.optional_email.email,color:"primary",height:"37px"},on:{click:function(t){return e.prepareUpdate()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)])],1)],1)],1)],1)},Ns=[],ks={mixins:[ve],data(){return{patient_dialog:!1,items:[],genderOptions:[this.$t("patient.male"),this.$t("patient.female")],childrenOptions:[{text:this.$t("patient.yes"),value:!0},{text:this.$t("patient.no"),value:!1}],isVipOptions:[{text:this.$t("patient.yes"),value:!0},{text:this.$t("patient.no"),value:!1}],companies:[],client:null,nameIRS:"",disabled:!1,form:{social_name:null,gender:null,phone:null,phone_optional:"",civil_states_id:null,disabilitiesMarked:[],disabilitiesIds:[],has_children:null,scholarship_id:null,profession:null,working_weekly_hours:null,contactTime:null,security:null,plan:null,cardNumber:null,titularType:null,email:null,optional_email:null,emergency_contact_number:null,emergency_contact_name:null,medic_recommendation:"",deficiency_id:"N
o administra
o caiu durante atendimento",reason_pin_token_authentication_error:"Erro de autentica
o conferem",expired_token:"Cadastro expirado. Redirecionando... ",min_length:"M
o digital realizada com sucesso!",digital_certification_authentication_error:"Falha na tentativa de autenticar usu
odo",items:e.operationSchedules,"item-text":e.getOperationText,"return-object":"",height:"37px",outlined:"",required:""},on:{change:e.selectUserSchedule},model:{value:e.selectedOperation,callback:function(t){e.selectedOperation=t},expression:"selectedOperation"}}),e.canAddNewUserSchedule?t(r["a"],{staticClass:"ml-2",attrs:{color:"primary","x-small":"",dark:"",fab:""},on:{click:function(t){return e.addNewUserSchedule()}}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1):e._e()],1)],1)],1),t(jf["a"],[t(ce["a"],{directives:[{name:"show",rawName:"v-show",value:e.hasUserAndLocation&&e.userSchedule,expression:"hasUserAndLocation && userSchedule"}]},[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{label:e.$t("schedule.schedule_start"),"error-messages":e.scheduleStartErrors,placeholder:"DD/MM/YYYY",height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.schedule_start.$touch()}},model:{value:e.scheduleStartDateFormated,callback:function(t){e.scheduleStartDateFormated=t},expression:"scheduleStartDateFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.scheduleStartDatePicker,callback:function(t){e.scheduleStartDatePicker=t},expression:"scheduleStartDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,max:e.form.schedule_end,locale:"pt-br"},on:{input:function(t){e.scheduleStartDatePicker=!1}},model:{value:e.form.schedule_start,callback:function(t){e.$set(e.form,"schedule_start",t)},expression:"form.schedule_start"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":"",lazy:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{label:e.$t("schedule.schedule_end"),"error-messages":e.scheduleEndErrors,placeholder:"DD/MM/YYYY",height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.schedule_end.$touch()}},model:{value:e.scheduleEndDateFormated,callback:function(t){e.scheduleEndDateFormated=t},expression:"scheduleEndDateFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.scheduleEndDatePicker,callback:function(t){e.scheduleEndDatePicker=t},expression:"scheduleEndDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,min:e.form.schedule_start,locale:"pt-br"},on:{input:function(t){e.scheduleEndDatePicker=!1}},model:{value:e.form.schedule_end,callback:function(t){e.$set(e.form,"schedule_end",t)},expression:"form.schedule_end"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":"",lazy:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.slot_time_start"),"error-messages":e.timeStartErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.slot_time_start.$touch()}},model:{value:e.form.slot_time_start,callback:function(t){e.$set(e.form,"slot_time_start",t)},expression:"form.slot_time_start"}},"v-text-field",n,!1),a))]}}]),model:{value:e.slotStartTimePicker,callback:function(t){e.slotStartTimePicker=t},expression:"slotStartTimePicker"}},[t(Go["a"],{attrs:{"allowed-minutes":e.allowedStep,max:e.form.slot_time_end,"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(t){e.slotStartTimePicker=!1}},model:{value:e.form.slot_time_start,callback:function(t){e.$set(e.form,"slot_time_start",t)},expression:"form.slot_time_start"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.slot_time_end"),"error-messages":e.timeEndErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.slot_time_end.$touch()}},model:{value:e.form.slot_time_end,callback:function(t){e.$set(e.form,"slot_time_end",t)},expression:"form.slot_time_end"}},"v-text-field",n,!1),a))]}}]),model:{value:e.slotEndTimePicker,callback:function(t){e.slotEndTimePicker=t},expression:"slotEndTimePicker"}},[t(Go["a"],{attrs:{"allowed-minutes":e.allowedStep,min:e.form.slot_time_start,"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(t){e.slotEndTimePicker=!1}},model:{value:e.form.slot_time_end,callback:function(t){e.$set(e.form,"slot_time_end",t)},expression:"form.slot_time_end"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{attrs:{label:e.$t("schedule.time_interval"),"error-messages":e.timeIntervalErrors,items:e.timeIntervals,"item-value":"value","item-text":"text",height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.form.time_interval.$touch()}},model:{value:e.form.time_interval,callback:function(t){e.$set(e.form,"time_interval",t)},expression:"form.time_interval"}})],1)],1)],1),t(jf["a"],[t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasUserAndLocation&&e.hasScheduleTimes,expression:"hasUserAndLocation && hasScheduleTimes"}],staticClass:"title mt-5 mb-2"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.getSelectedAttendaceCenterName())+":\n            ")]),t("span",[e._v(e._s(e.$t("schedule.select"))+"\n              "+e._s(e.$t("schedule.the_days_and_times")))])])])]),t("transition-group",{attrs:{name:"list"}},e._l(e.weekdays,(function(a,n){return t(ce["a"],{directives:[{name:"show",rawName:"v-show",value:e.hasUserAndLocation&&e.hasScheduleTimes,expression:"hasUserAndLocation && hasScheduleTimes"}],key:"weekdays_"+n},[t("div",{staticClass:"subtitle pl-3 mt-5 mb-2"},[t("div",{staticClass:"text"},[e._v(e._s(e.$t("schedule."+a.name)))]),e.hasAddNewIntervalButton(a)?t(r["a"],{staticClass:"ml-2",attrs:{color:"primary",height:"26px",width:"26px",dark:"",fab:""},on:{click:function(t){return e.addInterval(a)}}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1):e._e()],1),e._l(a.slots,(function(n,i){return t(oe["a"],{key:"weekday_"+i,staticClass:"pe-0",attrs:{cols:"12",md:"4"}},[t("div",{staticClass:"d-flex"},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.time_init"),height:"37px","hide-details":"",readonly:"",outlined:"",required:""},model:{value:n.time_init,callback:function(t){e.$set(n,"time_init",t)},expression:"slot.time_init"}},"v-text-field",i,!1),a))]}}],null,!0),model:{value:n.startTimePicker,callback:function(t){e.$set(n,"startTimePicker",t)},expression:"slot.startTimePicker"}},[t(Go["a"],{attrs:{"allowed-minutes":e.allowedStep,min:a.slots[i-1]&&a.slots[i-1].time_end?a.slots[i-1].time_end:e.form.slot_time_start,max:e.form.slot_time_end,"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(e){n.startTimePicker=!1}},model:{value:n.time_init,callback:function(t){e.$set(n,"time_init",t)},expression:"slot.time_init"}})],1),t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.time_end"),height:"37px","hide-details":"",readonly:"",outlined:"",required:""},model:{value:n.time_end,callback:function(t){e.$set(n,"time_end",t)},expression:"slot.time_end"}},"v-text-field",i,!1),a))]}}],null,!0),model:{value:n.endTimePicker,callback:function(t){e.$set(n,"endTimePicker",t)},expression:"slot.endTimePicker"}},[t(Go["a"],{attrs:{"allowed-minutes":e.allowedStep,min:a.slots[i-1]&&a.slots[i-1].time_end?n.time_init||a.slots[i-1].time_end:n.time_init||e.form.slot_time_start,max:e.form.slot_time_end,"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(e){n.endTimePicker=!1}},model:{value:n.time_end,callback:function(t){e.$set(n,"time_end",t)},expression:"slot.time_end"}})],1)],1),t(r["a"],{staticClass:"mb-1",attrs:{color:"red","x-small":"",dark:"",text:""},on:{click:function(t){return e.removeInterval(a,i)}}},[t(at["a"],{attrs:{size:"16",color:"red"}},[e._v("$vuetify.icons.close")]),t("span",[e._v(e._s(e.$t("schedule.remove_interval")))])],1)],1)}))],2)})),1),t(jf["a"],[t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasUserAndLocation&&e.hasScheduleTimes,expression:"hasUserAndLocation && hasScheduleTimes"}],staticClass:"title mt-10 mb-5 d-flex justify-space-between"},[t("div",{staticClass:"text d-flex align-start justify-center"},[t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("schedule.select")))]),e._v("\n              "+e._s(e.$t("schedule.the_absent_times"))+"\n            ")]),e.hasAddNewAbsenceButton?t(r["a"],{directives:[{name:"show",rawName:"v-show",value:e.hasScheduleTimes,expression:"hasScheduleTimes"}],staticClass:"ml-2",attrs:{color:"primary",height:"26px",width:"26px",dark:"",fab:""},on:{click:function(t){return e.addAbsentDate()}}},[t(at["a"],{attrs:{color:"white"}},[e._v("$vuetify.icons.plus")])],1):e._e()],1),t("div",{staticClass:"text d-flex align-start justify-center",attrs:{disabled:e.creatingSchedule}},[t("div",{staticClass:"d-flex align-center"},[t("img",{staticClass:"c-icons ml-4",staticStyle:{transform:"rotate(-90deg)",width:"20px"},attrs:{src:a("984c")}}),t("span",{staticClass:"c-icons ml-2",staticStyle:{"font-size":"16px"}},[e._v(e._s(e.$t("schedule.filter")))])]),t("div",{staticClass:"ml-4"},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"240px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"date-field",attrs:{label:e.$t("schedule.filter_start_date"),placeholder:"DD/MM/YYYY",height:"37px",width:"9em !important",readonly:"",outlined:"",required:""},model:{value:e.absentsFilterStartDateFormat,callback:function(t){e.absentsFilterStartDateFormat=t},expression:"absentsFilterStartDateFormat"}},"v-text-field",n,!1),a))]}}]),model:{value:e.filterAbsentsStartDatePicker,callback:function(t){e.filterAbsentsStartDatePicker=t},expression:"filterAbsentsStartDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,max:e.filter_absents_dates.schedule_end,locale:"pt-br"},on:{input:function(t){e.filterAbsentsStartDatePicker=!1}},model:{value:e.filter_absents_dates.schedule_start,callback:function(t){e.$set(e.filter_absents_dates,"schedule_start",t)},expression:"filter_absents_dates.schedule_start"}})],1)],1),t("div",{staticClass:"ml-4"},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"date-field",attrs:{label:e.$t("schedule.filter_end_date"),placeholder:"DD/MM/YYYY",height:"37px",readonly:"",outlined:"",required:""},model:{value:e.absentsFilterEndDateFormat,callback:function(t){e.absentsFilterEndDateFormat=t},expression:"absentsFilterEndDateFormat"}},"v-text-field",n,!1),a))]}}]),model:{value:e.filterAbsentsEndDatePicker,callback:function(t){e.filterAbsentsEndDatePicker=t},expression:"filterAbsentsEndDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,min:e.filter_absents_dates.schedule_start,locale:"pt-br"},on:{input:function(t){e.filterAbsentsEndDatePicker=!1}},model:{value:e.filter_absents_dates.schedule_end,callback:function(t){e.$set(e.filter_absents_dates,"schedule_end",t)},expression:"filter_absents_dates.schedule_end"}})],1)],1),t("div",{staticClass:"d-flex align-center ml-4"},[t(r["a"],{staticClass:"ml-4 btn-absent-filter-show",attrs:{disabled:!e.filter_absents_dates.schedule_start||!e.filter_absents_dates.schedule_end},on:{click:function(t){return e.clearFilter()}}},[t("span",{staticStyle:{color:"#FFFFFF"}},[e._v("Limpar")])]),t(r["a"],{staticClass:"btn-absent-filter-show",attrs:{disabled:!e.filter_absents_dates.schedule_start||!e.filter_absents_dates.schedule_end},on:{click:function(t){return e.findAbsentsDates()}}},[t("span",{staticStyle:{color:"#FFFFFF"}},[e._v(e._s(e.$t("schedule.filter_show")))])])],1)])])]),t("transition-group",{attrs:{name:"list"}},e._l(e.absentDates,(function(a,n){return t(ce["a"],{directives:[{name:"show",rawName:"v-show",value:e.hasUserAndLocation&&e.hasScheduleTimes,expression:"hasUserAndLocation && hasScheduleTimes"}],key:"absents_"+n,staticClass:"mb-4"},[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:i}){return[t(de["a"],e._g(e._b({attrs:{value:e.formattedDate(a.absent_start_date),label:e.$t("schedule.absent_start_date"),placeholder:"DD/MM/YYYY",height:"37px",readonly:"",outlined:"",required:""}},"v-text-field",i,!1),n))]}}],null,!0),model:{value:a.datePicker,callback:function(t){e.$set(a,"datePicker",t)},expression:"absentDate.datePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,min:e.form.schedule_start,max:e.form.schedule_end,locale:"pt-br"},on:{input:function(e){a.datePicker=!1}},model:{value:a.absent_start_date,callback:function(t){e.$set(a,"absent_start_date",t)},expression:"absentDate.absent_start_date"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:i}){return[t(de["a"],e._g(e._b({attrs:{value:e.formattedDate(a.absent_end_date),label:e.$t("schedule.absent_end_date"),placeholder:"DD/MM/YYYY",height:"37px",readonly:"",outlined:"",required:""}},"v-text-field",i,!1),n))]}}],null,!0),model:{value:a.datePickerEnd,callback:function(t){e.$set(a,"datePickerEnd",t)},expression:"absentDate.datePickerEnd"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,min:e.form.schedule_start,max:e.form.schedule_end,locale:"pt-br"},on:{input:function(e){a.datePickerEnd=!1}},model:{value:a.absent_end_date,callback:function(t){e.$set(a,"absent_end_date",t)},expression:"absentDate.absent_end_date"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:i}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.absent_time_init"),height:"37px","hide-details":"",readonly:"",outlined:"",required:""},model:{value:a.absent_time_init,callback:function(t){e.$set(a,"absent_time_init",t)},expression:"absentDate.absent_time_init"}},"v-text-field",i,!1),n))]}}],null,!0),model:{value:a.startTimePicker,callback:function(t){e.$set(a,"startTimePicker",t)},expression:"absentDate.startTimePicker"}},[t(Go["a"],{attrs:{"allowed-minutes":e.allowedStep,min:a[n-1]&&a[n-1].absent_time_end?a[n-1].absent_time_end:e.form.slot_time_start,max:e.form.slot_time_end,"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(e){a.startTimePicker=!1}},model:{value:a.absent_time_init,callback:function(t){e.$set(a,"absent_time_init",t)},expression:"absentDate.absent_time_init"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:i}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.absent_time_end"),height:"37px","hide-details":"",readonly:"",outlined:"",required:""},model:{value:a.absent_time_end,callback:function(t){e.$set(a,"absent_time_end",t)},expression:"absentDate.absent_time_end"}},"v-text-field",i,!1),n))]}}],null,!0),model:{value:a.endTimePicker,callback:function(t){e.$set(a,"endTimePicker",t)},expression:"absentDate.endTimePicker"}},[t(Go["a"],{attrs:{"allowed-minutes":e.allowedStep,min:a[n-1]&&a[n-1].absent_time_end?a.absent_time_init||a[n-1].absent_time_end:a.absent_time_init||e.form.slot_time_start,max:e.form.slot_time_end,"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(e){a.endTimePicker=!1}},model:{value:a.absent_time_end,callback:function(t){e.$set(a,"absent_time_end",t)},expression:"absentDate.absent_time_end"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(de["a"],{attrs:{type:"tel",label:e.$t("schedule.absent_reason"),height:"37px","hide-details":"",outlined:""},model:{value:a.absent_reason,callback:function(t){e.$set(a,"absent_reason",t)},expression:"absentDate.absent_reason"}})],1),t(r["a"],{staticClass:"mb-3",attrs:{color:"red","x-small":"",dark:"",text:""},on:{click:function(t){return e.removeAbsentDate(n)}}},[t(at["a"],{attrs:{size:"16",color:"red"}},[e._v("$vuetify.icons.close")]),t("span",[e._v(e._s(e.$t("schedule.remove_absence")))])],1)],1)})),1),t("div",{staticClass:"my-10"},[t(r["a"],{attrs:{color:"primary",width:"100%",loading:e.loading,block:""},on:{click:function(t){return e.saveData()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("schedule.save")))])],1)],1),e.duplicatedScheduleError?t("div",{staticClass:"d-flex"},[t(at["a"],{attrs:{size:"18",color:"red"}},[e._v("warning")]),t("p",{staticClass:"ma-0 error--text"},[e._v(e._s(e.$t("schedule.duplicatedSchedule")))])],1):e._e()],1)],1)],1)},ZP=[],QP={props:["item"],mixins:[ve],data(){return{creatingSchedule:!0,preSelectedUser:!1,preSelectedAttendanceCenter:!1,selfInformation:!1,internalInformation:!1,generalInformation:!1,loading:!1,loadingScheduleUsers:!1,loadingAttendanceCenters:!1,scheduleInfo:this.item,searchScheduleUserTimeout:null,searchAttendanceCentersTimeout:null,searchScheduleUsers:null,searchAttendanceCenters:null,scheduleUsers:[],attendanceCenters:[],operationSchedules:[],scheduleStartDatePicker:!1,scheduleEndDatePicker:!1,slotStartTimePicker:!1,slotEndTimePicker:!1,userSchedule:null,selectedOperation:null,canSearchAttendanceCenters:!0,duplicatedScheduleError:!1,timeIntervals:[{value:10,text:"10 "+this.$t("schedule.minutes")},{value:15,text:"15 "+this.$t("schedule.minutes")},{value:20,text:"20 "+this.$t("schedule.minutes")},{value:30,text:"30 "+this.$t("schedule.minutes")},{value:45,text:"45 "+this.$t("schedule.minutes")},{value:60,text:"60 "+this.$t("schedule.minutes")}],weekdays:[],absentDates:[],scheduleSlots:[],removedScheduleSlots:[],removedAbsentDates:[],form:{user_id:null,attendance_center_id:null,schedule_start:"",schedule_end:"",slot_time_start:"",slot_time_end:"",time_interval:""},filter_absents_dates:{schedule_start:"",schedule_end:""},filterAbsentsStartDatePicker:!1,filterAbsentsEndDatePicker:!1}},created(){this.selfInformation=this.checkAccessesControlFuncionality(["schedule.selftUserSchedule.list","schedule.myUserSchedule.update","schedule.myUserSchedule.list"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.internalInformation=this.checkAccessesControlFuncionality(["schedule.internalUserSchedule.list","schedule.internalUserSchedule.create","schedule.internalUserSchedule.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.generalInformation=this.checkAccessesControlFuncionality(["schedule.generalUserSchedule.list","schedule.generalUserSchedule.create","schedule.generalUserSchedule.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.generalInformation&&(this.selfInformation=!1,this.internalInformation=!1),this.scheduleInfo&&this.scheduleInfo.user_schedules.length>0?(this.creatingSchedule=!1,this.operationSchedules=this.scheduleInfo.user_schedules[0].user_schedules_info||[],this.operationSchedules.sort((e,t)=>{let a=this.$moment(e.schedule_start).diff(this.$moment(t.schedule_start));return a>0?1:-1}),this.operationSchedules.length>0?(this.selectedOperation=this.operationSchedules[0],this.getUserSchedule(this.scheduleInfo.user_schedules[0],this.operationSchedules[0].user_schedule_id,null)):this.getWeekdays()):(this.getWeekdays(),this.creatingSchedule=!0);let e=this.$store.state.Data.User.info;if(this.canSearchAttendanceCenters=!0,this.item)this.canSearchAttendanceCenters=!this.item.user_schedules.length>0,this.preSelectedUser=!0,this.scheduleUsers.push({id:this.item.id,name:this.item.name}),this.form.user_id=this.item.id,this.item.role_id==this.$consts.USER_ROLE_IDS.CLINICO_GERAL||this.item.role_id==this.$consts.USER_ROLE_IDS.PSICOLOGO?(this.attendanceCenterName=this.$consts.TELADOC_ATTENDANCE_CENTERS_BY_ROLE[this.item.role_id],this.form.attendance_center_id=this.$consts.TELADOC_ATTENDANCE_CENTER_IDS_BY_ROLE_ID[this.item.role_id],this.preSelectedAttendanceCenter=!0):this.item.role_id==this.$consts.USER_ROLE_IDS.NUTRICIONISTA||this.item.role_id==this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER?(this.canSearchAttendanceCenters=!1,this.attendanceCenterName=this.$consts.TELADOC_ATTENDANCE_CENTERS_BY_ROLE[this.item.role_id],this.preSelectsAttendanceCenter()):(this.searchAttendanceCenters="",this.attendanceCenters=this.item.user_schedules.map(e=>({id:e.attendance_center_id,name:e.attendance_center_name})));else if(e.role_info.role_id==this.$consts.USER_ROLE_IDS.NUTRICIONISTA||e.role_info.role_id==this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER||e.role_info.role_id==this.$consts.USER_ROLE_IDS.COACH_ESPORTIVO||e.role_info.role_id==this.$consts.USER_ROLE_IDS.CLINICO_GERAL||e.role_info.role_id==this.$consts.USER_ROLE_IDS.PSICOLOGO){this.canSearchAttendanceCenters=!1,this.preSelectedUser=!0,this.scheduleUsers.push({id:this.$store.state.Data.User.info.user_info.id,name:this.$store.state.Data.User.info.user_info.name}),this.form.user_id=e.user_info.id,this.canSearchAttendanceCenters=!1,e.role_info.role_id==this.$consts.USER_ROLE_IDS.CLINICO_GERAL||e.role_info.role_id==this.$consts.USER_ROLE_IDS.PSICOLOGO?(this.attendanceCenterName=this.$consts.TELADOC_ATTENDANCE_CENTERS_BY_ROLE[e.role_info.role_id],this.form.attendance_center_id=this.$consts.TELADOC_ATTENDANCE_CENTER_IDS_BY_ROLE_ID[this.item.role_id],this.preSelectedAttendanceCenter=!0):(this.attendanceCenterName=this.$consts.TELADOC_ATTENDANCE_CENTERS_BY_ROLE[e.role_info.role_id],this.preSelectsAttendanceCenter()),this.loadingScheduleUsers=!0;let t={user_id:this.$store.state.Data.User.info.user_info.id,limit:10,offset:0};fi.listUserSchedules(t).then(e=>{this.scheduleInfo=e.data.information[0],this.scheduleInfo&&this.scheduleInfo.user_schedules.length>0?(this.operationSchedules=this.scheduleInfo.user_schedules[0].user_schedules_info||[],this.operationSchedules.sort((e,t)=>{let a=this.$moment(e.schedule_start).diff(this.$moment(t.schedule_start));return a>0?1:-1})):this.getWeekdays()}).catch(e=>{this.operationSchedules=[],console.error(e)}).finally(()=>{this.loadingScheduleUsers=!1})}else this.searchScheduleUsers="",this.searchAttendanceCenters=""},beforeDestroy(){clearTimeout(this.searchScheduleUserTimeout)},methods:{preSelectsAttendanceCenter(){this.preSelectedAttendanceCenter=!0;let e={token:this.$store.state.Data.User.token,search:this.attendanceCenterName,limit:100,offset:0};dD.getAttendanceCenters(e).then(e=>{this.form.attendance_center_id=e.data.attendance_center[0].id}).catch(e=>{this.attendanceCenters=[],console.error(e)})},allowedStep:e=>e%5===0,formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},getUserSchedule(e,t,a){let n={user_schedule_id:t};a&&(n.filter={start_at:this.$moment(a.schedule_start).unix(),end_at:this.$moment(a.schedule_end).unix()}),fi.getUserSchedule(n).then(t=>{this.form.user_id=e.user_id,this.form.attendance_center_id=e.attendance_center_id,this.userSchedule=t.data.user_schedule,this.chosenOccupation=this.userSchedule.occupation_id,this.form.schedule_start=this.$moment(this.userSchedule.schedule_start).format("YYYY-MM-DD"),this.form.schedule_end=this.$moment(this.userSchedule.schedule_end).format("YYYY-MM-DD");let a=this.$moment().format("YYYY-MM-DD");this.form.slot_time_start=this.convertUtcOffset(`${a} ${this.userSchedule.slot_time_start}`).format("HH:mm"),this.form.slot_time_end=this.convertUtcOffset(`${a} ${this.userSchedule.slot_time_end}`).format("HH:mm"),this.form.time_interval=this.userSchedule.time_interval,this.scheduleSlots=t.data.schedule_slots,this.absentDates=t.data.user_schedule_absent_dates.map(e=>({id:e.id,absent_start_date:this.convertUtcOffset(e.absent_date_start).format("YYYY-MM-DD"),absent_end_date:this.convertUtcOffset(e.absent_date_end).format("YYYY-MM-DD"),absent_time_init:this.convertUtcOffset(e.absent_date_start).format("HH:mm"),absent_time_end:this.convertUtcOffset(e.absent_date_end).format("HH:mm"),absent_reason:e.reason}))}).catch(e=>{console.error(e)}).finally(()=>{this.getWeekdays()})},getWeekdays(){fi.getWeekdays().then(e=>{let t=this.$moment().format("YYYY-MM-DD");this.weekdays=e.data.map(e=>(e.slots=this.scheduleSlots.filter(t=>t.week_day_id==e.id).map(e=>(e.time_init=this.convertUtcOffset(`${t} ${e.time_init}`).format("HH:mm"),e.time_end=this.convertUtcOffset(`${t} ${e.time_end}`).format("HH:mm"),e)),e))}).catch(e=>{this.weekdays=[],console.error(e)})},selectUser(){this.duplicatedScheduleError=!1,this.scheduleInfo=this.scheduleUsers.find(e=>e.id==this.form.user_id),this.duplicatedScheduleError=!1,this.userSchedule=null,this.selectedOperation=null,this.scheduleSlots=[],this.absentDates=[],this.removedScheduleSlots=[],this.removedAbsentDates=[],this.form.schedule_start=null,this.form.schedule_end=null,this.form.slot_time_start=null,this.form.slot_time_end=null,this.form.time_interval=null,this.scheduleInfo.role_id==this.$consts.USER_ROLE_IDS.CLINICO_GERAL||this.scheduleInfo.role_id==this.$consts.USER_ROLE_IDS.PSICOLOGO?(this.attendanceCenterName=this.$consts.TELADOC_ATTENDANCE_CENTERS_BY_ROLE[this.scheduleInfo.role_id],this.form.attendance_center_id=this.$consts.TELADOC_ATTENDANCE_CENTER_IDS_BY_ROLE_ID[this.scheduleInfo.role_id],this.preSelectedAttendanceCenter=!0,this.operationSchedules=this.scheduleInfo.user_schedules[0].user_schedules_info||[],this.operationSchedules.sort((e,t)=>{let a=this.$moment(e.schedule_start).diff(this.$moment(t.schedule_start));return a>0?1:-1}),this.operationSchedules.length>0?(this.selectedOperation=this.operationSchedules[0],this.getUserSchedule(this.scheduleInfo.user_schedules[0],this.operationSchedules[0].user_schedule_id,null)):this.getWeekdays()):this.scheduleInfo.role_id==this.$consts.USER_ROLE_IDS.NUTRICIONISTA||this.scheduleInfo.role_id==this.$consts.USER_ROLE_IDS.PERSONAL_TRAINER?(this.canSearchAttendanceCenters=!1,this.attendanceCenterName=this.$consts.TELADOC_ATTENDANCE_CENTERS_BY_ROLE[this.scheduleInfo.role_id],this.preSelectsAttendanceCenter(),this.operationSchedules=this.scheduleInfo.user_schedules[0].user_schedules_info||[],this.operationSchedules.sort((e,t)=>{let a=this.$moment(e.schedule_start).diff(this.$moment(t.schedule_start));return a>0?1:-1}),this.operationSchedules.length>0?(this.selectedOperation=this.operationSchedules[0],this.getUserSchedule(this.scheduleInfo.user_schedules[0],this.operationSchedules[0].user_schedule_id,null)):this.getWeekdays()):(this.form.attendance_center_id=null,this.clearUserSchedule())},selectAttendanceCenter(){this.duplicatedScheduleError=!1;let e=this.scheduleInfo.user_schedules.find(e=>e.attendance_center_id==this.form.attendance_center_id);e?(this.operationSchedules=e.user_schedules_info||[],this.operationSchedules.sort((e,t)=>{let a=this.$moment(e.schedule_start).diff(this.$moment(t.schedule_start));return a>0?1:-1}),this.operationSchedules.length>0?(this.selectedOperation=this.operationSchedules[0],this.getUserSchedule(e,this.operationSchedules[0].user_schedule_id,null)):this.clearUserSchedule()):this.clearUserSchedule()},getOperationText(e){let t=this.$moment(e.schedule_start),a=this.$moment(e.schedule_end);return`${t.format("YYYY")}: ${t.format("DD/MM")} - ${a.format("DD/MM")}`},selectUserSchedule(e){this.duplicatedScheduleError=!1;let t=this.scheduleInfo.user_schedules.find(e=>e.attendance_center_id==this.form.attendance_center_id);this.getUserSchedule(t,e.user_schedule_id,null)},showAllAttendanceCentersInSearch(){this.canSearchAttendanceCenters=!0,this.form.attendance_center_id=null,this.attendanceCenters=[],this.clearUserSchedule()},getSelectedAttendaceCenterName(){let e=this.attendanceCenters.find(e=>e.id==this.form.attendance_center_id);return e?e.name:this.attendanceCenterName?this.attendanceCenterName:""},addNewUserSchedule(){this.duplicatedScheduleError=!1,this.userSchedule={schedule_start:"",schedule_end:"",slot_time_start:"",slot_time_end:"",time_interval:""},this.selectedOperation=null,this.scheduleSlots=[],this.absentDates=[],this.removedScheduleSlots=[],this.removedAbsentDates=[],this.form={user_id:this.form.user_id,attendance_center_id:this.form.attendance_center_id,...this.userSchedule},this.getWeekdays()},clearUserSchedule(){this.duplicatedScheduleError=!1,this.userSchedule=null,this.selectedOperation=null,this.scheduleSlots=[],this.absentDates=[],this.removedScheduleSlots=[],this.removedAbsentDates=[],this.form.schedule_start=null,this.form.schedule_end=null,this.form.slot_time_start=null,this.form.slot_time_end=null,this.form.time_interval=null,this.getWeekdays()},hasAddNewIntervalButton(e){return!!this.form.slot_time_end&&(0==e.slots.length&&this.hasScheduleTimes||e.slots[e.slots.length-1]&&e.slots[e.slots.length-1].time_init&&e.slots[e.slots.length-1].time_end&&+e.slots[e.slots.length-1].time_end.split(":")[0]<+this.form.slot_time_end.split(":")[0])},addInterval(e){e.slots.push({time_init:"",time_end:"",week_day_id:e.id})},removeInterval(e,t){e.slots[t].id&&this.removedScheduleSlots.push({id:e.slots[t].id}),e.slots.splice(t,1)},addAbsentDate(){this.absentDates.unshift({absent_start_date:"",absent_end_date:"",absent_time_init:"",absent_time_end:"",absent_reason:""})},removeAbsentDate(e){this.absentDates[e].id&&this.removedAbsentDates.push({id:this.absentDates[e].id}),this.absentDates.splice(e,1)},saveData(){if(this.$v.$touch(),this.$v.$invalid)return;this.duplicatedScheduleError=!1,this.loading=!0;let e=this.weekdays.map(e=>e.slots),t=[],a=null,n=null;for(let o in e)t=t.concat(e[o]);t=t.map(e=>{let t={...e};if(t.time_init&&t.time_end)return a=t.time_init.split(":"),n=t.time_end.split(":"),t.time_init=this.$moment().hours(a[0]).minutes(a[1]).utc().format("HH:mm"),t.time_end=this.$moment().hours(n[0]).minutes(n[1]).utc().format("HH:mm"),delete t["endTimePicker"],delete t["startTimePicker"],t});let i=this.absentDates.map(e=>{if(e.absent_start_date&&e.absent_end_date&&e.absent_time_init&&e.absent_time_end){a=e.absent_time_init.split(":"),n=e.absent_time_end.split(":");let t={absent_date_start:this.$moment(e.absent_start_date).hours(a[0]).minutes(a[1]).utc().format("YYYY-MM-DD HH:mm"),absent_date_end:this.$moment(e.absent_end_date).hours(n[0]).minutes(n[1]).utc().format("YYYY-MM-DD HH:mm"),reason:e.absent_reason};return e.id&&(t.id=e.id),t}});a=this.form.slot_time_start.split(":"),n=this.form.slot_time_end.split(":");let s={user_id:this.form.user_id,attendance_center_id:this.form.attendance_center_id,user_schedule:{schedule_start:this.$moment(this.form.schedule_start).utc().format("YYYY-MM-DD"),schedule_end:this.$moment(this.form.schedule_end).utc().format("YYYY-MM-DD"),slot_time_start:this.$moment().hours(a[0]).minutes(a[1]).utc().format("HH:mm"),slot_time_end:this.$moment().hours(n[0]).minutes(n[1]).utc().format("HH:mm"),time_interval:this.form.time_interval},schedule_slots:t.filter(e=>e),user_schedule_absent_dates:i.filter(e=>e)};this.scheduleInfo&&(this.userSchedule&&this.userSchedule.id&&(s.user_schedule.id=this.userSchedule.id),s.schedule_slots=s.schedule_slots.concat([],this.removedScheduleSlots),s.user_schedule_absent_dates=s.user_schedule_absent_dates.concat([],this.removedAbsentDates)),fi.setUserSchedule(s).then(e=>{this.closeUserScheduleTab(),this.$bus.emit("update-scheduler-list")}).catch(e=>{e.includes("user_already_have_a_schedule_in_attendance_center_in_this_period")&&(this.duplicatedScheduleError=!0),this.loading=!1,console.error(e)})},closeUserScheduleTab(){setTimeout(()=>{this.scheduleInfo?this.$bus.emit("confirm-close-edit-scheduler",this.scheduleInfo):this.$bus.emit("confirm-close-new-scheduler")},2e3)},findAbsentsDates(){this.getUserSchedule(this.scheduleInfo.user_schedules[0],this.operationSchedules[0].user_schedule_id,this.filter_absents_dates)},clearFilter(){this.filter_absents_dates.schedule_start=null,this.filter_absents_dates.schedule_end=null,this.findAbsentsDates()}},watch:{searchScheduleUsers(e){if(this.preSelectedUser)return;clearTimeout(this.searchScheduleUserTimeout),this.loadingScheduleUsers=!0;let t={search:e,limit:10,offset:0};this.searchScheduleUserTimeout=setTimeout(()=>{fi.listUserSchedules(t).then(e=>{this.scheduleUsers=e.data.information}).catch(e=>{this.scheduleUsers=[],console.error(e)}).finally(()=>{this.loadingScheduleUsers=!1})},400)},searchAttendanceCenters(e){if(!this.canSearchAttendanceCenters&&this.item&&this.attendanceCenters.length>0)return;clearTimeout(this.searchAttendanceCentersTimeout),this.loadingAttendanceCenters=!0;let t={token:this.$store.state.Data.User.token,limit:30,offset:0};e&&(t.search=e),t.user_id=this.selfInformation?this.$store.state.Data.User.info.user_info.id:null,t.manager_user_id=this.internalInformation?this.$store.state.Data.User.info.user_info.id:null,t.company_id=this.$store.state.Data.User.info.user_info.companies?this.$store.state.Data.User.info.user_info.companies[0].id:null,this.searchAttendanceCentersTimeout=setTimeout(()=>{dD.getAttendanceCenters(t).then(e=>{this.attendanceCenters=e.data.attendance_center}).catch(e=>{this.attendanceCenters=[],console.error(e)}).finally(()=>{this.loadingAttendanceCenters=!1})},400)}},computed:{canAddNewUserSchedule(){return 0==this.operationSchedules.length&&!this.userSchedule},scheduleStartDateFormated(){return this.form.schedule_start?this.$moment(this.form.schedule_start).format("DD/MM/YYYY"):""},scheduleEndDateFormated(){return this.form.schedule_end?this.$moment(this.form.schedule_end).format("DD/MM/YYYY"):""},absentsFilterStartDateFormat(){return this.filter_absents_dates.schedule_start?this.$moment(this.filter_absents_dates.schedule_start).format("DD/MM/YYYY"):""},absentsFilterEndDateFormat(){return this.filter_absents_dates.schedule_end?this.$moment(this.filter_absents_dates.schedule_end).format("DD/MM/YYYY"):""},hasUserAndLocation(){return this.form.user_id&&this.form.attendance_center_id},hasScheduleTimes(){return this.form.slot_time_start&&this.form.slot_time_end},hasAddNewAbsenceButton(){return 0==this.absentDates.length&&this.hasScheduleTimes||this.absentDates[this.absentDates.length-1]&&this.absentDates[this.absentDates.length-1].absent_start_date&&this.absentDates[this.absentDates.length-1].absent_end_date&&this.absentDates[this.absentDates.length-1].absent_time_init&&this.absentDates[this.absentDates.length-1].absent_time_end},nameErrors(){const e=[];return this.$v.form.user_id.$dirty?(!this.$v.form.user_id.required&&e.push(this.$t("schedule.required")),e):e},attendanceCenterIdErrors(){const e=[];return this.$v.form.attendance_center_id.$dirty?(!this.$v.form.attendance_center_id.required&&e.push(this.$t("schedule.required")),e):e},scheduleStartErrors(){const e=[];return this.$v.form.schedule_start.$dirty?(!this.$v.form.schedule_start.required&&e.push(this.$t("schedule.required")),e):e},scheduleEndErrors(){const e=[];return this.$v.form.schedule_end.$dirty?(!this.$v.form.schedule_end.required&&e.push(this.$t("schedule.required")),e):e},timeStartErrors(){const e=[];return this.$v.form.slot_time_start.$dirty?(!this.$v.form.slot_time_start.required&&e.push(this.$t("schedule.required")),e):e},timeEndErrors(){const e=[];return this.$v.form.slot_time_end.$dirty?(!this.$v.form.slot_time_end.required&&e.push(this.$t("schedule.required")),e):e},timeIntervalErrors(){const e=[];return this.$v.form.time_interval.$dirty?(!this.$v.form.time_interval.required&&e.push(this.$t("schedule.required")),!this.$v.form.time_interval.numeric&&e.push(this.$t("schedule.invalidValue")),e):e}},validations:{form:{user_id:{required:Ae["required"]},attendance_center_id:{required:Ae["required"]},schedule_start:{required:Ae["required"]},schedule_end:{required:Ae["required"]},slot_time_start:{required:Ae["required"]},slot_time_end:{required:Ae["required"]},time_interval:{required:Ae["required"],numeric:Ae["numeric"]}}}},JP=QP,WP=(a("f370"),Object(I["a"])(JP,KP,ZP,!1,null,null,null)),XP=WP.exports,zP={components:{SchedulerList:jP,FormUserSchedules:XP,CalendarView:ji,ScheduleConfirmModal:Vo,BookFittingScheduleModal:Yo,CaseAttendanceScheduledModal:ds,snackbar:GO},mixins:[ve],data(){return{canSchedule:!1,userCompany:!1,userSpeciality:!1,userAttendanceCenter:!1,currentMainTab:"schedule",mainTabs:[],currentScheduleTab:"calendar",scheduleTabs:[{name:"calendar",text:"Consulta de Agenda"}],editShedulerTabName:"editScheduler",newShedulerTabName:"newScheduler",newShedulerTab:{name:"newScheduler",text:"Nova Agenda"},chosenCompany:null,chosenAgent:null}},created(){this.$bus.on("new-scheduler",()=>{this.mainTabs.find(e=>e.name==this.newShedulerTabName)||(this.mainTabs.push({name:this.newShedulerTabName,text:this.$t("schedule.tab_new")}),this.persistListToLocalStorage()),this.currentMainTab=this.getMainTabIndex(this.newShedulerTabName)}),this.$bus.on("edit-scheduler",e=>{let t=`${this.editShedulerTabName}_${e.id}`;this.mainTabs.find(e=>e.name==t)||(this.mainTabs.push({name:t,text:`${this.$t("schedule.tab_edit")} ${e.name}`,item:e}),this.persistListToLocalStorage()),this.currentMainTab=this.getMainTabIndex(t)}),this.$bus.on("confirm-close-new-scheduler",()=>{this.closeMainTab(this.newShedulerTabName)}),this.$bus.on("confirm-close-edit-scheduler",e=>{let t=`${this.editShedulerTabName}_${e.id}`;this.closeMainTab(t)}),this.$bus.on("new-schedule-save",this.saveSchedule),this.$bus.on("new-schedule-fitting-save",this.saveFitting),this.$bus.on("calendar-view-company-chosen",e=>{this.chosenCompany=e}),this.$bus.on("calendar-view-agent-chosen",e=>{this.chosenAgent=e}),this.mainTabs=JSON.parse(localStorage.getItem("scheduleTabs"))||[];let e=this.$store.state.Data.User.info.role_info.funcionality_privilegies;this.canSchedule=this.checkAccessesControlFuncionality(["schedule.scheduleAttendance.create"],e),this.checkAccessesControlFuncionality(["schedule.generalUserSchedule.create","schedule.generalUserSchedule.update","schedule.internalUserSchedule.create","schedule.myUserSchedule.update","schedule.internalUserSchedule.update"],e)&&this.scheduleTabs.push({name:"scheduler",text:"Controle de Agenda"}),this.getScheduleAttendanceIdentifiers()},beforeDestroy(){this.$bus.off("new-scheduler"),this.$bus.off("edit-scheduler"),this.$bus.off("confirm-close-new-scheduler"),this.$bus.off("confirm-close-edit-scheduler"),this.$bus.off("new-schedule-save"),this.$bus.off("new-schedule-fitting-save"),this.$bus.off("calendar-view-company-chosen"),this.$bus.off("calendar-view-agent-chosen")},methods:{getScheduleAttendanceIdentifiers(){fi.getScheduleAttendanceIdentifiers().then(e=>{this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_SCHEDULE_ATTENDANCE_IDENTIFIERS,e.data.identifiers)}).catch(e=>{console.error(e),this.$bus.emit("open-snackbar",{message:"error_get_schedule_attendance_identifiers"})})},scheduleClick(e){if(!this.canSchedule||e.case_attendance_status)return;let t=e.eventParsed?e.eventParsed.start.date+" "+e.eventParsed.start.time:e.event.start,a={company_id:this.chosenCompany.id,company_name:this.chosenCompany.name,patient_name:null,date:t,original_date:e.original_date,doctor_id:e.chosenAgent,doctor_name:e.chosenAgentName,attendance_center_id:e.chosenAttendanceCenter,attendance_center_name:e.chosenAttendanceCenterName,schedule_id:e.chosenSchedule,interval:e.interval,program_id:e.program_id||this.program_id};e.event.blockEvent||this.$bus.emit("confirm-scheduled-dialog",a)},scheduleFitting(e){if(!this.canSchedule)return;let t={fittingDate:e.fittingDate,company_id:this.chosenCompany.id,company_name:this.chosenCompany.name,patient_name:null,doctor_id:e.doctor_id,doctor_name:e.doctor_name,attendance_center_id:e.attendance_center_id,attendance_center_name:e.attendance_center_name,schedule_id:e.schedule_id,interval:e.interval,program_id:e.program_id||this.program_id};this.$bus.emit("confirm-fitting-scheduled-dialog",t)},saveFitting(e){e.company_id=this.chosenCompany.id,e.company_name=this.chosenCompany.name;let t=this.$moment(e.start);e.date=t.format("DD/MM/YYYY"),e.hour=t.format("HH:mm"),e.schedule_id=e.scheduleId,e.doctor_id=e.doctorId,e.doctor_name=e.doctorName,e.attendance_center_id=e.attendanceCenterId,e.attendance_center_name=e.attendanceCenterName,e.blockEvent=!1,e.caseAttendanceId=null,e.case_attendance_status="FITTING",this.dispatchSchedule(e)},saveSchedule(e){e.company_id=this.chosenCompany.id,e.company_name=this.chosenCompany.name;let t=this.$moment(e.start);e.date=t.format("DD/MM/YYYY"),e.hour=t.format("HH:mm"),e.blockEvent=!1,e.caseAttendanceId=null,e.case_attendance_status="OPENED",this.verifyAvailability(e)},verifyAvailability(e){this.$bus.emit("set-calendar-loading",!0);let t=e.date.split("/")[0],a=e.date.split("/")[1],n=e.date.split("/")[2],i=this.$moment(`${n}-${a}-${t} ${e.hour}`).utc(),s={user_id:this.chosenAgent.user_id,user_schedule_id:this.chosenAgent.user_schedule_id,due_date:i.format("YYYY-MM-DD"),due_time:i.format("HH:mm:ss")};fi.verifyUserScheduleAvailability(s).then(t=>{t.data?(this.$bus.emit("open-snackbar",{message:"duplicated_schedule_availability"}),this.$bus.emit("set-calendar-loading",!1)):this.dispatchSchedule(e)}).catch(e=>{this.$bus.emit("set-calendar-loading",!1);let t="verify_schedule_availability_error";"No availability available for the second time slot"==e&&(t="no_availability_available_for_the_second_time_slot"),this.$bus.emit("open-snackbar",{message:t}),console.error(e)})},dispatchSchedule(e){this.$bus.emit("set-calendar-loading",!0);let t={emergency_pass:!1,member_id:e.patient_id,company_id:this.chosenCompany.id};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CREATE,t).then(a=>{let n=e.date.split("/")[0],i=e.date.split("/")[1],s=e.date.split("/")[2],o=this.$moment(`${s}-${i}-${n} ${e.hour}`).utc();t={patient_id:e.patient_id,member_id:e.patient_id,case_id:a.data,program_id:this.program_id,due_date:o.format("YYYY-MM-DD"),due_time:o.format("HH:mm:ss"),program_step:1,user_id:this.$store.state.Data.User.info.user_info.id,screening_attendant_id:this.$store.state.Data.User.info.user_info.id,bricks:"",schedule_info:{user_schedule_id:this.chosenAgent.user_schedule_id,fitting:e.fitting,patient_phone:this.clearPhone(e.patient_phone),reason:e.observations||e.reason,send_sms:!1,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}},this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ADD,t).then(t=>{e.caseAttendanceId=t.data.newest_attendance_id,e.program_id=this.program_id,this.$bus.emit("receive-new-event",e),Ge.transferAttendance({case_attendance_id:t.data.newest_attendance_id,user_id:this.chosenAgent.user_id})}).catch(e=>{console.error(e)}).finally(()=>{this.$bus.emit("set-calendar-loading",!1)})}).catch(e=>{console.error(e),this.$bus.emit("set-calendar-loading",!1)})},getMainTabIndex(e){let t=this.mainTabs.find(t=>t.name==e);return this.mainTabs.indexOf(t)+1},persistListToLocalStorage(){localStorage.setItem("scheduleTabs",JSON.stringify(this.mainTabs))},closeMainTab(e){let t=this.mainTabs.find(t=>t.name==e);this.mainTabs.pop(t),this.persistListToLocalStorage()}},computed:{program_id(){return this.$store.state.Data.User.info.user_info.programs.map(e=>e.id)[0]?this.$store.state.Data.User.info.user_info.programs.map(e=>e.id)[0]:49}}},eU=zP,tU=(a("a739"),Object(I["a"])(eU,GP,FP,!1,null,"4a74f222",null)),aU=tU.exports,nU=a("8270"),iU=function(){var e=this,t=e._self._c;return t(Ju["a"],{staticClass:"online-doctors",attrs:{color:"primary",elevation:"2",accordion:""}},[t(Ku["a"],[e.onlineDoctorsList.length>0?t(Zu["a"],[t(lc["a"],{staticClass:"doctors-list",attrs:{"three-line":""}},[e._l(e.onlineDoctorsList,(function(n,i){return[t(Ct["a"],{key:n.title},[t(nU["a"],{attrs:{size:"54"}},[t(le["a"],{attrs:{src:n.image_path||a("5a2f")}})],1),t(l["a"],{staticClass:"status doctor-avatar",attrs:{color:e.$consts.SOCKET_COLORS[n.status.toUpperCase()]}}),t(Tt["a"],[t("h6",{staticClass:"ma-0"},[e._v(e._s(e.$t("user_types."+n.userType)))]),t("h4",{staticClass:"ma-0"},[e._v(e._s(n.name))]),t("p",{staticClass:"ma-0 caption blue--text"},[e._v(e._s(n.speciality||"-"))])])],1),i!==e.onlineDoctorsList.length-1?t(Rs["a"],{staticClass:"mx-2"}):e._e()]}))],2)],1):e._e(),t(Qu["a"],{staticClass:"online-doctors-button white--text",attrs:{color:"primary"},scopedSlots:e._u([{key:"actions",fn:function(){return[t(at["a"],{attrs:{color:"white"}},[e._v("$expand")])]},proxy:!0}])},[t(l["a"],{staticClass:"status mr-2",attrs:{color:e.onlineDoctorsList.length>0?"green":"grey"}}),e._v("\n      "+e._s(e.$t("online_users.title"))+" ("+e._s(e.onlineDoctorsList.length)+")\n      ")],1)],1)],1)},sU=[],oU={name:"OnlineUsers",data(){return{timeoutRef:null}},created(){},computed:{onlineDoctorsList(){return this.$store.state.Data.UsersAvailability.info||[]}},methods:{}},rU=oU,lU=(a("7f63"),Object(I["a"])(rU,iU,sU,!1,null,"4b2c379e",null)),cU=lU.exports,dU={getSettings(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.GET_SETTINGS,i={name:e};C.a.post(n,i,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},mU=a("1090"),uU={name:"Home",components:{Sidebar:tt,Tabs:NT,Controls:Hv,Coupons:VP,Schedule:aU,OnlineUsers:cU,DigitalCertification:xn},mixins:[ve],data(){return{disabledSwitch:!0,rawCompany:mU,loadingOnlineUsers:!1,userInBlackList:!1,timeoutRef:null,intervalRef:null,timeRemaining:null,expirationTime:null,page:"",isAttending:!1,isAway:!1,idleTime:0,checkbox:!1,userType:this.$store.state.Data.User.info.user_info.user_type,lastUpdateTimeStamp:(new Date).value,digitalCertificationSwitch:!1,digitalCertificationModalShow:!1,enableSwitchDigitalCertification:!1}},created(){if(this.getPsychologyMinAge(),this.$bus.on("logout",()=>{clearTimeout(this.timeoutRef),clearInterval(this.intervalRef),this.emitRemoveMySocketEvent(),window.removeEventListener("click",null),window.removeEventListener("mousemove",null),window.removeEventListener("visibilitychange",null),window.removeEventListener("beforeunload",null),this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_MINIMUMAGEPSYCHOLOGIST,null)}),this.$bus.on("logout-without-token",()=>{clearTimeout(this.timeoutRef),clearInterval(this.intervalRef),window.removeEventListener("click",null),window.removeEventListener("mousemove",null),window.removeEventListener("visibilitychange",null),window.removeEventListener("beforeunload",null),this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_MINIMUMAGEPSYCHOLOGIST,null)}),this.$bus.on("trigger-home-mounted",()=>{this.runMountedLogic()}),this.$bus.on("socket-doctor-connected-status",e=>{this.isAttending=e}),localStorage.getItem("lastPage"))this.page=localStorage.getItem("lastPage");else{let e={};e.CONTROLES=this.checkAccessesControlFuncionalityContains("almight",this.$store.state.Data.User.info.role_info.funcionality_privilegies),e.SCHEDULE=this.checkAccessesControlFuncionalityContains("schedule",this.$store.state.Data.User.info.role_info.funcionality_privilegies),e.ATENDER=this.checkAccessesControlFuncionalityContains("attendanceQueue",this.$store.state.Data.User.info.role_info.funcionality_privilegies),e.COUPONS=this.checkAccessesControlFuncionalityContains("manage.giftCard",this.$store.state.Data.User.info.role_info.funcionality_privilegies),e.ATENDER?this.page="Tabs":e.CONTROLES?this.page="Controls":e.SCHEDULE?this.page="Schedule":e.COUPONS&&(this.page="Coupons")}"SUPER_ADMIN"==this.userType&&(this.loadingOnlineUsers=!0,be.getUserTypes().then(e=>{e.data.forEach(e=>{"SUPER_ADMIN"!==e.type&&this.subscribeToSocketEvents(e.type)})}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),console.error(e.data.error.message||e.data.error.code)}).finally(()=>{this.loadingOnlineUsers=!1})),this.$bus.on("page",e=>{this.page=e}),this.$bus.on("list-update",e=>{this.lastUpdateTimeStamp=e}),be.getUserBlackList().then(e=>{}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),console.error(e.data.error.message||e.data.error.code)});const e=this.$store.state.Data.User.info.role_info.role_id,t=[this.$consts.USER_ROLE_IDS.MEDICO,this.$consts.USER_ROLE_IDS.MEDICO_RESTRITO,this.$consts.USER_ROLE_IDS.MEDICO_COMPLETO,this.$consts.USER_ROLE_IDS.MEDICO_SUPERVISOR,this.$consts.USER_ROLE_IDS.SUPERVISAO_MEDICO,this.$consts.USER_ROLE_IDS.DIRETOR_CLINICO];t.includes(e)&&(this.enableSwitchDigitalCertification=!0,this.$bus.on("digital-certification-modal-close-confirm",()=>{this.digitalCertificationModalShow=!1,this.$store.state.Data.DigitalCertification.accessToken?this.digitalCertificationSwitch=!0:this.digitalCertificationSwitch=!1})),this.$bus.on("disable-switch",()=>{this.disabledSwitch=!0}),this.$bus.on("enable-switch",()=>{this.disabledSwitch=!1})},mounted(){this.expirationTime=new Date(Date.now()+1e3*this.expiresIn),this.startTimer(),this.checkTokenValidity(),this.$gtm.trackView("Home")},beforeDestroy(){clearTimeout(this.timeoutRef),clearInterval(this.intervalRef),clearInterval(this.timerInterval),this.$bus.off("logout"),this.$bus.off("enable-switch"),this.$bus.off("disable-switch"),this.$bus.off("logout-without-token"),this.$bus.off("socket-doctor-connected-status"),this.$bus.off("page"),this.$bus.off("list-update"),this.$bus.off("digital-certification-modal-close"),window.removeEventListener("click",null),window.removeEventListener("mousemove",null),window.removeEventListener("visibilitychange",null),window.removeEventListener("beforeunload",null)},methods:{...Object(K["c"])("Data/DigitalCertification",["SET_ACCESS_TOKEN","CLEAR_ACCESS_TOKEN"]),getPsychologyMinAge(){null==this.$store.state.Data.General.minimumAgePsychologist&&dU.getSettings("psychology_min_age").then(e=>{e.data.length>0&&this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_MINIMUMAGEPSYCHOLOGIST,e.data[0].value)}).catch(e=>{console.error(e)})},subscribeToSocketEvents(e){this.sockets.subscribe(e+"_user_availability",e=>{this.$store.dispatch(this.$consts.USERS_AVAILABILITY_ACTIONS.SET,e)}),this.sockets.subscribe(e+"_user_remove_availability",e=>{this.$store.dispatch(this.$consts.USERS_AVAILABILITY_ACTIONS.DELETE,e)}),this.sockets.subscribe(e+"_request_user_availability",this.emitMySocketEvent)},emitMySocketEvent(){let e=this.$consts.SOCKET_STATUS.ONLINE;this.isAttending?e=this.$consts.SOCKET_STATUS.ATTENDING:this.isAway&&(e=this.$consts.SOCKET_STATUS.AWAY);let t={id:this.$store.state.Data.User.info.user_info.id,name:this.$store.state.Data.User.info.user_info.name,image_path:this.$store.state.Data.User.info.user_info.image_path,image:this.$store.state.Data.User.info.user_info.image_path,speciality:this.$store.state.Data.User.info.user_info.speciality,userType:this.userType,status:e,last_update_timestamp:(new Date).value};this.userInBlackList||Ke.internalEventEmit({event:this.userType+"_user_availability",data:t}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),console.error(e.data.error.message||e.data.error.code)})},pingSocketEvent(){clearTimeout(this.timeoutRef);Ke.internalEventEmit({event:this.userType+"_request_user_availability",data:{id:this.$store.state.Data.User.info.user_info.id,message:"ping"}}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),console.error(e.data.error.message||e.data.error.code)}).finally(()=>{this.timeoutRef=setTimeout(()=>{},this.$consts.SETTINGS.SOCKETTIMEOUT)})},setAwayInterval(){this.isAway||"hidden"!==document.visibilityState?this.isAway&&(this.isAway=!1,clearInterval(this.intervalRef),this.intervalRef=setInterval(this.timerIncrement,this.$consts.SETTINGS.ONLINEINTERVAL)):(this.isAway=!0,clearInterval(this.intervalRef),this.intervalRef=setInterval(this.timerIncrement,this.$consts.SETTINGS.AWAYINTERVAL))},checkInactivity(){this.intervalRef=setInterval(this.timerIncrement,this.$consts.SETTINGS.ONLINEINTERVAL),window.addEventListener("click",this.setAwayInterval),window.addEventListener("mousemove",this.setAwayInterval),window.addEventListener("visibilitychange",this.setAwayInterval),window.addEventListener("beforeunload",this.emitRemoveMySocketEvent)},timerIncrement(){if(this.isAttending)return this.away=!1;this.isAway?(clearInterval(this.intervalRef),this.$bus.emit("logout",{inactivity:!0})):(this.isAway=!0,clearInterval(this.intervalRef),this.intervalRef=setInterval(this.timerIncrement,this.$consts.SETTINGS.AWAYINTERVAL))},switchChange(){this.digitalCertificationSwitch||(this.CLEAR_ACCESS_TOKEN(),Pn.userTokenRemove({}),this.disabledSwitch=!1,this.timeRemaining=null)},runMountedLogic(){this.expirationTime=new Date(Date.now()+1e3*this.expiresIn),this.startTimer(),this.checkTokenValidity(),this.$gtm.trackView("Home")},startTimer(){this.updateTimeRemaining(),this.timerInterval=setInterval(()=>{this.updateTimeRemaining()},1e3)},updateTimeRemaining(){const e=new Date,t=Math.floor((this.expirationTime-e)/1e3);if(t>0){const e=Math.floor(t/3600),a=Math.floor(t%3600/60),n=t%60;this.timeRemaining=`${e}h ${a}m ${n}s`}else this.timeRemaining=null,this.CLEAR_ACCESS_TOKEN(),this.digitalCertificationSwitch=!1,this.disabledSwitch=!1,clearInterval(this.timerInterval)},emitRemoveMySocketEvent(){let e={id:this.$store.state.Data.User.info.user_info.id,name:this.$store.state.Data.User.info.user_info.name,image_path:this.$store.state.Data.User.info.user_info.image_path,image:this.$store.state.Data.User.info.user_info.image_path,speciality:this.$store.state.Data.User.info.user_info.speciality,userType:this.userType,status:this.$consts.SOCKET_STATUS.OFFLINE,last_update_timestamp:(new Date).value};this.userInBlackList||Ke.internalEventEmit({event:this.userType+"_user_remove_availability",data:e}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),console.error(e.data.error.message||e.data.error.code)})},restartQueue(){this.$bus.emit("restart-queue-update")},checkSwitchDigitalCertification(e){e&&!this.$store.state.Data.DigitalCertification.accessToken&&this.$bus.emit("open-digital-certification-modal",{hasToken:!1,inAttendance:!1,pendingDocs:!1})},async checkTokenValidity(){try{const e=await this.isTokenValid();this.disabledSwitch=!!e,this.disabledSwitch&&(this.digitalCertificationSwitch=!0)}catch(e){console.error("Erro ao verificar a validade do token:",e),this.tokenValid=!1}},async isTokenValid(){this.CLEAR_ACCESS_TOKEN();const e=window.sessionStorage.getItem("token");if(!e)return!1;try{const t=await Pn.fetchUserTokenCheck({token:e});if(t&&t.data&&1!=t.data.is_expired){const e=new Date(t.data.is_expired.expiration_time+"Z"),a=new Date,n=e-a,i=Math.floor(n/36e5*3600),s=e.getTime();return this.SET_ACCESS_TOKEN({accessToken:t.data.is_expired.token,expiresIn:i,tokenReceivedAt:a,tokenExpiresAt:s}),!0}return!1}catch(t){return console.error("Token inv
O E ASSESSORIA FINANCEIRA LTDA.","nick_name":null},{"id":32227,"name":"WRIGHT & B INCORPORACOES LTDA","nick_name":null},{"id":20629,"name":"WRJ TRANSPORTES E LOGISTICA EIRELI","nick_name":null},{"id":20070,"name":"W R & R CABELEIREIROS EIRELI","nick_name":null},{"id":21074,"name":"WRR SERVICOS ADMINISTRATIVOS EIRELI","nick_name":null},{"id":24958,"name":"WRSCI PROCESSAMENTO DE DADOS LTDA","nick_name":null},{"id":32123,"name":"W.S.-CONSULTORIA CONTABIL E FISCAL LTDA","nick_name":null},{"id":32464,"name":"WS DO BRASIL INDUSTRIA E COMERCIO EIRELI","nick_name":null},{"id":20068,"name":"W SHOP ALPHAVILLE COMERCIO DE COSMETICOS LTDA","nick_name":null},{"id":20066,"name":"W SHOP HIGIENOPOLIS COMERCIO DE COSMETICOS LTDA","nick_name":null},{"id":22988,"name":"WSN CONSULTORIA E SERVICOS EIRELI","nick_name":null},{"id":32269,"name":"WSNET TELECOM LTDA","nick_name":null},{"id":19701,"name":"WST DESENVOLVIMENTO DE SISTEMAS S/S LTDA","nick_name":null},{"id":20071,"name":"W STORE COMERCIO DE COSMETICOS LTDA","nick_name":null},{"id":32972,"name":"WSV SERVICOS LTDA","nick_name":null},{"id":31164,"name":"W.T.C. TECNOLOGIA EM TRATAMENTO DE AGUA LTDA","nick_name":null},{"id":21958,"name":"WTR ASSESSORIA EM SINISTROS LTDA","nick_name":null},{"id":22438,"name":"W V DA SILVA TELES ATENDIMENTO AO CLIENTE","nick_name":null},{"id":19855,"name":"WVS TECNOLOGIA DA INFORMACAO LTDA","nick_name":null},{"id":24819,"name":"WX PROMOCOES E EVENTOS EIRELI","nick_name":null},{"id":26116,"name":"WYDE ENGENHARIA E EMPREITEIRA DE OBRAS LTDA.","nick_name":null},{"id":27222,"name":"XAVANTE ADMINISTRACAO E PARTICIPACOES LTDA","nick_name":null},{"id":20245,"name":"XCMG BRASIL COMERCIO E SERVICOS LTDA.","nick_name":null},{"id":20246,"name":"XCMG BRASIL INDUSTRIA LTDA","nick_name":null},{"id":20247,"name":"XCMG BRASIL INVESTIMENTOS LTDA.","nick_name":null},{"id":31242,"name":"XDPRINT COMERCIO DE MOVEIS E EQUIPAMENTOS DE INFORMATICA LTDA","nick_name":null},{"id":25867,"name":"XERYU S IMPORTADORA E DISTRIBUIDORA DE ARTIGOS PARA VESTUARIO LIMITADA","nick_name":null},{"id":32468,"name":"XGRAPH - RADIOLOGIA ODONTOLOGICA LTDA","nick_name":null},{"id":30918,"name":"XIAOMI COMERCIO DE ELETRONICOS LTDA","nick_name":null},{"id":19918,"name":"XILOLITE S/A","nick_name":null},{"id":19737,"name":"XPERTIA BRASIL SOLUCOES INTEGRADAS LTDA","nick_name":null},{"id":19706,"name":"X-RAY CONSULTORIA LTDA","nick_name":null},{"id":23981,"name":"XR COMERCIO E SERVICOS DE LUZ E AUDIO EIRELI","nick_name":null},{"id":31349,"name":"X-STONE COMUNICACAO LTDA","nick_name":null},{"id":32620,"name":"X TERRA EMPREENDIMENTOS EIRELI","nick_name":null},{"id":25907,"name":"X WORKS SOLUTIONS BRASIL COMERCIO IMPORTACAO E EXPORTACAO DE COMPONENTES ELETRONICOS LTDA","nick_name":null},{"id":25908,"name":"XWS BRASIL, COMERCIO IMPORTACAO E EXPORTACAO DE COMPONENTES ELETRONICOS LTDA","nick_name":null},{"id":25391,"name":"XWZ ESTACIONAMENTOS E GARAGENS EIRELI","nick_name":null},{"id":26473,"name":"XYZ CONSULTORIA CONTABIL SS LTDA.","nick_name":null},{"id":31188,"name":"XYZ GERENCIAMENTO, ADMINISTRACAO E APOIO EM PROJETOS LTDA","nick_name":null},{"id":27305,"name":"YAMACHI BAZAR E PAPELARIA LTDA","nick_name":null},{"id":31626,"name":"YASMIN LIE SUZUKI 41347363823","nick_name":null},{"id":20400,"name":"YASMIN SILVESTRE NUNES 47558439876","nick_name":null},{"id":24470,"name":"YBR CORRETORA DE SEGUROS E IMOVEIS EIRELI","nick_name":null},{"id":33248,"name":"YEDA CRISTINA AMENDOLA DE ASSUNCAO 05298161804","nick_name":null},{"id":32101,"name":"YELLOW CONSULTORIA S/S LTDA","nick_name":null},{"id":31015,"name":"YELLOW COUCH SERVICOS DE INFORMATICA LTDA","nick_name":null},{"id":31896,"name":"YELLOW VIAGENS E TURISMO LTDA","nick_name":null},{"id":26006,"name":"YESOD CLINICA MEDICA LTDA","nick_name":null},{"id":30908,"name":"YGOR MORATO SOARES DESIGN E PUBLICIDADE LTDA","nick_name":null},{"id":33420,"name":"YNNOVADORES PUBLICIDADE LTDA","nick_name":null},{"id":22082,"name":"YOOH! SERVICOS DE MARKETING LTDA.","nick_name":null},{"id":25950,"name":"YORG PARTICIPACOES DO BRASIL LTDA","nick_name":null},{"id":22145,"name":"YOSHIDA JOBS LTDA","nick_name":null},{"id":24391,"name":"YOSHIMI & FILHO LTDA","nick_name":null},{"id":32054,"name":"YOUR SIZE CONFECCOES E COMERCIO LTDA","nick_name":null},{"id":30257,"name":"YRON LINDBERGH HAYASHIDA 43100415825","nick_name":null},{"id":19890,"name":"YS COMERCIO DE ALIMENTOS, BEBIDAS E PRODUCAO DE EVENTOS LTDA","nick_name":null},{"id":24047,"name":"YSTT EMPREENDIMENTOS E PARTICIPACOES LTDA.","nick_name":null},{"id":24663,"name":"YTA-Y-YBY ENGENHARIA S/S","nick_name":null},{"id":21004,"name":"YUMIKO MUKAI LTDA","nick_name":null},{"id":21793,"name":"YURI BARRETO KAMINSKI","nick_name":null},{"id":22076,"name":"YURIK JACKOW 33223860827","nick_name":null},{"id":31228,"name":"YURI MIRANDA REBELO 00150849222","nick_name":null},{"id":21239,"name":"YURI RICARDO MENDES DA SILVA 43885604809","nick_name":null},{"id":32488,"name":"Z3 ADMINISTRACAO E PARTICIPACOES LTDA.","nick_name":null},{"id":27079,"name":"Z4 SERVICES COMERCIO DE MOVEIS E CARPETES LTDA","nick_name":null},{"id":26381,"name":"ZABO ENGENHARIA S.A.","nick_name":null},{"id":24302,"name":"ZAGUINI CONSULTORIA E SERVICOS S/C LTDA","nick_name":null},{"id":25102,"name":"ZAHNARZTE S/S","nick_name":null},{"id":26064,"name":"ZAKEN IMPORTACAO E EXPORTACAO LTDA","nick_name":null},{"id":21539,"name":"ZANFORMEDICA LOCADORA DE MAQUINAS LTDA","nick_name":null},{"id":27158,"name":"ZANITI CONSULTORIA EMPRESARIAL LTDA","nick_name":null},{"id":26858,"name":"ZANTHUS - COMERCIO E SERVICOS LTDA","nick_name":null},{"id":30323,"name":"ZANZARINI & CORREA APOIO ADMINISTRATIVO LTDA.","nick_name":null},{"id":32669,"name":"ZAPT SERVICE SERVICOS ADMINISTRATIVOS E OPERACIONAIS EIRELI","nick_name":null},{"id":23155,"name":"ZAUN SOLUCOES INOVADORAS LTDA","nick_name":null},{"id":22527,"name":"ZAVAGLI ENERGIA, SOLUCOES ALTERNATIVAS, INTEGRADAS E REPRESENTACOES LTDA","nick_name":null},{"id":24892,"name":"ZAYER BRASIL LTDA","nick_name":null},{"id":23343,"name":"Z-BRA SERVICOS ADMINISTRATIVOS LTDA","nick_name":null},{"id":21306,"name":"ZEBRA DIGITAL INFORMACAO LTDA","nick_name":null},{"id":21307,"name":"ZEBRA PUBLICIDADE E PROPAGANDA LTDA","nick_name":null},{"id":24952,"name":"ZECODE TECHNOLOGY LTDA","nick_name":null},{"id":24720,"name":"ZEFERINO D. ALVES PIZZARIA LTDA","nick_name":null},{"id":22113,"name":"ZEG ENERGIAS RENOVAVEIS LTDA","nick_name":null},{"id":21791,"name":"ZELI DOS SANTOS 06638220926","nick_name":null},{"id":22756,"name":"ZE MARIO DESENVOLVIMENTO PESSOAL E PROFISSIONAL EIRELI","nick_name":null},{"id":20349,"name":"ZENALETI INDUSTRIA E COMERCIO TEXTIL LTDA","nick_name":null},{"id":24879,"name":"ZEN FINANCE TECNOLOGIA E SERVICOS LTDA.","nick_name":null},{"id":23933,"name":"ZEN HOSTEL EIRELI","nick_name":null},{"id":26837,"name":"ZEPPINI INDUSTRIAL E COMERCIAL LTDA","nick_name":null},{"id":25450,"name":"ZEPPONE & CARLOS LTDA","nick_name":null},{"id":25325,"name":"ZEUS CORRETORA DE SEGUROS LTDA","nick_name":null},{"id":20957,"name":"ZEUS SERVICOS DE ELABORACAO DE CADASTRO LTDA","nick_name":null},{"id":23795,"name":"ZEVIPLAST INDUSTRIA E COMERCIO DE PLASTICOS EIRELI","nick_name":null},{"id":25709,"name":"ZF AUTOMOTIVE BRASIL LTDA.","nick_name":null},{"id":23610,"name":"Z. GASTRONOMIA E EVENTOS EIRELI","nick_name":null},{"id":24134,"name":"ZHAO CAIYUE UTILIDADES","nick_name":null},{"id":26729,"name":"Z.H.S INDUSTRIA E COMERCIO LTDA","nick_name":null},{"id":22589,"name":"ZIEHL-ABEGG DO BRASIL IMPORTACAO, EXPORTACAO E COMERCIO DE EQUIPAMENTOS DE VENTILACAO LTDA","nick_name":null},{"id":32394,"name":"ZINING PARTICIPACOES LTDA","nick_name":null},{"id":22558,"name":"ZION ASSESSORIA E CONSULTORIA EMPRESARIAL LTDA-ME","nick_name":null},{"id":24776,"name":"ZION COMERCIO E SERVICOS DE INFORMATICA LTDA","nick_name":null},{"id":21207,"name":"ZIPBAG SUPRIMENTOS LTDA","nick_name":null},{"id":21965,"name":"ZIPJET SERVICOS ADMINISTRATIVOS LTDA","nick_name":null},{"id":27111,"name":"ZITUNE EMPREENDIMENTOS IMOBILIARIOS LTDA","nick_name":null},{"id":30191,"name":"ZIYOU INTERMEDIACAO, LOCACAO E SERVICOS LTDA","nick_name":null},{"id":22322,"name":"ZN DISTRIBUIDORA LTDA","nick_name":null},{"id":32228,"name":"ZOLLER DO BRASIL SOLUCOES PARA A OTIMIZACAO DE PRODUCAO LTDA.","nick_name":null},{"id":20459,"name":"ZONARO CONSULTORES E CONTADORES LTDA","nick_name":null},{"id":31507,"name":"ZP INDUSTRIA E COMERCIO DE PECAS LTDA","nick_name":null},{"id":33010,"name":"ZPRINT MARKETING PROMOCIONAL LTDA","nick_name":null},{"id":23698,"name":"ZSUL ADMINISTRADORA E CORRETORA DE SEGUROS LTDA","nick_name":null},{"id":20073,"name":"ZTE DO BRASIL, COMERCIO, SERVICOS, IMPORTACAO E EXPORTACAO LTDA.","nick_name":null},{"id":20074,"name":"ZTE DO BRASIL, INDUSTRIA, COMERCIO, SERVICOS E PARTICIPACOES LTDA.","nick_name":null},{"id":26594,"name":"ZUCCA INGREDIENTES E INTERMEDIACOES LTDA","nick_name":null},{"id":24931,"name":"ZUCCANICASTRO CONSULTORIA EM DESENVOLVIMENTO HUMANO ORGANIZACIONAL LTDA.","nick_name":null},{"id":22120,"name":"ZUCCARO IMOVEIS LTDA","nick_name":null},{"id":19790,"name":"ZUPELO SERVICOS ADMINISTRATIVOS & PROMOCOES DE VENDAS EIRELI","nick_name":null},{"id":25278,"name":"ZYCON AUTOMACAO INDUSTRIAL - EIRELI","nick_name":null},{"id":25277,"name":"ZYCON SERVICE MANUTENCAO LTDA.","nick_name":null}],"total":11467},"error":null}')},"10a5":function(e,t,a){},"10d0":function(e,t,a){},1109:function(e,t,a){"use strict";a("f236")},"118f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"}},[t("rect",{staticClass:"a",attrs:{width:"18",height:"18"}}),t("path",{staticClass:"b",attrs:{d:"M.5,16h17L9,1ZM10,14H8V12h2Zm0-3H8V7h2Z"}})])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},1225:function(e,t,a){e.exports=a.p+"img/ic_sidebar_calendar.3c9166ed.svg"},1329:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23.376",height:"20.436",viewBox:"0 0 23.376 20.436"}},[t("defs"),t("g",{attrs:{transform:"translate(0.255 0.275)",fill:"#fff"}},[t("path",{staticClass:"a",attrs:{d:"M873.4,177.507a.673.673,0,0,1-.34-.709,4.624,4.624,0,0,1,.346-.714c.17-.289.674-1.168,1.122-1.944s1.48-2.568,2.29-3.969,1.894-3.288,2.409-4.184,1.758-3.044,2.761-4.779,1.9-3.226,2.007-3.316a.722.722,0,0,1,.867-.017,3.2,3.2,0,0,1,.533.725l2.007,3.458c.913,1.576,1.837,3.169,2.052,3.543.374.652,1.927,3.328,4.966,8.567.822,1.423,1.5,2.653,1.5,2.744a.73.73,0,0,1-.352.618c-.187.108-1.06.119-11.072.119-10.732-.005-10.868-.005-11.1-.142Zm21.3-1.021c-.329-.6-10.16-17.263-10.188-17.263a2.215,2.215,0,0,0-.295.442c-.136.244-1.967,3.345-4.065,6.888-5.777,9.768-5.862,9.915-5.9,10.012-.028.068,2.052.091,10.25.091h10.289Zm-10.369-1.57c-.04-.011-.159-.04-.266-.062a1.683,1.683,0,0,1-.811-.709,1.522,1.522,0,0,1-.114-.584,1.347,1.347,0,1,1,2.07,1.122,1.435,1.435,0,0,1-.879.232Zm-.272-3.4a1.294,1.294,0,0,1-.782-.777,21.86,21.86,0,0,1-.266-2.885c-.182-2.971-.182-2.994.329-3.5a1.615,1.615,0,0,1,2.733.765,47.786,47.786,0,0,1-.4,5.63,1.4,1.4,0,0,1-.862.8.943.943,0,0,1-.754-.028Z",transform:"translate(-873.048 -157.738)"}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},1354:function(e,t,a){},"138f":function(e,t,a){},"13c6":function(e,t,a){"use strict";a("0ab2")},"13d9":function(e,t,a){"use strict";a("6553")},"154a":function(e,t,a){},1570:function(e,t,a){"use strict";a("52a9")},"15cd":function(e,t,a){"use strict";a("47a9")},"165b":function(e,t,a){},"165d":function(e,t,a){},"16dd":function(e,t,a){e.exports=a.p+"img/desmotivado.f5fbcf06.svg"},1771:function(e,t,a){var n={"./53418.svg":"875c","./Grupo 123.svg":"f39b","./Grupo de m
o"))])])]):e._e()])}))]},proxy:!0}])}),0==e.examList.length?t("div",{staticClass:"small-bottom-margin"},[e._v(e._s(e.$t("health_history.noregisteredexam")))]):e._e(),"EXAM"==e.currentEditField&&e.editMode?t("div",{staticClass:"mt-5"},[t(de["a"],{staticClass:"search-input input-history-width",attrs:{label:e.$t("health_history.examName"),height:"42px",outlined:"",clearable:""},model:{value:e.examName,callback:function(t){e.examName="string"===typeof t?t.trim():t},expression:"examName"}}),t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["##/##/####"],expression:"['##/##/####']"}],staticClass:"search-input input-history-width",attrs:{label:e.$t("health_history.examDate"),height:"42px",outlined:"",clearable:""},model:{value:e.examDate,callback:function(t){e.examDate="string"===typeof t?t.trim():t},expression:"examDate"}}),t(de["a"],{staticClass:"search-input input-history-width",attrs:{label:e.$t("health_history.examResult"),height:"42px",outlined:"",clearable:""},model:{value:e.examResult,callback:function(t){e.examResult="string"===typeof t?t.trim():t},expression:"examResult"}}),t("p",[t("label",{attrs:{for:"checkbox"}},[e._v("Alterado: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.examChanged,expression:"examChanged"}],staticClass:"purple-border",attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.examChanged)?e._i(e.examChanged,null)>-1:e.examChanged},on:{change:function(t){var a=e.examChanged,n=t.target,i=!!n.checked;if(Array.isArray(a)){var s=null,o=e._i(a,s);n.checked?o<0&&(e.examChanged=a.concat([s])):o>-1&&(e.examChanged=a.slice(0,o).concat(a.slice(o+1)))}else e.examChanged=i}}})]),t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.saveExam()}}},[e._v(" "+e._s(e.$t("health_history.save_exam")))])],1):e._e(),"EXAM"!=e.currentEditField&&e.editMode?t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return e.setEditField("EXAM")}}},[t("span",[e._v(e._s(e.$t("health_history.add_exam")))])]):e._e()],1),e.error?t("div",{staticClass:"error-message"},[e._v(e._s(e.error))]):e._e(),e.editMode?e._e():t("div",{staticClass:"health-section bottom-margin top-margin"},[t(r["a"],{attrs:{color:"primary"},on:{click:function(t){return t.preventDefault(),e.enableEdit()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("health_history.edit")))])],1)],1),e.editMode?t("div",{staticClass:"health-section bottom-margin top-margin"},[e.confirmCancel?e._e():t(r["a"],{staticClass:"hor-margin",attrs:{color:"blue",width:"40%",outlined:""},on:{click:function(t){return e.wantToCancel()}}},[t(at["a"],{attrs:{size:"18",color:"blue"}},[e._v("warning")]),t("span",[e._v(e._s(e.$t("health_history.cancel")))])],1),e.confirmCancel?t(r["a"],{staticClass:"hor-margin",attrs:{color:"red",width:"40%",outlined:""},on:{click:function(t){return e.cancelEdit()}}},[t(at["a"],{attrs:{size:"18",color:"red"}},[e._v("warning")]),t("span",[e._v(e._s(e.$t("health_history.cancel_confirm")))])],1):e._e(),t(r["a"],{staticClass:"hor-margin",attrs:{color:"primary",width:"40%"},on:{click:function(t){return e.save()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",[e._v(e._s(e.$t("health_history.save")))])],1)],1):e._e()])},YS=[],jS={getMedicineInfo(e){let t=R.ENDPOINTS.GET_MEDICINE_INFO;if(t=t.replace("{med}",e),null!=this.searchId){let e="&searchId="+this.searchId;t+=e}return new Promise((e,a)=>{C.a.get(t,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(t=>{!this.searchId&&t.data.data.idBuscaMedicamento&&(this.searchId=t.data.data.idBuscaMedicamento),e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getDosageInfo(e){let t={text:e};return new Promise((e,a)=>{C.a.post(R.ENDPOINTS.GET_DOSAGE_INFO,t,{headers:{token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},KS={name:"health-history",props:["item"],components:{Patient:$s},mixins:[ve],data(){return{rawCid:Yl,health_id:"",ciap2List:[],cidList:[],filteredCid:[],isSimpleCIDs:!0,cidsToShow:["B20","C76","E03","E10","E11","E66","E78","F32","G20","G30","G40","H54","H90","I10","I25","I50","J30","J41","J43","J45"],selectedCidId:"",summary:"",chronicDiseaseList:[],allergyList:[],medicineList:[],APIMedList:[],examList:[],editMode:!1,description:"",currentEditField:"",allergyName:"",medicineName:"",examName:"",examDate:"",examResult:"",examChanged:!1,pamax:"",pamin:"",glijejum:"",gliposprandial:"",fc:"",fr:"",weight:"",height:"",imc:"",circabdom:"",error:"",confirmCancel:!1}},created(){this.getHealthHistory(),this.getCidList()},methods:{getCidList(){this.cidList=this.rawCid.data,this.cidList.forEach((e,t)=>{this.cidList[t].formattedName=e.code+" - "+e.name,this.cidsToShow.includes(e.code)&&this.filteredCid.push(this.cidList[t])}),this.filteredCid.push({cid_group_id:1,code:"N/A",formattedName:"Mostrar todos os CIDs",id:-1,name:"Mostrar todos os CIDs"})},checkCid(){"N/A"==this.selectedCidId.code&&(this.isSimpleCIDs=!1,this.selectedCidId=null)},getMedicineList(){this.clearMedList(),this.medicineName.length<3||jS.getMedicineInfo(this.medicineName).then(e=>{""!=this.medicineName&&(this.APIMedList=e.data.Itens)})},clearMedList(){this.APIMedList=[]},enableEdit(){this.editMode=!0,this.displayAddMedicine=!0,this.currentEditField="",this.$bus.emit("toggle-edit-history",!0)},setEditField(e){this.currentEditField=e},saveChronic(){if(this.error="",!this.selectedCidId.id)return void(this.error=this.$t("health_history.error_chronic"));if(this.chronicDiseaseList.find(e=>e.cid_id==this.selectedCidId.id))return void(this.error=this.$t("health_history.invalid_chronic"));let e={status:"CURRENT",cid_id:this.selectedCidId.id,cid_name:this.selectedCidId.name};this.chronicDiseaseList.push(e),this.currentEditField="",this.isSimpleCIDs=!0},imcCalculator(){if(""==this.weight||""==this.height)return void(this.imc="N
o:",e)}).finally(()=>{this.loading=!1})},checkValidAuthorization(){this.$store.dispatch(this.$consts.USER_ACTIONS.CHECK_CERTIFICATION_AUTH,{authorization_code:this.checkTokenValid}).then(e=>{e.data.access_token&&e.data.access_token.length?(this.token_user=e.data.access_token,this.expirationTimeInSeconds=(new Date(Date.now()+1e3*e.data.expires_in).getTime()-Date.now())/1e3,this.expirationTimeToken=this.formatExpirationTime(this.expirationTimeInSeconds),this.setIntervalReference=setInterval(()=>{this.expirationTimeInSeconds--,this.expirationTimeInSeconds<=0&&(clearInterval(this.setIntervalReference),this.setIntervalReference=null,this.expirationTimeInSeconds=0),this.expirationTimeToken=this.formatExpirationTime(this.expirationTimeInSeconds)},1e3),this.successCertification=!0,this.SET_ACCESS_TOKEN({accessToken:e.data.access_token,expiresIn:e.data.expires_in,tokenReceivedAt:new Date,tokenExpiresAt:new Date(Date.now()+1e3*e.data.expires_in).getTime()}),clearTimeout(this.validTimeout),clearTimeout(this.validCheckTimeout),this.startValidTimer()):this.validTimeout=setTimeout(()=>{this.checkValidAuthorization()},3e3)}).catch(e=>{console.error("Erro na verifica
o encontrada. "+e.message})},sendFormData(){if(this.$v.$touch(),!this.exists)if(0==this.foreign){let e={name:this.name,status:"ACTIVE",document:this.document,trading_name:this.fantasia,legal_nature:this.juridica,internal_manager_name:this.internal_manager_name,internal_manager_phone:this.getRawPhone(this.internal_manager_phone),country:this.country,address:this.address,economic_activity:this.activity,company_manager_name:this.company_manager,company_manager_phone:this.getRawPhone(this.company_manager_phone),hr_contact_name:this.hr_contact,hr_contact_phone:this.getRawPhone(this.hr_contact_phone),contractee:this.contractee,benefit_sponsor:this.sponsor,payer_id:this.selectedPayer.id,company_id:this.selected_company?this.selected_company.id:null,mother:this.mother,ie:this.ie,dialog:!1,foreign:!1,flavour_id:this.selected_flavour?this.selected_flavour.flavour_id:null,inheritance:this.inheritanceFlavour,code_ans:this.code_ans,flag_tiss:this.flag_tiss,operator_code:this.operator_code,webservice:this.webservice,credentials:this.credentials};this.$bus.emit("new-company-setup",e)}else{let e={name:this.name,status:"ACTIVE",document:this.registry,trading_name:this.fantasia,legal_nature:this.juridica,internal_manager_name:this.internal_manager_name,internal_manager_phone:this.getRawPhone(this.internal_manager_phone),country:this.country,address:this.address,economic_activity:this.activity,company_manager_name:this.company_manager,company_manager_phone:this.getRawPhone(this.company_manager_phone),hr_contact_name:this.hr_contact,hr_contact_phone:this.getRawPhone(this.hr_contact_phone),contractee:this.contractee,benefit_sponsor:this.sponsor,payer_id:this.selectedPayer.id,company_id:this.selected_company?this.selected_company.id:null,mother:this.mother,ie:this.ie,dialog:!1,foreign:!0,flavour_id:this.selected_flavour?this.selected_flavour.flavour_id:null,inheritance:this.inheritanceFlavour,code_ans:this.code_ans,flag_tiss:this.flag_tiss,operator_code:this.operator_code,webservice:this.webservice,credentials:this.credentials};this.$bus.emit("new-company-setup",e)}},getCompany(e){let t={company_id:e};ti.getCompany(t).then(e=>{this.company=e.data}).catch(e=>{console.error(e)})},enableContractSection(){this.$bus.emit("enable-company-contract")},getRawPhone(e){let t=e.replace(/[-()+\s]/g,"");return t},checkUniqueCnpj(){let e=this.getRawCnpj(this.cnpj);this.error="";let t=this.$store.state.Data.User.token,a={token:t,cnpj:e};this.$store.dispatch(this.$consts.USER_ACTIONS.CHECK_UNIQUE_CNPJ,a).then(t=>{this.situation=t.data.msg,"document not found"==this.situation?(this.document=e,this.exists=!1,this.error="",this.$bus.emit("enable-company-contract",!1)):(this.exists=!0,this.error="",this.$bus.emit("enable-company-contract",!0))}).then(e=>{this.situation=null})},getRawCnpj(e){let t=e.replace(/[-./\s]/g,"");return t},checkUniqueDocument(){let e=this.$store.state.Data.User.token,t={token:e,cnpj:this.registry};this.$store.dispatch(this.$consts.USER_ACTIONS.CHECK_UNIQUE_CNPJ,t).then(e=>{this.situation=e.data.msg,"document not found"==this.situation?(this.exists=!1,this.error=""):(this.exists=!0,this.error="")}).catch(e=>{})},resetCompanyFields(){this.companyData="",this.country="Brasil",this.address="",this.activity="",this.ie="",this.fantasia="",this.juridica=""}},validations:{internal_manager_name:{required:Ae["required"]},internal_manager_phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(17)},company_manager:{required:Ae["required"]},company_manager_phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(17)},hr_contact:{required:Ae["required"]},hr_contact_phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(17)},name:{required:Ae["required"]},juridica:{required:Ae["required"]},country:{required:Ae["required"]},address:{required:Ae["required"]},activity:{required:Ae["required"]},selectedPayer:{required:Ae["required"]},registry:{required:Object(Ae["requiredIf"])((function(){return!this.document}))},selected_company:{required:Object(Ae["requiredIf"])((function(){return!this.mother}))}},computed:{hasMoreFlavours(){return this.flavourPagination.total>this.flavourList.length},internalManagerErrors(){const e=[];return this.$v.internal_manager_name.$dirty?(!this.$v.internal_manager_name.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},internalManagerPhoneErrors(){const e=[];return this.$v.internal_manager_phone.$dirty?(!this.$v.internal_manager_phone.required&&e.push(this.$t("access_controls.required")),!this.$v.internal_manager_phone.minLength&&e.push(this.$t("access_controls.invalid_phone")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},companyManagerErrors(){const e=[];return this.$v.company_manager.$dirty?(!this.$v.company_manager.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},companyManagerPhoneErrors(){const e=[];return this.$v.company_manager_phone.$dirty?(!this.$v.company_manager_phone.required&&e.push(this.$t("access_controls.required")),!this.$v.company_manager_phone.minLength&&e.push(this.$t("access_controls.invalid_phone")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},hrContactErrors(){const e=[];return this.$v.hr_contact.$dirty?(!this.$v.hr_contact.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},hrContactPhoneErrors(){const e=[];return this.$v.hr_contact_phone.$dirty?(!this.$v.hr_contact_phone.required&&e.push(this.$t("access_controls.required")),!this.$v.hr_contact_phone.minLength&&e.push(this.$t("access_controls.invalid_phone")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},juridicaErrors(){const e=[];return this.$v.juridica.$dirty?(!this.$v.juridica.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},countryErrors(){const e=[];return this.$v.country.$dirty?(!this.$v.country.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},addressErrors(){const e=[];return this.$v.address.$dirty?(!this.$v.address.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},activityErrors(){const e=[];return this.$v.activity.$dirty?(!this.$v.activity.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},selectedPayerErrors(){const e=[];return this.$v.selectedPayer.$dirty?(!this.$v.selectedPayer.required&&e.push(this.$t("access_controls.required")),this.$bus.emit("enable-company-contract",this.$v.$invalid),e):e},registryErrors(){const e=[];return this.$v.registry.$dirty?(!this.$v.registry.required&&e.push(this.$t("access_controls.required")),this.exists&&e.push(this.$t("external_controls.document_exists")),this.$bus.emit("enable-company-contract",this.$v.$invalid),this.$bus.emit("document-exists",this.exists),e):e},selectedCompanyErrors(){const e=[];return this.$v.selected_company.$dirty?(!this.$v.selected_company.required&&e.push(this.$t("access_controls.required")),e):e}}},$g=yg,xg=(a("e40a"),Object(I["a"])($g,fg,Ng,!1,null,null,null)),Vg=xg.exports,Gg=function(){var e=this,t=e._self._c;return t("div",{staticClass:"company-contract-cc"},[t("div",{staticClass:"company-contract-title"},[t("div",{staticClass:"company-contract-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.contract")))]),e._v(" "+e._s(e.$t("external_controls.from_company"))+"\n        ")])]),t(re["a"],[t(Xn["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{staticClass:"i-data",class:{"disabled-events":!e.enabled||e.blocked},attrs:{label:e.$t("external_controls.frequency"),height:"37px",items:e.frequency,"error-messages":e.selectedFrequencyErrors,outlined:""},on:{blur:function(t){return e.$v.selectedFrequency.$touch()}},model:{value:e.selectedFrequency,callback:function(t){e.selectedFrequency=t},expression:"selectedFrequency"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.formattedDate,transition:"scale-transition","offset-y":"","min-width":"217px"},on:{"update:returnValue":function(t){e.formattedDate=t},"update:return-value":function(t){e.formattedDate=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({staticClass:"i-data2",class:{"disabled-events":!e.enabled||e.blocked},attrs:{label:e.$t("external_controls.due_date"),height:"37px",readonly:"","error-messages":e.selectedDateErrors,outlined:""},on:{blur:function(t){return e.$v.selected_date.$touch()}},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},a))]}}]),model:{value:e.due,callback:function(t){e.due=t},expression:"due"}},[t(yt["a"],{attrs:{min:e.today,width:"255px","no-title":"",scrollable:""},model:{value:e.selected_date,callback:function(t){e.selected_date=t},expression:"selected_date"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.due=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueDate()}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1)],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t($t["a"],{staticClass:"i-data3",class:{"disabled-events":!e.enabled||e.blocked},attrs:{label:e.$t("external_controls.index_type"),height:"37px",items:e.index_type,"return-object":"","error-messages":e.selectedTypeErrors,"item-text":"name",outlined:""},on:{blur:function(t){return e.$v.selectedType.$touch()}},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1)],1),t("div",{staticClass:"contract",class:{"disabled-events":!e.enabled||e.blocked}},[e.visible?t(de["a"],{staticClass:"file",attrs:{height:"37px","prepend-inner-icon":"$vuetify.icons.custom_contract",readonly:"",outlined:""},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}},[t("template",{slot:"append"},[t(r["a"],{staticClass:"edit",attrs:{text:""}},[t("a",{staticClass:"download",attrs:{href:e.fileUrl,download:e.filename,target:"blank"}},[t("span",{staticClass:"download"},[e._v(e._s(e.$t("external_controls.download")))])])]),t(r["a"],{staticClass:"edit",attrs:{text:""},on:{click:function(t){return e.clearField()}}},[t("span",{staticClass:"remove"},[e._v(e._s(e.$t("external_controls.remove")))])])],1)],2):e._e()],1),e.invalid?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.file_too_big")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),e.invalidFile?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),e.missingFile?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.upload_required")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),t("div",{staticClass:"up-btn",class:{"disabled-events":!e.enabled||e.blocked}},[t(r["a"],{attrs:{color:"blue",height:"37px",width:"100%",block:"",outlined:""},on:{click:function(t){return e.$refs.uploadContract.click()}}},[t(at["a"],{attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"upload-text"},[e._v(e._s(e.$t("external_controls.contract_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadContract",attrs:{type:"file",accept:"application/pdf"},on:{change:function(t){return e.uploadCompanyContract()}}})],1)],1)],1)],1)],1)},Fg=[],Bg={props:["item","disabled"],data(){return{foreign:0,index_type:["IGPM","IPCA"],frequency:["ANUAL"],due:!1,selected_date:null,selectedType:"",selectedFrequency:"",file:"",files:[],visible:!1,invalid:!1,invalidFile:!1,enabled:!1,today:this.$moment().format("YYYY-MM-DD"),companyData:null,filename:"",products:null,blocked:!1,fileUrl:null,formattedDate:"",missingFile:!1}},created(){this.$bus.on("enable-company-contract",e=>{this.enabled=0==e}),this.$bus.on("new-company-setup",e=>{this.companyData=e}),this.$bus.on("company-created",()=>{this.blocked=!0}),this.$bus.on("document-exists",e=>{this.enabled=1!=e}),this.$bus.on("missing-contract",()=>{this.missingFile=!0})},beforeDestroy(){this.$bus.off("new-company-setup"),this.$bus.off("enable-company-contract"),this.$bus.off("company-created")},methods:{uploadCompanyContract(){if(this.$v.$touch(),this.getCompanyData(),!this.$v.$invalid){this.invalidFile=!1;let e=event.target.files[0],t=event.target.files[0].size,a=e.type;if("application/pdf"!=a)return this.invalidFile=!0,!1;if(t>15e6&&(this.visible=!1,this.invalid=!0),e){this.missingFile=!1,this.visible=!0,this.file=e,this.files.push(e);e.name;let t=this.$store.state.Data.User.token,a={token:t,file:this.file,path:"contracts",make_unique:"true"};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,a).then(e=>{for(let t in e.data)this.fileUrl=e.data[t].completeUrl;this.getFilename(),this.$bus.emit("enable-save-button"),this.sendContractData()}).catch(e=>{})}}},saveDueDate(){this.formatDueDate(),this.$refs.menu.save(this.formattedDate)},sendContractData(){this.companyData.expiration_date=this.selected_date,this.companyData.readjustment_frequency=this.selectedFrequency,this.companyData.index_type=this.selectedType,this.companyData.filename=this.filename,this.companyData.is_partner_group=!1,this.$bus.emit("company-contract",this.companyData)},clearField(){this.fileUrl=null,this.filename=null,this.visible=!1,this.sendContractData()},getCompanyData(){this.$bus.emit("get-new-company")},getFilename(){if(this.fileUrl){let e=this.fileUrl.lastIndexOf("/");this.filename=this.fileUrl.substr(e+1)}},formatDueDate(){if(this.selected_date){const[e,t,a]=this.selected_date.split("-");return this.formattedDate=`${a}-${t}-${e}`,this.formattedDate}}},validations:{selected_date:{required:Ae["required"]},selectedFrequency:{required:Ae["required"]},selectedType:{required:Ae["required"]}},computed:{selectedFrequencyErrors(){const e=[];return this.$v.selectedFrequency.$dirty?(!this.$v.selectedFrequency.required&&e.push(this.$t("access_controls.required")),e):e},selectedDateErrors(){const e=[];return this.$v.selected_date.$dirty?(!this.$v.selected_date.required&&e.push(this.$t("access_controls.required")),e):e},selectedTypeErrors(){const e=[];return this.$v.selectedType.$dirty?(!this.$v.selectedType.required&&e.push(this.$t("access_controls.required")),e):e}}},wg=Bg,Hg=(a("d2d6"),Object(I["a"])(wg,Gg,Fg,!1,null,null,null)),qg=Hg.exports,Yg=function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-list"},[t("div",{staticClass:"product-list-title"},[t("div",{staticClass:"product-list-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.list")))]),e._v(" "+e._s(e.$t("external_controls.products"))+"\n        ")])]),t("div",{staticClass:"list"},[t($a["a"],{staticClass:"mb-10",class:{"disabled-events":!e.enabled||e.blocked}},[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("external_controls.program_name")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("external_controls.action")))])])]),t("tbody",e._l(e.programs,(function(a,n){return t("tr",{key:n},[t("td",{staticClass:"prog-items"},[e._v(e._s(a.name))]),t("td",{staticClass:"text-center"},[e.activePrograms.includes(a)?e._e():t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.activate(a)}}},[t("span",{staticClass:"prod-save"},[e._v(e._s(e.$t("external_controls.activate")))])]),e.activePrograms.includes(a)?t(r["a"],{attrs:{width:"78px",height:"26px",color:"primary",outlined:""},on:{click:function(t){return e.activate(a)}}},[t("span",{staticClass:"prod-save"},[e._v(e._s(e.$t("external_controls.deactivate")))])]):e._e()],1)])})),0)])],1)])},jg=[],Kg={props:["item"],data(){return{programs:[],active:!0,activePrograms:[],enabled:!1,blocked:!1}},created(){this.listPrograms(),this.$bus.on("enable-company-contract",e=>{this.enabled=0==e}),this.$bus.on("company-created",()=>{this.blocked=!0})},beforeDestroy(){this.$bus.off("enable-company-contract")},methods:{activate(e){let t=this.activePrograms.indexOf(e);-1==t?this.activePrograms.push(e):this.activePrograms.splice(t,1);let a=this.activePrograms.map(e=>e.id);this.$bus.emit("product-data",a)},listPrograms(){let e=this.$store.state.Data.User.token,t={token:e,program_types:["EXTERNAL","INTERNAL","SYSTEM"]};this.$store.dispatch(this.$consts.USER_ACTIONS.PROGRAM_LIST,t).then(e=>{this.programs=e.data.programs}).catch(e=>{})}}},Zg=Kg,Qg=(a("88c6"),Object(I["a"])(Zg,Yg,jg,!1,null,null,null)),Jg=Qg.exports,Wg=function(){var e=this,t=e._self._c;return e.created?t("div",{staticClass:"groups-register"},[t("div",{staticClass:"groups-register-title"},[t("div",{staticClass:"groups-register-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("external_controls.registry")))]),e._v(" "+e._s(e.$t("external_controls.groups"))+"\n        ")])]),t("GroupsList",{attrs:{id:e.id}}),e.add?t("section",{staticClass:"new-group"},[t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"group",class:{"disabled-events":!e.created},attrs:{label:e.$t("external_controls.group_name"),autocomplete:"off",maxlength:"50",height:"37px","error-messages":e.nameErrors,outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t("div",{staticClass:"delete-icon"},[t(at["a"],{staticClass:"del-icon",attrs:{size:"15",color:"white"},on:{click:function(t){return e.removeGroup()}}},[e._v("close")])],1)],1),e.invalid?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),t("div",{staticClass:"upload-section"},[e.lives?t("div",{staticClass:"messages d-flex mb-4"},[e.processed?e._e():t(at["a"],{staticClass:"proc-ic mr-2",attrs:{size:"16"}},[e._v("$vuetify.icons.custom_processing")]),t("span",{staticClass:"confirmation"},[e._v(e._s(e.$t("external_controls.processing")))])],1):e._e(),t(r["a"],{class:{"disabled-events":!e.created},attrs:{color:"blue",height:"37px",width:"100%",block:"",outlined:""},on:{click:function(t){return e.$refs.uploadLives.click()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"group-text"},[e._v(e._s(e.$t("external_controls.lives_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadLives",attrs:{type:"file",accept:"application/pdf,application/vnd.ms-excel"},on:{change:function(t){return e.assetCreate()}}})],1)],1),t("div",{staticClass:"save-group mb-4",class:{"disabled-events":!e.enabled}},[t(r["a"],{attrs:{color:"primary",width:"100%",block:""},on:{click:function(t){return e.createGroup()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)]):e._e(),e.add?e._e():t("div",{staticClass:"d-flex"},[t(r["a"],{staticClass:"group-text",attrs:{color:"blue",width:"252px",outlined:""},on:{click:function(t){return e.addGroup()}}},[e._v(e._s(e.$t("external_controls.add_group")))])],1)],1):e._e()},Xg=[],zg=function(){var e=this,t=e._self._c;return e.groupsList.length>0?t("div",{staticClass:"groups-list"},e._l(e.groupsList,(function(n,i){return t("section",{key:i,staticClass:"new-group"},[t("div",{staticClass:"d-flex"},[t(de["a"],{staticClass:"disabled-events group",attrs:{label:e.$t("external_controls.group_name"),autocomplete:"off",maxlength:"50",height:"37px",outlined:""},model:{value:n.name,callback:function(t){e.$set(n,"name","string"===typeof t?t.trim():t)},expression:"group.name"}})],1),e.invalid?t("div",{staticClass:"messages d-flex justify-center"},[t("span",{staticClass:"err-upload red--text mr-2"},[e._v(e._s(e.$t("external_controls.invalid_file")))]),t("img",{staticClass:"err-icon",attrs:{src:a("dfbb")}})]):e._e(),t("div",{staticClass:"upload-section"},[e.lives?e._e():t("div",{staticClass:"messages d-flex mb-4"},[t(at["a"],{staticClass:"proc-ic mr-2",attrs:{size:"16"}},[e._v("$vuetify.icons.custom_processing")]),t("span",{staticClass:"confirmation"},[e._v(e._s(e.$t("external_controls.processing")))])],1),t(r["a"],{class:{"disabled-events":e.created},attrs:{color:"blue",height:"37px",width:"100%",block:"",outlined:""}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"15",color:"blue"}},[e._v("$vuetify.icons.custom_upload")]),t("span",{staticClass:"group-text"},[e._v(e._s(e.$t("external_controls.lives_upload")))]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadLives",refInFor:!0,attrs:{type:"file",accept:"application/pdf,application/vnd.ms-excel"}})],1)],1),t("div",{staticClass:"save-group mb-4",class:{"disabled-events":!e.enabled}},[t(r["a"],{attrs:{color:"primary",width:"100%",block:""}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)])})),0):e._e()},eL=[],tL={props:["id"],data(){return{error:!1,invalid:!1,fileUrl:null,lives:!1,enabled:!1,created:!0,newGroup:!1,name:"",token:this.$store.state.Data.User.token,groupsList:[]}},created(){this.id&&this.listGroups(),this.$bus.on("new-group-created",()=>{this.listGroups()})},beforeDestroy(){},methods:{listGroups(){let e={company_id:this.id};ti.getGroups(e).then(e=>{this.groupsList=e.group_list,this.$store.dispatch(this.$consts.COMPANY_ACTIONS.SET_GROUPS,this.groupsList)}).catch(e=>console.error(e))}}},aL=tL,nL=(a("720f"),Object(I["a"])(aL,zg,eL,!1,null,null,null)),iL=nL.exports,sL={props:["item"],components:{GroupsList:iL},data(){return{groups:[{group:null}],error:!1,invalid:!1,fileUrl:null,lives:!1,enabled:!1,created:!1,newGroup:!1,id:null,name:"",token:this.$store.state.Data.User.token,add:!1}},created(){this.$bus.on("enable-groups",e=>{this.id=e,this.created=!0})},beforeDestroy(){this.$bus.off("enable-groups")},methods:{addGroup(){this.add=!0},removeGroup(){this.add=!1,this.name="",this.filename=null,this.$v.$reset()},assetCreate(){this.invalid=!1,this.saved=!1,this.file=event.target.files[0];let e=this.file.name,t=e.substr(e.length-4);this.invalid="xlsx"!=t;let a={token:this.token,file:this.file};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,a).then(t=>{this.filename=t.data[e].completeUrl,this.enabled=!0,this.lives=!0})},createGroup(){if(this.$v.$touch(),!this.$v.$invalid){let e={token:this.token,company_id:this.id,filepath:this.filename,name:this.name,is_partner_group:!1};this.$store.dispatch(this.$consts.USER_ACTIONS.GROUP_CREATE,e).then(e=>{this.saved=!0,this.add=!1,this.sendGroupInfo(),this.name="",this.filename=null,this.$v.$reset()}).catch(e=>{})}},sendGroupInfo(){this.$bus.emit("new-group-created")}},validations:{name:{required:Ae["required"]},filename:{required:Ae["required"]}},computed:{nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),e):e},fileErrors(){const e=[];return this.$v.filename.$dirty?(!this.$v.filename.required&&e.push(this.$t("access_controls.required")),e):e}}},oL=sL,rL=(a("ceae"),Object(I["a"])(oL,Wg,Xg,!1,null,null,null)),lL=rL.exports,cL=function(){var e=this,t=e._self._c;return t("div",{staticClass:"save-client-component",class:{"disabled-events":!e.enabled}},[e.message?t("div",{staticClass:"message mb-2"},[e._v("\n    "+e._s(e.$t("external_controls.company_successful"))+"\n  ")]):e._e(),t(r["a"],{attrs:{color:"primary",width:"100%",block:""},on:{click:function(t){return e.saveData()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)},dL=[],mL={data(){return{enabled:!1,companyData:null,products:null,message:!1}},created(){this.$bus.on("company-contract",e=>{this.companyData=e}),this.$bus.on("enable-save-button",()=>{this.enabled=!0}),this.$bus.on("product-data",e=>{this.products=e}),this.$bus.on("edit-company-contract",()=>{this.enabled=!0}),this.$bus.on("edit-company-programs",e=>{this.products=e})},methods:{saveData(){let e=this.companyData;e.token=this.$store.state.Data.User.token,this.products&&(e.programs=this.products),this.companyData.filename?this.$store.dispatch(this.$consts.USER_ACTIONS.COMPANY_CREATE,e).then(e=>{let t=e.data.company_info.id;this.enabled=!1,this.message=!0,this.$bus.emit("enable-groups",t),this.$bus.emit("company-created"),this.closeTab()}).catch(e=>{}):this.$bus.emit("missing-contract")},closeTab(){setTimeout(()=>{this.$bus.emit("confirm-new-company-close")},3e3)}}},uL=mL,AL=(a("aa8c"),Object(I["a"])(uL,cL,dL,!1,null,"44b99c4e",null)),_L=AL.exports,EL=function(){var e=this,t=e._self._c;return t("div",{staticClass:"delete-client-component"},[t(r["a"],{attrs:{color:"blue",width:"100%",outlined:"",block:""}},[t(at["a"],{attrs:{size:"18"}},[e._v("$vuetify.icons.custom_delete")]),t("span",{staticClass:"delete-text"},[e._v(e._s(e.$t("external_controls.delete")))])],1)],1)},IL=[],hL={},OL=hL,pL=(a("1109"),Object(I["a"])(OL,EL,IL,!1,null,"01c28477",null)),SL=pL.exports,CL=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"lives-section"},[t(l["a"],{staticClass:"lives-card-section"},[t(c["c"],{staticClass:"lives-title white--text"},[t("span",{staticClass:"l-title"},[e._v(e._s(e.$t("attendance.nav_confirm")))]),t("img",{staticClass:"lives-close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),t(c["b"],{staticClass:"lives-card-desc text-justify mb-3"},[e._v(e._s(e.$t("external_controls.lives_upload_confirmation")))]),t(c["a"],{staticClass:"lives-buttons"},[t(r["a"],{staticClass:"white--text confirm",attrs:{color:"primary",height:"37px",width:"226px"},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("external_controls.got_it")))])],1)],1)],1)])],1)},TL=[],RL={components:{},data(){return{dialog:!1,item:null,data:null}},created(){this.$bus.on("lives-upload-successful",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("lives-upload-successful")},methods:{}},DL=RL,gL=(a("4d32"),Object(I["a"])(DL,CL,TL,!1,null,null,null)),LL=gL.exports,fL={props:["disabled"],components:{NewCompany:Vg,CompanyContract:qg,ProductList:Jg,GroupsRegister:lL,SaveComponent:_L,ConfirmUploadComponent:LL},data(){return{edit:!1,create:!1,company_id:null,company:null,created:!0}},created(){window.scrollTo(0,0)}},NL=fL,kL=(a("b640"),Object(I["a"])(NL,gg,Lg,!1,null,"3bc2447a",null)),vL=kL.exports,bL=function(){var e=this,t=e._self._c;return t("div",[t("OperationControl",{attrs:{item:e.item}}),t("ThemesControl"),t("LineControl"),t("ProgramControl")],1)},ML=[],PL=function(){var e=this,t=e._self._c;return t("div",{staticClass:"operation-controls"},[t(re["a"],[t(Xn["a"],[t("div",{staticClass:"title my-5"},[e.item?t("div",{staticClass:"text"},[e.item?t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.name))]):e._e()]):t("div",{staticClass:"text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("access_controls.new")))]),e._v("\n          "+e._s(e.$t("access_controls.op_access"))+"\n        ")])]),t(re["a"],{staticClass:"mb-6"},[t("div",{staticClass:"d-flex"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(de["a"],{attrs:{label:e.$t("access_controls.user_name"),"error-messages":e.nameErrors,disabled:e.loading||e.isEdit,height:"48",maxlength:"50",outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("access_controls.user_email"),"error-messages":e.emailErrors,disabled:e.loading||e.isEdit,height:"48",outlined:""},on:{blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],attrs:{label:e.$t("access_controls.user_cpf"),loading:e.loadingCpf,disabled:e.loading||e.loadingCpf||e.isEdit,"error-messages":e.cpfErrors,height:"48",outlined:""},on:{blur:e.checkIfUserExists},model:{value:e.cpf,callback:function(t){e.cpf=t},expression:"cpf"}})],1)],1),t(l["a"],{staticClass:"d-flex justify-center overflow-hidden image-container rounded-circle mx-16",class:[e.path||e.preview?"filled text--blue":"text--davygrey"],on:{click:function(t){e.path||e.preview?e.openNavigationConfirmationModal():e.$refs.upload.click()},mouseover:function(t){e.hover=!(!e.path&&!e.preview)},mouseleave:function(t){e.hover=!1}}},[e.path||e.preview?t(le["a"],{attrs:{src:e.preview,loading:e.loading}}):t("div",{staticClass:"text-upload d-flex flex-column align-center justify-center"},[t(at["a"],{attrs:{color:"davygrey","x-large":""}},[e._v("mdi-camera")]),t("span",{staticClass:"subtitle-2"},[e._v(e._s(e.$t("access_controls.add")))]),t("span",{staticClass:"subtitle-2"},[e._v(e._s(e.$t("access_controls.photo")))])],1),e.hover?t("div",{staticClass:"hover-image d-flex flex-column align-center justify-center"},[t(at["a"],{attrs:{color:"white","x-large":""}},[e._v("mdi-delete")]),t("span",{staticClass:"subtitle-2"},[e._v(e._s(e.$t("access_controls.delete")))]),t("span",{staticClass:"subtitle-2"},[e._v(e._s(e.$t("access_controls.photo")))])],1):e._e(),t("input",{ref:"upload",attrs:{accept:"image/png, image/x-png, image/jpeg, image/jpg",type:"file",id:"image",hidden:""},on:{change:e.uploadImage}})],1)],1)]),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"2"}},[t(se["a"],{attrs:{label:"Conselho",items:e.councilList,disabled:e.loading,"item-text":"name","item-value":"id",height:"48",outlined:""},model:{value:e.professionalCouncil,callback:function(t){e.professionalCouncil=t},expression:"professionalCouncil"}})],1),t(oe["a"],{attrs:{cols:"12",md:"4"}},[t(de["a"],{attrs:{label:"N
o encontrado. Aguardado login.");const t=await D.checkSession();t.data&&t.data.error&&(clearInterval(this.sessionCheckInterval),t.data.force_logout?(console.warn("[Session] Expulsa por outra aba."),this.$bus.$emit("logout")):this.invalidSession=!0)}catch(e){console.log("[Session] Erro ao verificar sess
o encontrado. Aguardado login.");const t={user_id:this.$store.state.Data.User.info.user_info.id,user_agent:navigator.userAgent},a=await D.createSession(t);sessionStorage.setItem("session_token",a.data.data.session_token),console.log("[Session] Nova sess
o encontrado",authentication_certisign:"Autenticando m
o:",e),this.validTimeout=setTimeout(()=>{this.checkValidAuthorization()},3e3)})},formatExpirationTime(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=String(t).padStart(2,"0"),i=String(a).padStart(2,"0");return`${n}:${i}`},updateExpirationTime(){this.expirationTimeInSeconds=(this.$store.state.Data.DigitalCertification.tokenExpiresAt-Date.now())/1e3,this.expirationTimeToken=this.formatExpirationTime(this.expirationTimeInSeconds),this.setIntervalReference=setInterval(()=>{this.expirationTimeInSeconds--,this.expirationTimeInSeconds<=0&&(clearInterval(this.setIntervalReference),this.setIntervalReference=null,this.expirationTimeInSeconds=0),this.expirationTimeToken=this.formatExpirationTime(this.expirationTimeInSeconds)},1e3)},formatPhoneNumber(e){return String(e).replace(/\D/g,"")},startValidTimer(){this.validTimer=setTimeout(()=>{this.cancelDigitalCertification()},this.validTimerLimit)},validateCheckbox(){this.phoneError="",this.whatsapp&&!this.phone&&(this.phoneError="Por favor, insira um n
o informado"}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},OD=hD,pD=(a("0ab7"),Object(I["a"])(OD,ED,ID,!1,null,null,null)),SD=pD.exports,CD=function(){var e=this,t=e._self._c;return t("div",{staticClass:"player-tb"},[t("div",{staticClass:"d-flex justify-space-between mb-8"},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.registry")))]),e._v(" "+e._s(e.$t("controls.payer2"))+"\n        ")]),e.loading?e._e():t("div",{staticClass:"search"},[t(de["a"],{staticClass:"search-field",attrs:{height:"26px",placeholder:e.$t("controls.search"),"error-messages":e.searchListErrors,outlined:""},on:{blur:e.$v.searchParam.$touch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList.apply(null,arguments)}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"30px",width:"45px",color:"primary",tile:"",depresse:"",disabled:e.$v.searchParam.$invalid},on:{click:e.searchList}},[t(at["a"],{attrs:{color:"white",size:"20"}},[e._v("search")])],1)],1)]),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.payers,page:e.pagination.currentPage,"items-per-page":e.limit,"no-data-text":e.$t("controls.noDataAvailable"),"hide-default-footer":""},on:{"update:page":function(t){return e.$set(e.pagination,"currentPage",t)}},scopedSlots:e._u([{key:"item.payer",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(a.nick_name||a.name))])]}},{key:"item.created_at",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(e._f("formatDate")(a.created_at)))])]}},{key:"item.updated_at",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(e._f("formatDate")(a.updated_at)))])]}},{key:"item.actions",fn:function({item:a}){return[e.canEdit?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.editPayer(a)}}},[t("span",{staticClass:"add-payer"},[e._v(e._s(e.$t("controls.edit")))])]):e._e()]}}])}),e.pagination.pageCount>1?t(_t["a"],{staticClass:"pagination",attrs:{"total-visible":e.limit,length:e.pagination.pageCount},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),t("div",{staticClass:"mb-10 mt-4 payer"},[e.canCreate?t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",width:"282px",outlined:""},on:{click:e.addPayer}},[t("div",{staticClass:"btn-tx"},[t("span",{staticClass:"add-payer"},[e._v(e._s(e.$t("controls.add_payer_btn")))])])]):e._e()],1)])},TD=[],RD={mixins:[ve],data(){return{loading:!1,searchParam:"",payers:[],loading:!1,item:"payer",total:0,limit:10,offset:0,canEdit:!1,canCreate:!1,headers:[{text:this.$t("controls.payer"),align:"start",value:"payer"},{text:this.$t("controls.created_at"),align:"start",value:"created_at"},{text:this.$t("controls.updated_at"),align:"start",value:"updated_at"},{text:this.$t("controls.action"),align:"center",value:"actions",sortable:!1}],pagination:{pageCount:0,currentPage:1}}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.payers.update","manage.internalPayers.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.payers.create","manage.internalPayers.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listPayers(),this.$bus.on("confirm-close-new-payer",()=>{this.listPayers()}),this.$bus.on("confirm-close-edit-payer",()=>{this.listPayers()}),this.$bus.on("empty-payer-search",()=>{this.listPayers()})},methods:{searchList(){if(this.offset=0,!this.searchParam)return this.listPayers();this.loading=!0;let e={name:this.searchParam,limit:this.limit,offset:this.offset,redux:!1};be.listPayers(e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.payers=e.data.payer_list}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},listPayers(){this.loading=!0,be.listPayers({}).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.payers=e.data.payer_list}).catch(e=>{console.error(e)}).finally(e=>{this.loading=!1})},editPayer(e){this.$bus.emit("edit-payer",e)},addPayer(){this.$bus.emit("add-new-payer",this.item)},getPage(e){let t=1==e?this.offset:(e-1)*this.limit,a={limit:this.limit,offset:t};be.listPayers(a).then(t=>{this.pagination.pageCount=totalPages%this.limit==0?totalPages:parseInt(totalPages)+1,this.pagination.currentPage=e,this.payers=t.data.payer_list}).catch(e=>{console.error(e)})},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{searchListErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},filters:{formatDate:function(e){let t=e.substr(8,2),a=e.substr(5,2),n=e.substr(0,4);return`${t}/${a}/${n}`}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},DD=RD,gD=(a("3ee3"),Object(I["a"])(DD,CD,TD,!1,null,null,null)),LD=gD.exports,fD=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lists-tb"},[t("div",{staticClass:"d-flex justify-space-between mb-8"},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.registry")))]),e._v(" "+e._s(e.$t("controls.reason_call"))+"\n        ")]),e.loading?e._e():t("div",{staticClass:"search"},[t(de["a"],{staticClass:"search-field",attrs:{height:"26px",placeholder:e.$t("controls.search"),"error-messages":e.searchListErrors,outlined:""},on:{blur:e.$v.searchParam.$touch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList.apply(null,arguments)}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"30px",width:"45px",color:"primary",tile:"",depresse:"",disabled:e.$v.searchParam.$invalid},on:{click:e.searchList}},[t(at["a"],{attrs:{color:"white",size:"20"}},[e._v("search")])],1)],1)]),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.items,page:e.pagination.currentPage,"items-per-page":e.limit,"no-data-text":e.$t("controls.noDataAvailable"),"hide-default-footer":""},on:{"update:page":function(t){return e.$set(e.pagination,"currentPage",t)}},scopedSlots:e._u([{key:"item.name",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[a.user_info?t("span",[e._v(e._s(a.user_info.name))]):e._e()])]}},{key:"item.created_at",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(e._f("formatDate")(a.created_at)))])]}},{key:"item.updated_at",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(e._f("formatDate")(a.updated_at)))])]}},{key:"item.errors",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[t("span",{staticClass:"errors text-center"},[e._v(e._s(a.general_stats.errors)+" "+e._s(e.$t("controls.inconsistencies")))])])]}},{key:"item.actions",fn:function({item:a}){return[e.canEdit?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.editReason(a)}}},[t("span",{staticClass:"add-new"},[e._v(e._s(e.$t("controls.get_access")))])]):e._e()]}}])}),e.pagination.pageCount>1?t(_t["a"],{staticClass:"pagination",attrs:{"total-visible":e.limit,length:e.pagination.pageCount},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),t("div",{staticClass:"mb-10 mt-4"},[e.canCreate?t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",width:"282px",outlined:""},on:{click:function(t){return e.addReason()}}},[t("div",{staticClass:"btn-tx"},[t("span",{staticClass:"add-new"},[e._v(e._s(e.$t("controls.add_new_btn")))])])]):e._e()],1)])},ND=[],kD={mixins:[ve],data(){return{loading:!1,searchParam:"",item:"newReason",items:[],limit:10,offset:0,canEdit:!1,canCreate:!1,headers:[{text:this.$t("controls.reason_name"),align:"start",value:"title"},{text:this.$t("controls.creator"),align:"start",value:"name"},{text:this.$t("controls.created_at"),align:"start",value:"created_at"},{text:this.$t("controls.updated_at"),align:"start",value:"updated_at"},{text:this.$t("controls.status"),align:"start",value:"status"},{text:this.$t("controls.action"),align:"center",value:"actions",sortable:!1}],pagination:{pageCount:0,currentPage:1}}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.internalCallReasons.update","manage.callReasons.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.internalCallReasons.create","manage.callReasons.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listReasons(),this.$bus.on("empty-reason-search",()=>{this.listReasons()}),this.$bus.on("update-reason-list",()=>{this.listReasons()})},methods:{searchList(){if(this.offset=0,!this.searchParam)return this.listReasons();this.loading=!0;let e={token:this.$store.state.Data.User.token,search:this.searchParam,limit:this.limit,offset:this.offset,redux:!1};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_REASON_LIST,e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.items=e.data.info}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},listReasons(){this.loading=!0;let e=this.$store.state.Data.User.token,t={token:e,limit:this.limit,offset:this.offset};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_REASON_LIST,t).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.items=e.data.info}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getPage(e){let t=this.$store.state.Data.User.token,a=1==e?this.offset:(e-1)*this.limit,n={token:t,limit:this.limit,offset:a};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_REASON_LIST,n).then(t=>{let a=t.data.total/this.limit;this.pagination.pageCount=a%this.limit==0?a:parseInt(a)+1,this.pagination.currentPage=e,this.items=t.data.info}).catch(e=>{console.error(e)})},addReason(){this.$bus.emit("new-reason",this.item)},editReason(e){this.$bus.emit("edit-reason-call",e)},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{searchListErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},filters:{formatDate:function(e){if(e){let t=e.substr(8,2),a=e.substr(5,2),n=e.substr(0,4);return`${t}/${a}/${n}`}return"N
olas e dos capilares em doen
o...");let e={cluster:"mt1",forceTLS:!0};Object({NODE_ENV:"production",VUE_APP_API_URL:"https://api.homolodoc.com.br",VUE_APP_SITE_KEY:"6LeymuIUAAAAAG4Lf7TVnRT4XrBSDotx5Q0Ic2Gg",VUE_APP_SOCKET_URL:"https://beam.homolodoc.com.br",VUE_APP_SOCKET_DEBUG:"false",VUE_APP_ATTENDANCE_QUEUE_URL:"https://vanellope.homolodoc.com.br",VUE_APP_WORKER:"https://worker.homolodoc.com.br",VUE_APP_UNLEASH_API_URL:"https://proxy.unleash.homolodoc.com.br/proxy",VUE_APP_UNLEASH_CLIENT_KEY:"default:development.04060323ba956cce068107b159a0cf0c0c693df8063186b07d7e031a",VUE_APP_APPLICATION_NAME:"test",VUE_APP_ENVIRONMENT:"test",VUE_APP_FEATURE_AUTO_SERVICE_QUEUE:"false",VUE_APP_PUSHER_APP_KEY:"fb7cddbdae348b4e5af3",VUE_APP_PUSHER_CLUSTER:"mt1",BASE_URL:"/"}).VUE_APP_PUSHER_CHECKER&&(e={cluster:"mt1",activityTimeout:1e4,pongTimeout:1e4,forceTLS:!0}),this.pusher=new PC.a("fb7cddbdae348b4e5af3",e);const t=this.pusher.connection;Object({NODE_ENV:"production",VUE_APP_API_URL:"https://api.homolodoc.com.br",VUE_APP_SITE_KEY:"6LeymuIUAAAAAG4Lf7TVnRT4XrBSDotx5Q0Ic2Gg",VUE_APP_SOCKET_URL:"https://beam.homolodoc.com.br",VUE_APP_SOCKET_DEBUG:"false",VUE_APP_ATTENDANCE_QUEUE_URL:"https://vanellope.homolodoc.com.br",VUE_APP_WORKER:"https://worker.homolodoc.com.br",VUE_APP_UNLEASH_API_URL:"https://proxy.unleash.homolodoc.com.br/proxy",VUE_APP_UNLEASH_CLIENT_KEY:"default:development.04060323ba956cce068107b159a0cf0c0c693df8063186b07d7e031a",VUE_APP_APPLICATION_NAME:"test",VUE_APP_ENVIRONMENT:"test",VUE_APP_FEATURE_AUTO_SERVICE_QUEUE:"false",VUE_APP_PUSHER_APP_KEY:"fb7cddbdae348b4e5af3",VUE_APP_PUSHER_CLUSTER:"mt1",BASE_URL:"/"}).VUE_APP_PUSHER_CHECKER&&(t.bind("connecting",()=>{this.reconnectingPusher?(console.log("
o...");let e=sessionStorage.getItem("token");if(!e)return void console.warn("[Session] Token n
o"},model:{value:e.selectedExpirationTime,callback:function(t){e.selectedExpirationTime=t},expression:"selectedExpirationTime"}}),e.checkFailed?t(St["a"],{staticClass:"checkbox-valid mb-3",attrs:{label:e.$t("attendance.test_failed")},model:{value:e.test_failed,callback:function(t){e.test_failed=t},expression:"test_failed"}}):e._e()],1)],1):e.selectCertisign&&!e.authenticationError?t("div",[t("div",{staticClass:"certisign-container"},[t(c["b"],{staticClass:"certisign-description-text pr-0 pl-0 pb-3 pt-3"},[e._v("\n                "+e._s(e.$t("home.digital_certification_certisign_description"))+"\n              ")]),t(de["a"],{staticClass:"pin-field mt-1 mr-0 ml-0",attrs:{height:"66px",width:"600px",label:e.$t("patient.type_pin"),type:e.visible?"password":"text","error-messages":e.authErrors,"append-icon":e.visible?"visibility":"visibility_off",outlined:""},on:{blur:function(t){return e.$v.pin.$touch()},"click:append":function(t){e.visible=!e.visible}},model:{value:e.pin,callback:function(t){e.pin=t},expression:"pin"}}),e.checkFailed?t(St["a"],{staticClass:"checkbox-certisign",attrs:{label:e.$t("attendance.test_failed")},model:{value:e.test_failed,callback:function(t){e.test_failed=t},expression:"test_failed"}}):e._e(),t(St["a"],{staticClass:"checkbox-certisign mt-1",attrs:{label:"Enviar Documentos via Whatsapp"},on:{change:e.validateCheckbox},model:{value:e.whatsapp,callback:function(t){e.whatsapp=t},expression:"whatsapp"}}),e.whatsapp?t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],staticClass:"mr-0 ml-0 pin-field mt-1 small-label",attrs:{height:"66px",width:"571px",label:"N
o\n  "),e._l(e.callReasonInfo,(function(a){return t("div",{staticClass:"call-reason-title"},[t(St["a"],{staticClass:"checkbox-call-reason",attrs:{label:a.title,disabled:!0,"hide-details":""},model:{value:a.status,callback:function(t){e.$set(a,"status",t)},expression:"callReason.status"}}),e._l(a.subcategories,(function(a){return t("div",{staticClass:"call-reason-title"},[t(St["a"],{staticClass:"checkbox-call-reason",attrs:{label:a.title,disabled:!0,"hide-details":""},model:{value:a.status,callback:function(t){e.$set(a,"status",t)},expression:"callReasonSub.status"}}),e._l(a.subcategories,(function(a){return t("div",{staticClass:"call-reason-title"},[t(St["a"],{staticClass:"checkbox-call-reason",attrs:{label:a.title,disabled:!0,"hide-details":""},model:{value:a.status,callback:function(t){e.$set(a,"status",t)},expression:"callReasonSubChild.status"}})],1)}))],2)}))],2)}))],2):e._e()},bE=[],ME={props:["case_attendance_id"],mixins:[ve],components:{},data(){return{callReasonInfo:[],caseAttendanceId:null}},created(){this.case_attendance_id?this.caseAttendanceId=this.case_attendance_id:this.caseAttendanceId=null!=this.$store.state.Data.CaseAttendance.info.case_attendance_id?this.$store.state.Data.CaseAttendance.info.case_attendance_id:this.$store.state.Data.CaseAttendance.info.id,this.loadCallReason()},methods:{loadCallReason(){let e=this.$store.state.Data.User.token,t={token:e,case_attendance_id:this.caseAttendanceId};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.GET_CALL_REASON,t).then(e=>{this.callReasonInfo=e.data.call_reason_info}).catch(e=>{})}},computed:{}},PE=ME,UE=(a("5f70"),Object(I["a"])(PE,vE,bE,!1,null,null,null)),yE=UE.exports,$E={name:"history-attendance",props:["item","openedCase"],components:{Patient:$s,Triage:RE,TriagemEnfermagem:to,TriagemGenericaEnfermagem:kE,TriagemInterna:Jc,CaseCallReason:yE},mixins:[ve],data(){return{loading:!1,disabled:!0,triage:!0,triageInfo:null,triageIds:[],productBlocks:null,programInfo:null,programList:null,callReasonInfo:null,blocks:[],bricks:[],snackbar:!0,timeout:0,anamnese:[],brickToIgnore:["atendimento_video"],brickDetails:{},current_product_id:null,attendance_data:{},selected_step:1,steps_length:0,screenings:{},enableSteps:[],nutritionCaseSteps:null,case_att_id:null}},created(){null!=this.item&&(this.attendance_data=this.item,this.case_att_id=this.attendance_data.id),this.$bus.on("load-case-history-attendance",e=>{this.attendance_data=null,e?(this.attendance_data=e,this.case_att_id=this.attendance_data.id,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_SELECTED_STEP,{selected_step:1}),this.getScreening(this.case_att_id),this.attendance_data.program_id?this.getProgramMap(this.attendance_data.program_id):this.attendance_data.company_id&&(this.getCallReasonsCompany(),this.getProgramByCompany(this.attendance_data.company_id))):console.error("no attendance data was found")})},destroyed(){this.$bus.off("load-case-history"),this.$bus.off("load-case-history-attendance")},methods:{...Object(K["c"])("Data/CaseAttendance",["setCaseAttendanceInfo"]),getScreening(e){this.loading=!0,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.GET_CASE_ATTENDANCE_SCREENING,{case_attendance_id:e}).then(e=>{this.screenings=e,this.$bus.emit("finished-loading-hist")}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},chooseStep(e,t){if("2"==e&&67==this.programInfo.id){let e=["emr_desfecho_psicologico","conclusao_atendimento"];for(let a in t)e.includes(a)||delete t[a]}this.$bus.emit("brick-list",t),this.selected_step=e,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_SELECTED_STEP,{selected_step:e})},chooseNutritionStep(e,t){this.loading=!0,this.brickDetails=[],Bs.getProgramBricksDataHistory(t).then(t=>{t.data.hasOwnProperty(1)&&(this.selected_step=e,this.$nextTick(()=>{this.brickDetails=t.data,this.$bus.emit("brick-list",this.brickDetails[1]),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_SELECTED_STEP,{selected_step:e})}))}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getProgramByCompany(e){let t=this.$store.state.Data.User.token,a={company_id:e,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BY_COMPANY,a).then(e=>{let t;this.bricks=[],this.bricks_info=[],this.brickDetails=[],e.data.map(e=>{e.program_info.is_screening&&(t=e)}),this.current_product_id=t.program_info.id;let a=t.program_info.id,n=t.product_brick_info[a].product_name;this.triageInfo=t.screening_info,this.programList=t.program_list,this.productBlocks=t.product_brick_info[a].brick_list,this.bricks_info=t.product_info[n].bricks||[],this.triageIds=this.getProductIds(),this.blocks=this.getTriageBlocks(),this.bricks=this.getBrickList(),null!=this.attendance_data.id?this.getProgramBricksData():this.sendBrickData(),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_SELECTED_STEP,{selected_step:1})}).catch(e=>{})},getCallReasonsCompany(){let e=this.$store.state.Data.User.token,t={company_id:this.item.company_id,token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_REASONS_COMPANY,t).then(e=>{this.callReasonInfo=e.data.call_reason_info||[]}).catch(e=>{})},getProgramMap(e){let t=this.$store.state.Data.User.token,a={program_id:e,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BRICKS,a).then(e=>{this.bricks=[],this.bricks_info=[],this.brickDetails=[];this.attendance_data.program_step;let t=[],a=null;for(let s in e.data.product_info){let n=e.data.product_info[s];1==n.step&&(t=n.bricks,a=n.name,this.current_product_id=n.id)}this.programInfo=e.data.program_info,this.programList=e.data.program_list,this.productBlocks=e.data.product_brick_info,this.bricks_info=t,this.triageIds=this.getProductIds(),this.blocks=this.getTriageBlocks(),this.bricks=this.getBrickList();let n=[];for(let s in e.data.steps){let t=s,a=e.data.steps[t],i=e.data.product_info[a];n.push({...e.data.program_info,product_id:i.id,product_name:i.name,program_step:i.step})}let i={...this.getCaseAttendanceInfo,program_information:n};this.setCaseAttendanceInfo(i),this.getProgramBricksData()}).catch(e=>{})},getProductIds(){if(this.triageInfo){let e=this.triageInfo.map(e=>e.product_id);return e}return[this.current_product_id]},getTriageBlocks(){let e=this.triageIds.map(e=>this.productBlocks[e]);return e},getBrickList(){let e=[];for(let t in this.bricks_info)this.brickToIgnore.includes(t)||e.push(this.bricks_info[t]);return e},searchBrickList(e){let t=this.bricks.filter(t=>t.key==e);return t},sendBrickData(){this.$bus.emit("brick-list-history",this.bricks),this.bricks.length>0&&this.$bus.emit("display-case-details")},getProgramBricksData(){this.enableSteps=[],this.selected_step=1,this.nutritionCaseSteps=null,Bs.getProgramBricksDataHistory(this.attendance_data.id).then(e=>{this.brickDetails=e.data,this.brickDetails.hasOwnProperty(1)&&!this.$consts.DEFAULT_PROGRAM_SAVE_FLOW_IDS.includes(this.attendance_data.program_id)&&(this.brickDetails[1].whatsapp_retry=[]);for(let t in this.brickDetails)for(let e in this.brickDetails[t])this.brickDetails[t][e].length>0&&this.enableSteps.push(t);this.$consts.DEFAULT_PROGRAM_SAVE_FLOW_IDS.includes(this.attendance_data.program_id)&&this.getNutritionSteps(),this.sendBrickData()}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getNutritionSteps(){let e={case_id:this.attendance_data.case_id,program_id:this.attendance_data.program_id};Ge.listHistory(e).then(e=>{this.nutritionCaseSteps=e.data.case_attendance_ids;let t=this.nutritionCaseSteps.findIndex(e=>e==this.attendance_data.id);this.selected_step=t,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_SELECTED_STEP,{selected_step:t})}).catch(e=>{console.error(e)})},sendBrickDataToComponent(e,t){this.$bus.emit(t,e)}},computed:{...Object(K["b"])("Data/CaseAttendance",["getCaseAttendanceInfo"])}},xE=$E,VE=(a("a44f"),Object(I["a"])(xE,Jr,Wr,!1,null,"2d493c2e",null)),GE=VE.exports,FE=function(){var e=this,t=e._self._c;return t("div",{staticClass:"history-tabs"},[t("div",[e.currentCaseAttendance?t("p",{staticClass:"attendance-number"},[e._v("\n      "+e._s(e.$t("attendance.case_attendance_id"))+": "+e._s(e.currentCaseAttendance)+" ("+e._s(e.currentCase)+") - "+e._s(e.formatedTime)+"\n    ")]):e._e(),t("Patient",{attrs:{item:e.item}}),t(ot["a"],{staticClass:"mt-16",model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[t(it["a"],[e._v(e._s(e.$t("attendance.attend_history")))]),t(it["a"],[e._v(e._s(e.$t("attendance.medical_certificates")))])],1),t(rt["a"],{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[t(st["a"],[t("HistoryTables")],1),t(st["a"],[t("MedicalCertificatesTables",{attrs:{item:e.item}})],1)],1)],1)])},BE=[],wE=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-4 mb-8"},[t("div",{staticClass:"desc mb-10 d-flex justify-end"},[t($t["a"],{staticClass:"program-select",attrs:{items:e.programs,disabled:0==e.programs.length,label:e.$t("attendance.programs"),"append-icon":"keyboard_arrow_down","item-text":"name",height:"37px","return-object":"","hide-details":"",outlined:""},model:{value:e.selectedProgram,callback:function(t){e.selectedProgram=t},expression:"selectedProgram"}}),t(de["a"],{staticClass:"search ml-3",attrs:{placeholder:e.$t("attendance.search_by_case"),"error-messages":e.searchErrors,height:"37px","hide-details":"",outlined:""},on:{blur:function(t){return e.$v.search.$touch()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchHistory()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"37px",color:"primary",tile:""},on:{click:function(t){return e.searchHistory()}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1),e.selectedProgram?t("ProgramCases",{attrs:{program:e.selectedProgram}}):e._e(),t("HistoryAttendance",{attrs:{item:e.attendance_data,openedCase:e.opened_case}})],1)},HE=[],qE=function(){var e=this,t=e._self._c;return t("div",{staticClass:"program-cases mt-4 mb-8 px-2 py-4 rounded"},[t("div",[t("p",{staticClass:"program-name mb-0"},[e._v(e._s(e.program.name))])]),e.loading?t("div",{staticClass:"ld-icon"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t($a["a"],{staticClass:"hist-table mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("patient.case")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("patient.client")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("patient.triage")))]),t("th",{staticClass:"text-center table-column"},[e._v("\n              "+e._s(e.$t("patient.professional"))+"\n            ")]),t("th",{staticClass:"text-center table-column"},[e._v(e._s(e.$t("patient.status")))]),t("th",{staticClass:"text-center table-column"},[e._v("\n              "+e._s(e.$t("patient.last_apt"))+"\n            ")]),t("th",{staticClass:"text-center table-column"},[e._v(e._s(e.$t("patient.step")))]),t("th",{staticClass:"text-center table-column"},[e._v(e._s(e.$t("patient.action")))])])]),t("tbody",[e._l(e.cases,(function(a,n){return t("tr",{key:n,staticClass:"data-separator"},[t("td",{staticClass:"text-center table-data"},[e._v(e._s(a.case_id))]),t("td",{staticClass:"text-center table-data"},[e._v("\n              "+e._s(e.companiesInfo[a.company_id]?e.companiesInfo[a.company_id].name:"")+"\n            ")]),t("td",{staticClass:"text-center table-data"},[e._v("\n              "+e._s(null==e.formatResponsableAttendant(a.screening_attendant_id)?e.$t("attendance.no_one"):e.formatResponsableAttendant(a.screening_attendant_id))+"\n            ")]),t("td",{staticClass:"text-center table-data"},[e._v("\n              "+e._s(null==e.formatResponsable(a)?e.$t("attendance.no_one"):e.formatResponsable(a))+"\n            ")]),t("td",{staticClass:"text-center table-data"},[e._v("\n              "+e._s(e.$t("attendance."+e.formatStatusName(a.status_name)))+"\n            ")]),t("td",{staticClass:"text-center table-data"},[e._v("\n              "+e._s(e.formatDate(a.due_date,a.due_time))+"\n            ")]),t("td",{staticClass:"text-center table-data"},[e._v(e._s(e.formatStep(a)))]),t("td",{staticClass:"text-center table-data"},[a.more_information?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary",disabled:e.loadingCase},on:{click:function(t){return e.access(a)}}},[t("span",{staticClass:"edit-op font-access"},[e._v("\n                  "+e._s(e.$t("patient.access"))+"\n                ")])]):e._e()],1)])})),e.cases?e._e():t("p",{staticClass:"no_cases"},[e._v(e._s(e.$t("patient.no_cases")))])],2)]},proxy:!0}])}),e.total>10?t(_t["a"],{staticClass:"pagination",attrs:{length:e.pagination.pages,"total-visible":"10"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.prevPage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1)])},YE=[],jE={name:"ProgramCases",props:["program"],data(){return{loading:!1,loadingCase:!1,cases:[],casesIds:[],userInfo:[],companiesInfo:{},limit:10,search:"",offset:0,total:0,pagination:{pages:0,currentPage:1}}},created(){this.$bus.on("history-search-button",e=>{this.search=e,this.offset=0,this.pagination.currentPage=1,this.getPage()}),this.$bus.on("finished-loading-hist",e=>{this.loadingCase=!1})},mounted(){this.getPage()},methods:{formatStep(e){let t=e.program_step_total||1;return`${e.program_step} ${this.$t("patient.of")} ${t}`},access(e){this.loadingCase=!0,e.member_id=this.$store.state.Data.Patient.info.id,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET,e),this.$bus.emit("load-case-history",e),this.$bus.emit("open-history-mode",e)},formatStatusName(e){return null===e?"none_status":(e=e.replace(/ /g,"_"),e.toLowerCase())},formatDate(e,t){if(null===e)return"-";e=e.split("00:00:00")[0];let a=Ot.a.tz(e+" "+t,"utc");return a.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},formatResponsableAttendant(e){if(null==e)return null;let t=this.userInfo.find(t=>t.id===e);return null==t?null:t.name},formatResponsable(e){if(null==e.attendant_id||null==e.doctor_id)return null;let t=this.userInfo.find(t=>t.id===e.attendant_id);return null==t&&(t=this.userInfo.find(t=>t.id===e.doctor_id)),null==t?null:t.name},resetList(){this.cases=null,this.casesIds=[],this.userInfo=[],this.companiesInfo={},this.total=0,this.pagination.pages=0},getPage(){this.loading=!0;let e={search:this.search,limit:this.limit,offset:this.offset,program_id:this.program.id,member_id:null==this.$store.state.Data.Patient.info?this.$store.state.Data.CaseAttendance.info.member_id:this.$store.state.Data.Patient.info.id};Ge.getPatientHistoric(e).then(e=>{null!==e.data?(this.cases=e.data.case_attendances_info,this.casesIds=e.data.case_attendances_ids,this.userInfo=e.data.user_info,this.companiesInfo=e.data.company_info,this.total=e.data.pagination.total,this.pagination.pages=Math.ceil(e.data.pagination.total/10)):this.resetList()}).catch(e=>{console.error(e),this.resetList()}).finally(()=>{this.search="",this.loading=!1})},changePage(){this.offset=10*this.pagination.currentPage-10,this.getPage(this.pagination.currentPage)},prevPage(){1!==this.pagination.currentPage&&(this.offset=10*this.pagination.currentPage-10,this.getPage(this.pagination.currentPage))},nextPage(){this.pagination.currentPage!==Math.ceil(this.total/10)&&(this.offset=10*this.pagination.currentPage-10,this.getPage(this.pagination.currentPage))}},watch:{program(e){this.offset=0,this.pagination.currentPage=1,this.getPage()}}},KE=jE,ZE=(a("8b93"),Object(I["a"])(KE,qE,YE,!1,null,null,null)),QE=ZE.exports,JE={getMemberPrograms(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_MEMBER_PROGRAMS,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getMemberContactTimes(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.GET_MEMBER_CONTACT_TIMES,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getCivilStates(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.GET_CIVIL_STATES,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getScholarships(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.GET_SCHOLARSHIPS,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getDeficiencies(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.GET_DISABILITY,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getDisability(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.GET_DISABILITY,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})}},WE={components:{ProgramCases:QE,HistoryAttendance:GE},data(){return{selectedProgram:null,programs:[],search:"",opened_case:!0,attendance_data:null}},created(){this.$bus.on("load-case-history",e=>{this.opened_case=!0,this.attendance_data=e,this.$bus.emit("load-case-history-attendance",this.attendance_data)}),this.$bus.on("display-case-details",e=>{this.opened_case=!0}),this.$bus.on("load-history",()=>{let e=null==this.$store.state.Data.Patient.info?this.$store.state.Data.CaseAttendance.info.member_id:this.$store.state.Data.Patient.info.id;JE.getMemberPrograms({member_id:e}).then(e=>{this.programs=e.data.programs_info,this.programs.length>0&&(this.selectedProgram=this.programs[0])}).catch(e=>{console.error(e)})}),this.opened_case=!1,this.$bus.emit("load-history")},beforeDestroy(){this.$bus.off("load-history"),this.$bus.off("load-case-history"),this.$bus.off("display-case-details")},methods:{searchHistory(){this.$v.$touch(),this.$v.$invalid||this.$bus.emit("history-search-button",this.search)},checkPermission(){let e=JSON.parse(localStorage.getItem("user-info"));if(e.role_info&&e.role_info.funcionality_privilegies){const t=e.role_info.funcionality_privilegies.filter(e=>R.INTERNAL_PRIVILEGES_HISTORY.includes(e.key));if(t.length>0&&e.user_info&&e.user_info.programs){const t=e.user_info.programs.map(e=>e.id);this.programs=this.programs.filter(e=>t.includes(e.id))}}}},computed:{searchErrors(){const e=[];return this.$v.search.$dirty?(!this.$v.search.numeric&&e.push(this.$t("attendance.invalid_numeric_search")),e):e}},validations:{search:{numeric:Ae["numeric"]}}},XE=WE,zE=(a("de03"),Object(I["a"])(XE,wE,HE,!1,null,null,null)),eI=zE.exports,tI=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"medical-certificates rounded mt-10 py-4 px-1"},[t(At["a"],{staticClass:"medical-certificates-table",attrs:{headers:e.headers,items:e.certificates,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function({props:a}){return[t("tr",e._l(a.headers,(function(a){return t("th",{staticClass:"header-info"},[t("button",{staticClass:"header-button white--text d-flex justify-center",class:[e.hover==a.header||e.order.column==a.header?"px-2":"px-4"],on:{click:function(t){return e.orderingCertificates(a.header,"asc")},mouseover:function(t){return e.setHeaderHover(a.header)},mouseleave:function(t){return e.setHeaderHover(null)}}},[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:e.hover==a.header||e.order.column==a.header,expression:"hover == itemHeader.header || order.column == itemHeader.header"}],attrs:{color:"white",small:""}},[e._v("\n                "+e._s(e.order.order&&"desc"==e.order.order?"arrow_downward":"arrow_upward")+"\n              ")]),e._v("\n              "+e._s(e.$t("attendance."+a.translation))+"\n            ")],1)])})),0)]}},{key:"item",fn:function(a){return[t("tr",[t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(e.formatDate(a.item)))])]),t("td",[t("span",[e._v(e._s(a.item.certificate.Texto))])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(e.formatDays(a.item)))])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.item.program_name))])]),t("td",[t("span",[e._v("\n              "+e._s(a.item.cid_code||a.item.certificate.cid)+e._s(a.item.cid_name?" - "+a.item.cid_name:"")+"\n            ")])])])]}}])})],1),e.totalPages>0?t(_t["a"],{staticClass:"pagination my-2",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1)},aI=[],nI={props:["item"],components:{},data(){return{loading:!1,increment:!1,count:0,hover:null,headers:[{header:"emition_date",translation:"emition_date"},{header:"summary",translation:"summary"},{header:"removal_days",translation:"removal_days"},{header:"program_name",translation:"program_name"},{header:"cid",translation:"cid"}],order:{order:"desc"},certificates:[],pagination:{pages:0,currentPage:1},limit:10,offset:0,total:0,pages:0}},created(){this.getCertificates()},methods:{setHeaderHover(e=null){this.hover=e},formatDate(e){if(!e.start_date&&!e.created_at&&!e.certificate.DataInicio)return"-";let t=e.start_date||e.certificate.DataInicio;return this.$moment(t||e.created_at).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).utc().format("DD/MM/YYYY")},formatDays(e){if(e.removal_days)return e.removal_days;let t=e.start_date||e.certificate.start_date,a=e.end_date||e.certificate.end_date;if(e.certificate){if(e.certificate.Periodo)return e.certificate.Periodo;t=e.certificate.start_date||e.certificate.DataInicio,a=e.certificate.end_date||e.certificate.DataTermino}if(!t||!a)return 0;let n=this.$moment(a).diff(this.$moment(t),"days");return this.$moment(t).isSame(a)?1:n},changePage(){this.getPage(this.pagination.currentPage)},getPage(e){this.offset=1==e?0:(e-1)*this.limit,this.getCertificates()},getCertificates(){this.loading=!0;let e={member_id:this.item.member_id,company_id:this.item.company_id,limit:this.limit,offset:this.offset,order_by:{column:"emition_date",order:"desc"}};this.order.column&&this.order.order&&(e.order_by=this.order),Qt.getMedicalCertificates(e).then(e=>{this.certificates=e.data.attests.map(e=>{try{e.certificate=e.certificate?JSON.parse(e.certificate):""}catch(t){e.certificate=""}return e}),this.total=e.data.total}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},orderingCertificates(e,t){(!this.order.column||this.order.column&&this.order.column!=e)&&(this.order.column=e,this.increment=!1,this.count=0),this.offset=0,this.order.order=t,"asc"!=t||this.increment?this.increment&&this.count<2?(this.order.order="desc",this.count++):(this.count=0,this.order=[],this.hover=null,this.increment=!1):(this.increment=!0,this.count++),this.getCertificates()}},computed:{totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total}}},iI=nI,sI=(a("d8d9"),Object(I["a"])(iI,tI,aI,!1,null,null,null)),oI=sI.exports,rI={name:"HistoryTabs",props:["item"],components:{Patient:$s,HistoryTables:eI,MedicalCertificatesTables:oI},data(){return{currentCaseAttendance:"",currentCase:"",formatedTime:"",model:0}},created(){let e=Object.assign({},this.$route.query);if(e.attend&&(delete e.attend,this.$router.replace({query:e}),this.model=1),this.$bus.emit("load-history"),this.item.due_date&&this.item.due_time){let e=Ot.a.tz(`${this.item.due_date} ${this.item.due_time}`,"UTC");this.formatedTime=e.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM HH:mm")}this.currentCaseAttendance=this.$store.state.Data.CaseAttendance.info.case_attendance_id,this.currentCase=this.$store.state.Data.CaseAttendance.info.case_id}},lI=rI,cI=(a("694f"),Object(I["a"])(lI,FE,BE,!1,null,"61adf3e6",null)),dI=cI.exports,mI=a("2db4"),uI=function(){var e=this,t=e._self._c;return t("div",{staticClass:"doctor-patient-main"},[t("AddAttemptModal"),t("div",{class:{"disabled-events":e.disabled}},[t("CanceledWarning",{attrs:{alertMessage:e.alertMessage,showAlert:e.showAlert}}),t("NotSuccessModal"),t("p",{staticClass:"attendance-number"},[e._v("\n      "+e._s(e.$t("attendance.case_attendance_id"))+": "+e._s(e.currentCaseAttendance)+" ("+e._s(e.currentCase)+") - "+e._s(e.formatedTime)+"\n    ")]),t("Patient",{attrs:{item:e.attendanceInformation}}),e.attendance_proccess?e._e():t("CallCount",{attrs:{item:e.attendanceInformation}}),e.attendance_proccess&&!e.hasVideo?t("CallAttempts"):e._e(),t("CaseCallReason",{attrs:{case_attendance_id:e.currentCaseAttendance}}),e.allowVivo?t("DisponibilidadeVivo",{attrs:{brickDetails:e.brickDetails}}):e._e(),t("TriagemEnfermagem",{class:{"disabled-events":e.certificationPending},attrs:{brickDetails:e.screenings}}),t("Triage",{class:{"disabled-events":e.certificationPending},attrs:{bricks:e.bricks,brickDetails:e.brickDetails,item:e.attendanceInformation}}),null!=e.programList?t("Programs",{attrs:{programList:e.programList}}):e._e(),t("SaveComponent",{attrs:{brickDetails:e.brickDetails,attendanceProccess:e.attendance_proccess,saveType:e.saveType,item:e.attendanceInformation}}),e.hasConcludeComponent?t("ConcludeComponent",{class:{"disabled-events":e.cancelDisable},attrs:{saveType:e.saveType}}):e._e(),e.attendance_proccess?t("CancelComponent",{class:{"disabled-events":e.cancelDisable},attrs:{saveType:e.saveType}}):e._e(),e.attendance_proccess&&!e.hasVideo?t("InsucessComponent"):e._e()],1),t("ModalProgramScheduler"),e.autoQueueFlag?e._e():t("div",{staticClass:"snack"},[t(mI["a"],{staticClass:"main-snack",attrs:{timeout:e.timeout,left:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.$t("patient."+e.message))+"\n      "),e.loading||e.processingData?e._e():t(r["a"],{attrs:{text:"",disabled:e.locked},on:{click:e.closeAttendance}},[t("span",{staticClass:"snackbar-btns"},[e._v(e._s(e.$t("patient.no")))])]),e.loading||e.processingData?e._e():t(r["a"],{attrs:{text:"",disabled:e.locked},on:{click:e.startAttendance}},[t("span",{staticClass:"snackbar-btns"},[e._v(e._s(e.$t("patient.yes")))])]),e.loading||e.processingData?t(nt["a"],{attrs:{indeterminate:"",color:"primary"}}):e._e()],1)],1),e.autoQueueFlag?t("div",{staticClass:"new_snack"},[t(mI["a"],{directives:[{name:"show",rawName:"v-show",value:e.showSnackbar,expression:"showSnackbar"}],staticClass:"auto-main-snack",style:{zIndex:44e3},attrs:{attach:"body",timeout:e.timeout,left:"",color:"#444444"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e.loading||e.processingData?e._e():t("div",{staticClass:"auto-main-snack-first-line"},[t("p",{staticClass:"auto-main-snack-text ma-0"},[e._v(e._s(e.$t("attendance.auto_queue_snackbar.title")))])]),e.loading||e.processingData?e._e():t("div",{class:{"auto-main-snack-second-line":"immediate care"===e.careType,"auto-main-snack-second-line-less-button":"immediate care"!==e.careType}},[t(r["a"],{class:{"mr-3":"immediate care"!==e.careType},attrs:{disabled:e.loading||e.processingData||e.lockOn,height:"45px",width:"176px",color:"#5949A7"},on:{click:e.startAttendance}},[t("span",{staticClass:"auto-main-snack-btns-text"},[e._v(e._s(e.$t("attendance.auto_queue_snackbar.attend")))])]),"immediate care"===e.careType?t(r["a"],{attrs:{disabled:e.loading||e.processingData||e.lockOn,height:"45px",width:"175px",color:"#00B5E2"},on:{click:e.skipAttendance}},[t("span",{staticClass:"auto-main-snack-btns-text"},[e._v(e._s(e.$t("attendance.auto_queue_snackbar.skip_attendance")))])]):e._e(),t(r["a"],{attrs:{disabled:e.loading||e.processingData||e.lockOn,height:"45px",width:"112px",color:"#FF0000"},on:{click:e.closeAttendance}},[t("span",{staticClass:"auto-main-snack-btns-text"},[e._v(e._s(e.$t("attendance.auto_queue_snackbar.close_attendance")))])])],1),e.loading||e.processingData||"immediate care"!==e.careType?e._e():t("div",{staticClass:"auto-main-snack-third-line"},[t("p",{staticClass:"auto-main-snack-text-attendances-on-queue ma-0"},[e._v(e._s(e.$t("attendance.auto_queue_snackbar.attendances_on_queue"))+e._s(e.totalAttendancesOnQueue))])]),e.loading||e.processingData?t("div",{staticClass:"auto-main-snack-loader"},[t(Dn["a"],{attrs:{indeterminate:"",color:"#5949A7"}})],1):e._e()])],1):e._e(),t("div",{staticClass:"transfer-snack-container"},[t("transfered-snack-bar")],1),t("CaseAttendanceSkipReasonConfirmationModal"),t("CaseAttendanceSkipReasonSelectionModal"),e.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")&&e.timerSet?t("InactivityTimer"):e._e(),t("inactivityFirstWarningModal"),t("CaseAttendanceNearToHappen",{attrs:{date:e.attendanceNearToHappensDate}}),t("LeavingAttendanceConfirmationModal"),t("LeavingAttendanceSelectionModal"),t("LeavingAttendanceSuccessModal"),t("LastAttendanceOnQueueModal")],1)},AI=[],_I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"call-attempts-component mb-3"},[e.retryList.length>0?t("div",{staticClass:"brick-title"},[e._v(e._s(e.$t("patient.call_attempt_title"))+" "+e._s(e.numRetries))]):e._e(),e.retryList.length>0?t("div",{staticClass:"brick-title"},[e._v(e._s(e.$t("patient.call_attempt_history")))]):e._e(),e._l(e.retryList,(function(e,a){return t("div",{key:a,staticClass:"attempt-box"},[t("CallCountHistory",{attrs:{callAttempt:e}})],1)}))],2)},EI=[],II={components:{CallCountHistory:Ou},data(){return{caseAttendanceId:null,numRetries:0,retryList:[],attendant_list:[]}},created(){this.caseAttendanceId=null!=this.$store.state.Data.CaseAttendance.info.case_attendance_id?this.$store.state.Data.CaseAttendance.info.case_attendance_id:this.$store.state.Data.CaseAttendance.info.id,this.loadHistory()},methods:{loadHistory(){let e={token:this.$store.state.Data.User.token,case_attendance_id:this.caseAttendanceId};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ATTEMPT_CALL_HISTORY,e).then(e=>{let t=e.data.attendance_history,a=this.$store.state.Data.CaseAttendance.info.program_step;t.steps&&t.steps[a]&&t.steps[a].call_attempts&&(this.retryList=[],this.attendant_list=e.data.users_info,t.steps[a].call_attempts.map(e=>{let t={attempt_timestamp:e.attempt_timestamp,attendant:this.getAttendantInfo(e.attendant_id),observation:""==e.bricks.conclusao_atendimento.observation?this.$t("attendance.no_comments"):e.bricks.conclusao_atendimento.observation};this.retryList.push(t)}),this.numRetries=this.retryList.length)}).catch(e=>{console.error("could not load attempt history:",e)})},getAttendantInfo(e){return this.attendant_list.find(t=>t.id==e)}}},hI=II,OI=(a("f5c3"),Object(I["a"])(hI,_I,EI,!1,null,"8db6897c",null)),pI=OI.exports,SI=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-6 trr"},e._l(e.component,(function(a,n){return t(a,{key:n,tag:"component",attrs:{item:e.item,brickDetails:e.brickDetails}})})),1)},CI=[],TI=function(){var e=this,t=e._self._c;return e.closed?e._e():t("div",{key:e.refresh,staticClass:"video-component",class:{"video-component--overlay-active":e.overlayActive}},[t("div",{staticClass:"video-stream mt-6"},[t("DraggableDiv",{attrs:{isPreventingDrag:e.fullscreen}},[t("template",{slot:"slot"},[t("div",{staticClass:"wrapper d-flex"},[e.displayTimer?t("div",{staticClass:"countdown"},[t("p",[e._v(e._s(this.$moment(this.remainingTime).format("mm:ss"))+" para abrir a sala")]),t("div",{staticClass:"video-start",on:{click:e.startStream}},[t("img",{attrs:{src:a("ad7d")}})])]):e._e(),e.user_has_left?t("div",{staticClass:"countdown"},[t("p",[e._v("O paciente encerrou o atendimento")])]):e._e(),e.waiting_user?t("div",{staticClass:"countdown"},[t("p",[e._v("Esperando: "+e._s(this.$moment(this.waitingTime).format("mm:ss")))]),e.canHangUp?t("div",{staticClass:"video-start",class:{"disabled-events":e.loading},on:{click:e.endStream}},[t("img",{attrs:{src:a("7aec")}})]):e._e()]):e._e(),!e.waiting_user&&e.canHangUp?t("div",{staticClass:"countdown hangup",class:{hover:e.hover},on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[e.canHangUp?t("div",{staticClass:"video-start bottom",class:{"disabled-events":e.loading},on:{click:e.endStream}},[t("img",{attrs:{src:a("7aec")}})]):e._e()]):e._e(),t("div",{staticClass:"iddle"},[t("div",{attrs:{id:"session"},on:{error:e.errorHandler}},[t("div",{staticClass:"fsc",attrs:{id:"own-video"}},[t("publisher",{ref:"publisher",attrs:{session:e.session},on:{error:e.errorHandler}})],1),t("fullscreen",{staticClass:"fullscreen-body",attrs:{fullscreen:e.fullscreen},on:{"update:fullscreen":function(t){e.fullscreen=t}}},e._l(e.streams,(function(a){return t("div",{key:a.streamId,attrs:{id:"subscribers"}},[t("subscriber",{ref:"subscriber",refInFor:!0,attrs:{stream:a,session:e.session},on:{error:e.errorHandler}})],1)})),0),t("div",{staticClass:"controls"}),t("div",{staticClass:"lower-bar"},[t("div",{staticClass:"lower-controls"},[t("div",{staticClass:"bars"},[t("img",{attrs:{src:a("ad2f")}})]),t("div",{staticClass:"timer",class:{opacity:0===this.timeStarted}},[t("p",{staticClass:"mr-3"},[e._v(e._s(this.$moment(this.timeStarted).format("mm:ss")))]),t(Rs["a"],{staticClass:"timer-divider",attrs:{vertical:"",light:""}})],1),t("div",{staticClass:"icon-toggle",on:{click:e.toggleFullScreen}},[e.fullscreen?t("img",{attrs:{src:a("61e4")}}):t("img",{attrs:{src:a("35b3")}})]),t("div",{staticClass:"icon-toggle",on:{click:e.toggleDoctorVideo}},[e.pvideo?t("img",{attrs:{src:a("7af4")}}):t("img",{attrs:{src:a("d50a")}})]),t("div",{staticClass:"icon-toggle",on:{click:e.toggleDoctorAudio}},[e.paudio?t("img",{attrs:{src:a("6934")}}):t("img",{attrs:{src:a("7e5d")}})])])])],1)])])])],2)],1),t("EndStreamAttendanceModal")],1)},RI=[],DI=function(){var e=this,t=e._self._c;return t("div",{ref:"draggableContainer",staticClass:"draggable-container"},[t("div",{staticClass:"draggable-slot",on:{mousedown:e.dragMouseDown}},[e._t("slot")],2)])},gI=[],LI={name:"DraggableDiv",props:["isPreventingDrag"],data(){return{offsetWidth:280,offsetHeight:400,positions:{clientX:void 0,clientY:void 0,movementX:0,movementY:0}}},methods:{getClientX(e){return e+this.offsetWidth>window.innerWidth?window.innerWidth-this.offsetWidth:e<0?0:e},getClientY(e){return e+this.offsetHeight>window.innerHeight?window.innerHeight-this.offsetHeight:e<0?0:e},dragMouseDown(e){e.preventDefault(),this.isPreventingDrag||(this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,document.onmousemove=this.elementDrag,document.onmouseup=this.closeDragElement)},elementDrag(e){e.preventDefault(),this.positions.movementX=this.positions.clientX-e.clientX,this.positions.movementY=this.positions.clientY-e.clientY,this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,this.$refs.draggableContainer.style.top=this.getClientY(this.$refs.draggableContainer.offsetTop-this.positions.movementY)+"px",this.$refs.draggableContainer.style.left=this.getClientX(this.$refs.draggableContainer.offsetLeft-this.positions.movementX)+"px"},closeDragElement(){document.onmouseup=null,document.onmousemove=null}}},fI=LI,NI=(a("fc25"),Object(I["a"])(fI,DI,gI,!1,null,null,null)),kI=NI.exports,vI=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-container"})},bI=[],MI={name:"publisher",mixins:[ve],props:{session:{type:LA.a.Session,required:!1,hasEnded:!1}},data(){return{opts:null,publisher:null,parentSession:null,finished:!1}},created(){this.parentSession=this.session,this.$bus.on("update-session",e=>{this.parentSession=e})},beforeDestroy(){this.$bus.off("end-session")},methods:{socketEndStream(){Ke.eventEmit({channel_name:this.$consts.CHANNEL_SOCKET_PREFIX+this.$store.state.Data.CaseAttendance.info.case_attendance_id,event_name:this.$consts.SOCKET_EVENTS.FINISH_STREAM,event:{status:this.getKeyByValue(this.$consts.QUEUE_ATTENDANCE_STATUS,this.$consts.QUEUE_ATTENDANCE_STATUS.ENDED)}}).catch(e=>{console.error(e)})},destroyStream(){this.publisher.destroy(),this.parentSession&&(this.parentSession.unpublish(this.publisher),this.parentSession.disconnect(),this.parentSession.destroy(),this.parentSession=null)}},mounted:function(){this.opts={width:"100%",height:"100%",fitMode:"cover"},this.publisher=LA.a.initPublisher(this.$el,this.opts,e=>{e?this.$emit("error",e):this.$emit("publisherCompleted")}).on("streamCreated",e=>{this.parentSession.signal({data:e.stream},(function(e){e?console.log("signal error: "+e.message):console.log("signal sent")}))}),this.$emit("publisherCreated",this.publisher);const e=()=>{this.parentSession.publish(this.publisher,e=>{e?this.$emit("error",e):(this.$emit("publisherConnected",this.publisher),this.$bus.emit("publisherConnected"))}).on("streamDestroyed",e=>{e.preventDefault()})};this.parentSession&&this.parentSession.isConnected()&&e(),this.parentSession&&this.parentSession.on("sessionConnected",e),this.$bus.on("toggleDoctorAudio",e=>{this.publisher.publishAudio(e)}),this.$bus.on("toggleDoctorVideo",e=>{this.publisher.publishVideo(e)}),this.$bus.on("close-stream",()=>{this.$bus.$emit("end-session"),this.destroyStream(),this.$bus.off("close-stream")}),this.$bus.on("close-stream-end-video",()=>{this.socketEndStream(),this.$bus.off("close-stream-end-video")}),this.$bus.on("end-session",()=>{this.finished||(this.finished=!0,this.socketEndStream())})}},PI=MI,UI=(a("cde8f"),Object(I["a"])(PI,vI,bI,!1,null,null,null)),yI=UI.exports,$I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-container"})},xI=[],VI={name:"subscriber",props:{stream:{type:OT.Stream,required:!0},session:{type:OT.Session,required:!0}},data(){return{opts:null}},mounted:function(){this.opts={width:"100%",height:"100%",fitMode:"contain",showControls:!1};const e=this.session.subscribe(this.stream,this.$el,this.opts,t=>{t?this.$emit("error",t):(this.$bus.emit("user-connected"),this.$emit("subscriberConnected",e))});this.$emit("subscriberCreated",e)}},GI=VI,FI=Object(I["a"])(GI,$I,xI,!1,null,null,null),BI=FI.exports,wI=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"367"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("attendance.end_stream_title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"fields-container"},[e.isWaitingPatient?t("p",{staticClass:"text-data"},[t("span",[e._v(e._s(e.$t("attendance.end_stream_question_warning")))])]):t("p",{staticClass:"text-data"},[t("span",[e._v(e._s(e.$t("attendance.end_stream_question")))])])]),t("div",{staticClass:"buttons-panel"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary"},on:{click:e.handleConfirm}},[e._v("\n                    "+e._s(e.$t("attendance.yes"))+"\n                ")]),t(r["a"],{staticClass:"btn",attrs:{outlined:"",color:"#350165"},on:{click:e.close}},[e._v("\n                    "+e._s(e.$t("attendance.no"))+"\n                ")])],1)],1)],1)],1)},HI=[],qI={data(){return{dialog:!1,isWaitingPatient:!1}},created(){this.$bus.on("open-end-stream-attendance-modal",e=>{this.$bus.emit("enable-save-cancel"),this.isWaitingPatient=e,this.dialog=!0})},methods:{close(){this.dialog=!1},handleConfirm(){this.$bus.emit("open-cancel-attendance-modal-attendance-true"),this.$bus.emit("end-stream-attendance-dialog"),this.close()}}},YI=qI,jI=(a("b509"),Object(I["a"])(YI,wI,HI,!1,null,"b5a01252",null)),KI=jI.exports,ZI={sendSMS(e){return new Promise((t,a)=>{var n=new FormData;n.append("case_attendance_id",e.case_attendance_id),n.append("template",e.template),C.a.post(R.ENDPOINTS.SEND_SMS,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},QI={sendPush(e){return new Promise((t,a)=>{let n=new FormData;n.append("case_attendance_id",e.case_attendance_id),n.append("template",e.template),C.a.post(R.ENDPOINTS.SEND_PUSH,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},JI={props:["item"],components:{DraggableDiv:kI,Publisher:yI,Subscriber:BI,EndStreamAttendanceModal:KI},mixins:[ve],data(){return{user_image:this.$store.state.Data.User.info.user_info.image_path,loading:!1,hover:!1,streams:[],session:null,sessionId:null,closed:!0,token:null,apiKey:null,fullscreen:!1,pvideo:!0,paudio:!0,refresh:0,remainingTime:6e4,toleranceTime:0,timeInterval:null,timeStartInterval:null,canHangUp:!1,displayTimer:!1,user_has_left:!1,waitingTime:0,timeStarted:0,waiting_user:!1,minutes_to_start:1.5,minutes_to_remind:1.5,disabled:!1,canCancel:!1,now:null,windowWidth:window.innerWidth,windowHeight:window.innerHeight,overlayActive:!1,modalObserver:null}},created(){if(!0!==this.$store.state.Data.CaseAttendance.history_mode){var e=this;this.$bus.on("user-left-room",()=>{this.user_has_left=!0,clearInterval(this.timeStartInterval)}),this.$bus.on("confirm-close-patient-dialog",()=>{clearInterval(this.timeInterval),clearInterval(this.timeStartInterval)}),this.$bus.on("user-connected",()=>{this.waiting_user=!1,this.canHangUp=!0,this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save"),this.$bus.emit("enable-save-component"),this.$bus.emit("change-cancel-button-status",!1),clearInterval(this.timeInterval),clearInterval(this.timeStartInterval),this.timeStarted=this.waitingTime>this.timeStarted?this.waitingTime:this.timeStarted,this.timeStartInterval=setInterval(()=>{e.timeStarted+=1e3},1e3),this.waitingTime=18e4}),this.$bus.on("reserve-room",()=>{this.closed=!1,Ke.eventEmit({channel_name:this.$consts.CHANNEL_SOCKET_PREFIX+this.caseAttendanceId,event_name:this.$consts.SOCKET_EVENTS.RESERVED_ATTENDANCE,event:{status:this.getKeyByValue(this.$consts.QUEUE_ATTENDANCE_STATUS,this.$consts.QUEUE_ATTENDANCE_STATUS.RESERVED),doctor_id:this.$store.state.Data.User.info.user_info.id}}).then(()=>{ZI.sendSMS({company_id:this.item.company_id,case_attendance_id:this.caseAttendanceId,template:this.$consts.SMS_TEMPLATES.DOCTOR_FOUND}),this.displayTimer=!0,this.timeInterval=setInterval(()=>{e.remainingTime-=1e3,e.remainingTime<=0&&(clearInterval(e.timeInterval),e.startStream())},1e3)})}),this.$bus.on("end-stream-attendance-dialog",()=>{this.waiting_user?(this.$bus.emit("restart-queue-update"),this.$bus.emit("close-stream"),this.$bus.emit("end-session"),this.$bus.emit("socket-doctor-connected-status",!1)):(this.$bus.emit("close-stream"),this.closed=!0,Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING,case_attendance_id:this.caseAttendanceId}).catch(e=>{console.error(e)}).finally(()=>{this.$bus.emit("close-stream-end-video")}))}),this.$store.state.Data.CaseAttendance.info.status_id==this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING||this.$store.state.Data.CaseAttendance.info.status_id==this.$consts.QUEUE_ATTENDANCE_STATUS.CERTIFICATION_PENDING?(this.$bus.emit("enable-save-cancel"),this.$bus.emit("enable-save"),this.$bus.emit("enable-save-component"),this.$bus.emit("change-cancel-button-status",!1)):this.$store.state.Data.CaseAttendance.info.program_id}else this.disabled=!0},beforeDestroy(){window.removeEventListener("resize",this.handleResize),this.teardownOverlayObserver(),this.disabled||(this.$bus.off("user-left-room"),this.$bus.off("user-connected"),this.$bus.off("reserve-room"),this.$bus.off("end-stream-attendance-dialog"))},methods:{setupOverlayObserver(){"undefined"!==typeof document&&"undefined"!==typeof MutationObserver&&document.body&&(this.overlayActive=this.hasActiveOverlay(),this.modalObserver=new MutationObserver(()=>{this.overlayActive=this.hasActiveOverlay()}),this.modalObserver.observe(document.body,{attributes:!0,childList:!0,subtree:!0}))},teardownOverlayObserver(){this.modalObserver&&(this.modalObserver.disconnect(),this.modalObserver=null)},hasActiveOverlay(){return"undefined"!==typeof document&&Boolean(document.querySelector(".v-overlay--active, .v-dialog__content--active"))},handleResize(){this.$nextTick(()=>{this.$refs.draggable&&"function"===typeof this.$refs.draggable.resetPosition&&this.$refs.draggable.resetPosition()})},startStream(){var e=this;this.closed=!1,this.displayTimer=!1,clearInterval(this.timeInterval),this.$bus.emit("start-stream"),this.$bus.emit("doctor-init-attendance"),this.getCredentials(),this.waiting_user=!0,this.waitingTime=0,this.now=Ne()().unix()+60*this.minutes_to_start,e.now=Ne()().unix()+60*this.minutes_to_start;const t=this.item.due_date,a=this.item.due_time,n=Ne.a.utc(`${t}T${a}`).local();if(!n.isValid())return void console.error("Data ou hora de agendamento inv
o","Ombro","Cotovelo","Punho","Quadril","Joelho","Tornozelo"],selectedLesions:null,otherLesionObservation:"",selected:!1,backpainBool:0,backpainObservation:"",movementPainBool:0,movementPainObservation:"",recommendationBool:0,recommendationObservation:"",hasBackpain:!1,hasMovementPain:!1,hasRecommendation:!1,needsLesionSelection:!1,disabled:!1}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),!this.brickDetails.anamnese_esportiva){let e=this.brickDetails.anamnese_esportiva[0];this.otherLesionObservation=e.sports_program_lesions_other,this.backpainBool=e.has_back_pain,this.backpainObservation=e.back_pain_description,this.recommendationBool=e.has_medical_recommendation,this.recommendationObservation=e.medical_recommendation_description,this.selectedLesions=[];for(let t in e.sports_program_lesions)this.selectedLesions.push(e.sports_program_lesions[t].name)}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},methods:{checkLesions(){this.$v.selectedLesions.$touch(),this.$v.selectedLesions.$invalid&&!this.otherLesionObservation?this.needsLesionSelection=!0:this.needsLesionSelection=!1},checkOtherLesions(){this.checkLesions()},checkBackpain(){0==this.backpainBool?this.hasBackpain=!1:this.hasBackpain=!0,0==this.backpainBool&&this.$v.backpainObservation.$reset()},checkMovementPain(){0==this.movementPainBool?this.hasMovementPain=!1:this.hasMovementPain=!0,0==this.movementPainBool&&this.$v.movementPainObservation.$reset()},checkRecommendationBool(){0==this.recommendationBool?(this.hasRecommendation=!1,this.$v.recommendationObservation.$reset()):this.hasRecommendation=!0},checkRecommendationObservation(){1==this.recommendationBool&&this.$v.recommendationObservation.$touch()},sendSaveData(){let e={brick_key:"anamnese_esportiva",brick_data:{sports_program_lesions_ids:this.selectedLesions,sports_program_lesions_other:this.otherLesionObservation,has_back_pain:this.backpainBool,back_pain_description:this.backpainObservation,has_medical_recommendation:this.recommendationBool,medical_recommendation_description:this.recommendationObservation}};this.$bus.emit("receive-brick-data",e)}},validations:{selectedLesions:{required:Ae["required"]},movementPainObservation:{required:Ae["required"]},backpainObservation:{required:Ae["required"]},recommendationObservation:{required:Ae["required"]}},computed:{movementPainObservationErrors(){const e=[];return this.$v.movementPainObservation.$dirty?(!this.$v.movementPainObservation.required&&e.push(this.$t("access_controls.required")),e):e},backpainObservationErrors(){const e=[];return this.$v.backpainObservation.$dirty?(!this.$v.backpainObservation.required&&e.push(this.$t("access_controls.required")),e):e},recommendationObservationErrors(){const e=[];return this.$v.recommendationObservation.$dirty?(!this.$v.recommendationObservation.required&&e.push(this.$t("access_controls.required")),e):e}}},El=_l,Il=Object(I["a"])(El,ul,Al,!1,null,null,null),hl=Il.exports,Ol=function(){var e=this,t=e._self._c;return t("div",{staticClass:"medical-conduct"},[t("h2",{staticClass:"mt-6 mb-3"},[t("span",{staticClass:"font-weight-bold secondary--text"},[e._v("\n      "+e._s(e.$t("attendance.medical_conduct"))+"\n    ")]),t("span",{staticClass:"secondary--text"},[e._v("\n      "+e._s(e.$t("attendance.medical"))+"\n    ")])]),t(re["a"],{class:{"readonly-history":e.disabled},attrs:{readonly:e.disabled}},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{readonly:e.disabled,label:e.$t("attendance.orientation"),"error-messages":e.orientationErrors,height:"100px",counter:"2000","no-resize":"",outlined:""},on:{blur:function(t){return e.$v.orientation.$touch()}},model:{value:e.orientation,callback:function(t){e.orientation=t},expression:"orientation"}})],1)],1)],1)],1)},pl=[],Sl={props:["brickDetails"],data(){return{brickName:"emr_conduta",disabled:!1,orientation:""}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]&&this.brickDetails[this.brickName].length>0){let e=this.brickDetails[this.brickName][0];this.orientation=e.conduct,!this.disabled&&this.brickDetails.emr_desfecho&&this.brickDetails.emr_desfecho.length>0&&this.brickDetails.emr_desfecho[0].schedule_return&&(this.disabled=!0)}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{sendSaveData(){this.$v.$touch();let e={brick_key:this.brickName,brick_data:{conduct:this.orientation},isValid:!this.$v.$invalid,message:this.$v.$invalid?this.orientationErrors.join(", "):""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)}},computed:{orientationErrors(){const e=[];return this.$v.orientation.$dirty?(!this.$v.orientation.required&&e.push(this.$t("general.required")),!this.$v.orientation.minLength&&e.push(this.$t("attendance.min_length")),e):e}},validations:{orientation:{required:Ae["required"],minLength:Object(Ae["minLength"])(3)}}},Cl=Sl,Tl=(a("21ec"),Object(I["a"])(Cl,Ol,pl,!1,null,"20ff4048",null)),Rl=Tl.exports,Dl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"outcome mb-6"},[t("div",{staticClass:"out-title mb-6"},[t("div",{staticClass:"out-title-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.outcome")))]),e._v("\n      "+e._s(e.$t("attendance.medic"))+"\n    ")])]),t("div",{staticClass:"checkbox-items mb-3"},[e._l(e.orientation,(function(a,n){return!e.disabled||e.disabled&&-1!=e.selectedItems.indexOf(a.value)?t("div",{key:n,staticClass:"pat-checkbox border overflows",class:{"adjust-height-openned":-1!=e.selectedItems.indexOf(a.value),"adjust-height-closed":-1==e.selectedItems.indexOf(a.value)}},[t(St["a"],{staticClass:"pat-checkbox-history",attrs:{disabled:e.disabled,label:a.name,value:a.value,"hide-details":""},model:{value:e.selectedItems,callback:function(t){e.selectedItems=t},expression:"selectedItems"}})],1):e._e()})),t("div",{staticClass:"d-flex flex-row mt-2 mb-4"},[t(St["a"],{staticClass:"mt-0 pat-checkbox2 border overflows",attrs:{label:e.$t("access_controls.active_nurse"),disabled:e.disabled||0==e.selectedItems.length,"hide-details":""},model:{value:e.active_nurse,callback:function(t){e.active_nurse=t},expression:"active_nurse"}}),t("div",{staticClass:"d-flex flex-row align-center"},[t("label",{staticClass:"nurse-hours-label pl-6 pr-2"},[e._v("Retorno em:")]),t($t["a"],{attrs:{items:e.nurseHoursOptions,loading:e.loadingNurseHoursOptions,disabled:e.disabled||0==e.selectedItems.length,"append-icon":"keyboard_arrow_down","item-value":"value",height:"37px","hide-details":"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n            "+e._s(e.$t("attendance.hour_"+t.item.value))+"\n          ")]}},{key:"item",fn:function(t){return[e._v("\n            "+e._s(e.$t("attendance.hour_"+t.item.value))+"\n          ")]}}]),model:{value:e.return_in_hours,callback:function(t){e.return_in_hours=t},expression:"return_in_hours"}})],1)],1)],2)])},gl=[],Ll={props:["brickDetails"],mixins:[ve],data(){return{orientation:[{id:1,name:this.$t("patient.orientation_no_prescription"),value:"no_prescription",checked:!0,active_nurse:!0},{id:2,name:this.$t("patient.ambulance"),value:"ambulance",checked:!1,active_nurse:!0},{id:3,name:this.$t("patient.orientation_prescription"),value:"prescription",checked:!1,active_nurse:!0},{id:4,name:this.$t("patient.emergency"),value:"emergency",checked:!1,active_nurse:!0},{id:5,name:this.$t("patient.network_expert_referral"),value:"network_expert_referral",checked:!1,active_nurse:!0},{id:6,name:this.$t("patient.expert_referral"),value:"expert_referral",checked:!1,active_nurse:!0},{id:7,name:this.$t("patient.fit"),value:"fit",checked:!1,active_nurse:!0},{id:8,name:this.$t("patient.unfit"),value:"unfit",checked:!1,active_nurse:!0}],disabled:!1,isReturn:!1,loadingNurseHoursOptions:!1,due:"",selected_date:"",today:this.$moment().format("YYYY-MM-DD"),selected_hour:null,time:null,active_nurse:!1,return_in_hours:null,returnDate:!1,returnObservations:"",outcomeData:{},selectedItems:[],fullDate:new Date,formattedDate:null,isValid:!0,message:"",nurseHoursOptions:[]}},created(){if(70===this.getCaseAttendanceInfo.program_id?this.orientation=this.orientation.filter(e=>7===e.id||8===e.id):this.orientation=this.orientation.filter(e=>7!==e.id&&8!==e.id),(null!=this.$store.state.Data.Queue.incoming_queue&&"QUEUE"===this.$store.state.Data.Queue.incoming_queue.type||!0===this.$store.state.Data.CaseAttendance.history_mode)&&(this.disabled=!0),this.brickDetails&&this.brickDetails.emr_desfecho&&this.brickDetails.emr_desfecho.length>0){let e=this.brickDetails.emr_desfecho[0];this.returnObservations=e.return_observation,this.active_nurse=e.active_nurse,this.return_in_hours=e.return_in_hours,this.disabled=!0,e.schedule_return&&!1===this.$store.state.Data.CaseAttendance.history_mode&&(this.returnDate=!0,this.isReturn=!0,this.disabled=!1),this.$store.state.Data.CaseAttendance.info.program_step>1&&(this.disabled=!0),this.fullDate=e.return_time,this.epochConverter(),this.formatDate(),this.formatHour(),Object.keys(e).forEach(t=>{"prescription"===t?(!1===e[t]&&this.selectedItems.push("no_prescription"),!0===e[t]&&this.selectedItems.push("prescription")):1==e[t]&&this.selectedItems.push(t)})}else this.epochConverter(),this.formatDate(),this.formatHour();this.getNurseHoursOptions(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{getNurseHoursOptions(){this.loadingNurseHoursOptions||(this.loadingNurseHoursOptions=!0,Qt.getNurseHours().then(e=>{this.nurseHoursOptions=e.data,this.return_in_hours=this.return_in_hours||this.nurseHoursOptions.find(e=>e.default).value}).catch(e=>{console.error(e)}).finally(()=>{this.loadingNurseHoursOptions=!1}))},saveDueDate(){this.formattedDate=this.$moment(this.selected_date).format("DD/MM"),this.fullDate=this.$moment(this.selected_date).format("YYYY-MM-DD")+" "+this.$moment(this.selected_time).format("HH:mm:ss"),this.$refs.menu.save(this.formattedDate)},saveDueHour(){this.fullDate=this.$moment(this.selected_date).format("YYYY-MM-DD")+" "+this.$moment(this.selected_time).format("HH:mm:ss"),this.$refs.menu2.save(this.selected_hour)},epochConverter(){this.$moment(this.return_time).unix()},formatDate(){this.selected_date=this.$moment(this.fullDate).format("YYYY-MM-DD")},formatHour(){this.selected_hour=this.$moment(this.fullDate).format("HH:mm"),this.formattedDate=this.formatDateHelper(this.selected_date)},sendSaveData(){if(this.disabled)return void this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.REMOVE_BRICK,{brick_key:"emr_desfecho"});this.isValid=!0,this.message="",this.validatorBeforeSave();let e=Ot.a.tz(this.fullDate,Intl.DateTimeFormat().resolvedOptions().timeZone),t={brick_key:"emr_desfecho",brick_data:{ambulance:this.selectedItems.indexOf("ambulance")>-1,emergency:this.selectedItems.indexOf("emergency")>-1,expert_referral:this.selectedItems.indexOf("expert_referral")>-1,network_expert_referral:this.selectedItems.indexOf("network_expert_referral")>-1,prescription:null,return_time:Ot()(e).tz("utc").format("YYYY-MM-DD HH:mm:ss"),schedule_return:!!this.returnDate,return_observation:this.returnObservations,active_nurse:this.active_nurse,return_in_hours:this.return_in_hours,fit:this.selectedItems.indexOf("fit")>-1,unfit:this.selectedItems.indexOf("unfit")>-1},isValid:this.isValid,message:this.message};this.selectedItems.indexOf("no_prescription")>-1&&(t.brick_data.prescription=!1),this.selectedItems.indexOf("prescription")>-1&&(t.brick_data.prescription=!0),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,t),this.$bus.emit("receive-brick-data",t)},validatorBeforeSave(){let e=Ot()(this.fullDate),t=Ot()(),a=e.diff(t,"days")+1,n=e.valueOf()-t.valueOf();this.returnDate?n>0?a>7&&(this.isValid=!1,this.message="Data de retorno deve ser menor que 7 dias"):(this.isValid=!1,this.message="Data de retorno deve ser no futuro"):0===this.selectedItems.length&&!1===this.returnDate&&(this.isValid=!1,this.message="Ao menos um desfecho deve ser selecionado.")}},computed:{...Object(K["b"])("Data/CaseAttendance",["getCaseAttendanceInfo"])}},fl=Ll,Nl=(a("c42c1"),Object(I["a"])(fl,Dl,gl,!1,null,null,null)),kl=Nl.exports,vl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emr_desfecho_psicologico"},[t("div",{staticClass:"emr_desfecho_psicologico-title mb-2"},[t("div",{staticClass:"emr_desfecho_psicologico-text"},[t("span",{staticClass:"font-weight-bold"},[e._v("\n        "+e._s(1==e.programStep?e.$t("attendance.pisic_outcome"):e.$t("attendance.guidance"))+"\n      ")]),e._v("\n      "+e._s(1==e.programStep?"":e.$t("attendance.pisica"))+"\n    ")])]),t(re["a"],{staticClass:"mt-2 mb-4",attrs:{disabled:e.disabled}},[1==e.programStep?t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"pa-6 border rounded-lg"},[t("div",{staticClass:"d-flex flex-row"},[t(St["a"],{staticClass:"mt-0 pat-checkbox2 border overflows",attrs:{label:e.$t("access_controls.active_nurse"),"hide-details":""},model:{value:e.active_nurse,callback:function(t){e.active_nurse=t},expression:"active_nurse"}}),t("div",{staticClass:"d-flex flex-row align-center"},[t("label",{staticClass:"nurse-hours-label pl-6 pr-2"},[e._v("\n                "+e._s(e.$t("attendance.return_in"))+":\n              ")]),t($t["a"],{attrs:{items:e.nurseHoursOptions,loading:e.loadingNurseHoursOptions,"append-icon":"keyboard_arrow_down","item-value":"value",height:"37px","hide-details":"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n                  "+e._s(e.$t("attendance.hour_"+t.item.value))+"\n                ")]}},{key:"item",fn:function(t){return[e._v("\n                  "+e._s(e.$t("attendance.hour_"+t.item.value))+"\n                ")]}}],null,!1,3535252604),model:{value:e.return_in_hours,callback:function(t){e.return_in_hours=t},expression:"return_in_hours"}})],1)],1),e.active_nurse?t("div",{staticClass:"mt-4"},[t("label",{staticClass:"font-weight-bold primary--text"},[e._v("\n              "+e._s(e.$t("attendance.pisic_guidance"))+"\n            ")]),t(Ni["a"],{staticClass:"mt-3",attrs:{readonly:e.disabled,"error-messages":e.returnObservationMessages,counter:"10000",height:"100px","no-resize":"",outlined:""},on:{blur:function(t){return e.$v.return_observation.$touch()}},model:{value:e.return_observation,callback:function(t){e.return_observation=t},expression:"return_observation"}})],1):e._e()])])],1):e._e(),e.programStep>1?t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",[t(Ni["a"],{staticClass:"mt-3",attrs:{readonly:e.disabled,value:e.return_observation,counter:"10000",height:"100px","no-resize":"",outlined:""}})],1)])],1):e._e()],1)],1)},bl=[],Ml={props:["brickDetails"],mixins:[ve],data(){return{brickName:"emr_desfecho_psicologico",loadingNurseHoursOptions:!1,active_nurse:!1,return_in_hours:null,return_observation:"",isValid:!0,message:"",nurseHoursOptions:[],disabled:!1,programStep:1}},created(){if((null!=this.$store.state.Data.Queue.incoming_queue&&"QUEUE"===this.$store.state.Data.Queue.incoming_queue.type||!0===this.$store.state.Data.CaseAttendance.history_mode)&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]&&this.brickDetails[this.brickName].length>0){let e=this.brickDetails[this.brickName][0];this.return_observation=e.return_observation,this.active_nurse=e.active_nurse,this.return_in_hours=e.return_in_hours,this.disabled=!0,e.schedule_return&&!1===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!1),this.programStep=this.$store.state.Data.CaseAttendance.info.program_step,this.programStep>1&&(this.disabled=!0)}this.getNurseHoursOptions(),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{getNurseHoursOptions(){if(this.loadingNurseHoursOptions)return;this.loadingNurseHoursOptions=!0;let e=this.$store.state.Data.CaseAttendance.info.program_information,t=e&&e.length?e[0].product_id:null;Qt.getNurseHours(t).then(e=>{this.nurseHoursOptions=e.data,this.return_in_hours=this.return_in_hours||this.nurseHoursOptions.find(e=>e.default).value}).catch(e=>{console.error(e)}).finally(()=>{this.loadingNurseHoursOptions=!1})},sendSaveData(){if(this.disabled)return void this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.REMOVE_BRICK,{brick_key:this.brickName});this.$v.$touch(),this.isValid=!this.$v.$invalid,this.message=this.isValid?"":`${this.$t("general.error_in")} ${this.$t("attendance.pisic_outcome")}`;let e={brick_key:this.brickName,brick_data:{return_observation:this.return_observation,active_nurse:this.active_nurse,return_in_hours:this.return_in_hours},isValid:this.isValid,message:this.message};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)}},computed:{returnObservationMessages(){const e=[];return this.$v.return_observation.$dirty?(!this.$v.return_observation.required&&e.push(this.$t("general.required")),e):e}},validations:{return_observation:{required:Object(Ae["requiredIf"])((function(){return this.active_nurse}))}}},Pl=Ml,Ul=(a("c5ac"),Object(I["a"])(Pl,vl,bl,!1,null,null,null)),yl=Ul.exports,$l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"phisical"},[t("div",{staticClass:"phis-title"},[t("div",{staticClass:"phis-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.phisical_section")))]),e._v("\n      "+e._s(e.$t("attendance.phisical"))+"\n    ")])]),t("div",[t($t["a"],{staticClass:"p-input1 mr-3",attrs:{items:e.generalConditions,disabled:e.disabled,"return-object":"","item-text":"name",label:e.$t("attendance.general_condition"),height:"37px","append-icon":"keyboard_arrow_down",outlined:""},model:{value:e.selectedCondition,callback:function(t){e.selectedCondition=t},expression:"selectedCondition"}})],1),t("div",{staticClass:"d-flex"},[t($t["a"],{staticClass:"p-input2 mr-3",attrs:{disabled:e.disabled,items:e.breathingPatterns,"return-object":"","item-text":"name",label:e.$t("attendance.breathing_pattern"),height:"37px","append-icon":"keyboard_arrow_down",outlined:""},model:{value:e.selectedPattern,callback:function(t){e.selectedPattern=t},expression:"selectedPattern"}}),t("div",{staticClass:"line"}),t("div",{staticClass:"radios text-center margins ml-10",class:{"disabled-events":e.selectedPattern&&"EUPNEICO"==e.selectedPattern.name}},[t("div",{staticClass:"mb-2"},[t("span",{staticClass:"radio-button-titles"},[e._v(e._s(e.$t("attendance.dyspnea_level")))])]),t(Qs["a"],{staticClass:"mt-n1 ml-6 mr-6",attrs:{row:"",disabled:e.disabled},model:{value:e.dyspnea,callback:function(t){e.dyspnea=t},expression:"dyspnea"}},[t(Zs["a"],{staticClass:"mr-6",attrs:{label:"1",value:1}}),t(Zs["a"],{staticClass:"mr-6",attrs:{label:"2",value:2}}),t(Zs["a"],{staticClass:"mr-6",attrs:{label:"3",value:3}}),t(Zs["a"],{attrs:{label:"4",value:4}})],1)],1),t("div",{staticClass:"line mr-n8"}),t("div",{staticClass:"radios text-center margins ml-10",class:{"disabled-events":e.selectedPattern&&"EUPNEICO"==e.selectedPattern.name}},[t("div",{staticClass:"mb-2"},[t("span",{staticClass:"radio-button-titles"},[e._v(e._s(e.$t("attendance.muscles")))])]),t(Qs["a"],{staticClass:"mt-n1 ml-6 mr-6",attrs:{row:"",disabled:e.disabled},model:{value:e.muscle,callback:function(t){e.muscle=t},expression:"muscle"}},[t(Zs["a"],{staticClass:"ml-2 mr-6",attrs:{label:e.$t("attendance.yes"),value:1}}),t(Zs["a"],{attrs:{label:e.$t("attendance.no"),value:0}})],1)],1)],1),t("div",[t(Ni["a"],{staticClass:"txt-area",attrs:{height:"100px",readonly:e.disabled,label:e.$t("attendance.ectoscopy"),outlined:"","no-resize":""},model:{value:e.observations,callback:function(t){e.observations="string"===typeof t?t.trim():t},expression:"observations"}})],1),t("div",[t(de["a"],{staticClass:"txt-area",attrs:{label:e.$t("attendance.phisical_exam"),readonly:e.disabled,height:"37px",maxlength:"50",outlined:""},model:{value:e.exam,callback:function(t){e.exam="string"===typeof t?t.trim():t},expression:"exam"}})],1)])},xl=[],Vl={props:["brickDetails"],data(){return{observations:"",exam:"",dyspnea:0,muscle:0,generalConditions:[],breathingPatterns:[],selectedCondition:null,selectedPattern:null,isValid:!0,message:"",disabled:!1}},created(){if(this.disabled=!1,(null!=this.$store.state.Data.Queue.incoming_queue&&"QUEUE"===this.$store.state.Data.Queue.incoming_queue.type||!0===this.$store.state.Data.CaseAttendance.history_mode)&&(this.disabled=!0),this.brickDetails&&this.brickDetails.emr_exames&&this.brickDetails.emr_exames.length>0){let e=this.brickDetails.emr_exames[0];this.brickDetails.emr_exames&&this.brickDetails.emr_exames.length>0&&(this.disabled=!0),this.observations=e.note,this.exam=e.physical_exam,this.dyspnea=e.dyspnea_level,this.selectedCondition=e.general_state,this.selectedPattern=e.breathing_pattern,this.muscle=e.accessory_muscle?1:0,this.listGeneralStates(),this.listBreathingPatterns()}else this.listGeneralStates(),this.listBreathingPatterns();this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{listGeneralStates(){let e=this.$store.state.Data.User.token,t={token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_PATIENT_GENERAL_STATE,t).then(e=>{this.generalConditions=e.data})},listBreathingPatterns(){let e=this.$store.state.Data.User.token,t={token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_PATIENT_BREATHING_PATTERN,t).then(e=>{this.breathingPatterns=e.data})},sendSaveData(){this.isValid=!0,this.message="";let e={brick_key:"emr_exames",brick_data:{general_state_id:null!=this.selectedCondition?this.selectedCondition.id:null,breathing_pattern_id:null!=this.selectedPattern?this.selectedPattern.id:null,dyspnea_level:this.dyspnea,accessory_muscle:this.muscle,note:this.observations,physical_exam:this.exam},isValid:this.isValid,message:this.message};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.disabled||this.$bus.emit("receive-brick-data",e)},validatorBeforeSave(){null!==this.selectedCondition&&null!==this.selectedCondition.id||(this.isValid=!1,this.message="Estado geral deve ser selecionado."),null!==this.selectedPattern&&null!==this.selectedPattern.id||(this.isValid=!1,this.message="Padr
o para cancelar."),this.$bus.emit("open-snackbar",{message:"user_cannot_cancel"}),this.loading=!1,this.$bus.emit("toggle-loading",!1))}).catch(e=>{console.error("[CANCEL MODAL] Erro ao buscar dados do atendimento:",e),this.$bus.emit("open-snackbar",{message:"error_canceling_attendance"}),this.loading=!1,this.$bus.emit("toggle-loading",!1)})}},computed:{disableCancel(){return!(this.reason.name&&"others"!==this.reason.name||"others"===this.reason.name&&this.reason_cancel.length>3)},featureEnabled(){return this.isFeatureEnabled}}},sh=ih,oh=(a("0477"),Object(I["a"])(sh,ah,nh,!1,null,null,null)),rh=oh.exports,lh={components:{CancelAttendanceModal:rh},props:["saveType"],data(){return{can_cancel:!0,canCancel:!1}},created(){this.$bus.on("enable-save-cancel",()=>{this.can_cancel=!0}),this.$bus.on("disable-save-cancel",()=>{this.can_cancel=!1});let e=this.$store.state.Data.CaseAttendance.info.program_id,t=this.$store.state.Data.User.info.user_info.programs;this.canCancel=!1,t&&t.length>0&&t.forEach(t=>{e==t.id&&!0===t.cancel&&(this.canCancel=!0)})},beforeDestroy(){this.$bus.off("enable-save-cancel"),this.$bus.off("disable-save-cancel")},methods:{cancelAttendance(){this.can_cancel?this.$bus.emit("open-cancel-attendance-modal-attendance-true"):console.error("can't cancel before stream start")}}},ch=lh,dh=(a("66c4"),Object(I["a"])(ch,eh,th,!1,null,"2cc31e43",null)),mh=dh.exports,uh=function(){var e=this,t=e._self._c;return t("div",[e.hasUnsavedData?t("span",{staticClass:"message-warning sm"},[e._v(e._s(e.$t("attendance.has_unsaved_data")))]):e._e(),e.isPsychologyProgram?t("div",{staticClass:"save-attend-component mt-16"},[t(r["a"],{staticClass:"save-bt",attrs:{color:"primary",loading:e.loadingFinish,disabled:!e.canSaveButtonPsychology},on:{click:e.openModalFinish}},[t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("attendance.finish_save_attendance")))])])],1):"PROGRAM"==e.saveType?t("div",{staticClass:"save-attend-component"},[t(lt["a"],{attrs:{top:"",disabled:e.inCurrentAttendanceStep},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(r["a"],e._g(e._b({staticClass:"program-save-bt mb-2",attrs:{color:"primary",loading:e.loadingSaving},on:{click:e.saveProgram}},"v-btn",n,!1),a),[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("\n            $vuetify.icons.custom_save\n          ")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("attendance.can_save")))])],1)]}}])},[t("span",[e._v(e._s(e.$t("attendance.blockBySteps")))])]),t(r["a"],{staticClass:"program-save-bt mb-10",attrs:{color:"primary",loading:e.loadingFinish,disabled:!e.canScheduleProgram},on:{click:e.scheduleNextAttendance}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("\n        $vuetify.icons.plus\n      ")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("attendance.schedule_program")))])],1),t(r["a"],{staticClass:"program-save-bt mb-10",attrs:{color:"primary",loading:e.loadingFinish,disabled:!e.canScheduleProgram&&!e.canEndProgram||e.hasUnsavedData},on:{click:e.openModalFinish}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("\n        $vuetify.icons.close\n      ")]),t("span",{staticClass:"save-text"},[e._v("\n        "+e._s(e.$t("attendance.finish_attendance"))+"\n      ")])],1)],1):"DEFAULT"==e.saveType?t("div",{staticClass:"save-attend-component"},[t("div",{staticClass:"message-error"},[e._v(e._s(e.errorMessage))]),t(r["a"],{staticClass:"save-bt mb-10",attrs:{color:"primary",loading:e.loadingSaving,disabled:!e.canSaveButton},on:{click:e.saveData}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("\n        $vuetify.icons.custom_save\n      ")]),t("span",{staticClass:"save-text"},[e._v("\n        "+e._s(e.certificationPending?e.$t("attendance.generate_documents"):e.$t("attendance.save"))+"\n      ")])],1),e.is_emergency?t("div",{staticClass:"message-warning"},[t(at["a"],{attrs:{size:"20",color:"orange"}},[e._v("warning")]),e._v("\n      "+e._s(e.$t("attendance.is_emergency_member"))+"\n      "),t(at["a"],{attrs:{size:"20",color:"orange"}},[e._v("warning")])],1):e._e(),t("SaveAttendanceModal",{attrs:{case_id:e.case_id}}),t("PatientPhoneAlertModal")],1):e._e(),t("FinishNutritionistModal"),t("FinishPsychologyModal")],1)},Ah=[],_h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"patient-phone-alert-modal",attrs:{"max-width":"400px"}},[t(d["a"],{attrs:{"content-class":"patient-alert-phone"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v("\n            "+e._s(e.$t("patient.patient_phone_invalid"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"flex-box"},[t("p",{staticClass:"text-color my-4"},[e._v("\n          "+e._s(e.$t("patient.patient_phone_invalid_description"))+"\n        ")]),t(c["a"],{staticClass:"buttons mt-n4"},[t(r["a"],{staticClass:"primary--text ml-n2 mr-3",attrs:{color:"white",height:"37px",width:"232px",outlined:""},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("patient.close")))])],1)],1)],1)],1)],1)},Eh=[],Ih={mixins:[ve],data(){return{dialog:!1}},created(){this.$bus.on("patient-phone-alert",()=>{this.dialog=!0})},methods:{close(){this.dialog=!1}}},hh=Ih,Oh=(a("3c7d"),Object(I["a"])(hh,_h,Eh,!1,null,null,null)),ph=Oh.exports,Sh=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"367"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("nutritional.modal_title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e.body?t("div",{staticClass:"fields-container"},[t("p",{staticClass:"text-data"},[e._v(e._s(e.$t("nutritional."+e.bodyDescription)))])]):e._e(),t("div",{staticClass:"buttons-panel"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary"},on:{click:e.handleConfirm}},[e._v("\n                    "+e._s(e.$t("nutritional.modal_confirm"))+"\n                ")]),t(r["a"],{staticClass:"btn",attrs:{outlined:"",color:"#350165"},on:{click:e.close}},[e._v("\n                    "+e._s(e.$t("nutritional.modal_cancel"))+"\n                ")])],1)],1)],1)],1)},Ch=[],Th={data(){return{dialog:!1,body:!1,bodyDescription:""}},created(){this.$bus.on("open-finish-nutritionist-modal",(e,t)=>{this.body=!!e,this.bodyDescription="modal_body_"+t,this.dialog=!0})},beforeDestroy(){this.$bus.off("open-finish-nutritionist-modal")},methods:{close(){this.dialog=!1},handleConfirm(){this.$bus.emit("confirm-finish-nutritionist-dialog"),this.close()}}},Rh=Th,Dh=(a("2742"),Object(I["a"])(Rh,Sh,Ch,!1,null,"0bf6a894",null)),gh=Dh.exports,Lh=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"367"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("nutritional.modal_title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e.body?t("div",{staticClass:"fields-container"},[t("p",{staticClass:"text-data"},[e._v(e._s(e.$t("nutritional."+e.bodyDescription)))])]):e._e(),t("div",{staticClass:"buttons-panel"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary"},on:{click:e.handleConfirm}},[e._v("\n                    "+e._s(e.$t("nutritional.modal_confirm"))+"\n                ")]),t(r["a"],{staticClass:"btn",attrs:{outlined:"",color:"#350165"},on:{click:e.close}},[e._v("\n                    "+e._s(e.$t("nutritional.modal_cancel"))+"\n                ")])],1)],1)],1)],1)},fh=[],Nh={data(){return{dialog:!1,body:!1,bodyDescription:""}},created(){this.$bus.on("open-finish-psychology-modal",(e,t)=>{this.body=!!e,this.bodyDescription="modal_body_"+t,this.dialog=!0})},beforeDestroy(){this.$bus.off("open-finish-psychology-modal")},methods:{close(){this.dialog=!1},handleConfirm(){this.$bus.emit("confirm-finish-psychology-dialog"),this.close()}}},kh=Nh,vh=(a("5cec"),Object(I["a"])(kh,Lh,fh,!1,null,"7a869270",null)),bh=vh.exports,Mh={components:{SaveAttendanceModal:Bn,EmergencyIcon:Ut,PatientPhoneAlertModal:ph,FinishNutritionistModal:gh,FinishPsychologyModal:bh},props:["brickDetails","attendanceProccess","saveType","item"],data(){return{loadingSaving:!1,loadingFinish:!1,inCurrentAttendanceStep:!0,case_id:null,can_save:!0,disabled:!0,is_emergency:!1,bodyFinishModal:!1,errorMessage:"",attendancesToProcess:[],canScheduleProgram:!1,canEndProgram:!1,hasUnsavedData:!1,loading:!1,disabledSubject:!0,currentTime:new Date,timeCheckInterval:null,attendanceStartTime:null,doctorInitAttendance:!1,patientConnected:!1}},created(){this.is_emergency=this.$store.state.Data.CaseAttendance.info.emergency_pass,this.$bus.on("has-unsaved-data",()=>{this.hasUnsavedData=!0}),this.$bus.on("hasnt-unsaved-data",()=>{this.hasUnsavedData=!1}),this.$bus.on("disable-save-cancel",()=>{this.attendanceStartTime=this.$moment(),this.can_save=!1}),this.$bus.on("disable-save",()=>{this.can_save=!1}),this.$bus.on("get-document-data",()=>{this.case_id=this.$store.state.Data.CaseAttendance.info.case_id,this.sendDocumentData()}),this.$bus.on("ended-attendance-to-process",e=>{this.attendancesToProcess.push(e)}),this.$bus.on("confirm-program-schedule",()=>{this.finishProgram()}),this.$bus.on("confirm-finish-psychology-dialog",()=>{this.finishProgram()}),this.$bus.on("confirm-finish-nutritionist-dialog",()=>{this.changeToAttendance(),this.finishProgram()}),this.$bus.on("conclude-attendance-program",()=>{this.completionOfWellnessEvents()}),this.$bus.on("nutritional-care-change-step",e=>{let t=this.$store.state.Data.CaseAttendance.info;this.inCurrentAttendanceStep=e.step==t.case_attendance_id}),this.canEndProgram=!(!this.$store.state.Data.CaseAttendance.info||"DOCTOR_PENDING"!=this.$store.state.Data.CaseAttendance.info.status),this.$bus.on("enable-save",()=>{this.can_save=!1}),this.$bus.on("enable-save-component",()=>{this.disabled=!1}),this.$bus.on("enable-save-psychology",()=>{this.disabledSubject=!1}),this.$bus.on("disable-save-psychology",()=>{this.disabledSubject=!0}),this.$bus.on("doctor-init-attendance",()=>{this.doctorInitAttendance=!0,this.can_save=!1,this.attendanceStartTime=this.$moment()}),this.$bus.on("publisherConnected",()=>{this.patientConnected=!0}),this.timeCheckInterval=setInterval(()=>{this.currentTime=new Date},1e3),this.$nextTick(()=>{switch(parseInt(this.$store.state.Data.CaseAttendance.info.status_id)){case this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING:case this.$consts.QUEUE_ATTENDANCE_STATUS.CERTIFICATION_PENDING:this.can_save=!1}})},beforeDestroy(){this.$bus.off("enable-save"),this.$bus.off("enable-save-component"),this.$bus.off("disable-save-cancel"),this.$bus.off("disable-save"),this.$bus.off("get-document-data"),this.$bus.off("ended-attendance-to-process"),this.$bus.off("confirm-program-schedule"),this.$bus.off("confirm-finish-nutritionist-dialog"),this.$bus.off("confirm-finish-psychology-dialog"),this.$bus.off("nutritional-care-change-step"),this.$bus.off("conclude-attendance-program"),this.$bus.off("doctor-init-attendance"),this.$bus.off("publisherConnected"),this.timeCheckInterval&&clearInterval(this.timeCheckInterval)},methods:{saveProgram(){if(this.loadingSaving||!this.inCurrentAttendanceStep)return;this.$bus.emit("request-save-data");let e=this.prepareSavePayload(),t=e.bricks&&JSON.parse(e.bricks);if(t&&Object.values(t).find(e=>!e.isValid))return this.$bus.emit("open-snackbar",{message:"attendance_form_is_invalid"}),void(this.loadingSaving=!1);const a=[4,5,10,54];t.nutrition_plan_upload&&a.includes(e.program_id)?this.bodyFinishModal=t.nutrition_plan_upload.need_plan&&(!t.nutrition_plan_upload.filename||!t.nutrition_plan_upload.fileUrl):this.bodyFinishModal=!0,this.loadingSaving=!0,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ADD,e).then(n=>{this.bodyFinishModal?!t.nutrition_plan_upload&&a.includes(e.program_id)&&this.$bus.emit("open-snackbar",{message:"no_nutrition_plan_upload"}):this.checkLastAttendance();let i=this.$store.state.Data.Bricks.AttendanceBricks.bricks.nutrition_plan_upload;if(!i||i&&!i.isValid)Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).then(()=>{this.canScheduleProgram=!0,this.$bus.emit("open-snackbar",{message:"attendance_saved"})});else if(i&&i.isValid){let e={case_id:this.$store.state.Data.CaseAttendance.info.case_id,program_id:this.$store.state.Data.CaseAttendance.info.program_id};Ge.listHistory(e).then(e=>{e.data.case_attendance_ids.length>1&&e.data.case_attendance_ids[e.data.case_attendance_ids.length-1]!==this.$store.state.Data.CaseAttendance.info.case_attendance_id?Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDED,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).then(()=>{this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),this.$bus.emit("open-snackbar",{message:"attendance_finish"})}):Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.SCHEDULE_PENDING,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).then(()=>{ZI.sendSMS({company_id:this.item.company_id,template:this.$consts.SMS_TEMPLATES.WARNING_AVAILABLE_PLAN,case_attendance_id:this.$store.state.Data.CaseAttendance.caseAttendanceId}),this.canScheduleProgram=!0,this.$bus.emit("open-snackbar",{message:"attendance_saved"})})})}else t.nutrition_plan_upload&&a.includes(e.program_id)&&this.checkLastAttendance()}).catch(e=>{console.error(e),this.$bus.emit("open-snackbar",{message:"attendance_save_error"})}).finally(()=>{this.loadingSaving=!1,this.hasUnsavedData=!1})},checkLastAttendance(){this.loadingSaving=!0,this.canScheduleProgram=!1;let e={case_id:this.$store.state.Data.CaseAttendance.info.case_id,program_id:this.$store.state.Data.CaseAttendance.info.program_id};Ge.listHistory(e).then(e=>{let t=e.data;t.case_attendance_ids&&t.case_attendance_ids.length>1&&t.case_attendance_ids[t.case_attendance_ids.length-1]!=this.$store.state.Data.CaseAttendance.info.case_attendance_id&&Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDED,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).then(()=>{this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),this.$bus.emit("open-snackbar",{message:"attendance_finish"})})}).catch(e=>{console.error(e),this.$bus.emit("open-snackbar",{message:"attendance_save_error"})}).finally(()=>{this.loadingSaving=!1,this.canScheduleProgram=!0})},scheduleNextAttendance(){this.loadingFinish||this.$bus.emit("open-schedule-modal",this.$store.state.Data.CaseAttendance.info.program_id)},openModalFinish(){if(this.loadingFinish)return;if(this.isPsychologyProgram)return this.$bus.emit("request-save-data"),this.$bus.emit("open-finish-psychology-modal");const e=this.$consts.NUTRITIONAL_PROGRAM.includes(this.prepareSavePayload().program_id),t=this.$consts.SPORTIVE_PROGRAM.includes(this.prepareSavePayload().program_id),a=e?"nutrional":"sportive";let n=this.$store.state.Data.Bricks.AttendanceBricks.bricks;"string"===typeof n&&(n=JSON.parse(n));let i=n.nutrition_plan_upload||null;this.$bus.emit("open-finish-nutritionist-modal",(e||t)&&!i,a)},completionOfWellnessEvents(){this.$bus.emit("close-stream"),this.$bus.emit("close-stream-end-video"),this.$bus.emit("request-save-data")},finishProgram(){if(this.loading)return;this.loading=!0;let e=this.prepareSavePayload();if(e.bricks&&Object.values(JSON.parse(e.bricks)).find(e=>!e.isValid))return this.$bus.emit("open-snackbar",{message:"attendance_form_is_invalid"}),this.loadingFinish=!1,void(this.loading=!1);Ge.changeStatus({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING}).then(()=>{this.completionOfWellnessEvents()}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1}),this.loadingFinish=!0,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ADD,e).then(e=>{this.attendancesToProcess.length>0&&Ge.attendancesProccessCreate(this.attendancesToProcess),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.CLEAR_BRICK);const t=this.$store.state.Data.CaseAttendance.info.program_id,a=this.$store.state.Data.CaseAttendance.info.program_step;let n=this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDED;67==t&&2==a&&(n=this.$consts.QUEUE_ATTENDANCE_STATUS.ENDED),Ge.changeStatus({status:n,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,finish_case:!0}),this.$bus.emit("restart-queue-update"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("open-snackbar",{message:"attendance_finish"})}).catch(e=>{console.error(e),this.$bus.emit("open-snackbar",{message:"attendance_finish_error"})}).finally(()=>{this.loadingFinish=!1,this.loadingSaving=!1})},changeToAttendance(){let e=this.$store.state.Data.Bricks.AttendanceBricks.bricks.nutrition_plan_upload;e&&e.isValid?Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.SCHEDULE_PENDING,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).finally(()=>{Ge.scheduleAttendancePending({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id})}):(!e||e&&!e.isValid)&&Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id})},eventsOnSaveData(){this.$bus.emit("close-stream"),this.$bus.emit("end-session"),this.$bus.emit("toggle-edit-history",!1)},saveData(){const e=this.$store.state.Data.CaseAttendance.info.program_step,t=this.$store.state.Data.User.info.user_info.user_type;Ge.get({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).then(a=>{if(1==a.data.current_step&&a.data.doctor_id!=this.$store.state.Data.User.info.user_info.id)return console.log("[COMMUN SAVE] INCEPTION.  Attendance is in step one up does not belongs this user"),this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),void this.close();if("OPERATIONAL"!==t&&"SUPER_ADMIN"!==t||null==this.$store.state.Data.Queue.incoming_queue||"QUEUE"!==this.$store.state.Data.Queue.incoming_queue.type)this.can_save?console.error("can't save before stream start"):(this.$bus.emit("save-doctor-attendance"),this.certificationPending?this.eventsOnSaveData():Ge.changeStatus({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING}).then(()=>{this.eventsOnSaveData()}).catch(e=>{console.error(e)}));else{if(this.eventsOnSaveData(),this.$bus.emit("request-save-data"),this.$store.state.Data.Bricks.AttendanceBricks.bricks.conclusao_atendimento&&!this.$store.state.Data.Bricks.AttendanceBricks.bricks.conclusao_atendimento.attendance_complete_successfully&&this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.REMOVE_BRICK,{brick_key:"monitoramento_clinico"}),2==e&&67==this.$store.state.Data.CaseAttendance.info.program_id){let e=["emr_desfecho_psicologico","conclusao_atendimento"];for(let t in this.$store.state.Data.Bricks.AttendanceBricks.bricks)e.includes(t)||delete this.$store.state.Data.Bricks.AttendanceBricks.bricks[t]}let t=Ge.getInvalidData(this.$store.state.Data.Bricks.AttendanceBricks.bricks);if(t.length>0)return this.$store.state.Data.Bricks.AttendanceBricks.bricks.attendance_complete_successfully||(this.errorMessage=this.$store.state.Data.Bricks.AttendanceBricks.bricks.conclusao_atendimento.message),void(this.errorMessage=t[0].message);this.attendancesToProcess.length>0&&(this.attendancesToProcess.map(e=>e.case_attendance_id=this.$store.state.Data.CaseAttendance.info.case_attendance_id),this.$store.state.Data.Bricks.AttendanceBricks.bricks.attendance_to_process=this.attendancesToProcess),e>1&&(this.loadingSaving=!0);let a=this.prepareSavePayload();this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ADD,a).then(e=>{this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.CLEAR_BRICK),this.$store.state.Data.CaseAttendance.info.program_step==this.$store.state.Data.CaseAttendance.info.program_information.length?Ge.changeStatus({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.ENDED}).then(()=>{this.$bus.emit("restart-queue-update"),this.$bus.emit("close-temp-data-tab")}).catch(e=>{console.error(e)}):(this.$bus.emit("restart-queue-update"),this.$bus.emit("close-temp-data-tab"))}).catch(e=>{console.error(e)})}})},prepareSavePayload(){let e="[]";this.$store.state.Data.CaseAttendance.info.program_step==R.PROGRAM_STEPS.ENFERMAGEM_ATIVA&&this.$store.state.Data.Bricks.AttendanceBricks.bricks.emr_conduta&&delete this.$store.state.Data.Bricks.AttendanceBricks.bricks.emr_conduta,this.$store.state.Data.Bricks.AttendanceBricks.bricks&&(e=JSON.stringify(this.$store.state.Data.Bricks.AttendanceBricks.bricks));let t={token:this.$store.state.Data.User.token,patient_id:this.$store.state.Data.CaseAttendance.info.patient_info.id,user_id:this.$store.state.Data.User.info.user_info.id,case_id:this.$store.state.Data.CaseAttendance.info.case_id,program_id:this.$store.state.Data.CaseAttendance.info.program_information[0].id,program_step:null!=this.$store.state.Data.CaseAttendance.info.program_step?this.$store.state.Data.CaseAttendance.info.program_step:1,due_date:Number.isInteger(this.$store.state.Data.CaseAttendance.info.due_date)?this.$moment(this.$store.state.Data.CaseAttendance.info.due_date).format("YYYY-MM-DD"):this.$store.state.Data.CaseAttendance.info.due_date,due_time:Number.isInteger(this.$store.state.Data.CaseAttendance.info.due_time)?this.$moment(this.$store.state.Data.CaseAttendance.info.due_time).format("HH:mm:ss"):this.$store.state.Data.CaseAttendance.info.due_time,bricks:e,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id};return t},sendDocumentData(){let e={case_attendance_id:this.case_id};this.$bus.emit("receive-document-data",e)}},computed:{...Object(K["b"])("Data/CaseAttendance",{certificationPending:"getCertificationPending"}),isPsychologyProgram(){return this.$consts.PSYCHOLOGY_PROGRAM.includes(this.$store.state.Data.CaseAttendance.info.program_id)},canSaveBasedOnScheduledTime(){try{const e=this.$moment(this.currentTime);if(this.doctorInitAttendance,this.attendanceStartTime,this.patientConnected,!this.$store.state.Data.CaseAttendance.info.sla)return!1;if(this.patientConnected)return!0;let t=this.$moment(this.$store.state.Data.CaseAttendance.info.sla,"YYYY-MM-DD HH:mm:ss");if(t=t.subtract(3,"hours"),!t.isValid())return!1;if(t.isAfter(e)){const a=t.clone().add(90,"seconds");return e.isAfter(a)}if(!this.doctorInitAttendance||!this.attendanceStartTime)return!1;const a=this.attendanceStartTime.clone().add(90,"seconds");return e.isAfter(a)}catch(e){return console.error("Erro ao validar hor
o para processeguir.",authenticating:"Autenticando profissional",digital_certification_certisign_description:"Por gentileza, insira o n
o Paulo",Estado:"SP",CodigoPostal:"04571-010"},case_attendance_id:void 0===this.$store.state.Data.CaseAttendance.info.case_attendance_id?this.$store.state.Data.CaseAttendance.info.id:this.$store.state.Data.CaseAttendance.info.case_attendance_id});Ge.initPrescriptionAttendance(a).then(e=>{this.prescriptionTokens[e.data.idPrescricao]=e.data.bearer_token,this.prescription.attendanceUrl=e.data.wireframe_url,this.$nextTick(()=>{this.$bus.emit("open-modal-prescription")})}).catch(e=>{this.prescription.error=!0,console.error(e)}).finally(()=>{this.prescription.loading=!1})},sendSaveData(){let e={brick_key:this.brickName,brick_data:{prescription_id:this.prescription.id,documents:this.prescription.documents?JSON.stringify(this.prescription.documents):null,medications:this.prescription.medications.length?JSON.stringify(this.prescription.medications):null,manual_medications:this.prescription.manualMedications.length?JSON.stringify(this.prescription.manualMedications):null,exams:this.prescription.exams.length?JSON.stringify(this.prescription.exams):null,certificate:this.prescription.certificate?JSON.stringify(this.prescription.certificate):null,time_off:!!this.prescription.certificate},isValid:!0,message:""};if(void 0!==e.brick_data.prescription_id&&null!==e.brick_data.prescription_id){const t=e.brick_data.prescription_id,a=this.prescriptionTokens&&this.prescriptionTokens[t];"string"===typeof a&&""!==a.trim()?(e.brick_data.bearer_token=a,this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)):console.warn("Token inv
o"}],selectedAlcoholOption:null,hasExam:!1,hasDisease:!1,hasMedication:!1,hasSupplement:!1,hasSurgery:!1,familyDisease:null,surgery:null,diseasesList:[{name:""}],examList:[],medicationList:[],familyDiseaseList:[],supplementList:[],surgeryList:[],cidList:[],cidRef:{}}},created(){if(this.getCids(),this.brickDetails&&this.brickDetails.questionario_saude&&this.brickDetails.questionario_saude.length>0){let e=this.brickDetails.questionario_saude[0];e.chronic_diseases_cids.length>0&&(this.diseasesList=[]),e.chronic_diseases_cids.forEach(e=>{-1===e.name.indexOf(e.code)&&(e.name=e.code+" - "+e.name),this.diseasesList.push(e)});for(let t in e.exam_alterations)this.examList.push({name:e.exam_alterations[t]});for(let t in e.medicine_used)this.medicationList.push({name:e.medicine_used[t]});for(let t in e.family_diseases_cids)this.familyDiseaseList.push(e.family_diseases_cids[t]);e.family_diseases_cids.length>0&&(this.familyDiseasesList=[]),e.family_diseases_cids.forEach(e=>{-1===e.name.indexOf(e.code)&&(e.name=e.code+" - "+e.name),this.familyDiseasesList.push(e)});for(let t in e.supplements_used)this.supplementList.push({name:e.supplements_used[t]});for(let t in e.surgeries_had)this.surgeryList.push({name:e.surgeries_had[t]});for(let t in e.main_complaints)this.selectedComplaints.push(e.main_complaints[t].id);this.surgeryBool=!!e.had_surgeries,this.supplementBool=!!e.uses_supplements,this.examBool=!!e.has_exam_alterations,this.familyBool=!!e.has_family_diseases,this.medicationBool=!!e.uses_medicine,this.selectedSmokingOption=e.tabagism,this.selectedAlcoholOption=e.drinking}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},methods:{getCids(){let e=this.$store.state.Data.User.token,t={token:e};this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.GET_CIDS,t).then(e=>{this.cidList=e.map(e=>{let t=e.code+" - "+e.name;return this.cidRef[t]=e.id,t})}).catch(e=>{})},checkExam(){1==this.examBool?this.hasExam=!0:this.hasExam=!1,0==this.examBool&&this.$v.examName.$reset()},checkFamilyDisease(){1==this.familyBool?this.hasDisease=!0:this.hasDisease=!1,0==this.familyBool&&this.$v.familyDisease.$reset()},checkMedication(){1==this.medicationBool?this.hasMedication=!0:this.hasMedication=!1,0==this.medicationBool&&this.$v.medication.$reset()},checkSupplement(){1==this.supplementBool?this.hasSupplement=!0:this.hasSupplement=!1,0==this.supplementBool&&this.$v.supplement.$reset()},checkSurgery(){1==this.surgeryBool?this.hasSurgery=!0:this.hasSurgery=!1,0==this.surgeryBool&&this.$v.surgery.$reset()},addCid(){this.$v.diseasesList.$touch(),this.$v.diseasesList.$each.$invalid||this.cidDiagnosis&&this.cidDiagnosis.length>0&&(this.diseasesList.push(cidDiagnosis),this.cidDiagnosis="")},deleteItem(e){let t=this.diseasesList.indexOf(e);this.diseasesList.splice(t,1)},addExam(){this.$v.examList.$touch(),this.$v.examList.$each.$invalid||this.examName&&this.examName.length>0&&(this.examList.push({name:this.examName}),this.examName="",this.$v.examName.$reset())},deleteExam(e){let t=this.examList.indexOf(e);this.examList.splice(t,1)},addFamilyDisease(){this.$v.familyDiseaseList.$touch(),this.$v.familyDiseaseList.$each.$invalid||this.familyDisease&&this.familyDisease.length>0&&(this.familyDiseaseList.push({name:this.familyDisease}),this.familyDisease="",this.$v.familyDisease.$reset())},deleteFamilyDisease(e){let t=this.familyDiseaseList.indexOf(e);this.familyDiseaseList.splice(t,1)},addMedication(){this.$v.medicationList.$touch(),this.$v.medicationList.$each.$invalid||this.medication&&this.medication.length>0&&(this.medicationList.push({name:this.medication}),this.medication="",this.$v.medication.$reset())},deleteMedication(e){let t=this.medicationList.indexOf(e);this.medicationList.splice(t,1)},addSupplement(){this.$v.supplementList.$touch(),this.$v.supplementList.$each.$invalid||this.supplement&&this.supplement.length>0&&(this.supplementList.push({name:this.supplement}),this.supplement="",this.$v.supplement.$reset())},deleteSupplement(e){let t=this.supplementList.indexOf(e);this.supplementList.splice(t,1)},addSurgery(){this.$v.surgeryList.$touch(),this.$v.surgeryList.$each.$invalid||this.surgery&&this.surgery.length>0&&(this.surgeryList.push({name:this.surgery}),this.surgery="",this.$v.surgery.$reset())},deleteSurgery(e){let t=this.surgeryList.indexOf(e);this.surgeryList.splice(t,1)},sendSaveData(){this.examName&&this.examName.length>0&&(this.examList.push({name:this.examName}),this.examName="",this.$v.examName.$reset()),this.familyDisease&&this.familyDisease.length>0&&(this.familyDiseaseList.push({name:this.familyDisease}),this.familyDisease="",this.$v.familyDisease.$reset()),this.cidDiagnosis&&this.cidDiagnosis.length>0&&(this.diseasesList.push(cidDiagnosis),this.cidDiagnosis=""),this.medication&&this.medication.length>0&&(this.medicationList.push({name:this.medication}),this.medication="",this.$v.medication.$reset()),this.supplement&&this.supplement.length>0&&(this.supplementList.push({name:this.supplement}),this.supplement="",this.$v.supplement.$reset()),this.surgery&&this.surgery.length>0&&(this.surgeryList.push({name:this.surgery}),this.surgery="",this.$v.surgery.$reset());let e=[],t=[],a=[],n=[],i=[],s=[];this.diseasesList.forEach(t=>{e.push(this.cidRef[t.name])}),this.familyDiseaseList.forEach(e=>{t.push(this.cidRef[e.name])}),this.examList.forEach(e=>{a.push(e.name)}),this.medicationList.forEach(e=>{n.push(e.name)}),this.supplementList.forEach(e=>{i.push(e.name)}),this.surgeryList.forEach(e=>{s.push(e.name)});let o={brick_key:"questionario_saude",brick_data:{chronic_diseases_cid_ids:e,has_exam_alterations:this.examBool,exam_alterations:a,has_family_diseases:this.familyBool,family_diseases_cid_ids:t,uses_medicine:this.medicationBool,medicine_used:n,uses_supplements:this.supplementBool,supplements_used:i,had_surgeries:this.surgeryBool,surgeries_had:s,main_complaints_ids:this.selectedComplaints,tabagism_id:this.selectedSmokingOption.id,drinking_id:this.selectedAlcoholOption.id}};this.$bus.emit("receive-brick-data",o)}},validations:{selectedSmokingOption:{required:Ae["required"]},selectedAlcoholOption:{required:Ae["required"]},examName:{required:Ae["required"]},surgery:{required:Ae["required"]},medication:{required:Ae["required"]},supplement:{required:Ae["required"]},familyDisease:{required:Ae["required"]},familyDiseaseList:{$each:{name:{required:Ae["required"]}}},diseasesList:{$each:{name:{required:Ae["required"]}}},examList:{$each:{name:{required:Ae["required"]}}},medicationList:{$each:{name:{required:Ae["required"]}}},supplementList:{$each:{name:{required:Ae["required"]}}},surgeryList:{$each:{name:{required:Ae["required"]}}}},computed:{selectedSmokingOptionErrors(){const e=[];return this.$v.selectedSmokingOption.$dirty?(!this.$v.selectedSmokingOption.required&&e.push(this.$t("access_controls.required")),e):e},selectedAlcoholOptionErrors(){const e=[];return this.$v.selectedAlcoholOption.$dirty?(!this.$v.selectedAlcoholOption.required&&e.push(this.$t("access_controls.required")),e):e},examNameErrors(){const e=[];return this.$v.examName.$dirty?(!this.$v.examName.required&&e.push(this.$t("access_controls.required")),e):e},familyDiseaseErrors(){const e=[];return this.$v.familyDisease.$dirty?(!this.$v.familyDisease.required&&e.push(this.$t("access_controls.required")),e):e},medicationErrors(){const e=[];return this.$v.medication.$dirty?(!this.$v.medication.required&&e.push(this.$t("access_controls.required")),e):e},supplementErrors(){const e=[];return this.$v.supplement.$dirty?(!this.$v.supplement.required&&e.push(this.$t("access_controls.required")),e):e},surgeryErrors(){const e=[];return this.$v.surgery.$dirty?(!this.$v.surgery.required&&e.push(this.$t("access_controls.required")),e):e}}},xd=$d,Vd=(a("fbff"),Object(I["a"])(xd,Ud,yd,!1,null,null,null)),Gd=Vd.exports,Fd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"monitoring"},[t("div",{staticClass:"monitoring-title mr-8 align-self-center mb-6"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.emr_quiz")))]),e._v(" "+e._s(e.$t("patient.health"))+"\n    ")]),t("div",[t($t["a"],{staticClass:"long-inputs mb-n1",attrs:{items:e.generalOptions,"return-object":"","item-text":"name",label:e.$t("patient.monitoring_recommendation"),height:"37px","error-messages":e.selectedRecommendationErrors,"append-icon":"keyboard_arrow_down",outlined:""},on:{blur:function(t){return e.$v.selectedRecommendation.$touch()}},model:{value:e.selectedRecommendation,callback:function(t){e.selectedRecommendation=t},expression:"selectedRecommendation"}})],1),t("div",[t(Ni["a"],{staticClass:"long-inputs mb-n1",attrs:{height:"100px",label:e.$t("patient.monitoring_complaints"),"error-messages":e.monitoringComplaintsErrors,outlined:"","no-resize":""},on:{blur:function(t){return e.$v.monitoringComplaints.$touch()}},model:{value:e.monitoringComplaints,callback:function(t){e.monitoringComplaints=t},expression:"monitoringComplaints"}})],1),t("div",[t($t["a"],{staticClass:"long-inputs mb-n1",attrs:{items:e.generalOptions,"return-object":"","item-text":"name",label:e.$t("patient.monitoring_goals"),height:"37px","error-messages":e.selectedGoalErrors,"append-icon":"keyboard_arrow_down",outlined:""},on:{blur:function(t){return e.$v.selectedGoal.$touch()}},model:{value:e.selectedGoal,callback:function(t){e.selectedGoal=t},expression:"selectedGoal"}})],1),t("div",[t($t["a"],{staticClass:"long-inputs",attrs:{items:e.generalOptions,"return-object":"","item-text":"name",label:e.$t("patient.monitoring_goals"),height:"37px","error-messages":e.selectedChangeErrors,"append-icon":"keyboard_arrow_down",outlined:""},on:{blur:function(t){return e.$v.selectedChange.$touch()}},model:{value:e.selectedChange,callback:function(t){e.selectedChange=t},expression:"selectedChange"}})],1)])},Bd=[],wd={props:["brickDetails"],data(){return{selectedRecommendation:null,generalOptions:["Sim","Parcial","N
o. Tente novamente em alguns instantes.",server_error_try_again:"Erro interno do servidor. Tente novamente em alguns instantes.",authorization_error_login_again:"Sess
o."),this.$bus.emit("close-temp-data-tab"),clearInterval(this.sessionCheckInterval),this.invalidSession=!1,D.logoutSession(),sessionStorage.removeItem("token"),sessionStorage.removeItem("session_token")}.bind(this))}},computed:{}},L={name:"App",components:{SessionModal:O},mixins:[p,g],data(){return{tabId:null,sessionCheckInterval:null,invalidSession:!1}},async created(){this.createTabSession(),await this.handleSession(),this.initFeatureFlagsAndPreferences(),this.listenLogout()},beforeDestroy(){clearInterval(this.sessionCheckInterval)},methods:{continueSession(){this.handleForceSession()},performFullLogout(e){try{this.sessionCheckInterval&&(clearInterval(this.sessionCheckInterval),this.sessionCheckInterval=null),Promise.resolve(D.logoutSession()).catch(()=>{}),sessionStorage.removeItem("token"),sessionStorage.removeItem("session_token"),sessionStorage.removeItem("tabId");const t=localStorage.getItem("last-version");localStorage.clear(),t&&localStorage.setItem("last-version",t),localStorage.removeItem("activeTabId");const a=e?"?"+new URLSearchParams(e).toString():"";window.location.replace("/login"+a)}catch(t){console.error("[Logout] Falha ao processar logout:",t),window.location.replace("/login")}},listenLogout(){this.$bus&&this.$bus.$off&&this.$bus.$off("logout"),this.$bus.$on("logout",e=>{console.log("[App] Logout recebido 
o"),this.programIdsEsportivo.includes(this.attendance.program_information[0].id)&&(this.attendance.attendance_center_name="Teladoc Esportivo")}).catch(e=>{console.error(e),this.$bus.emit("show-error-message",{message:"could_not_get_attendance_info",display:!0}),this.close()}).finally(()=>{this.loading=!1})}}},Gr=Vr,Fr=(a("fb49"),Object(I["a"])(Gr,$r,xr,!1,null,"5cb5293f",null)),Br=Fr.exports,wr={components:{EmergencyIcon:Ut,CaseLaterComerModal:kr,CaseEndAttendanceToProcessModal:yr,RescheduleModal:Br},data(){return{loadingTotal:!0,total:0,caseAttendances:[],collapsed:!0,loading:!1,reverse:{},currentPage:1,totalPages:0}},created(){this.revertProgramSpeciality(),this.$bus.on("case-on-going-refresh",()=>{this.loading=!0,this.getPatientNewestAttendances()}),this.getPatientNewestAttendances()},beforeDestroy(){this.$bus.off("case-on-going-refresh")},methods:{createLaterComerCase(e){this.$bus.emit("case-later-comer-dialog",e)},staffName(e){return e.doctor_info&&e.doctor_info.name?e.doctor_info.name:e.attendant_info&&e.attendant_info.name?e.attendant_info.name:""},cancel(e){this.$bus.emit("open-tabs-cancel-attendance-modal",e),this.$bus.emit("cancel-attendance-modal-in-triage")},createReschedule(e){this.$bus.emit("open-reschedule-modal",e)},collapseAction(){this.collapsed=!this.collapsed},beforeEnter(e){e.style.height="0",e.style.opacity="0"},enter(e,t){const a=e.scrollHeight;e.style.transition="height 0.5s ease, opacity 0.5s ease",e.style.height=a+"px",e.style.opacity="1",setTimeout(()=>{e.style.height="",t()},500)},beforeLeave(e){e.style.height=e.scrollHeight+"px",e.style.opacity="1"},leave(e,t){e.style.transition="height 0.5s ease, opacity 0.5s ease",e.style.height="0",e.style.opacity="0",setTimeout(t,500)},revertProgramSpeciality(){let e=R.SPECIALITY_BY_PROGRAM;for(const t in e)e.hasOwnProperty(t)&&(this.reverse[e[t]]=t)},convertProgramName(e){return this.reverse[e.program_id]},formatDate(e){let t=e.due_date.split(" ")[0],a=Ot.a.tz(t+" "+e.due_time,"utc");return a.tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},capitalizeString(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""},changePage(){this.getPatientNewestAttendances()},nextPage(){this.currentPage=this.currentPage+1>this.total?this.total:this.currentPage+1,this.changePage()},previousPage(){this.currentPage=this.currentPage-1<1?1:this.currentPage-1,this.changePage()},getPatientNewestAttendances(){if(!this.$store.state.Data.Patient.info.group_id)return;this.loading=!0;let e={group_id:this.$store.state.Data.Patient.info.group_id,member_id:this.$store.state.Data.Patient.info.id,emergency_member:!!this.$store.state.Data.Patient.info.emergency_member,status_id:[1,12,13,16],order_by:"sla",sort:"desc",limit:10,offset:10*(this.currentPage-1)};Ge.caseAttendancesNewestPatient(e).then(e=>{this.caseAttendances=e.data,this.loadingTotal&&(this.loadingTotal=!1),e.data[0]&&(this.total=e.data[0].total_records,this.totalPages=Math.ceil(this.total/10))}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})}},computed:{showStartEllipsis(){return this.currentPage>3},showEndEllipsis(){return this.currentPage<this.totalPages-2},middlePages(){const e=[];return this.currentPage>1&&this.currentPage<this.totalPages&&e.push(this.currentPage),this.currentPage+1<this.totalPages&&e.push(this.currentPage+1),e}}},Hr=wr,qr=(a("57a1"),Object(I["a"])(Hr,Tr,Rr,!1,null,"27e0c66e",null)),Yr=qr.exports,jr={props:["item","ASOCompany"],components:{CasesOnGoing:Yr,Patient:$s,Triage:so,DisponibilidadeVivo:Ys,CallReason:Oo,Programs:Do,TriageSaveComponent:vo,ProgramDetails:_r,DisponibilidadeDrTeladoc:Sr},data(){return{triage:!0,triageInfo:null,triageIds:[],productBlocks:null,programList:[],callReasonInfo:[],blocks:[],allowVivo:!1,bricks:[],allowDrTeladoc:!1}},created(){this.getCompanyMap(this.item.company_id),this.allowVivo=3==this.item.company_id,this.allowDrTeladoc=4==this.item.company_id,this.$bus.off("load-case-history-attendance")},methods:{getCompanyMap(e){this.triageInfo=this.$store.state.Data.Screening.triageInfo,this.programList=[],this.$store.state.Data.Screening.programList.forEach(e=>{R.ALLOWEDPROGRAMS.includes(e.program_info.name)&&this.programList.push(e.program_info)}),this.productBlocks=this.$store.state.Data.Screening.productBlocks,this.callReasonInfo=this.$store.state.Data.Screening.callReasonInfo,this.bricks=this.getBrickList(),setTimeout(()=>{this.sendBrickData()},500)},getBrickList(){let e=this.triageInfo.product_brick_info&&Object.keys(this.triageInfo.product_brick_info).length>0?Object.keys(this.triageInfo.product_brick_info)[0]:null;return e?this.triageInfo.product_brick_info[e].brick_list:[]},sendBrickData(){this.$bus.emit("brick-list-screening",this.bricks)}}},Kr=jr,Zr=(a("0372"),Object(I["a"])(Kr,Cs,Ts,!1,null,"db0ba5f8",null)),Qr=Zr.exports,Jr=function(){var e=this,t=e._self._c;return t("div",{staticClass:"history-attendance-main"},[t("div",[t("p",{staticClass:"attendance-number horizontal-margin"},[e._v("Atendimento: "+e._s(e.attendance_data.id))]),t("Patient",{directives:[{name:"show",rawName:"v-show",value:e.openedCase,expression:"openedCase"}],staticClass:"horizontal-margin",attrs:{item:e.attendance_data}}),!e.loading&&Object.keys(e.screenings).length>0?t("TriagemEnfermagem",{attrs:{brickDetails:e.screenings}}):e._e(),!e.loading&&Object.keys(e.screenings).length>0&&e.programInfo&&e.programInfo.options.length>0?t("TriagemGenericaEnfermagem",{attrs:{program:e.programInfo,brickDetails:e.screenings}}):e._e(),!e.loading&&Object.keys(e.screenings).length>0&&e.programInfo&&0===e.programInfo.options.length?t("TriagemInterna",{attrs:{brickDetails:e.screenings,item:e.attendance_data}}):e._e(),e.nutritionCaseSteps&&e.nutritionCaseSteps.length>0?t("div",{staticClass:"step-list nutrition"},[e._l(e.nutritionCaseSteps,(function(a,n){return[n>0?t("div",{staticClass:"step-dash"}):e._e(),t("div",{staticClass:"step-button",class:{"selected-step disabled":e.selected_step==n},on:{click:function(t){return e.chooseNutritionStep(n,a)}}},[e._v(e._s(n+1))])]}))],2):t("div",{staticClass:"step-list"},[e._l(e.brickDetails,(function(a,n){return[n>1?t("div",{staticClass:"step-dash"}):e._e(),t("div",{staticClass:"step-button",class:{"selected-step":e.selected_step==n,disabled:!e.enableSteps.includes(n)},on:{click:function(t){return e.chooseStep(n,a)}}},[e._v(e._s(n))])]}))],2),e.nutritionCaseSteps&&e.nutritionCaseSteps.length>0?t("div",{staticClass:"attendance-wrapper"},e._l(e.brickDetails,(function(e,a){return t("div",{key:a,staticClass:"attendance-display"},[t("Triage",{staticClass:"horizontal-margin",attrs:{item:e,bricks:e,brickDetails:e}})],1)})),0):t("div",{staticClass:"attendance-wrapper"},[!e.loading&&e.attendance_data.id?t("CaseCallReason",{attrs:{case_attendance_id:e.attendance_data.id}}):e._e(),e._l(e.brickDetails,(function(a,n){return t("div",{key:n,staticClass:"attendance-display"},[e.selected_step==n?t("div",[t("Triage",{staticClass:"horizontal-margin",attrs:{item:a,bricks:a,brickDetails:a}})],1):e._e()])}))],2),0==e.bricks.length?t("div",{directives:[{name:"show",rawName:"v-show",value:e.openedCase,expression:"openedCase"}],staticClass:"center-text"},[e._v("N
o..."),this.sessionCheckInterval&&clearInterval(this.sessionCheckInterval),this.sessionCheckInterval=setInterval(async function(){try{let e=sessionStorage.getItem("token");if(!e)return void console.warn("[Session] Token n
o"}}},Us=Ps,ys=(a("b018"),Object(I["a"])(Us,Ds,gs,!1,null,"7fbd664e",null)),$s=ys.exports,xs=a("9a96"),Vs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"brick-title trr"},[t("div",{staticClass:"brick-title mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.available_attendances_vivo")))]),t(Xn["a"],[t(ce["a"],{staticClass:"vouchers-data"},[t(oe["a"],{attrs:{cols:"12",md:e.holderSelected?"9":"12"}},[t(ce["a"],{staticClass:"voucher-section pa-0 ma-0"},[t("span",{staticClass:"mt-8 ml-1 speciality-text"},[e._v(e._s(e.$t("attendance.speciality"))+":")]),t(oe["a"],{staticClass:"mt-7",attrs:{cols:"12",md:"3"}},[t($t["a"],{attrs:{items:e.programs,outlined:"","item-text":"translate","item-value":"program_id"},scopedSlots:e._u([{key:"item",fn:function(a){return["object"!==typeof a.item?[t("v-list-tile-content",{domProps:{textContent:e._s(a.item)}})]:[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:e._s(a.item.translate)}})],1)]]}}]),model:{value:e.selectedProgram,callback:function(t){e.selectedProgram=t},expression:"selectedProgram"}})],1),t(oe["a"],{staticClass:"pa-0 ma-0",attrs:{cols:"12",md:"7"}},[t(ot["a"],{attrs:{"show-arrows":"",height:"80"}},[t(xs["a"],{attrs:{color:"white"}}),e._l(e.holders,(function(a,n){return t(it["a"],{key:n,attrs:{href:"#tab-"+n,"active-class":"blue--text border-blue"},on:{click:function(t){return e.showDetais(a)}}},[t("fieldset",[t("legend",{staticClass:"text-uppercase"},[e._v(" "+e._s(e.$t("attendance.available_attendances")))]),t(ce["a"],{staticClass:"pa-0 ma-0"},[t(oe["a"],{staticClass:"text-start pa-0 ma-0",attrs:{cols:"9"}},[t("span",{staticClass:"holder-name-text"},[e._v(e._s(a.holder_name))])]),t(oe["a"],{staticClass:"pt-1",attrs:{cols:"3"}},[t("span",{staticClass:"subtitle-1"},[e._v(e._s(a.voucher_quantity))])])],1)],1)])}))],2)],1)],1)],1),e.holderSelected?t(oe["a"],{staticClass:"voucher-section pt-2",attrs:{cols:"12",md:e.holderSelected?"3":"0"}},[t("p",{staticClass:"body-1 mb-0"},[e._v("\n            "+e._s(e.$t("attendance.renovation_date"))+":\n            "),""!=e.holderSelected.last_renewal?t("b",[e._v(" "+e._s(e._f("formatRawDate")(e.holderSelected.last_renewal))+" ")]):e._e()]),t("p",{staticClass:"body-1 mb-0 holder-name-text"},[e._v("\n            "+e._s(e.$t("attendance.package"))+":\n            "),t("b",[e._v(" "+e._s(e.holderSelected.subscription_model_period)+" ")])]),t("p",{staticClass:"body-1 mb-0"},[e._v("\n            "+e._s(e.$t("attendance.subscription"))+":\n            "),t("b",[e._v(" "+e._s(e.holderSelected.subscription_model_name)+" ")])])]):e._e()],1)],1)],1)])},Gs=[],Fs={getCasePrice(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.GET_CASE_PRICE;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getVoucherAvailable(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.GET_VOUCHER_AVAILABLE;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getDiscountTypes(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.GET_DISCOUNT_TYPE;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getMemberVouchers(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.GET_MEMBER_VOUCHERS;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},createCompanyVoucher(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.COMPANY_VOUCHER_CREATE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},changeVoucherStatus(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.CHANGE_VOUCHER_STATUS;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},changeCompanyVoucherConfig(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.CHANGE_VOUCHER_CONFIG;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getMemberVouchersVivo(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.LIST;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getVoucherStatusList(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VOUCHERS.STATUS_LIST,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},voucherUpdate(e){return new Promise((t,a)=>{C.a.put(R.ENDPOINTS.VOUCHERS.UPDATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getVoucherUserList(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VOUCHERS.USER_LIST,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getVouchersByprograms(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.GET_MEMBER_VOUCHERS_BY_PROGRAM;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getMemberVouchersDrTeladoc(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VOUCHERS.GET_MEMBER_VOUCHERS_BY_PROGRAM;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},Bs={getProgramBricksDataHistory(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.GET_PROGRAM_BRICKS_DATA_HISTORY,i={case_attendance_id:e};C.a.post(n,i,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},listPrograms(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.LIST_PROGRAMS;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getProgramsAttendancesByType(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.LIST_PROGRAMS_ATTENDANCES_TOTAL;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getProgramAttendancesStatus(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.LIST_PROGRAMS_STATUS;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getServiceTypes(){return new Promise((e,t)=>{let a=R.ENDPOINTS.GET_SERVICE_TYPES;C.a.get(a,{},{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})},getAccidentIndications(){return new Promise((e,t)=>{let a=R.ENDPOINTS.GET_ACCIDENT_INDICATIONS;C.a.get(a,{},{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})}},ws={props:["item"],mixins:[ve],components:{},data(){return{programs:[],selectedProgram:[],holders:[],holderSelected:null,group:{}}},created(){this.$bus.on("last-attendances-patient-group",e=>{this.group=e})},methods:{getVouchers(){let e={"member_ids[0]":this.$store.state.Data.Patient.info.id,"status_ids[0]":1};Fs.getMemberVouchersVivo(e).then(e=>{this.total=e.data.total}).catch(e=>{console.error(e)})},showDetais(e){this.holderSelected=e,this.setVoucher(e)},setVoucher(e){const t={member_id:e.member_id,voucher_quantity:e.voucher_quantity,program_id:this.selectedProgram};this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET_VOUCHERS,t)},getPrograms(){const e={company_id:this.patientInfo.company_id,group_id:this.group.group_id};Bs.listPrograms(e).then(e=>{this.programs=[{header:this.$t("attendance.medical_especialists")},{divider:!0},...e.data.program_info||[],{header:this.$t("attendance.well_being")},{divider:!0},...e.data.program_well_being||[]];const{program_id:t}=this.programs.find(e=>7===e.program_id);this.selectedProgram=t}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getVouchersByprograms(e){this.holders=[],this.setVoucher({}),this.holderSelected=null;const t={member_id:this.patientInfo.id,program_id:e.programId,company_id:this.patientInfo.company_id,group_id:this.group.group_id};Fs.getVouchersByprograms(t).then(e=>{this.holders=e.data||[],1===this.holders.length&&this.setVoucher(this.holders[0])}).catch(e=>{console.error(e)})}},watch:{selectedProgram(e){this.getVouchersByprograms({programId:e})},patientInfo(){this.getPrograms()}},computed:{patientInfo(){return this.$store.getters[this.$consts.PATIENT_ACTIONS.GET_PATIENT]||{}}}},Hs=ws,qs=(a("6415"),Object(I["a"])(Hs,Vs,Gs,!1,null,"9ceae67e",null)),Ys=qs.exports,js=function(){var e=this,t=e._self._c;return e.component.length>0?t("div",{staticClass:"mt-6 trr"},e._l(e.component,(function(a,n){return t(a,{key:n,tag:"component",attrs:{item:e.item,brickDetails:e.brickDetails}})})),1):e._e()},Ks=[],Zs=a("67b6"),Qs=a("43a6"),Js=function(){var e=this,t=e._self._c;return e.visible?t("div",{staticClass:"trr mt-6"},[t("div",{staticClass:"triage-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("patient.triage")))]),e._v("\n    "+e._s(e.$t("patient.nursing"))+"\n  ")]),t("div",{staticClass:"textareas d-flex"},[t("div",{staticClass:"mt-4 ml-2 areas"},[t(Ni["a"],{attrs:{height:"100px",readonly:e.disable,label:e.$t("patient.triage"),outlined:"","no-resize":""},on:{change:function(t){return e.changeScreening(t)}},model:{value:e.screening,callback:function(t){e.screening=t},expression:"screening"}})],1)]),t("div",{staticClass:"pregnant-container"},[t("div",{staticClass:"ml-2"},[t("span",{staticClass:"patient-subtitle"},[e._v(e._s(e.$t("patient.pregnant")))])]),t(Qs["a"],{attrs:{row:"",disabled:e.disable},model:{value:e.pregnant,callback:function(t){e.pregnant=t},expression:"pregnant"}},[t(Zs["a"],{attrs:{value:!1,label:e.$t("patient.no")},on:{change:function(t){return e.updatePregnant(!1)}}}),t(Zs["a"],{attrs:{value:!0,label:e.$t("patient.yes")},on:{change:function(t){return e.updatePregnant(!0)}}})],1)],1)]):e._e()},Ws=[],Xs={props:["item","brickDetails"],name:"triagem_enfermagem",data(){return{screening:"",pregnant:null,disable:!1,visible:!0}},created(){if(this.visible=!0,1==this.$store.state.Data.CaseAttendance.history_mode&&(this.disable=!0),this.brickDetails&&this.brickDetails.triagem_enfermagem&&this.brickDetails.triagem_enfermagem.length>0){this.disable=!0;let e=this.brickDetails.triagem_enfermagem[0];e.screening&&(this.screening=e.screening,this.pregnant=!!e.is_pregnant,this.disable=!0)}this.$bus.on("request-save-data",e=>{this.disable||this.sendSaveData()}),this.$bus.on("receive-screening-data",e=>{this.receiveScreeningData(e)})},onDestroy(){this.disable||this.$bus.off("request-save-data")},methods:{changeScreening(e){this.$store.dispatch(this.$consts.BRICKS_ACTIONS.TRIAGEM_ENFERMAGEM_ACTIONS.SET_TRIAGEM,this.screening)},updatePregnant(e){this.pregnant=e,this.$store.dispatch(this.$consts.BRICKS_ACTIONS.TRIAGEM_ENFERMAGEM_ACTIONS.SET_PREGNANT,this.pregnant)},sendSaveData(){let e={brick_key:"triagem_enfermagem",brick_data:{summary:this.summary,pregnant:this.pregnant,is_pregnant:this.pregnant,screening:this.screening}};!0!==this.disable&&this.$bus.emit("receive-brick-data",e)},receiveScreeningData(e){this.visible=!0,e&&e.screening?(this.screening=e.screening,this.pregnant=e.is_pregnant,this.disable=!0):this.visible=!1}}},zs=Xs,eo=(a("3298"),Object(I["a"])(zs,Js,Ws,!1,null,null,null)),to=eo.exports,ao={props:["item","bricks","brickDetails"],components:{triagem_enfermagem:to},data(){return{brickData:null,component:[]}},created(){this.$bus.on("brick-list-screening",e=>{this.component=[],e.length>0&&e.forEach(e=>{this.component.push(e.key)})}),this.$bus.emit("tmp-show-history",!0)},beforeDestroy(){this.$bus.off("brick-list-screening")},methods:{}},no=ao,io=(a("c237"),Object(I["a"])(no,js,Ks,!1,null,null,null)),so=io.exports,oo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"patient-call-reason trr"},[t("div",{staticClass:"reason-title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.reason")))]),e._v("\n    "+e._s(e.$t("patient.call"))+"\n  ")]),t("div",{staticClass:"pat-checkboxes d-flex flex-wrap"},e._l(e.dataArray,(function(a,n){return t("div",{key:n,staticClass:"border round-border",class:{unselected:!a.checked,selected:a.checked}},[t(St["a"],{staticClass:"checkbox-padding",attrs:{label:a.title},on:{change:function(t){return e.handleActiveCheckbox(a,a)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"reason.checked"}}),1==a.checked&&a.path?t("div",{staticClass:"ml-6"},[t("embed",{attrs:{src:a.path,width:"1000px",height:"600px"}})]):e._e(),a.csv&&1==a.checked?t("div",{staticClass:"csv-file ml-3"},[t("ReasonDetails",{attrs:{indexes:e.indexes,parsed:e.parsed,dataArray:e.dataArray}})],1):e._e(),t("div",{staticClass:"d-flex flex-wrap"},e._l(a.subcategories,(function(n,i){return 1==a.checked?t("div",{key:i,staticClass:"border round-border subcategory",class:{unselected:!n.checked,selected:n.checked}},[t(St["a"],{staticClass:"checkbox-padding",attrs:{label:n.title},on:{change:function(t){return e.handleActiveCheckbox(n,a)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"reasonSub.checked"}}),1==n.checked&&n.path&&0==n.csv?t("div",{staticClass:"ml-6"},[t("embed",{attrs:{src:n.path,width:"1000px",height:"600px"}})]):e._e(),1==n.csv&&1==n.checked?t("div",{staticClass:"csv-file2"},[t("ReasonDetails",{attrs:{indexes:e.indexes,parsed:e.parsed,dataArray:e.dataArray}})],1):e._e(),t("div",{staticClass:"d-flex flex-wrap"},e._l(n.subcategories,(function(i,s){return 1==n.checked?t("div",{key:s,staticClass:"border round-border subcategory",class:{unselected:!i.checked,selected:i.checked}},[t(St["a"],{staticClass:"checkbox-padding",attrs:{label:i.title},on:{change:function(t){return e.handleActiveCheckbox(i,a)}},model:{value:i.checked,callback:function(t){e.$set(i,"checked",t)},expression:"reasonSubChild.checked"}}),1==i.checked&&i.path&&a.checked&&0==i.csv?t("div",[t("embed",{attrs:{src:i.path,width:"1000px",height:"600px"}})]):e._e(),1==i.csv&&1==i.checked&&a.checked?t("div",{staticClass:"csv-file2"},[t("ReasonDetails",{attrs:{indexes:e.indexes,parsed:e.parsed,dataArray:e.dataArray}})],1):e._e(),t("div",{staticClass:"d-flex flex-wrap"},e._l(i.subcategories,(function(n,s){return 1==i.checked?t("div",{key:s,staticClass:"border round-border subcategory",class:{unselected:!n.checked,selected:n.checked}},[t(St["a"],{staticClass:"checkbox-padding",attrs:{label:n.title},on:{change:function(t){return e.handleActiveCheckbox(n,a)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"reasonSubChildSub.checked"}}),1==n.checked&&n.path&&a.checked&&0==n.csv?t("div",[t("embed",{attrs:{src:n.path,width:"1000px",height:"600px"}})]):e._e(),1==n.csv&&1==n.checked&&a.checked?t("div",{staticClass:"csv-file2"},[t("ReasonDetails",{attrs:{indexes:e.indexes,parsed:e.parsed,dataArray:e.dataArray}})],1):e._e()],1):e._e()})),0)],1):e._e()})),0)],1):e._e()})),0)],1)})),0)])},ro=[],lo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reason-data"},[t("div",[t("embed",{attrs:{src:e.path,"max-width":"1000px",height:"300px"}})]),t("div",{staticClass:"display-csv mb-4"},[t(At["a"],{staticClass:"test",attrs:{"disable-sort":!0,headers:e.header,items:e.parsed,"hide-default-footer":!0}})],1)])},co=[],mo={data(){return{path:"",header:[],parsed_values:[],reason:null,reasonArray:[],visible:!1,parsed:[],indexes:[]}},created(){this.$bus.on("csv-contents",e=>{this.indexes=e.indexes,this.parsed=e.parsed,this.indexes.length>0&&this.parsed.length>0&&(this.header=[],this.parsed_values=[],this.indexes.forEach((e,t)=>{this.header.push({text:e,value:e})}),this.parsed_values=this.parsed)})},methods:{closeDetails(e){e.checked=!1;let t=this.reasonArray.indexOf(e);this.reasonArray.splice(t,1),this.$bus.emit("close-reason-details",e)}}},uo=mo,Ao=(a("8202"),Object(I["a"])(uo,lo,co,!1,null,null,null)),_o=Ao.exports,Eo={props:["callReasonInfo"],components:{ReasonDetails:_o},data(){return{item:[],path:null,type:"",display:!1,indexes:[],parsed:[],checked:[],dataArray:[],unchecked:[],selected:[],has_path:!1,is_checked:!1,has_path:!1,type:null,topChecked:!1,reasons:[],hasColumn:!1,column:!1,selectedReason:{selected_call_list:null,selected_call_reason:null,program_step:1},program_step:1}},created(){this.dataArray=this.callReasonInfo,this.$store.state.Data.CaseAttendance.info&&this.$store.state.Data.CaseAttendance.info.program_step&&(this.program_step=this.$store.state.Data.CaseAttendance.info.program_step)},methods:{handleActiveCheckbox(e,t){let a=e.call_reason_info?e.call_reason_info:e;a.subcategories&&a.subcategories.length>0&&(this.column=!0),e.checked||this.disableAllSubCategories(e),t.checked?this.selectedReason.selected_call_list=t.call_reason_list_id:(this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_SELECTED_CALL_REASONS,{call_reason_id:e.id,program_step:this.program_step}),this.selectedReason.selected_call_list=null),e.checked||e==t?(this.selectedReason.selected_call_reason=e.id,this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.SET_SELECTED_CALL_REASONS,{call_reason_id:e.id,program_step:this.program_step})):(this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_SELECTED_CALL_REASONS,{call_reason_id:e.id,program_step:this.program_step}),this.selectedReason.selected_call_reason=null);let n=null!=this.selectedReason.selected_call_list;n||(this.column=!1),this.openReasonDetails(e),this.displayCSVFile(e)},disableAllSubCategories(e){let t=e.call_reason_info?e.call_reason_info:e;t.subcategories&&t.subcategories.forEach(e=>{e.checked=!1,e.enabled=!1,e.is_checked=!1,this.closeReasonDetails(e),e.subcategories&&this.disableAllSubCategories(e)})},handleActiveSubCheckbox(e){this.displayCSVFile(e)},getReason(e){this.display=!0},openReasonDetails(e){e.enabled?this.closeReasonDetails(e):(this.getReason(e.id),e.enabled=!0)},closeReasonDetails(e){this.display=!1,e.enabled=!1,this.disableAllSubCategories(e),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_SELECTED_CALL_REASONS,e)},displayCSVFile(e){e.csv=!1,e.path&&e.path.length>0&&(this.type=e.path.substr(-3),"csv"==this.type&&(e.csv=!0,this.getReason(e.id)))},sendCsvData(){let e={parsed:this.parsed,indexes:this.indexes,dataArray:this.dataArray};this.$bus.emit("csv-contents",e)}}},Io=Eo,ho=(a("954d"),Object(I["a"])(Io,oo,ro,!1,null,null,null)),Oo=ho.exports,po=function(){var e=this,t=e._self._c;return t("div",{staticClass:"programs mt-4"},[t("div",{staticClass:"program-title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.our")))]),e._v("\n    "+e._s(e.$t("patient.programs"))+"\n  ")]),t("div",{staticClass:"prog-checkboxes"},e._l(e.programList,(function(a,n){return t("div",{key:n,staticClass:"overflows"},[t(St["a"],{staticClass:"prog-checkbox",class:{"disable-checkbox":e.disable&&"SYSTEM"!==a.type||0===e.qtdVouchers&&45!==a.id||e.restricted_programs_age.includes(a.id)&&e.age<e.minimum_age||e.restricted_to_children.includes(a.id)&&e.age>13},attrs:{disabled:e.disable&&"SYSTEM"!==a.type||0===e.qtdVouchers&&45!==a.id||e.restricted_programs_age.includes(a.id)&&e.age<e.minimum_age||e.restricted_to_children.includes(a.id)&&e.age>13,label:a.name,value:a.id},on:{change:function(t){return e.displayDetails(a,n)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"program.checked"}})],1)})),0)])},So=[],Co={props:["programList"],data(){return{programArray:[],display:!0,disable:!1,empty:!1,qtdVouchers:null,restricted_programs_age:[57],restricted_to_children:[68,69],minimum_age:null,age:1}},created(){this.minimum_age=this.$store.state.Data.General.minimumAgePsychologist,this.age=this.$moment().diff(this.$moment(this.$store.state.Data.Patient.info.birthdate),"years"),this.programArray=this.programList,this.$bus.on("total-vouchers",e=>{this.qtdVouchers=e}),this.programArray.forEach(e=>{e.checked=[]}),this.$bus.on("close-program-details",e=>{let t=this.programArray.find(t=>t.id==e.id);if("SYSTEM"!==e.type){this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.UNSET_SELECTED_PROGRAM,t);let e=this.programArray.indexOf(t);this.programArray[e].checked=[]}})},methods:{displayDetails(e){let t=this.programArray.indexOf(this.programArray.find(t=>t.id==e.id));if("SYSTEM"===e.type){if(e.checked&&e.checked.length>0){for(let t in this.programArray)e.id!==this.programArray[t].id&&(this.programArray[t].checked=[],this.$bus.emit("close-in-program-details",e),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.UNSET_SELECTED_PROGRAM,this.programArray[t].id));this.programArray[t].checked=e.id,this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.SET_SELECTED_PROGRAM,e)}else this.$bus.emit("close-in-program-details",e),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.UNSET_SELECTED_PROGRAM,e.id);this.disable=!this.disable}else e.checked&&e.checked.length>0?(this.programArray[t].checked=e.id,this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.SET_SELECTED_PROGRAM,e),this.$bus.emit("open-program-details",e),this.programArray[t].checked=e.id):(this.$bus.emit("close-in-program-details",e),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.UNSET_SELECTED_PROGRAM,e.id));0==this.programArray.length&&(e.empty=!0)}}},To=Co,Ro=(a("81aa"),Object(I["a"])(To,po,So,!1,null,null,null)),Do=Ro.exports,go=function(){var e=this,t=e._self._c;return t("div",{staticClass:"save-patient-component mb-8"},[""==e.saveError&&e.loading?e._e():t("div",{staticClass:"att red--text"},[e._v("\n    "+e._s(e.saveError)+"\n  ")]),t(r["a"],{staticClass:"save-bt",attrs:{color:"primary",disabled:e.disabled,loading:e.loading},on:{click:function(t){return t.preventDefault(),e.getDataFromComponents()}}},[t(at["a"],{staticClass:"mr-2",attrs:{size:"16",color:"white"}},[e._v("$vuetify.icons.custom_save")]),t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("external_controls.save")))])],1)],1)},Lo=[],fo={props:["brickInfo","item"],mixins:[ve],data(){return{patient_id:null,company_id:null,group_id:null,is_aso:null,case_id:null,saveError:"",loading:!1,disabled:!1,emergency:!1,urgencyId:null,priorityId:null,programErrorNames:[],attendancesToProcess:[],isSchedulerOMT:!1,double_booking_programs:[10,54],specialSchedulablePrograms:[7,16],chosenAgentByProgramId:[],othersPrograms:null,objCheckDoubleBooking:[],fullImmediately:!1}},created(){this.patient_id=this.item.id,this.$bus.on("calendar-view-agent-chosen",e=>{this.chosenAgentByProgramId[e.program_id]=e}),this.$bus.on("patient-select-urgency",e=>{this.urgencyId=e.id}),this.$bus.on("patient-select-priority",e=>{this.priorityId=e.id}),this.$bus.on("ended-attendance-to-process",e=>{this.attendancesToProcess.push(e)}),this.$bus.on("omt-is-scheduler-change",e=>{this.isSchedulerOMT=e}),this.$bus.on("finished-program-details",()=>{this.createCaseAttendances()}),this.$bus.on("created-case-later-comer",e=>{this.case_id=parseInt(e)}),this.$bus.on("is-aso",e=>{this.patient_id=e.member_id,this.company_id=e.company_id,this.is_aso=e.is_aso,this.group_id=e.group_id}),this.disableSavebutton()},beforeDestroy(){this.$bus.off("calendar-view-agent-chosen"),this.$bus.off("patient-select-urgency"),this.$bus.off("patient-select-priority"),this.$bus.off("ended-attendance-to-process"),this.$bus.off("finished-program-details"),this.$bus.off("is-aso")},methods:{...Object(K["c"])("Data/CaseAttendance",["setDoubleBooking"]),async getDataFromComponents(){if(!this.loading)if(this.saveError="",0!=this.selectedPrograms.length)if(this.case_id)this.$bus.emit("request-program-details");else{if(this.loading=!0,this.disabled=!0,0==this.$store.state.Data.Bricks.Triagem_enfermagem.screening.length)return this.disabled=!1,this.loading=!1,void(this.saveError=this.$t("attendance.warning_save_triage"));if(0==this.$store.state.Data.Bricks.CallReason.selectedCallReasons.length&&45==this.selectedPrograms[0].id)return this.disabled=!1,this.loading=!1,void(this.saveError=this.$t("attendance.warning_save_call_reasons"));this.emergency=!1,this.$store.state.Data.CaseAttendance.info.emergency_pass&&(this.patient_id=this.$store.state.Data.Patient.info.id,this.emergency=!0),await this.validateCheck(),this.createCase()}else this.saveError=this.$t("attendance.warning_save_programs")},async validateCheck(){for(let t=0;t<this.selectedPrograms.length;t++){const a=this.selectedPrograms[t];if(this.$consts.ONLY_IMMEDIATE_PROGRAMS.includes(a.id))continue;let n={service_line:"b2b",program_id:a.id,reschedule:!1,member_id:this.patient_id};try{const e=await Ge.checkDoublebooking(n);if(Object.keys(e.data).length>0){this.setDoubleBooking(e.data);let t={program_id:a.id,case_id:!!e.data.case_id,double_booking:e.data.double_booking};this.objCheckDoubleBooking.push(t)}}catch(e){console.error(e)}}},createCase(){this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CREATE,{member_id:this.patient_id,company_id:this.company_id?this.company_id:this.$store.state.Data.Patient.info.company_id,emergency_pass:this.emergency,is_aso:this.is_aso?this.is_aso:this.$store.state.Data.CaseAttendance.info.is_aso,group_id:this.group_id?this.group_id:this.$store.state.Data.Patient.info.group_id}).then(()=>{this.disabled=!1,this.case_id=this.$store.state.Data.CaseAttendance.caseAttendanceId,this.loading=!1,this.createCaseAttendances()}).catch(e=>{console.error(e),this.disabled=!1,this.loading=!1,this.saveError=this.$t("attendance.warning_save_attendance")})},createCaseAttendances(){if(this.loading)return;if(this.selectedPrograms.forEach(e=>{if(e.options.length>0&&0===e.selectedOptions.length&&0===e.selectedScheduleOptions)return this.disabled=!1,this.loading=!1,void(this.saveError=this.$t("attendance.warning_save_invalid_program"))}),this.saveError)return;this.$bus.off("finished-program-details",this.createCaseAttendances),this.loading=!0,this.disabled=!0;let e=this.selectedSchedulerPrograms.length;if(this.programErrorNames=[],e){if(e!==Object.values(this.chosenAgentByProgramId).length&&0===e)return this.disabled=!1,this.loading=!1,void(this.saveError=this.$t("attendance.no_agent_selected_for_schedule"));let t=this.selectedPrograms.map(e=>`${e.date} ${e.hour}`),a=t.some((e,a)=>t.indexOf(e)!=a);if(a)return this.disabled=!1,this.loading=!1,void(this.saveError=this.$t("attendance.same_date_time_schedules_error"));this.verifyAvailability()}else this.caseAttendanceAdd()},verifyAvailability(e=0){if(e>=this.selectedPrograms.length)return this.programErrorNames.length>0?(this.disabled=!1,this.loading=!1,this.saveError=`\n            ${this.$t("attendance.no_availability_for_programs_p1")} ${this.programErrorNames.join(", ")} ${this.$t("attendance.no_availability_for_programs_p2")}\n          `,void(this.programErrorNames=[])):this.selectedSchedulerPrograms.length>1?this.caseAttendanceAddMultiple():this.caseAttendanceAdd();let t=this.selectedPrograms[e];if(this.$consts.ONLY_IMMEDIATE_PROGRAMS.includes(t.id))return this.caseAttendanceAdd();if(this.specialSchedulablePrograms.includes(t.id)){if(!this.isSchedulerOMT||this.isSchedulerOMT&&t.fitting||!this.$consts.ONLY_IMMEDIATE_PROGRAMS.includes(t.id))return e++,this.verifyAvailability(e)}else if(t.fitting||!t.isScheduler||!this.$consts.ONLY_IMMEDIATE_PROGRAMS.includes(t.id))return e++,this.verifyAvailability(e);this.loading=!0;let a=t.date.split("/")[0],n=t.date.split("/")[1],i=t.date.split("/")[2],s=this.$moment(`${i}-${n}-${a} ${t.hour}`).utc(),o={user_id:t.doctor_id||this.chosenAgentByProgramId[t.id].user_id,user_schedule_id:t.schedule_id||this.chosenAgentByProgramId[t.id].user_schedule_id,due_date:s.format("YYYY-MM-DD"),due_time:s.format("HH:mm:ss"),double_booking:!!this.double_booking_programs.includes(t.id)};fi.verifyUserScheduleAvailability(o).then(a=>{this.loading=!1,a.data?this.chosenAgentByProgramId[t.id].schedule_ids.length>0?this.getNewScheduleInfo(e):(this.programErrorNames.push(t.name),e++,this.verifyAvailability(e)):(e++,this.verifyAvailability(e))}).catch(e=>{this.disabled=!1,this.loading=!1;let a="verify_schedule_availability_error";"No availability available for the second time slot"==e&&(a="no_availability_for_second_time_slot_for_program_"+t.id),this.saveError=this.$t("attendance."+a),console.error(e)})},getNewScheduleInfo(e){this.loading=!0;let t=this.selectedPrograms[e];t.schedule_id=this.chosenAgentByProgramId[t.id].schedule_ids.pop(),fi.getUserSchedule({user_schedule_id:t.schedule_id}).then(a=>{this.loading=!1,t.doctor_id=a.data.user_schedule.user_id,this.chosenAgentByProgramId[t.id].user_id=t.doctor_id,this.chosenAgentByProgramId[t.id].user_schedule_id=t.schedule_id,this.verifyAvailability(e)}).catch(e=>{this.disabled=!1,this.loading=!1,this.saveError=this.$t("attendance.verify_schedule_availability_error"),console.error(e)})},prepareCaseAttendanceAddPayload(e){let t;if(!e.timestamp){if(e.date){const[t,a,n]=e.date.split("/"),[i,s]=e.hour.split(":");e.date=`${a}/${t}/${n} ${i}:${s}:00`}else e.date=this.$moment().format("DD/MM/YYYY");t=Ot()(e.date+" "+e.hour).tz("utc"),"SYSTEM"===e.type&&(e.date=this.$moment().format("YYYY-MM-DD"),e.hour=this.$moment().format("HH:mm:ss"),t=Ot()(e.date+" "+e.hour).tz("utc")),isNaN(t.valueOf())&&(t=e.date+" "+e.hour,isNaN(t.valueOf())&&(t=Ot()(e.date))),e.timestamp=Ot()(e.date).utc().unix()}t=Ot()(e.timestamp);let a=-1!=this.objCheckDoubleBooking.findIndex(t=>e.id==t.program_id&&!0===t.double_booking),n={patient_id:this.patient_id,member_id:this.patient_id,program_id:e.id,timestamp:e.timestamp,program_step:1,user_id:this.$store.state.Data.User.info.user_info.id,screening_attendant_id:this.$store.state.Data.User.info.user_info.id,bricks:{triagem_enfermagem:{screening:this.$store.state.Data.Bricks.Triagem_enfermagem.screening,is_pregnant:this.$store.state.Data.Bricks.Triagem_enfermagem.pregnant},triagem_interna:{attendance:e.attending,better_time_call:t.format("YYYY-MM-DD HH:mm:ss"),note:e.hourObservations,pregnant:!!e.pregnant,pregnant_note:e.finalObservations,attend_immediately:!!e.attend_immediately}}};n.case_id=this.case_id;let i=this.$store.state.Data.Bricks.CallReason.selectedCallReasons;if(i&&i.length>0&&(n.bricks.case_attendance_call_reasons=[...new Map(i.map(e=>[e["call_reason_id"],e])).values()]),this.$store.state.Data.CaseAttendance.info.is_aso&&(n.is_aso=this.$store.state.Data.CaseAttendance.info.is_aso),e.isScheduler&&(!e.attend_immediately||this.isSchedulerOMT)){let t=this.$store.state.Data.Patient.info.phone?this.clearPhone(this.$store.state.Data.Patient.info.phone):"";5==t[0]&&5==t[1]||(t="55"+t);let i=e.schedule_id||this.chosenAgentByProgramId[e.id].schedule_id;n.schedule_info={user_schedule_id:i||null,fitting:!!e.fitting,patient_phone:t,reason:e.observations||"",send_sms:!!e.sendSMS,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,double_booking:a}}if(e.selectedOptions&&e.selectedOptions.length>0&&(n.bricks.triagem_generica_enfermagem={program_brick_options_id:e.selectedOptions},delete n.bricks.triagem_interna,n.user_id=this.$store.state.Data.User.info.user_info.id),e.selectedScheduleOptions&&e.selectedScheduleOptions.length>0&&(n.bricks.agendamento_indicativo={brick_options_hierarchy:e.selectedScheduleOptions},delete n.bricks.triagem_interna,n.user_id=this.$store.state.Data.User.info.user_info.id),n.bricks=JSON.stringify(n.bricks),this.urgencyId&&(n.urgency_id=this.urgencyId),this.priorityId&&(n.priority_id=this.priorityId),this.$store.state.Data.CaseAttendance.info.is_aso&&(n.is_aso=this.$store.state.Data.CaseAttendance.info.is_aso),3===this.patientInfo.company_id){const{member_id:e}=this.patientVouchers;e!=this.patientInfo.id&&(n.holder_id=e)}return n},caseAttendanceAdd(e=0){if(e>=this.selectedPrograms.length)return this.programErrorNames.length>0?(this.disabled=!1,this.loading=!1,this.saveError=`\n            ${this.$t("attendance.no_availability_for_programs_p1")} ${this.programErrorNames.join(", ")} ${this.$t("attendance.no_availability_for_programs_p2")}\n          `,this.programErrorNames=[],this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_ALL_SELECTED_CALL_REASONS),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.TRIAGEM_ENFERMAGEM_ACTIONS.CLEAR_TRIAGEM,this.screening),void this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR)):this.finishSave();let t=this.selectedPrograms[e];this.loading=!0;let a=this.prepareCaseAttendanceAddPayload(t);if(a.holder_id=this.$store.state.Data.CaseAttendance.info.holder_id,!a)return this.disabled=!1,void(this.loading=!1);if(this.$store.state.Data.TransferAttendance.transferInformation&&this.$store.state.Data.TransferAttendance.transferInformation.length>0){let e=this.$store.state.Data.TransferAttendance.transferInformation.find(e=>a.program_id==e.program_id),t=this.$store.state.Data.TransferAttendance.transferInformation.indexOf(e);-1!=t&&(a.transfer_to_user_id=this.$store.state.Data.TransferAttendance.transferInformation[t].user_id,this.$store.dispatch(this.$consts.TRANSFER_ATTENDANCE_ACTIONS.DELETE_TRANSFER_INFORMATION,{program_id:a.program_id}))}this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ADD,a).then(a=>{(this.isSchedulerOMT&&this.specialSchedulablePrograms.includes(t.id)||t.isScheduler&&!this.specialSchedulablePrograms.includes(t.id)&&!this.$consts.ONLY_IMMEDIATE_PROGRAMS.includes(t.id))&&Ge.transferAttendance({case_attendance_id:a.data.newest_attendance_id,user_id:t.doctor_id||this.chosenAgentByProgramId[t.id].user_id}),this.attendancesToProcess.length>0?(this.attendancesToProcess.map(e=>e.case_attendance_id=a.data.newest_attendance_id),Ge.attendancesProccessCreate(this.attendancesToProcess).finally(()=>{this.loading=!1,e++,this.caseAttendanceAdd(e)})):(this.loading=!1,e++,this.caseAttendanceAdd(e))}).catch(a=>{console.error(a),this.programErrorNames.push(t.name),e++,this.caseAttendanceAdd(e)})},caseAttendanceAddMultiple(){this.loading=!0,this.saveError="";let e={patient_id:this.patient_id,screening_attendant_id:this.$store.state.Data.User.info.user_info.id,company_id:this.company_id?this.company_id:this.$store.state.Data.Patient.info.company_id,emergency_pass:this.emergency,is_aso:this.is_aso?this.is_aso:this.$store.state.Data.CaseAttendance.info.is_aso,group_id:this.group_id?this.group_id:this.$store.state.Data.Patient.info.group_id,case_attendances:[]};this.selectedPrograms.forEach(t=>{let a=this.prepareCaseAttendanceAddPayload(t);if(!a)return this.disabled=!1,void(this.loading=!1);delete a["member_id"],delete a["patient_id"],delete a["screening_attendant_id"],e.case_attendances.push(a)}),this.saveError||Ge.caseAttendanceAddMultiple(e).then(e=>{this.transferAndProcess(e.data.case_attendance_ids)}).catch(t=>{this.disabled=!1,this.saveError=this.$t("attendance.warning_save_attendance"),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_ALL_SELECTED_CALL_REASONS),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.TRIAGEM_ENFERMAGEM_ACTIONS.CLEAR_TRIAGEM,this.screening),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR,e)}).finally(()=>{this.loading=!1})},transferAndProcess(e,t=0){if(t>=this.selectedPrograms.length)return this.finishSave();this.loading=!0;let a=this.selectedPrograms[t];(this.isSchedulerOMT&&this.specialSchedulablePrograms.includes(a.id)||a.isScheduler&&!this.specialSchedulablePrograms.includes(a.id)&&!this.$consts.ONLY_IMMEDIATE_PROGRAMS.includes(a.id))&&Ge.transferAttendance({case_attendance_id:e[t],user_id:a.doctor_id||this.chosenAgentByProgramId[a.id].user_id}),this.attendancesToProcess.length>0?(this.attendancesToProcess.map(a=>a.case_attendance_id=e[t]),Ge.attendancesProccessCreate(this.attendancesToProcess).finally(()=>{this.loading=!1,t++,this.transferAndProcess(e,t)})):(this.loading=!1,t++,this.transferAndProcess(e,t))},finishSave(){this.saveError="",this.programErrorNames=[],this.$bus.emit("close-temp-data-tab"),this.emergency&&this.$bus.emit("confirm-close-emergency-pass"),this.$bus.emit("socket-doctor-connected-status",!1),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.CALL_REASONS_ACTIONS.UNSET_ALL_SELECTED_CALL_REASONS),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.TRIAGEM_ENFERMAGEM_ACTIONS.CLEAR_TRIAGEM,this.screening),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR),this.$bus.emit("restart-queue-update")},disableSavebutton(){3!==this.patientInfo.company_id&&0!==this.$store.state.Data.Screening.productBlocks.length||(this.disabled=!0)},checkDoublebooking(e){return Ge.checkDoublebooking(e).then(e=>(this.setDoubleBooking(e.data),new Promise((t,a)=>{t(e.data)}))).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},handleInvalidSchedule(){this.disabled=!1,this.loading=!1,this.saveError=this.$t("attendance.no_agent_selected_for_schedule")},handleDuplicateSchedules(){this.disabled=!1,this.loading=!1,this.saveError=this.$t("attendance.same_date_time_schedules_error")}},watch:{patientInfo(){this.disableSavebutton()},patientVouchers(e){const{program_id:t,voucher_quantity:a}=e;3===this.patientInfo.company_id&&(this.disabled=!(7===t&&a>0))}},computed:{...Object(K["b"])("Data/CaseAttendance",["getDoubleBooking"]),selectedPrograms(){return this.$store.state.Data.Bricks.Programs.selectedPrograms},selectedSchedulerPrograms(){return this.selectedPrograms.filter(e=>{if(this.isSchedulerOMT&&this.specialSchedulablePrograms.includes(e.id)||e.isScheduler&&!this.specialSchedulablePrograms.includes(e.id))return e})},patientVouchers(){return this.$store.getters[this.$consts.PATIENT_ACTIONS.GET_VOUCHERS]||{}},patientInfo(){return this.$store.getters[this.$consts.PATIENT_ACTIONS.GET_PATIENT]||{}}}},No=fo,ko=(a("c609"),Object(I["a"])(No,go,Lo,!1,null,"73f5c5f2",null)),vo=ko.exports,bo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-details"},[e.empty?t("div",{staticClass:"program-title mt-4"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.our")))]),e._v("\n    "+e._s(e.$t("patient.programs"))+"\n  ")]):e._e(),t("div",[e._l(e.programArray,(function(n,i){return t("div",{key:`${n.id}_${i}`,staticClass:"mt-6",class:{"programs-open":"SYSTEM"!==n.type,"programs-system-open":"SYSTEM"===n.type}},[t("div",{staticClass:"prgm mb-4 program-container"},[t("div",[t("p",{staticClass:"program-title font-weight-bold ma-0"},[e._v(e._s(n.name))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.programArray[i].show_transfer&&e.forceUpdating&&e.canTransfer,expression:"programArray[index].show_transfer && forceUpdating && canTransfer"}],staticClass:"transfer-container"},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.programArray[i].usernameOnCall,expression:"programArray[index].usernameOnCall"}],staticClass:"mb-0 mr-5 transfer-text"},[t("strong",[e._v("Transferindo para:")]),e._v(" "+e._s(e.programArray[i].usernameOnCall))]),t(r["a"],{staticClass:"transfer-button",attrs:{width:"168",height:"50",color:"#5949A7"},on:{click:function(t){return e.transferModalCall(n.id)}}},[t("img",{staticClass:"transfer-icon mr-2",attrs:{src:a("6830")}}),e._v("Transferir")])],1)]),n.options&&0!==n.options.length||n.isScheduler&&!e.specialPrograms.includes(n.id)?e._e():t("div",["SYSTEM"!==n.type?t("div",{staticClass:"area"},[t(Ni["a"],{staticClass:"attend-section",attrs:{height:"100px",label:e.$t("patient.attend"),"background-color":"white",outlined:"","no-resize":""},model:{value:n.attending,callback:function(t){e.$set(n,"attending",t)},expression:"prg.attending"}})],1):e._e(),"SYSTEM"!==n.type&&n.isScheduler&&!e.fullImmediately?t("div",{staticClass:"attend-immediately-container"},[t("p",{staticClass:"patient-subtitle"},[e._v(e._s(e.$t("patient.attend_immediately")))]),t("div",{staticClass:"d-flex row align-center"},[t(Qs["a"],{attrs:{row:""},model:{value:e.programArray[i].attend_immediately,callback:function(t){e.$set(e.programArray[i],"attend_immediately",t)},expression:"programArray[index].attend_immediately"}},[t(Zs["a"],{attrs:{value:!1,label:e.$t("patient.no")},on:{change:function(t){return e.updateImmediately(i,!1)}}}),t(Zs["a"],{attrs:{value:!0,label:e.$t("patient.yes")},on:{change:function(t){return e.updateImmediately(i,!0)}}})],1),t(de["a"],{staticClass:"mt-3",attrs:{label:e.$t("patient.observations"),height:"37px","background-color":"white",outlined:""},model:{value:n.hourObservations,callback:function(t){e.$set(n,"hourObservations",t)},expression:"prg.hourObservations"}})],1)]):e._e()]),n.isScheduler&&!e.specialPrograms.includes(n.id)||"SYSTEM"!==n.type&&!e.loading&&!e.programArray[i].attend_immediately?t("div",[t("CalendarView",{attrs:{sendUserId:!0,canShowAllAgents:!0,canEditSchedules:!1,hasSlotIcons:!1,preSelectedCompany:e.companyId,preSelectedSpeciality:e.userSpeciality[n.id],preSelectedAttendanceCenter:e.userAttendanceCenter[n.id],handleClickEvent:e.scheduleClick,handleFittingEvent:e.handleScheduleFitting,programInformation:e.programInformation[n.id],lockPastDate:!0,memberId:e.memberId}})],1):n.options&&n.options.length>0?t("div",{staticClass:"options-container"},[n.isIndicativeScheduler?t(Xn["a"],{staticClass:"inside-container ma-0"},e._l(n.options,(function(a,n){return t("div",{key:n,staticClass:"border option-box mb-6"},[t(St["a"],{staticClass:"checkbox-schedule",attrs:{label:a.name,"hide-details":""},on:{change:function(t){return e.optionHandler(a,i)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"option.checked"}}),e._l(a.options_hierarchy,(function(n,s){return a.checked?t("div",{key:s,staticClass:"border option-box ml-5 mt-2"},[t(St["a"],{staticClass:"checkbox-schedule",attrs:{label:n.name,"hide-details":""},on:{change:function(t){return e.scheduleHandler(n,a,i)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"hierarchy.checked"}}),e._l(n.hierarchy,(function(s,o){return n.checked?t("div",{key:o,staticClass:"border option-box ml-5 mt-2"},[t(St["a"],{staticClass:"checkbox-schedule",attrs:{label:s.name,"hide-details":""},on:{change:function(t){return e.secondLevelScheduleHandler(s,n,a,i)}},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"subhierarchy.checked"}})],1):e._e()}))],2):e._e()}))],2)})),0):t(Xn["a"],{staticClass:"inside-container ma-0"},[t(ce["a"],e._l(n.options,(function(a,n){return t(oe["a"],{key:n,attrs:{cols:"12",md:"4"}},[t(St["a"],{staticClass:"pat-checkbox2 border option-box overflows mt-2",attrs:{label:a.name,"hide-details":""},on:{change:function(t){return e.optionHandler(a,i)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"option.checked"}})],1)})),1)],1)],1):e._e(),e.immediatelyPrograms.includes(n.id)&&n.attend_immediately?t("div",[t(ce["a"],[t(oe["a"],{staticClass:"pr-0",attrs:{cols:"12",md:"12"}},[t("ClassificationSlider",{attrs:{level:0}})],1)],1),t(ce["a"],[t(oe["a"],{staticClass:"pr-0",attrs:{cols:"12",md:"12"}},[t("PrioritySlider",{attrs:{level:0}})],1)],1)],1):e._e()])})),t("ScheduleConfirmModal",{attrs:{temporary:!0}}),t("BookFittingScheduleModal",{attrs:{temporary:!0}})],2)])},Mo=[],Po=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"367"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("schedule.confirm_schedule_title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(re["a"],[t(Xn["a"],{staticClass:"pa-5"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[e.attendance.patient_name?t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("schedule.patient_name")))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.patient_name))])]):t(se["a"],{attrs:{"search-input":e.searchPatient,label:e.$t("schedule.patient_name"),items:e.patients,"item-value":"name","item-text":e.getPatientsText,"error-messages":e.patientErrors,"hide-no-data":e.loadingPatients,loading:e.loadingPatients,"no-data-text":e.$t("controls.noDataAvailable"),"item-name":"name","return-object":"",height:"37px",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchPatient=t},"update:search-input":function(t){e.searchPatient=t},blur:function(t){return e.$v.form.patient.$touch()}},model:{value:e.form.patient,callback:function(t){e.$set(e.form,"patient",t)},expression:"form.patient"}})],1),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("schedule.schedule_time")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.date))])])]),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("schedule.attendance_center_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.attendance_center_name))])])]),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("schedule.agent_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.doctor_name))])])]),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{height:"100px",label:e.$t("schedule.observations"),outlined:"","no-resize":""},model:{value:e.attendance.observations,callback:function(t){e.$set(e.attendance,"observations",t)},expression:"attendance.observations"}})],1)],1)],1)],1),t("div",{staticClass:"error-box-flex"},[t("ErrorText")],1),e.loading?t("div",{staticClass:"d-flex flex-column justify-center align-center py-2"},[t("div",[t(nt["a"],{attrs:{indeterminate:"",color:"#350165"}})],1)]):e._e(),e.loading?e._e():t("div",{staticClass:"buttons-panel"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary"},on:{click:e.handleConfirm}},[e._v("\n                    "+e._s(e.$t("schedule.confirm_schedule"))+"\n                ")]),t(r["a"],{staticClass:"btn",attrs:{outlined:"",color:"#350165"},on:{click:e.handleCancel}},[e._v("\n                    "+e._s(e.$t("schedule.choose_other"))+"\n                ")])],1)],1)],1)],1)},Uo=[],yo={components:{ErrorText:pi},props:["confirmFunction","cancelFunction","temporary"],mixins:[ve],data(){return{dialog:!1,submitError:null,loading:!0,loadingPatients:!1,searchPatient:null,patients:[],presenceSet:!1,disableSMS:!1,attendance:{company_id:"",company_name:"",patient_name:"",date:"",due_date:"",due_time:"",doctor_id:"",attendance_center_id:"",doctor_name:"",attendance_center_name:"",observations:"",sendSMS:!1,interval:""},form:{patient:null}}},created(){this.$bus.on("confirm-scheduled-dialog",e=>{console.log(e),this.attendance=e,this.attendance.interval=e.interval,this.$consts.BLOCKED_SMS_PROGRAMS.includes(e.program_id)&&(this.disableSMS=!0),this.attendance.doctor_name||(this.attendance.doctor_name=this.$t("schedule.loading_name"));let t=this.attendance.date;this.$moment(t).isAfter(this.$moment())?(this.attendance.date=this.$moment(t).format("DD/MM/YYYY HH:mm"),this.attendance.original_date=this.$moment(t),this.attendance.due_date=this.$moment(t).format("DD/MM/YYYY"),this.attendance.due_time=this.$moment(t).format("HH:mm"),this.presenceSet=!1,this.loading=!1,this.dialog=!0,this.getAgent()):this.$bus.emit("open-snackbar",{message:"invalid_schedule_time_past"})}),this.temporary||(this.searchPatient="")},beforeDestroy(){this.$bus.off("confirm-scheduled-dialog")},methods:{close(){this.dialog=!1},handleCancel(){this.cancelFunction&&this.cancelFunction(),this.dialog=!1,this.form.patient=null},handleConfirm(){if(this.attendance.patient_name||(this.$v.$touch(),!this.$v.$invalid)){if(this.confirmFunction)this.confirmFunction();else{this.$bus.emit("confirm-schedule",this.attendance);let e={event_type:this.$consts.SCHEDULE_EVENT_TYPES.BOOKED,temporary:!!this.temporary,fitting:!1,name:`${this.attendance.patient_name}\n${this.attendance.observations||this.$t("schedule.scheduling")}`,start:this.attendance.original_date.format("YYYY-MM-DD HH:mm"),end:this.attendance.original_date.add(this.attendance.interval,"minutes").format("YYYY-MM-DD HH:mm"),reason:this.attendance.observations,color:this.temporary?this.$consts.SCHEDULE_COLORS.NEW:this.$consts.SCHEDULE_COLORS.OPENED,textColor:this.$consts.SCHEDULE_COLORS.TEXT_BOOKED};if(e.temporary)e.program_id=this.attendance.program_id,this.$bus.emit("receive-new-event",e);else{let t=e.reason?", "+e.reason:"";e.name=`${this.form.patient.name}${t}\n${this.$t("schedule.status_OPENED")}`,e.patient_id=this.form.patient.id,e.patient_name=this.form.patient.name,e.patient_phone=this.form.patient.phone,e.clickAction=this.$consts.SCHEDULE_CLICK_ACTIONS.EDIT_EVENT,this.$bus.emit("new-schedule-save",e)}}this.form.patient=null,this.attendance={company_id:"",company_name:"",patient_name:"",date:"",due_date:"",due_time:"",doctor_id:"",attendance_center_id:"",doctor_name:"",attendance_center_name:"",observations:"",sendSMS:!1,interval:""},this.dialog=!1}},getPatient(){let e={member_id:this.attendance.member_id};Si.getPatientInfo(e).then(e=>{this.attendance.patient_name=e.patient_info.name,this.getAgent()}).catch(e=>{console.error(e),this.$bus.emit("show-error-message",{message:"could_not_get_patient_info",display:!0})})},getAgent(){let e=this.attendance.doctor_id;be.getUser(e).then(e=>{this.attendance.doctor_name=e.data.user_info.name,this.attendance.speciality=e.data.user_info.speciality}).finally(()=>{this.loading=!1})},getPatientsText(e){return`${e.name} (${this.formatCpfHelper(e.cpf)})`}},watch:{searchPatient(e){if(!e)return;clearTimeout(this.searchPatientsTimeout),this.loadingPatients=!0;let t={company_id:this.attendance.company_id,name:e.split(" (")[0],type:"MEMBER",offset:0,limit:10};this.searchPatientsTimeout=setTimeout(()=>{be.memberSearch(t).then(e=>{this.patients=e.data.member_list}).catch(e=>{this.patients=[],console.error(e)}).finally(()=>{this.loadingPatients=!1})},400)}},computed:{patientErrors(){const e=[];return this.attendance.patient_name||!this.$v.form.patient.$dirty||!this.$v.form.patient.required&&e.push(this.$t("schedule.required")),e}},validations:{form:{patient:{required:Ae["required"]}}}},$o=yo,xo=(a("294f"),Object(I["a"])($o,Po,Uo,!1,null,"3495447c",null)),Vo=xo.exports,Go=a("c964"),Fo=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"367px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header mb-5"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("schedule.confirm_schedule_fitting_title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.handleClose()}}})])]),t(re["a"],{staticClass:"mx-2"},[t(Xn["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[e.form.name?e._e():t(se["a"],{attrs:{"search-input":e.searchPatient,label:e.$t("schedule.patient_name"),items:e.patients,"item-value":"name","item-text":e.getPatientsText,"error-messages":e.patientErrors,"hide-no-data":e.loadingPatients,loading:e.loadingPatients,"no-data-text":e.$t("controls.noDataAvailable"),"item-name":"name","return-object":"",height:"37px",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchPatient=t},"update:search-input":function(t){e.searchPatient=t},blur:function(t){return e.$v.form.patient.$touch()}},model:{value:e.form.patient,callback:function(t){e.$set(e.form,"patient",t)},expression:"form.patient"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{label:e.$t("schedule.fittingDate"),"error-messages":e.fittingDateErrors,placeholder:"DD/MM/YYYY",height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.fittingDate.$touch()}},model:{value:e.fittingDateFormated,callback:function(t){e.fittingDateFormated=t},expression:"fittingDateFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.fittingDatePicker,callback:function(t){e.fittingDatePicker=t},expression:"fittingDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,locale:"pt-br"},on:{input:function(t){e.fittingDatePicker=!1}},model:{value:e.form.fittingDate,callback:function(t){e.$set(e.form,"fittingDate",t)},expression:"form.fittingDate"}})],1)],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":"",lazy:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.fittingStartTime"),"error-messages":e.fittingStartTimeErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.fittingStartTime.$touch()}},model:{value:e.form.fittingStartTime,callback:function(t){e.$set(e.form,"fittingStartTime",t)},expression:"form.fittingStartTime"}},"v-text-field",n,!1),a))]}}]),model:{value:e.fittingStartTimePicker,callback:function(t){e.fittingStartTimePicker=t},expression:"fittingStartTimePicker"}},[e.dialog?t(Go["a"],{attrs:{max:e.form.fittingEndTime,"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(t){e.fittingStartTimePicker=!1}},model:{value:e.form.fittingStartTime,callback:function(t){e.$set(e.form,"fittingStartTime",t)},expression:"form.fittingStartTime"}}):e._e()],1)],1),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(Ni["a"],{attrs:{height:"100px",label:e.$t("schedule.observations"),outlined:"","no-resize":""},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),t("div",{staticClass:"d-flex justify-space-between my-5"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary",loading:e.loading,disabled:e.loading},on:{click:e.handleConfirm}},[e._v("\n              "+e._s(e.$t("schedule.confirm_schedule"))+"\n            ")]),t(r["a"],{staticClass:"btn",attrs:{outlined:"",color:"#350165"},on:{click:e.handleClose}},[e._v("\n              "+e._s(e.$t("schedule.cancel"))+"\n            ")])],1)],1)],1)],1)],1)],1)},Bo=[],wo={mixins:[ve],props:["temporary"],data(){return{dialog:!1,loading:!1,loadingPatients:!1,searchPatient:null,patients:[],fittingDatePicker:!1,fittingStartTimePicker:!1,fittingEndTimePicker:!1,program_id:null,form:{patient:null,fittingDate:null,fittingStartTime:"",reason:"",name:"",scheduleId:"",companyId:null,doctorId:"",doctorName:"",attendanceCenterId:"",attendanceCenterName:""}}},created(){this.$bus.on("confirm-fitting-scheduled-dialog",e=>{this.program_id=e.program_id,this.form.fittingDate=e.fittingDate||this.$moment().format("YYYY-MM-DD"),this.form.interval=e.interval,this.form.name=e.patient_name?e.patient_name:"",this.form.patient=e.patient_name?e.patient_name:"",this.form.scheduleId=e.schedule_id,this.form.companyId=e.company_id,this.form.doctorId=e.doctor_id,this.form.doctorName=e.doctor_name,this.form.attendanceCenterId=e.attendance_center_id,this.form.attendanceCenterName=e.attendance_center_name,this.form.reason=e.reason&&e.reason.length>0?e.reason:"",this.form.fittingStartTime=e.fittingStartTime&&e.fittingStartTime.length>0?e.fittingStartTime:"",this.$v.form.fittingStartTime.$reset(),this.$v.form.patient.$reset(),this.loading=!1,this.dialog=!0})},beforeDestroy(){this.$bus.off("confirm-fitting-scheduled-dialog")},methods:{handleClose(){this.dialog=!1},handleConfirm(){if(this.$v.$touch(),this.$v.$invalid)return;this.$bus.emit("confirm-schedule-fitting",this.form),this.loading=!0;let e=`${this.form.fittingDate} ${this.form.fittingStartTime}`,t={temporary:!!this.temporary,fitting:!0,name:`${this.form.name}\n${this.form.reason||this.$t("schedule.fitting")}`,start:this.$moment(e).format("YYYY-MM-DD HH:mm"),end:this.$moment(e).add(this.form.interval,"minutes").format("YYYY-MM-DD HH:mm"),color:this.temporary?this.$consts.SCHEDULE_COLORS.NEW_FITTING:this.$consts.SCHEDULE_COLORS.OPENED_FITTING,reason:this.form.reason,scheduleId:this.form.scheduleId,doctorId:this.form.doctorId,doctorName:this.form.doctorName,attendanceCenterId:this.form.attendanceCenterId,attendanceCenterName:this.form.attendanceCenterName};if(t.temporary)t.program_id=this.program_id,this.$bus.emit("receive-new-event",t),this.$bus.emit("confirm-schedule",t);else{let e=t.reason?", "+t.reason:"";t.name=`${this.form.patient.name}${e}\n${this.$t("schedule.status_OPENED")}`,t.patient_id=this.form.patient.id,t.patient_name=this.form.patient.name,t.patient_phone=this.form.patient.phone,t.clickAction=this.$consts.SCHEDULE_CLICK_ACTIONS.EDIT_EVENT,this.$bus.emit("new-schedule-fitting-save",t)}this.form={patient:null,fittingDate:null,fittingStartTime:"",reason:"",name:"",scheduleId:"",companyId:null,doctorId:"",doctorName:"",attendanceCenterId:"",attendanceCenterName:""},this.loading=!1,this.dialog=!1},formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""},getPatientsText(e){return`${e.name} (${this.formatCpfHelper(e.cpf)})`}},watch:{searchPatient(e){if(!e)return;clearTimeout(this.searchPatientsTimeout),this.loadingPatients=!0;let t={company_id:this.form.companyId,name:e.split(" (")[0],type:"MEMBER",offset:0,limit:10};this.searchPatientsTimeout=setTimeout(()=>{be.memberSearch(t).then(e=>{this.patients=e.data.member_list}).catch(e=>{this.patients=[],console.error(e)}).finally(()=>{this.loadingPatients=!1})},400)}},computed:{patientErrors(){const e=[];return this.form.name||!this.$v.form.patient.$dirty||!this.$v.form.patient.required&&e.push(this.$t("schedule.required")),e},fittingDateFormated(){return this.form.fittingDate?this.$moment(this.form.fittingDate).format("DD/MM/YYYY"):""},fittingDateErrors(){const e=[];return this.$v.form.fittingDate.$dirty?(!this.$v.form.fittingDate.required&&e.push(this.$t("schedule.required")),e):e},fittingStartTimeErrors(){const e=[];return this.$v.form.fittingStartTime.$dirty?(!this.$v.form.fittingStartTime.required&&e.push(this.$t("schedule.required")),e):e}},validations:{form:{patient:{required:Ae["required"]},fittingDate:{required:Ae["required"]},fittingStartTime:{required:Ae["required"]}}}},Ho=wo,qo=(a("3f10"),Object(I["a"])(Ho,Fo,Bo,!1,null,"77b82eb4",null)),Yo=qo.exports,jo=a("ba0d"),Ko=function(){var e=this,t=e._self._c;return t("div",{staticClass:"classification-slider d-flex mt-5"},[t("div",{staticClass:"classification-title mt-5 mr-1"},[t("span",{staticClass:"font-weight-bold mr-1",class:{small:e.small}},[e._v("\n      "+e._s(e.$t("classification.classification"))+"\n    ")])]),t("div",{staticClass:"slider-container py-3"},[t(lt["a"],{attrs:{"max-width":"60%",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(jo["a"],e._g(e._b({ref:"classificationSlider",attrs:{"tick-size":e.classifications.length-1,"tick-labels":e.classificationLabels,max:e.classifications.length-1,"thumb-color":e.sliderColor,color:e.sliderColor,ticks:"always",step:"1"},on:{change:e.selectClassification},model:{value:e.selectedClassificationIndex,callback:function(t){e.selectedClassificationIndex=t},expression:"selectedClassificationIndex"}},"v-slider",n,!1),a))]}}]),model:{value:e.showTooltip,callback:function(t){e.showTooltip=t},expression:"showTooltip"}},[t("span",[e._v(e._s(e.tooltipText))])])],1)])},Zo=[],Qo={props:["small","level"],data(){return{sliderColor:null,selectedClassificationIndex:null,classificationLabels:[],opened:!1,showTooltip:!1,tooltipText:""}},beforeMount(){this.sliderColor=this.$consts.CLASSIFICATION_COLORS.LOWEST,this.classifications&&this.classifications.length>0?(this.selectedClassificationIndex=this.level?this.level:0,this.classificationLabels=this.classifications.map(e=>this.$t("classification."+e.urgency_alias)),this.$nextTick(()=>{this.selectClassification()})):this.getClassification()},updated(){this.opened||0!=this.level||(this.opened=!0,0!=this.level&&this.selectClassification())},mounted(){setTimeout(()=>{if(this.$refs.classificationSlider){let e=this.$refs.classificationSlider.$el.querySelector(".v-slider__ticks-container").children;for(let t in e)e[t].firstChild&&(e[t].firstChild.addEventListener("mouseenter",()=>this.mouseOverTick(t),!1),e[t].firstChild.addEventListener("mouseleave",()=>this.resetTooltip(t),!1))}},500)},methods:{getClassification(){Qt.getClassification().then(e=>{let t=e.data.sort((e,t)=>e.urgency_level-t.urgency_level);this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_CLASSIFICATIONS,t),this.selectedClassificationIndex=this.level?this.level:0,this.classificationLabels=t.map(e=>this.$t("classification."+e.urgency_alias)),this.$nextTick(()=>{this.selectClassification()})}).catch(e=>{console.error(e)})},selectClassification(){let e=this.classifications[this.selectedClassificationIndex].urgency_alias.toUpperCase();this.sliderColor=this.$consts.CLASSIFICATION_COLORS[e],this.$bus.emit("patient-select-urgency",this.classifications[this.selectedClassificationIndex]),this.$bus.emit("patient-select-urgency-come-later",this.classifications[this.selectedClassificationIndex]),this.$refs.classificationSlider&&(this.$refs.classificationSlider.$el.querySelector(".v-slider__ticks-container").children[this.$refs.classificationSlider.value].firstChild.style.color="",this.$nextTick(()=>{this.$refs.classificationSlider.$el.querySelector(".v-slider__ticks-container").children[this.$refs.classificationSlider.internalValue].firstChild.style.color=this.sliderColor}))},mouseOverTick(e){this.tooltipText=this.$t("classification.tooltip."+e),this.showTooltip=!0},resetTooltip(){this.showTooltip=!1}},computed:{classifications(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_CLASSIFICATIONS]||[]}}},Jo=Qo,Wo=(a("03c5"),Object(I["a"])(Jo,Ko,Zo,!1,null,null,null)),Xo=Wo.exports,zo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"priority-slider d-flex mt-5"},[t("div",{staticClass:"priority-title mt-5 mr-1"},[t("span",{staticClass:"font-weight-bold mr-1",class:{small:e.small}},[e._v("\n      "+e._s(e.$t("priority.priority"))+"\n    ")])]),t("div",{staticClass:"slider-container py-3"},[t(jo["a"],{ref:"prioritySlider",attrs:{"tick-size":e.priorities.length-1,"tick-labels":e.priorityLabels,max:e.priorities.length-1,"thumb-color":e.sliderColor,color:e.sliderColor,ticks:"always",step:"1"},on:{change:e.selectPriority},model:{value:e.selectedPriorityIndex,callback:function(t){e.selectedPriorityIndex=t},expression:"selectedPriorityIndex"}})],1)])},er=[],tr={props:["small","level"],data(){return{sliderColor:null,selectedPriorityIndex:null,priorityLabels:[],opened:!1}},beforeMount(){this.sliderColor=this.$consts.PRIORITY_COLORS.BLUE,this.priorities&&this.priorities.length>0?(this.selectedPriorityIndex=this.level?this.level:0,this.priorityLabels=this.priorities.map(e=>this.$t("priority."+e.name)),this.$nextTick(()=>{this.selectPriority()})):this.getPriority()},updated(){this.opened||0!=this.level||(this.opened=!0,0!=this.level&&this.selectPriority())},methods:{getPriority(){Qt.getPriority().then(e=>{let t=e.data.sort((e,t)=>e.id-t.id);this.$store.dispatch(this.$consts.GENERAL_ACTIONS.SET_PRIORITIES,t),this.selectedPriorityIndex=this.level?this.level:0,this.priorityLabels=t.map(e=>this.$t("priority."+e.name)),this.$nextTick(()=>{this.selectPriority()})}).catch(e=>{console.error(e)})},selectPriority(){let e=this.priorities[this.selectedPriorityIndex].name.toUpperCase();this.sliderColor=this.$consts.PRIORITY_COLORS[e],this.$bus.emit("patient-select-priority",this.priorities[this.selectedPriorityIndex]),this.$bus.emit("patient-select-priority-come-later",this.priorities[this.selectedPriorityIndex]),this.$refs.prioritySlider&&(this.$refs.prioritySlider.$el.querySelector(".v-slider__ticks-container").children[this.$refs.prioritySlider.value].firstChild.style.color="",this.$nextTick(()=>{this.$refs.prioritySlider.$el.querySelector(".v-slider__ticks-container").children[this.$refs.prioritySlider.internalValue].firstChild.style.color=this.sliderColor}))}},computed:{priorities(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_PRIORITIES]||[]}}},ar=tr,nr=(a("f948"),Object(I["a"])(ar,zo,er,!1,null,null,null)),ir=nr.exports,sr=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{staticClass:"transfer-attendance-modal",attrs:{width:"604",height:"385"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("attendance.professional_selector")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(l["a"],{staticClass:"transfer-attendance-modal"},[e.loading?t("div",{staticClass:"throbber-container"},[t("div",[t(nt["a"],{attrs:{indeterminate:"",color:"#350165"}})],1)]):e._e(),e.loading?e._e():t("div",{staticClass:"card-padding"},[t("p",{staticClass:"description-color mb-9"},[e._v(e._s(e.$t("attendance.professional_selector_description")))]),t($t["a"],{attrs:{height:"50px",width:"510",items:e.filteredUsers,"item-value":"id","item-text":"name","return-object":"",outlined:"",label:"Selecione um profissional","menu-props":{top:!1,bottom:!0,offsetY:!0},clearable:""},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[t(Ct["a"],[t(Tt["a"],[t(de["a"],{attrs:{placeholder:"Buscar"},nativeOn:{keydown:function(t){return e.handleKeydown.apply(null,arguments)}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)],1),t(Rs["a"],{staticClass:"mt-2"})]},proxy:!0},{key:"selection",fn:function({item:a,attrs:n}){return[t("div",e._b({},"div",n,!1),[e.searchQuery&&!a?t("span",[e._v(e._s(e.searchQuery))]):a?t("span",[t("span",{staticClass:"status-circle",style:{backgroundColor:e.getStatusColor(a.user_access_status)}}),e._v("\n                  "+e._s(a.name)+"\n                ")]):e._e()])]}},{key:"item",fn:function({item:a,index:n}){return[t("div",[t("span",{staticClass:"status-circle",style:{backgroundColor:e.getStatusColor(a.user_access_status)}}),t("span",{staticClass:"ml-2"},[e._v(e._s(a.name))])])]}}],null,!1,2409243709),model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1),e.loading?e._e():t("div",{staticClass:"card-padding card-status-container"},[t("div",{staticClass:"status-container status-container-online"},[t("div",{staticClass:"status-circle-explanation status-circle-explanation-online"}),t("p",{staticClass:"status-description-style status-description-online-container"},[e._v(e._s(e.$t("attendance.available_description")))])]),t("div",{staticClass:"status-container status-container-away"},[t("div",{staticClass:"status-circle-explanation status-circle-explanation-away"}),t("p",{staticClass:"status-description-style status-description-away-container"},[e._v(e._s(e.$t("attendance.away_description")))])]),t("div",{staticClass:"status-container status-container-offline"},[t("div",{staticClass:"status-circle-explanation status-circle-explanation-offline"}),t("p",{staticClass:"status-description-style status-description-offline-container"},[e._v(e._s(e.$t("attendance.offline_description")))])])]),e.loading?e._e():t("div",{staticClass:"card-padding card-container-btn"},[t(r["a"],{staticClass:"btn-attribuites btn-cancel",attrs:{color:"#FFFFFF"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.cancel")))]),t(r["a"],{staticClass:"btn-attribuites btn-confirm",attrs:{disabled:!e.selectedUser,color:"#5949A7"},on:{click:function(t){return e.transferIn()}}},[e._v(e._s(e.$t("attendance.confirm")))])],1)])],1)],1)],1)},or=[],rr={components:{},data(){return{dialog:!1,loading:!1,selectedUser:null,professional:[],filteredUsers:[],inScreening:!1,companyId:null,caseAttendanceId:null,programId:null,color:{ONLINE:"#4BC163",AWAY:"#FF9900",OFFLINE:"#FF0000"},searchQuery:""}},created(){this.$bus.on("open-transfer-attendance-professional-modal",e=>{this.selectedUser=null,this.professional=[],this.filteredUsers=[],this.dialog=!0,this.inScreening=e.in_screening,this.companyId=e.company_id,this.caseAttendanceId=e.case_attendance_id,this.programId=e.program_id,this.getProfessionals()})},beforeDestroy(){this.$bus.off("open-transfer-attendance-professional-modal")},computed:{isQueryEmpty(){return""===this.searchQuery.trim()}},methods:{updateSearchQuery(e){this.searchQuery=e},close(){this.$bus.emit("restart-queue-update"),this.dialog=!1},transfer(){this.loading=!0,this.$store.dispatch(this.$consts.USER_ACTIONS.TRANSFER_USER_UPDATE,{case_attendance_id:this.caseAttendanceId,user_id:this.selectedUser.id,token:this.$store.state.Data.User.token}).then(e=>{this.professional=e.data.users,this.filteredUsers=this.professional,this.$bus.emit("restart-queue-update"),this.$bus.emit("open-confirmation-modal"),this.close()}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},transferIn(){if(this.inScreening)return this.$store.dispatch(this.$consts.TRANSFER_ATTENDANCE_ACTIONS.ADD_TRANSFER_INFORMATION,{program_id:this.programId,user_id:this.selectedUser.id,user_name:this.selectedUser.name}),this.$bus.emit("transfer-changer",this.programId),this.$bus.emit("open-confirmation-modal"),void this.close();this.transfer()},getStatusColor(e){return this.color[e]},getProfessionals(){this.loading=!0,this.$store.dispatch(this.$consts.USER_ACTIONS.TRANSFER_USER_LIST,{case_attendance_id:this.caseAttendanceId,company_id:this.companyId,program_id:this.programId,token:this.$store.state.Data.User.token,search:""}).then(e=>{this.professional=e.data.users,this.filteredUsers=this.professional}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},handleKeydown(e){this.filterUsers()},filterUsers(){this.filteredUsers=this.professional.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())),console.log(this.filteredUsers)}}},lr=rr,cr=(a("3218"),Object(I["a"])(lr,sr,or,!1,null,"c2da25b2",null)),dr=cr.exports,mr={props:["programs"],components:{TransferAttendanceModal:dr,CalendarView:ji,ScheduleConfirmModal:Vo,BookFittingScheduleModal:Yo,ClassificationSlider:Xo,PrioritySlider:ir},mixins:[ve],data(){return{checked:!0,forceUpdating:!0,selected_date:null,selected_hour:null,companyId:null,memberId:null,today:this.$moment().format("YYYY-MM-DD HH:mm"),due:"",time:"",hourObservations:"",program:null,attending:"",formattedDate:"",programArray:[],empty:!1,selectedOptions:[],programInformation:[],loading:!1,timeValid:!0,timeError:"",userCompany:[],userSpeciality:[],userAttendanceCenter:[],specialPrograms:[16,7,68,69],immediatelyPrograms:[7,16,67,68,69],schedulablePrograms:[7,4,5,10,16,49,54,57,55,65,66,58,59,60,61,62,63,64,69,70,71],specialityPrograms:[7,4,5,10,54,57,55,65,66,58,59,60,61,62,63,64,69,70,71],calendarPrograms:[7,4,5,10,16,49,54,57,55,65,66,58,59,60,61,62,63,64,69,70,71],modalData:{patient_name:"",date:"",company_name:"",doctor_name:"",speciality:"",attendance_center_name:"",fullImmediately:!1},usernameOnCall:null,canTransfer:!1}},created(){this.$bus.on("request-program-details",this.saveProgramDetail),this.$bus.on("transfer-changer",e=>{this.showTransferName(this.$store.state.Data.TransferAttendance.transferInformation,e)}),this.$bus.on("confirm-schedule",this.getScheduleConfirmation),this.$bus.on("open-program-details",e=>{this.fullImmediately=this.$consts.ONLY_IMMEDIATE_PROGRAMS.includes(e.id),e.pregnant=!1;let t=!1;"schedule care"!=e.care_type&&"Not applicable"!=e.care_type&&(t=!0),50==e.id?e.isIndicativeScheduler=!0:this.schedulablePrograms.includes(e.id)&&(e.isScheduler=!0),this.userCompany[e.id]=1,this.companyId=this.$store.state.Data.Patient.info.company_id,this.memberId=this.$store.state.Data.Patient.info.id,this.userSpeciality[e.id]=null,this.userAttendanceCenter[e.id]=!1,this.programInformation[e.id]=null,this.specialityPrograms.includes(e.id)&&(this.userSpeciality[e.id]=this.$consts.SPECIALITY_BY_PROGRAM[e.name],this.userAttendanceCenter[e.id]=!0),this.calendarPrograms.includes(e.id)&&(this.programInformation[e.id]=e),this.program=e,this.program.date=this.$moment().format("DD/MM/YYYY"),this.program.hour=this.$moment().format("HH:mm"),this.program.selectedOptions=[],this.program.usernameOnCall=null,this.program.show_transfer=t,this.schedulablePrograms.includes(e.id)&&!this.immediatelyPrograms.includes(e.id)||(this.program.attend_immediately=!0),this.programArray.push(this.program),e.empty?this.empty=!0:this.empty=!1,this.specialPrograms.includes(this.program.id)&&(this.userAttendanceCenter[this.program.id]=1e4,this.userSpeciality[this.program.id]=this.$t("attendance.all"),this.$bus.emit("schedule-not-selected",!1)),this.forceUpdating=!1,this.forceUpdating=!0}),this.$bus.on("close-in-program-details",e=>{this.closeDetails(e)}),this.canTransfer=this.checkAccessesControlFuncionality(["attendance.doctorTransfer.update","attendance.screeningDoctorTransfer.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},beforeDestroy(){this.$bus.off("program-details"),this.$bus.off("request-program-details"),this.$bus.off("confirm-schedule"),this.$bus.off("open-program-details"),this.$bus.off("close-in-program-details")},methods:{transferModalCall(e){this.$bus.emit("open-transfer-attendance-professional-modal",{case_attendance_id:null,company_id:this.companyId,program_id:e,in_screening:!0})},showTransferName(e,t){let a=null;const n=this.programArray.find(e=>t==e.id);let i=this.programArray.indexOf(n);return e.forEach(e=>{e.program_id===this.programArray[i].id&&(a=e.user_name)}),a&&(this.programArray[i].usernameOnCall=a,this.forceUpdating=!1,this.forceUpdating=!0),a},scheduleClick(e){if(e.case_attendance_status)return;const t=e.eventParsed?e.eventParsed.start.date+" "+e.eventParsed.start.time:e.event.start;if(e.schedule_ids)if(e.schedule_ids.length>1||!e.chosenAgent){let a={date:this.$moment(t).utc().unix(),user_schedule_ids:e.schedule_ids};fi.GetLessScheduledScheduler(a).then(a=>{e.chosenSchedule=a.data.user_schedule_info.id,e.interval=a.data.user_schedule_info.time_interval,e.chosenAgent=a.data.user_schedule_info.user_id,this.scheduleEvent(e,t),a.data.user_schedule_info.user_schedule_id=e.chosenSchedule;let n={...a.data.user_schedule_info,program_id:e.program_id,schedule_ids:Object.values(e.schedule_ids).filter(e=>e!==a.data.user_schedule_info.id)};this.$bus.emit("calendar-view-agent-chosen",n),this.$bus.emit("update-scheduler-choosen",n)}).catch(e=>{console.error(e)})}else 1==e.schedule_ids.length&&(e.chosenSchedule=e.schedule_ids[0],this.scheduleEvent(e,t));else this.scheduleEvent(e,t)},scheduleEvent(e,t){let a={company_id:this.$store.state.Data.CaseAttendance.info.company_id,company_name:this.$store.state.Data.CaseAttendance.info.company_name,patient_name:this.$store.state.Data.CaseAttendance.info.name?this.$store.state.Data.CaseAttendance.info.name:this.$store.state.Data.Patient.info.name,date:t,original_date:e.original_date,doctor_id:e.chosenAgent,doctor_name:e.chosenAgentName,attendance_center_id:e.chosenAttendanceCenter,attendance_center_name:e.chosenAttendanceCenterName,schedule_id:e.chosenSchedule,interval:e.interval,program_id:e.program_id};e.event.blockEvent||this.$bus.emit("confirm-scheduled-dialog",a)},handleScheduleFitting(e){if(e.schedule_ids)if(e.schedule_ids.length>1||!e.chosenAgent){let t={date:this.$moment(e.fittingDate).utc().unix(),user_schedule_ids:e.schedule_ids};fi.GetLessScheduledScheduler(t).then(t=>{e.schedule_id=t.data.user_schedule_info.id,e.interval=t.data.user_schedule_info.time_interval,e.doctor_id=t.data.user_schedule_info.user_id,this.scheduleFitting(e),t.data.user_schedule_info.user_schedule_id=e.schedule_id;let a={...t.data.user_schedule_info,program_id:e.program_id,schedule_ids:Object.values(e.schedule_ids).filter(e=>e!==t.data.user_schedule_info.id)};this.$bus.emit("calendar-view-agent-chosen",a),this.$bus.emit("update-scheduler-choosen",a)}).catch(e=>{console.error(e)})}else 1==e.schedule_ids.length&&(e.schedule_id=e.schedule_ids[0],this.scheduleFitting(e));else this.scheduleFitting(e)},scheduleFitting(e){let t={fittingDate:e.fittingDate,patient_name:this.$store.state.Data.CaseAttendance.info.name,doctor_id:e.doctor_id,doctor_name:e.doctor_name,attendance_center_id:e.attendance_center_id,attendance_center_name:e.attendance_center_name,schedule_id:e.schedule_id,interval:e.interval,program_id:e.program_id};this.$bus.emit("confirm-fitting-scheduled-dialog",t)},getScheduleConfirmation(e){if(e.timestamp=e.original_date.unix(),e.fitting){e.company_id=this.$store.state.Data.CaseAttendance.info.company_id,e.company_name=this.$store.state.Data.CaseAttendance.info.company_name,e.patient_name=this.$store.state.Data.CaseAttendance.info.name;let t=this.$moment(e.start);e.due_date=t.format("DD/MM/YYYY"),e.due_time=t.format("HH:mm"),e.schedule_id=e.scheduleId,e.doctor_id=e.doctorId,e.doctor_name=e.doctorName,e.attendance_center_id=e.attendanceCenterId,e.attendance_center_name=e.attendanceCenterName,e.observations=e.reason,e.sendSMS=!1}const t=this.programArray.find(t=>t.isScheduler&&t.id==e.program_id);let a=this.programArray.indexOf(t);this.programArray[a].company_id=e.company_id,this.programArray[a].company_name=e.company_name,this.programArray[a].patient_name=e.patient_name,this.programArray[a].date=e.due_date,this.programArray[a].hour=e.due_time,this.programArray[a].timestamp=e.timestamp,this.programArray[a].doctor_id=e.doctor_id,this.programArray[a].attendance_center_id=e.attendance_center_id,this.programArray[a].doctor_name=e.doctor_name,this.programArray[a].attendance_center_name=e.attendance_center_name,this.programArray[a].observations=e.observations,this.programArray[a].fitting=e.fitting,this.programArray[a].schedule_id=e.schedule_id,this.programArray[a].sendSMS=e.sendSMS},optionHandler(e,t){let a=this.programArray[t].selectedOptions.find(t=>t==e.id);if(a){let e=this.programArray[t].selectedOptions.indexOf(a);this.programArray[t].selectedOptions.splice(e,1)}else this.programArray[t].selectedOptions.push(e.id)},scheduleHandler(e,t,a){this.programArray[a].selectedScheduleOptions||(this.programArray[a].selectedScheduleOptions=[]);let n=this.programArray[a].selectedScheduleOptions.find(e=>e.brick_option_id==t.id);if(!n)return this.programArray[a].selectedScheduleOptions.push({brick_name:t.name,brick_option_id:t.id,options_hierarchy:[]}),void this.scheduleHandler(e,t,a);let i=this.programArray[a].selectedScheduleOptions.indexOf(n);if(n){let t=this.programArray[a].selectedScheduleOptions[i].options_hierarchy.find(t=>t.name==e.name);if(t){let e=this.programArray[a].selectedScheduleOptions[i].options_hierarchy.indexOf(t);this.programArray[a].selectedScheduleOptions[i].options_hierarchy.splice(e,1)}else this.programArray[a].selectedScheduleOptions[i].options_hierarchy.push({name:e.name,type:e.type,options_hierarchy:[]})}},secondLevelScheduleHandler(e,t,a,n){let i=this.programArray[n].selectedScheduleOptions.find(e=>e.brick_name==a.name),s=this.programArray[n].selectedScheduleOptions.indexOf(i);if(-1!=s){let a=this.programArray[n].selectedScheduleOptions[s].options_hierarchy.find(e=>e.name==t.name),i=this.programArray[n].selectedScheduleOptions[s].options_hierarchy.indexOf(a);if(-1!=i){let t=this.programArray[n].selectedScheduleOptions[s].options_hierarchy[i].options_hierarchy.indexOf(e);-1!=t?this.programArray[n].selectedScheduleOptions[s].options_hierarchy[i].options_hierarchy.splice(t,1):this.programArray[n].selectedScheduleOptions[s].options_hierarchy[i].options_hierarchy.push(e)}}},checkDay(e){this.timeValid=!0;const[t,a,n]=e.split("/");let i=`${a}/${t}/${n}`,s=i+" 00:00:00",o=this.$moment(new Date(s));o._isValid||(this.timeValid=!1,this.timeError=this.$t("attendance.time_invalid")),this.$moment().valueOf()>o.valueOf()&&(this.timeValid=!1,this.timeError=this.$t("attendance.time_is_past"))},checkHour(e){this.timeValid=!0;let t=this.$moment().format("DD/MM/YYYY "),a=t+e+":00",n=this.$moment(new Date(a));n._isValid||(this.timeValid=!1,this.timeError=this.$t("attendance.time_invalid")),this.$moment().valueOf()>n.valueOf()&&(this.timeValid=!1,this.timeError=this.$t("attendance.time_is_past"))},saveDueDate(e,t){this.formatDueDate(e),this.$refs.menu[t].save(this.formattedDate)},updateImmediately(e,t){this.loading=!0,this.$bus.emit("omt-is-scheduler-change",!t),t&&(this.programArray[e].date=this.$moment().format("DD/MM/YYYY"),this.programArray[e].hour=this.$moment().format("HH:mm")),this.programArray[e].attend_immediately=t,this.loading=!1},saveDueHour(e,t){this.$refs.menu2[t].save(e)},closeDetails(e){this.$store.dispatch(this.$consts.TRANSFER_ATTENDANCE_ACTIONS.DELETE_TRANSFER_INFORMATION,{program_id:e.id});this.programArray.find(t=>t.id==e.id);e.checked=[],this.empty=!1;let t=this.programArray.indexOf(e);this.programArray.splice(t,1),this.$bus.emit("close-program-details",e)},saveProgramDetail(){this.programArray.forEach(e=>{let t={};if(e.checked){"SYSTEM"===e.type&&(e.date=this.$moment().format("YYYY-MM-DD"),e.hour=this.$moment().format("HH:mm:ss"));this.$moment(e.date+" "+e.hour).format("DD-MM-YYYY HH:mm:ss");t={id:e.id,attendance:e.attending,better_time_call:e.date,note:e.hourObservations,pregnant:this.pregnant,pregnant_note:this.observations,date:e.date,hour:e.hour,attend_immediately:e.attend_immediately,selectedOptions:e.selectedOptions,options:e.options},this.$store.dispatch(this.$consts.BRICKS_ACTIONS.PROGRAM_ACTIONS.UPDATE_SELECTED_PROGRAM,t)}}),this.$bus.emit("finished-program-details")},formatDueDate(e){const[t,a,n]=e.split("-");return this.formattedDate=`${n}-${a}-${t}`,this.formattedDate}},computed:{transferInformation(){return this.showTransferName(this.$store.state.Data.TransferAttendance.transferInformation)}}},ur=mr,Ar=(a("2b00"),Object(I["a"])(ur,bo,Mo,!1,null,"45c38d48",null)),_r=Ar.exports,Er=function(){var e=this,t=e._self._c;return t("div",{staticClass:"brick-title trr"},[t("div",{staticClass:"brick-title mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.available_attendances_dr_teladoc"))+": "+e._s(e.totalVouchers)+" ")])])])},Ir=[],hr={components:{},data(){return{group:{},totalVouchers:null}},created(){this.$bus.on("last-attendances-patient-group",e=>{this.group=e}),this.getVouchers()},methods:{getVouchers(){let e={member_id:this.patientInfo.id,program_id:7,company_id:this.patientInfo.company_id,group_id:this.patientInfo.group_id};Fs.getMemberVouchersDrTeladoc(e).then(e=>{this.total=e.data.total,this.totalVouchers=e.data.voucher_quantity,this.$bus.emit("total-vouchers",e.data.voucher_quantity)}).catch(e=>{console.error(e)})}},computed:{patientInfo(){return this.$store.getters[this.$consts.PATIENT_ACTIONS.GET_PATIENT]||{}}}},Or=hr,pr=(a("c01d"),Object(I["a"])(Or,Er,Ir,!1,null,"3e9485c6",null)),Sr=pr.exports,Cr=a("3129"),Tr=function(){var e=this,t=e._self._c;return e.total>0?t("div",{staticClass:"cases-on-going mt-9"},[t("div",{staticClass:"title-container"},[t("p",{staticClass:"title"},[t("span",{staticClass:"bold-part mr-1"},[e._v(e._s(e.$t("attendance.attendance_on_going_bold")))]),e._v(e._s(e.$t("attendance.attendance_on_going")))]),t("div",{staticClass:"collapse-square",on:{click:function(t){return e.collapseAction()}}},[t("img",{class:{collapsed:e.collapsed,displaying:!e.collapsed},attrs:{src:a("dcb9")}})])]),t(Cr["a"],{staticClass:"pa-0",attrs:{width:"435px",type:"list-item",loading:e.loadingTotal},scopedSlots:e._u([{key:"default",fn:function(){return[t("p",{staticClass:"description"},[t("span",{staticClass:"bold-part"},[e._v(e._s(e.$t("attendance.attention_description")))]),e._v(e._s(e.$t("attendance.on_going_case_part_1"))+" "+e._s(e.total)+" "+e._s(e.$t("attendance.on_going_case_part_2")))])]},proxy:!0}],null,!1,1842717249)}),t("transition",{attrs:{name:"collapse"},on:{"before-enter":e.beforeEnter,enter:e.enter,"before-leave":e.beforeLeave,leave:e.leave}},[t(Cr["a"],{staticClass:"pa-0",attrs:{width:"1508px",height:"1000px",type:"table",loading:e.loading}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"collapsible-content"},[t("table",{staticClass:"cases-table"},[t("thead",{staticClass:"cases-header"},[t("tr",[t("th",{staticClass:"cases-header header-company"},[e._v(e._s(e.$t("attendance.client")))]),t("th",{staticClass:"cases-header header-case-id"},[e._v(e._s(e.$t("attendance.case_number")))]),t("th",{staticClass:"cases-header header-date-hour"},[e._v(e._s(e.$t("attendance.date_and_hour")))]),t("th",{staticClass:"cases-header header-program-name"},[e._v(e._s(e.$t("attendance.program_name")))]),t("th",{staticClass:"cases-header header-status"},[e._v(e._s(e.$t("attendance.status")))]),t("th",{staticClass:"cases-header header-attempts"},[e._v(e._s(e.$t("attendance.attempts")))]),t("th",{staticClass:"cases-header header-related-cases"},[e._v(e._s(e.$t("attendance.case_related_number")))]),t("th",{staticClass:"cases-header header-professional"},[e._v(e._s(e.$t("attendance.attended_by")))]),t("th",{staticClass:"cases-header header-reschedule"},[e._v(e._s(e.$t("attendance.reschedule")))]),t("th",{staticClass:"cases-header header-relate"},[e._v(e._s(e.$t("attendance.relate_cases")))]),t("th",{staticClass:"cases-header header-cancel"},[e._v(e._s(e.$t("attendance.cancel_cases")))])])]),e.loading?e._e():t("tbody",e._l(e.caseAttendances,(function(a,n){return t("tr",{key:n,staticClass:"case-line"},[t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(null===a.company_info.nick_name?a.company_info.name:a.company_info.nick_name))]),t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(a.case_attendance_id))]),t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(e.formatDate(a)))]),t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(null==e.convertProgramName(a)?e.$t("programs.program_"+a.program_id):e.convertProgramName(a)))]),t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(e.capitalizeString(e.$t("status."+a.status.toLowerCase()))))]),t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(a.is_video_attendance?"-":a.attempts))]),t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(a.latercomer_count))]),t("td",{staticClass:"case-in-line case-line-text"},[e._v(e._s(e.staffName(a)))]),t("td",{staticClass:"actions-cell"},[t("button",{staticClass:"reschedule-btn",class:{"disabled-btn":"schedule care"!==a.program_care_type},attrs:{disabled:"schedule care"!==a.program_care_type},on:{click:function(t){return e.createReschedule(a)}}},[e._v("Reagendar")])]),t("td",{staticClass:"actions-cell"},[t("button",{staticClass:"relate-btn",class:{"disabled-btn":"immediate care"!==a.program_care_type},attrs:{disabled:"immediate care"!==a.program_care_type},on:{click:function(t){return e.createLaterComerCase(a)}}},[e._v("Relacionar")])]),t("td",{staticClass:"actions-cell"},[t("button",{staticClass:"cancel-btn",on:{click:function(t){return e.cancel(a.case_attendance_id)}}},[e._v("Cancelar")])])])})),0)]),t("CaseLaterComerModal"),t("CaseEndAttendanceToProcessModal"),t("RescheduleModal"),e.loading?e._e():t("div",{staticClass:"cases-table text-center page-container-case-on-going"},[e.totalPages>0?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"5"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.previousPage()}},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)],1)])],1)],1):e._e()},Rr=[],Dr=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"615",height:"367px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("attendance.relate_case")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"fields-container"},[t("p",{staticClass:"text-data"},[e._v("\n          "+e._s(e.$t("attendance.case_later_comer_description"))+"\n        ")]),t(Ni["a"],{attrs:{height:"100px",label:e.$t("schedule.observations"),outlined:"","no-resize":""},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}}),e.attendance?t("div",[t("ClassificationSlider",{attrs:{level:e.attendance.urgency_level,small:!0}}),t("PrioritySlider",{attrs:{level:e.attendance.priority_level,small:!0}})],1):e._e()],1),t("div",{staticClass:"error-box-flex"},[t("ErrorText")],1),e.loading?t("div",{staticClass:"d-flex flex-column justify-center align-center py-2"},[t("div",[t(nt["a"],{attrs:{indeterminate:"",color:"#350165"}})],1)]):e._e(),e.loading?e._e():t("div",{staticClass:"buttons-panel"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary",width:"100px",disabled:e.reason.length<3},on:{click:function(t){return e.changeUrgency()}}},[e._v("\n          "+e._s(e.$t("attendance.ok"))+"\n        ")]),t(r["a"],{staticClass:"btn",attrs:{width:"120px",outlined:"",color:"#350165"},on:{click:function(t){return e.close()}}},[e._v("\n          "+e._s(e.$t("attendance.cancel"))+"\n        ")])],1)],1)],1)],1)},gr=[],Lr={components:{ErrorText:pi,ClassificationSlider:Xo,PrioritySlider:ir},mixins:[ve],data(){return{dialog:!1,attendance:null,loading:!1,reason:"",urgency_id:0,priority_id:0}},beforeCreate(){this.$bus.off("case-later-comer-dialog"),this.$bus.off("patient-select-urgency-come-later"),this.$bus.off("patient-select-priority-come-later"),this.attendance=null,this.reason=""},created(){this.$bus.on("case-later-comer-dialog",e=>{this.dialog=!0,this.attendance=e,this.urgency_id=0,this.priority_id=0}),this.$bus.on("patient-select-urgency-come-later",e=>{this.urgency_id=e.id}),this.$bus.on("patient-select-priority-come-later",e=>{this.priority_id=e.id})},beforeDestroy(){this.$bus.off("case-later-comer-dialog"),this.$bus.off("patient-select-urgency-come-later"),this.$bus.off("patient-select-priority-come-later"),this.attendance=null,this.reason=""},methods:{close(){this.dialog=!1,this.$bus.emit("show-error-message",{message:"",display:!1})},changeUrgency(){this.loading=!0,Ge.changeAttendanceUrgency({case_attendance_id:this.attendance.case_attendance_id,user_id:this.$store.state.Data.User.info.user_info.id,urgency_id:this.urgency_id,priority_id:this.priority_id}).then(e=>{this.createCaseLaterComer()}).catch(e=>{console.error(e),this.$bus.emit("show-error-message",{message:e.data.message,display:!0}),this.loading=!1})},createCaseLaterComer(){Ge.createCaseLaterComer({case_id:this.attendance.case_id,user_id:this.$store.state.Data.User.info.user_info.id,reason:this.reason}).then(e=>{this.$bus.emit("created-case-later-comer",e.data.case_id),this.$store.state.Data.CaseAttendance.info.emergency_pass&&this.$bus.emit("confirm-close-emergency-pass"),this.close()}).catch(e=>{console.error(e),this.$bus.emit("show-error-message",{message:e.data.message,display:!0})}).finally(()=>{this.loading=!1})}}},fr=Lr,Nr=(a("75bc"),Object(I["a"])(fr,Dr,gr,!1,null,"3e14cf74",null)),kr=Nr.exports,vr=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"615",height:"367px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("attendance.end_case")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"fields-container"},[t("p",{staticClass:"text-data"},[e._v("\n          "+e._s(e.$t("attendance.case_end_attendance_to_process_description"))+"\n        ")]),t(Ni["a"],{attrs:{height:"100px",label:e.$t("schedule.observations"),outlined:"","no-resize":""},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e.loading?e._e():t("div",{staticClass:"buttons-panel"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary",width:"100px",disabled:e.reason.length<10},on:{click:function(t){return e.sendAttendanceToProcess()}}},[e._v("\n          "+e._s(e.$t("attendance.ok"))+"\n        ")]),t(r["a"],{staticClass:"btn",attrs:{width:"120px",outlined:"",color:"#350165"},on:{click:function(t){return e.close()}}},[e._v("\n          "+e._s(e.$t("attendance.cancel"))+"\n        ")])],1)],1)],1)],1)},br=[],Mr={data(){return{dialog:!1,attendance:null,loading:!1,reason:""}},beforeCreate(){this.attendance=null,this.reason=""},created(){this.$bus.on("case-end-attendance-to-process-dialog",e=>{this.dialog=!0,this.attendance=e})},beforeDestroy(){this.$bus.off("case-end-attendance-to-process-dialog"),this.attendance=null,this.reason=""},methods:{close(){this.$bus.emit("cancel-end-attendance-to-process",this.attendance),this.dialog=!1},sendAttendanceToProcess(){let e={case_attendance_id:null,case_attendance_id_to_modify:this.attendance.case_attendance_id,action:"CANCEL",reason:this.reason,user_id:this.$store.state.Data.User.info.user_info.id};this.$bus.emit("ended-attendance-to-process",e),this.dialog=!1}}},Pr=Mr,Ur=(a("15cd"),Object(I["a"])(Pr,vr,br,!1,null,"26d937fd",null)),yr=Ur.exports,$r=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"800",height:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("attendance.reschedule")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e.loading?t("div",{staticClass:"d-flex flex-column justify-center align-center py-2"},[t("div",[t(nt["a"],{attrs:{indeterminate:"",color:"#350165"}})],1)]):e._e(),!e.loading&&e.attendance?t(l["a"],[t("RescheduledCaseAttendanceForm",{attrs:{attendance:e.attendance},on:{handleClose:function(t){return e.close()}}})],1):e._e()],1)],1)],1)},xr=[],Vr={components:{RescheduledCaseAttendanceForm:es},props:["handleClose"],data(){return{dialog:!1,loading:!1,attendance:null,programIdsNutri:[5,54],programIdsEsportivo:[4,10]}},created(){this.$bus.on("open-reschedule-modal",e=>{this.dialog=!0,this.attendance=e,this.getAttendance()})},beforeDestroy(){this.$bus.off("open-reschedule-modal")},methods:{close(){this.dialog=!1,this.$emit("handleClose")},getAttendance(){this.loading=!0;let e={case_attendance_id:this.attendance.case_attendance_id};Ge.get(e).then(e=>{this.attendance=e.data,this.attendance.chosenSchedule=e.data.user_schedule_id,this.programIdsNutri.includes(this.attendance.program_information[0].id)&&(this.attendance.attendance_center_name="Teladoc Nutri
o",vip:!1,flagTiss:!!this.$store.state.Data.CaseAttendance.info&&this.$store.state.Data.CaseAttendance.info.flag_tiss}}},created(){this.flagTiss=!!this.$store.state.Data.CaseAttendance.info&&this.$store.state.Data.CaseAttendance.info.flag_tiss,this.$bus.on("send-disabilities",e=>{this.setDefaultDisabilities(e)}),this.eventOpen()},updated(){this.$bus._events["open-patient-modal"]&&delete this.$bus._events["open-patient-modal"],this.eventOpen()},methods:{eventOpen(){this.$bus.on("open-patient-modal",e=>{this.patient_dialog=e;let t=this.$store.state.Data.Patient.info,a=this.$store.state.Data.Patient.company_info;this.nameIRS=t?t.name:"",this.form.social_name=t?t.social_name:this.nameIRS,this.form.gender=t?t.gender:"",this.form.phone=t?t.phone:"",this.form.phone_optional=t?t.phone_optional:"",this.form.civil_states_id=t?t.civil_state_id:"",this.form.contactTime=t&&t.contact_time?t.contact_time.map(e=>e.id?e.id:e):null,this.form.has_children=t?t.has_children:"",this.form.scholarship_id=t?t.scholarship_id:"",this.form.profession=t?t.profession:"",this.form.working_weekly_hours=t?t.working_weekly_hours:"",this.form.security=a?a.seguradora:"",this.form.plan=a?a.plano:"",this.form.cardNumber=a?a.carteirinha:"",this.form.titularType=t?t.type:"",this.form.email=t?t.email:null,this.form.optional_email=t?t.optional_email:null,this.form.emergency_contact_number=t?t.emergency_contact_number:"",this.form.emergency_contact_name=t?t.emergency_contact_name:"",this.form.medic_recommendation=t?t.medic_recommendation:"",this.form.vip=t.vip,this.form.phone&&11===this.form.phone.length?this.form.phone=this.formatPhoneFilter("55"+t.phone):this.form.phone&&this.form.phone.length>11&&(this.form.phone=this.formatPhoneFilter(this.form.phone)),this.form.phone_optional=null,t&&t.phone_optional&&(11===t.phone_optional.length?this.form.phone_optional=this.formatPhoneFilter("55"+t.phone_optional):t.phone_optional.length>11&&(this.form.phone_optional=this.formatPhoneFilter(t.phone_optional))),this.client={id:a?a.company_id:t.company_id}})},close(){this.patient_dialog=!1},getContactTimeText(e){if(!e)return"";let t=this.$t("patient_modal."+e.name),a=e.start_time&&e.end_time?`(${this.$moment(e.start_time).format("HH:mm")} ${this.$t("patient_modal.to")} ${this.$moment(e.end_time).format("HH:mm")})`:"";return`${t} ${a}`},wasNoneSelected(){let e=this.contactTimes.find(e=>"none"==e.name);this.form.contactTime=this.form.contactTime[this.form.contactTime.length-1]==e.id?[e.id]:this.form.contactTime.filter(t=>t!==e.id)},prepareUpdate(){if(this.$v.$touch(),this.$v.$invalid)return;Object.keys(this.form.disabilitiesMarked).forEach(e=>{this.form.disabilitiesIds.push(this.form.disabilitiesMarked[e].id)}),this.form.contactTime=this.form.contactTime.filter(e=>e);let e=this.form.contactTime.length>0?this.form.contactTime:null,t={member_info:{social_name:this.form.social_name.toUpperCase(),gender:this.form.gender,phone:this.form.phone,phone_optional:this.form.phone_optional,civil_states_id:this.form.civil_states_id,has_children:this.form.has_children,scholarship_id:this.form.scholarship_id,profession:this.form.profession,working_weekly_hours:this.form.working_weekly_hours,contact_time:e,email:this.form.email,optional_email:this.form.optional_email,emergency_contact_number:this.form.emergency_contact_number,emergency_contact_name:this.form.emergency_contact_name,medic_recommendation:this.form.medic_recommendation,disability:this.form.disabilitiesIds?[...new Set(this.form.disabilitiesIds)]:[1],vip:this.form.vip},company_member_info:{plan_type:this.form.plan,card_number:this.form.cardNumber,insurer:this.form.security},company_id:this.client?this.client.id:null,member_id:this.$store.state.Data.Patient.info.member_id?this.$store.state.Data.Patient.info.member_id:this.$store.state.Data.Patient.info.id};be.memberUpdate(t).then(e=>{this.$bus.emit("patient-doc-update",{member_id:t.member_id}),this.$store.state.Data.Patient.info.social_name=this.form.social_name.toUpperCase(),this.close();let a={member_id:t.member_id};this.$bus.emit("patient-doc-update",a)}).catch(e=>{console.error(e)})},deleteDisabilitiesMarked(){this.form.disabilitiesMarked=[],this.form.disabilitiesIds=[]},selectedDisability(e){let t=[];e.forEach(a=>{if(1==a.id&&t.length>1)return this.deleteDisabilitiesMarked(),t=[],void t.push(a);1==a.id&&e.length>1?t.pop(a):t.includes(a)||(t.push(a),this.form.disabilitiesIds.push(a.id))}),this.deleteDisabilitiesMarked(),this.form.disabilitiesMarked=t},setDefaultDisabilities(e){let t=[];this.disabilities.forEach(a=>{e.includes(a.id)&&t.push(a)}),this.form.disabilitiesMarked=t}},computed:{contactTimes(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_CONTACT_TIMES]||[]},civilStates(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_CIVIL_STATES]||[]},scholarships(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_SCHOLARSHIPS]||[]},deficiencies(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_DEFICIENCIES]||[]},disabilities(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_DISABILITY]||[]},optionText(){return e=>this.$t("patient."+e.name)},clientErrors(){const e=[];return this.$v.client.$dirty?(!this.$v.client.required&&e.push(this.$t("access_controls.required")),e):e},genderErrors(){const e=[];return this.$v.form.gender.$dirty?(!this.$v.form.gender.required&&e.push(this.$t("access_controls.required")),e):e},phoneErrors(){const e=[];return this.$v.form.phone.$dirty?(!this.$v.form.phone.required&&e.push(this.$t("access_controls.required")),!this.$v.form.phone.minLength&&e.push(this.$t("access_controls.min_length")),e):e},phoneOptionalErrors(){const e=[];return this.$v.form.phone_optional.$dirty?(!this.$v.form.phone_optional.minLength&&e.push(this.$t("access_controls.min_length")),e):e},optionalEmailErrors(){const e=[];return this.$v.form.optional_email.$dirty?(!this.$v.form.optional_email.email&&e.push(this.$t("access_controls.invalid_email")),e):e},emergencyContactNumberErrors(){const e=[];return this.$v.form.emergency_contact_number.$dirty?(!this.$v.form.emergency_contact_number.required&&e.push(this.$t("access_controls.required")),!this.$v.form.emergency_contact_number.minLength&&e.push(this.$t("access_controls.min_length")),e):e},emergencyContactNameErrors(){const e=[];return this.$v.form.emergency_contact_name.$dirty?(!this.$v.form.emergency_contact_name.required&&e.push(this.$t("access_controls.required")),e):e}},validations:{client:{required:Ae["required"]},form:{gender:{required:Ae["required"]},phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(19)},phone_optional:{minLength:Object(Ae["minLength"])(18)},optional_email:{email:Ae["email"]},emergency_contact_number:{minLength:Object(Ae["minLength"])(18),required:Object(Ae["requiredIf"])((function(){return this.form.emergency_contact_name}))},emergency_contact_name:{required:Object(Ae["requiredIf"])((function(){return this.form.emergency_contact_number}))}}}},vs=ks,bs=(a("417d"),Object(I["a"])(vs,fs,Ns,!1,null,null,null)),Ms=bs.exports,Ps={props:["item"],components:{EditPatientModal:Ms,EmergencyIcon:Ut},data(){return{userInfo:[],socialName:"",email:"",optional_email:"",cpf:"",gender:"",age:0,birthdate:"",phone:"",phoneOptional:"",contact_time:"",has_children:"",scholarship_name:"",civil_state_name:"",profession:"",type:"",plan_type:"",card:"",working_weekly_hours:"",company:"",internal_name:"",insurer:"",emergency_contact_name:"",emergency_contact_number:"",medic_recommendation:"",insuranceInfo:null,year:null,months:0,company_id:0,group_id:0,user_programs:[],emergency_member:!1,last_attest_date:"--/--/----",desabilities:[],vip:!1}},created(){this.$bus.on("patient-doc-update",e=>{this.getPatient(e)}),this.item&&this.getPatient(this.item)},beforeDestroy(){this.$bus.off("patient-doc-update")},methods:{getPatient(e){e.member_id||(e.member_id=this.$store.state.Data.CaseAttendance.info.member_id?this.$store.state.Data.CaseAttendance.info.member_id:this.$store.state.Data.Patient.info.id);let t=this.$store.state.Data.User.token,a=e.member_id;this.emergency_member=!0!==this.$store.state.Data.CaseAttendance.info.emergency_pass?this.$store.state.Data.Patient.info.emergency_pass:this.$store.state.Data.CaseAttendance.info.emergency_pass;let n={token:t,member_id:a,emergency_member:this.emergency_member};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_MEMBER,n).then(e=>{this.userInfo=e.data.member_info,this.user_programs=e.program_ids,this.socialName=this.$store.state.Data.Patient.info.social_name||"",this.email=this.userInfo.email,this.optional_email=this.userInfo.optional_email,this.cpf=this.userInfo.cpf,this.gender=this.userInfo.gender,this.birthdate=this.userInfo.birthdate,this.age=this.$moment().diff(this.$moment(this.birthdate),"years"),this.phone=this.userInfo.phone_partner_patient||this.userInfo.phone,this.phoneOptional=this.userInfo.phone_optional||"",this.contact_time=this.userInfo.contact_time,this.has_children=this.userInfo.has_children,this.scholarship_name=this.userInfo.scholarship_name,this.civil_state_name=this.userInfo.civil_state_name,this.profession=this.userInfo.profession,this.working_weekly_hours=this.userInfo.working_weekly_hours,this.emergency_contact_name=this.userInfo.emergency_contact_name,this.emergency_contact_number=this.userInfo.emergency_contact_number,this.year=this.birthdate.substr(0,4),this.months=this.$moment().diff(this.$moment(this.birthdate).add(this.age,"years"),"months"),this.company_id=this.item.company_id||this.$store.state.Data.Patient.info.company_id,3==this.company_id?this.phone=this.userInfo.phone_partner_patient||this.userInfo.phone:this.phone=this.userInfo.phone,this.internal_name=this.item.internal_name,n.emergency_member&&(this.group_id=this.$store.state.Data.Patient.info.group_id),this.medic_recommendation=this.userInfo.medic_recommendation,this.desabilities=this.userInfo.deficiency_ids,this.vip=this.userInfo.vip,this.$bus.emit("send-disabilities",this.desabilities),this.getContactTimes(),e.data.health_insurance_info&&e.data.health_insurance_info[0]&&(this.insuranceInfo=e.data.health_insurance_info.find(e=>e.company_id===this.company_id)),this.insuranceInfo&&(this.card=this.insuranceInfo.carteirinha,this.insurer=this.insuranceInfo.seguradora,this.plan_type=this.insuranceInfo.plano,"HOLDER"==this.insuranceInfo.type?this.type="Titular":this.type="Dependente",this.company=this.insuranceInfo.nick_name||this.insuranceInfo.company_name,this.sendTriageData()),e.data.groups_info&&e.data.groups_info.length>0&&this.$bus.emit("last-attendances-patient-group",e.data.groups_info[0]);let t={...this.userInfo,age:this.age,group_id:this.group_id||this.$store.state.Data.Patient.info.group_id,company_id:this.company_id};this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,t),this.$store.getters[this.$consts.PATIENT_ACTIONS.GET_PATIENT],this.getLastMedicalCertificate()}).catch(e=>{console.error(e)})},getLastMedicalCertificate(){let e={company_id:this.company_id||this.$store.state.Data.CaseAttendance.info.company_id,member_id:this.$store.state.Data.CaseAttendance.info.member_id?this.$store.state.Data.CaseAttendance.info.member_id:this.$store.state.Data.Patient.info.id};Qt.getLastMedicalCertificate(e).then(e=>{if(!e.data)return;let t=e.data.start_date||e.data.certificate.DataInicio;(t||e.data.created_at)&&(this.last_attest_date=this.$moment(t||e.data.created_at).format("DD/MM/YYYY"))}).catch(e=>{console.error(e)})},getContactTimes(){if(this.contact_time="",!this.userInfo.contact_time||this.userInfo.contact_time&&0==this.userInfo.contact_time.length)return;this.userInfo.contact_time=this.userInfo.contact_time.map(e=>e.id);let e=this.contactTimes.filter(e=>this.userInfo.contact_time.includes(e.id));for(let t in e)e[t]=this.getContactTimeText(e[t]);this.contact_time=e.join().replaceAll(",",",\n")},getContactTimeText(e){let t=this.$t("patient_modal."+e.name),a=e.start_time&&e.end_time?`(${this.$moment(e.start_time).format("HH:mm")} ${this.$t("patient_modal.to")} ${this.$moment(e.end_time).format("HH:mm")})`:"";return`${t} ${a}`},getAge(e){let t=(new Date).getFullYear();this.age=t-e},openPatientModal(){let e=this.$store.state.Data.Patient.info;e.social_name=this.socialName,e.phone=this.phone,e.phone_optional=this.phoneOptional,e.medic_recommendation=this.medic_recommendation,this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,e),this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET_COMPANY,this.insuranceInfo);let t=!0;this.$bus.emit("open-patient-modal",t)},accessAttest(){let e={attend:!0};this.$router.replace({query:e}),this.$bus.emit("change-attend-tab-to-history")},sendTriageData(){let e=this.insuranceInfo.company_id;this.$bus.emit("company-triage",e)}},computed:{contactTimes(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_CONTACT_TIMES]||[]},civilStates(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_CIVIL_STATES]||[]},scholarships(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_SCHOLARSHIPS]||[]},deficiencies(){return this.$store.getters[this.$consts.GENERAL_ACTIONS.GET_SCHOLARSHIPS]||[]},formatCpf(){if(!this.cpf)return null;let e=this.cpf.substr(0,3),t=this.cpf.substr(3,3),a=this.cpf.substr(6,3),n=this.cpf.substr(9,2);return`${e}.${t}.${a}-${n}`},formatAge(){return this.age>0?`${this.age} ${this.$t("patient.years")} ${this.$t("patient.and")} ${this.months} ${this.$t("patient.months")}`:`${this.months} ${this.$t("patient.months")}`},formatBirthdate(){if(!this.birthdate)return null;let e=this.birthdate.substr(0,4),t=this.birthdate.substr(5,2),a=this.birthdate.substr(8,2);return`${a}/${t}/${e}`},formatDesability(){if(!this.desabilities)return"N
 realizou psicoterapia anteriormente?",were_you_discharged_from_treatment:"Recebeu alta do tratamento?",for_how_long:"Por quanto tempos?",have_you_had_suicidal_thoughts_in_the_last_3_weeks:"Teve ideia suicidas nas 
 redirecionado para o login.",attendance_patient_already_in_attending:"Esse paciente j
rio agendado:",e),!1}},canSaveButton(){return!!R.PROGRAMS_PHONE.includes(this.$store.state.Data.CaseAttendance.info.program_id)||(this.doctorInitAttendance?this.canSaveBasedOnScheduledTime:!this.can_save)},canSaveButtonPsychology(){return this.doctorInitAttendance?this.canSaveBasedOnScheduledTime:!this.disabledSubject}}},Ph=Mh,Uh=(a("943c"),Object(I["a"])(Ph,uh,Ah,!1,null,null,null)),yh=Uh.exports,$h={props:["item","bricks","brickDetails"],components:{atendimento_video:zI,CancelComponent:mh,emr_anamnese_medica:sl,anamnese_alimentar:ml,anamnese_esportiva:hl,emr_conduta:Rl,emr_desfecho:kl,emr_desfecho_psicologico:yl,emr_exames:Bl,emr_declaracao:jm,emr_relatorio_medico:Xm,emr_hipotese:Ql,emr_resultado:tc,emr_pediatra:rc,emr_prescription:Mc,inconsistencia_dados:qc,SaveComponent:yh,triagem_enfermagem:to,triagem_interna:Jc,observations:ad,bricks_title:ld,monitoramento_clinico:_d,programa_nutricional:Sd,programa_esportivo:Ld,emr_dados:Md,questionario_saude:Gd,acompanhamento_atendimento:Yd,programa_gestacional:Wd,acompanhamento_gestacional:cm,acompanhamento_puerperio:Em,chat_app:Tm,conclusao_atendimento:Um,emr_telepropedeutica:Fm,emr_observation:Nu,faturamento_tiss:Uu,agendamento_indicativo:ju,nutricional_answers_history:cA,member_nutrition_brick:IA,nutricional_care:TA,completion_accompaniment_brick:vA,nutrition_plan_upload:$A,atividade_fisica:wA,informacao_saude:ZA,diseases_exams:e_,calcular_risco:o_,disponibilidade_vivo:Ys,brick_anamnese_psicologica:u_,brick_sugestao_plano_terapeutico:O_,brick_historia_paciente:D_,brick_avaliacao:v_,brick_objetivo:x_,brick_feedback_terapeutico:H_,brick_tratamento_terapeutico:Q_,brick_frequencia_sugerida:tE,brick_subjetivo:rE,brick_plano_terapeutico:AE,case_attendance_attachment_member:Nm,whatsapp_retry:du},data(){return{brickData:null,component:[]}},created(){this.brickData=null,this.component=[],this.$bus.on("brick-list",e=>{this.brickData=e,this.getBrickKeys()}),setTimeout(()=>{this.getBrickKeys()},500)},beforeDestroy(){this.$bus.off("brick-list")},methods:{searchBrickList(e){return this.brickData=this.bricks.filter(t=>t.key==e),this.brickData},getBrickKeys(){if(this.brickData){let e=this.brickData.map(e=>e.key);return this.component=e,e}setTimeout(()=>{this.getBrickKeys()},500)}}},xh=$h,Vh=(a("8ee6"),Object(I["a"])(xh,SI,CI,!1,null,null,null)),Gh=Vh.exports,Fh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"patient-call-reason"},[t("div",{staticClass:"reason-title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.reason")))]),e._v(" "+e._s(e.$t("patient.call"))+"\n    ")]),t("div",{staticClass:"reasons"},e._l(e.reasons,(function(a,n){return t("div",{key:n,staticClass:"doc-checkbox"},[0==a.checked?t(St["a"],{staticClass:"doct-checkbox",attrs:{label:a.name,value:a.id},on:{change:function(t){return e.openReasonDetails(a)}}}):e._e(),e.display&&e.path&&"pdf"==e.type?t("div",{staticClass:"file-data mt-4"},[t(St["a"],{staticClass:"pdf-checkbox",attrs:{label:a.name,id:a.name},on:{change:function(t){return e.closeReasonDetails(a)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"reason.checked"}}),t("embed",{attrs:{src:e.path,width:"1100px",height:"600px"}})],1):e._e(),e.display&&e.path&&"csv"==e.type?t("div",{staticClass:"csv mt-5"},[t(St["a"],{staticClass:"inside-checkbox",attrs:{label:a.name,id:a.name},on:{change:function(t){return e.closeReasonDetails(a)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"reason.checked"}}),t("ReasonDetails",{attrs:{indexes:e.indexes,parsed:e.parsed,dataArray:e.dataArray}})],1):e._e()],1)})),0)])},Bh=[],wh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reason-data"},[e._l(e.reasonArray,(function(a,n){return t(St["a"],{key:n,staticClass:"pat-checkbox",attrs:{label:a.name},on:{change:function(t){return e.closeDetails(a)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"reas.checked"}})})),t("div",[t("embed",{attrs:{src:e.path,"max-width":"1100px",height:"600px"}})]),t("div",{staticClass:"display-csv mb-4"},[t(At["a"],{staticClass:"test",attrs:{"disable-sort":!0,headers:e.header,items:e.parsed_values,"hide-default-footer":!0}})],1)],2)},Hh=[],qh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"display-csv mb-4"},[t(At["a"],{attrs:{"disable-sort":!0,headers:e.header,items:e.parsed_values,"hide-default-footer":!0}})],1)},Yh=[],jh={props:["item","parsed","index"],data(){return{indexes:[],parsed_values:[],header:[],filename:""}},created(){this.item&&this.getParsedData(),this.item&&this.indexes.forEach((e,t)=>{this.header.push({text:e,value:e})}),this.$bus.on("new-csv-data",e=>{this.header=[],this.parsed_values=[],e.index.forEach((e,t)=>{this.header.push({text:e,value:e})}),this.parsed_values=e.parsed}),this.getFilename(),this.index.length>0&&this.parsed.length>0&&(this.header=[],this.parsed_values=[],this.index.forEach((e,t)=>{this.header.push({text:e,value:e})}),this.parsed_values=this.parsed)},methods:{getParsedData(){this.indexes=this.item.parsed_csv.indexes,this.parsed_values=this.item.parsed_csv.parsed_values},getFilename(){if(this.item){let e=this.item.file_url,t=e.lastIndexOf("/");this.filename=e.substr(t+1)}}}},Kh=jh,Zh=(a("8e66"),Object(I["a"])(Kh,qh,Yh,!1,null,null,null)),Qh=Zh.exports,Jh={components:{CsvData:Qh},props:["indexes","parsed","dataArray"],data(){return{path:"",header:[],parsed_values:[],reason:null,reasonArray:[],visible:!1}},created(){this.$bus.on("open-reason-details",e=>{this.reason=e,this.reasonArray.push(this.reason),this.visible=!0}),this.indexes.length>0&&this.parsed.length>0&&(this.header=[],this.parsed_values=[],this.indexes.forEach((e,t)=>{this.header.push({text:e,value:e})}),this.parsed_values=this.parsed)},methods:{closeDetails(e){e.checked=!1;let t=this.reasonArray.indexOf(e);this.reasonArray.splice(t,1),this.$bus.emit("close-reason-details",e)}}},Wh=Jh,Xh=(a("ba92"),Object(I["a"])(Wh,wh,Hh,!1,null,null,null)),zh=Xh.exports,eO={props:["callReasonInfo"],components:{ReasonDetails:zh},data(){return{reasons:[],item:[],path:null,type:"",display:!1,indexes:[],parsed:[],checked:[],dataArray:[],unchecked:[],selected:[]}},created(){this.getReasonData(),this.dataArray=this.callReasonInfo,this.reasons.forEach(e=>{e.checked=!1})},methods:{getReasonData(){return this.reasons=this.callReasonInfo.map(e=>({name:e.name,id:e.id})),this.reasons},getReason(e){let t=this.$store.state.Data.User.token,a={id:e,token:t};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_LIST,a).then(e=>{this.path=e.data.file_url,this.type=e.data.file_type,this.parsed=e.data.parsed_csv.parsed_values,this.indexes=e.data.parsed_csv.indexes}).catch(e=>{console.error(e)})},openReasonDetails(e){this.getReason(e.id),this.display=!0,e.checked=!0},closeReasonDetails(e){this.display=!1,e.checked=!1}}},tO=eO,aO=(a("343c"),Object(I["a"])(tO,Fh,Bh,!1,null,null,null)),nO=aO.exports,iO=function(){var e=this,t=e._self._c;return e.programList.lenght>0?t("div",{staticClass:"programs mt-4"},[t("div",{staticClass:"program-title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.our")))]),e._v(" "+e._s(e.$t("patient.programs"))+"\n    ")]),t("div",{staticClass:"prog-checkboxes"},e._l(e.programList,(function(a,n){return t("div",{key:n,staticClass:"overflows",class:{"disabled-events":e.selected}},[t(St["a"],{staticClass:"prog-checkbox",attrs:{label:a.name,value:a.id},on:{change:function(t){return e.displayDetails(a)}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)})),0),t("DoctorProgramDetails",{attrs:{programArray:e.programArray}})],1):e._e()},sO=[],oO=function(){var e=this,t=e._self._c;return e.visible?t("div",{staticClass:"main-detail"},[t("div",e._l(e.programArray,(function(n,i){return t("div",{key:i,staticClass:"mt-6 programs-open"},[t("div",{staticClass:"prgm mb-4"},[t(St["a"],{staticClass:"pat-checkbox",attrs:{label:n.name},on:{change:function(t){return e.closeDetails(n)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"prg.checked"}})],1),t("div",[t(Ni["a"],{staticClass:"att-section",attrs:{height:"100px",label:e.$t("patient.attend"),"background-color":"white",outlined:"","no-resize":""},model:{value:e.attending,callback:function(t){e.attending=t},expression:"attending"}})],1),t("div",{staticClass:"d-flex"},[t(ee["a"],{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,"return-value":e.formattedDate,transition:"scale-transition","offset-y":"","min-width":"217px"},on:{"update:returnValue":function(t){e.formattedDate=t},"update:return-value":function(t){e.formattedDate=t}},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t(de["a"],e._g({staticClass:"date-picker",attrs:{label:e.$t("patient.best_date"),height:"37px","background-color":"white",readonly:"",outlined:""},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},n),[t("template",{slot:"prepend-inner"},[t(le["a"],{staticClass:"logo-date mr-2",attrs:{src:a("c95f")}})],1)],2)]}}],null,!0),model:{value:e.due,callback:function(t){e.due=t},expression:"due"}},[t(yt["a"],{attrs:{min:e.today,width:"255px","no-title":"",scrollable:""},model:{value:e.selected_date,callback:function(t){e.selected_date=t},expression:"selected_date"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.due=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueDate(i)}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1),t("div",[t(ee["a"],{ref:"menu2",refInFor:!0,attrs:{"close-on-content-click":!1,"return-value":e.selected_hour,transition:"scale-transition","min-width":"217px"},on:{"update:returnValue":function(t){e.selected_hour=t},"update:return-value":function(t){e.selected_hour=t}},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t(de["a"],e._g({staticClass:"hour-picker",attrs:{label:e.$t("patient.best_hour"),height:"37px","background-color":"white",readonly:"",outlined:""},model:{value:e.selected_hour,callback:function(t){e.selected_hour=t},expression:"selected_hour"}},n),[t("template",{slot:"prepend-inner"},[t(le["a"],{staticClass:"logo-hour mr-2",attrs:{src:a("e0f8")}})],1)],2)]}}],null,!0),model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},[t(Go["a"],{attrs:{width:"255px","ampm-in-title":"",scrollable:""},model:{value:e.selected_hour,callback:function(t){e.selected_hour=t},expression:"selected_hour"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.time=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueHour(i)}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1)],1),t("div",[t(de["a"],{staticClass:"observations",attrs:{label:e.$t("patient.observations"),height:"37px","background-color":"white",outlined:""},model:{value:e.program.hourObservations,callback:function(t){e.$set(e.program,"hourObservations",t)},expression:"program.hourObservations"}})],1)],1),t("div",{staticClass:"text-center"},[t(r["a"],{staticClass:"save-program",attrs:{color:"primary"},on:{click:function(t){return t.preventDefault(),e.saveProgramDetail()}}},[t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("patient.save2")))])]),t(r["a"],{staticClass:"save-program mt-4",attrs:{color:"primary",outlined:""},on:{click:function(t){return t.preventDefault(),e.closeDetails(e.programArray[0])}}},[t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("patient.back")))])])],1)])})),0)]):e._e()},rO=[],lO={props:["programs"],data(){return{visible:!1,checked:!1,selected_date:null,selected_hour:null,due:null,today:this.$moment().format("YYYY-MM-DD"),time:null,hourObservations:"",observations:"",program:null,programArray:[],attending:"",formattedDate:""}},created(){this.$bus.on("open-program-details",e=>{this.program=e,this.programArray.push(this.program),this.visible=!0})},beforeDestroy(){this.$bus.off("program-details")},methods:{saveDueDate(e){this.formatDueDate(),this.$refs.menu[e].save(this.formattedDate)},saveDueHour(e){this.$refs.menu2[e].save(this.selected_hour)},closeDetails(e){e.checked=!1;let t=this.programArray.indexOf(e);this.programArray.splice(t,1),this.attending="",this.observations="",this.hourObservations="",this.selected_date="",this.selected_hour="",this.$bus.emit("close-program-details",e)},saveProgramDetail(){},formatDueDate(){if(this.selected_date){const[e,t,a]=this.selected_date.split("-");return this.formattedDate=`${a}-${t}-${e}`,this.formattedDate}}}},cO=lO,dO=(a("5f56"),Object(I["a"])(cO,oO,rO,!1,null,null,null)),mO=dO.exports,uO={components:{DoctorProgramDetails:mO},props:["programList"],data(){return{selected:!1,programArray:[],checked:[]}},created(){this.programArray=this.programList,this.$bus.on("close-program-details",e=>{let t=this.programList.indexOf(e);-1==t&&(this.programList.push(e),e.checked=!1,this.checked=[],this.selected=!1),this.programList.sort((e,t)=>e.id-t.id)}),this.programList.forEach(e=>{e.checked=!1})},methods:{displayDetails(e){e.checked=!0;let t=this.programList.indexOf(e);this.programList.splice(t,1),this.selected=!0,this.checked=[],this.$bus.emit("open-program-details",e)}}},AO=uO,_O=(a("58c2"),Object(I["a"])(AO,iO,sO,!1,null,null,null)),EO=_O.exports,IO=function(){var e=this,t=e._self._c;return t("div",{staticClass:"conclude-component"},[t(r["a"],{staticClass:"conclude-btn mt-10",attrs:{color:"blue",width:"100%",outlined:"",block:""},on:{click:function(t){return e.concludeAttendance()}}},[t(at["a"],{attrs:{size:"18",color:"blue"}},[e._v("warning")]),"PROGRAM"==e.saveType?t("span",{staticClass:"conclude-text"},[e._v("\n      "+e._s(e.$t("attendance.conclude_attendance"))+"\n    ")]):e._e()],1),t("ConcludeAttendanceModal",{attrs:{inAttendance:"true",saveType:e.saveType}})],1)},hO=[],OO=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cancel-attend"},[t(d["a"],{attrs:{"max-width":"636px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"cancel-mod-section"},[t(l["a"],{staticClass:"c-cancel-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v("\n            "+e._s(e.$t("attendance.conclude_attendance"))+"\n          ")]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),t(c["b"],{staticClass:"card-desc text-center mb-n2",class:{"disabled-layer":!1}},[e._v("\n          "+e._s(e.$t("attendance.conclude_attendance_modal_text"))+"\n        ")]),t(c["a"],{staticClass:"int-button"},[t(r["a"],{staticClass:"canc-bt mr-2",attrs:{color:"primary",height:"37px",width:"247px",outlined:""},on:{click:e.close}},[e._v("\n            "+e._s(e.$t("attendance.cancel_back"))+"\n          ")]),t(r["a"],{staticClass:"canc-bt white--text",attrs:{loading:e.loading,disabled:e.loading,color:"primary",height:"37px",width:"247px"},on:{click:e.concludeAttendance}},[e._v("\n            "+e._s(e.$t("attendance.conclude_attendance_modal_btn_confirm"))+"\n          ")])],1)],1)],1)])],1)},pO=[],SO={components:{},props:["inAttendance","saveType"],mixins:[ve],data(){return{dialog:!1,loading:!1}},created(){this.$bus.on("open-tabs-conclude-attendance-modal",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-tabs-conclude-attendance-modal")},methods:{close(){this.dialog=!1},concludeAttendance(){if(this.loading)return;this.loading=!0,this.$bus.emit("request-save-data");let e=this.prepareSavePayload(),t=e.bricks&&JSON.parse(e.bricks);if(t&&Object.values(t).find(e=>!e.isValid))return this.$bus.emit("open-snackbar",{message:"attendance_form_is_invalid"}),this.loading=!1,void this.close();this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ADD,e).then(e=>{Ge.changeStatus({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDED,finish_case:!0}).then(()=>{this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),this.$bus.emit("open-snackbar",{message:"attendance_finish"}),this.loading=!1,this.close()}).catch(e=>{console.error(e)})}).catch(e=>{console.error(e),this.$bus.emit("open-snackbar",{message:"attendance_save_error"})}).finally(()=>{this.loading=!1,this.close()})},prepareSavePayload(){let e="[]";this.$store.state.Data.Bricks.AttendanceBricks.bricks&&(e=JSON.stringify(this.$store.state.Data.Bricks.AttendanceBricks.bricks));let t={token:this.$store.state.Data.User.token,patient_id:this.$store.state.Data.CaseAttendance.info.patient_info.id,user_id:this.$store.state.Data.User.info.user_info.id,case_id:this.$store.state.Data.CaseAttendance.info.case_id,program_id:this.$store.state.Data.CaseAttendance.info.program_information[0].id,program_step:null!=this.$store.state.Data.CaseAttendance.info.program_step?this.$store.state.Data.CaseAttendance.info.program_step:1,due_date:Number.isInteger(this.$store.state.Data.CaseAttendance.info.due_date)?this.$moment(this.$store.state.Data.CaseAttendance.info.due_date).format("YYYY-MM-DD"):this.$store.state.Data.CaseAttendance.info.due_date,due_time:Number.isInteger(this.$store.state.Data.CaseAttendance.info.due_time)?this.$moment(this.$store.state.Data.CaseAttendance.info.due_time).format("HH:mm:ss"):this.$store.state.Data.CaseAttendance.info.due_time,bricks:e,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id};return t}}},CO=SO,TO=(a("578c"),Object(I["a"])(CO,OO,pO,!1,null,null,null)),RO=TO.exports,DO={components:{ConcludeAttendanceModal:RO},props:["saveType"],data(){return{can_conclude:!0}},created(){this.$bus.on("enable-save-cancel",()=>{this.can_conclude=!0}),this.$bus.on("disable-save-cancel",()=>{this.can_conclude=!1})},beforeDestroy(){this.$bus.off("enable-save-cancel"),this.$bus.off("disable-save-cancel")},methods:{concludeAttendance(){this.$bus.emit("open-tabs-conclude-attendance-modal")}}},gO=DO,LO=(a("40c4"),Object(I["a"])(gO,IO,hO,!1,null,"7ebe4593",null)),fO=LO.exports,NO=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cancel-attend"},[t(d["a"],{attrs:{"max-width":"636px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"exam-section"},[t(l["a"],{staticClass:"c-cancel-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("attendance.no_success_reason")))]),e.loading?t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}}):e._e()]),t(c["b"],{staticClass:"card-desc text-justify mb-n2"},[e._v(e._s(e.$t("attendance.no_success_label")))]),t("div",{staticClass:"textarea-section mb-n3"},[t(Ni["a"],{staticClass:"cancel-text",attrs:{height:"94px",label:e.$t("attendance.no_success_reason"),outlined:"","no-resize":""},model:{value:e.no_success_reason,callback:function(t){e.no_success_reason=t},expression:"no_success_reason"}})],1),t(c["a"],{staticClass:"int-button"},[t(r["a"],{staticClass:"canc-bt mr-2",attrs:{color:"primary",height:"37px",width:"247px",disbled:e.loading,outlined:""},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.cancel")))]),t(r["a"],{staticClass:"canc-bt white--text",attrs:{color:"primary",disabled:e.disableCancel||e.loading,height:"37px",width:"247px"},on:{click:function(t){return e.notSuccessAttendance()}}},[e._v(e._s(e.$t("attendance.ended")))])],1)],1)],1)])],1)},kO=[],vO={components:{},data(){return{dialog:!1,no_success_reason:"",loading:!1}},created(){this.$bus.on("open-no-success-attendance-modal",()=>{this.dialog=!0})},beforeDestroy(){},methods:{close(){this.dialog=!1},notSuccessAttendance(){this.loading=!0,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.NOT_SUCCESS,{case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,reason:this.no_success_reason}).then(()=>{this.dialog=!1,this.$bus.emit("restart-queue-update"),this.$bus.emit("close-temp-data-tab"),this.$store.dispatch(this.$consts.QUEUE_ACTIONS.CLEAR_INCOMING_QUEUE)}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})}},computed:{disableCancel(){return!(this.no_success_reason.length>3)}}},bO=vO,MO=(a("0e7d"),Object(I["a"])(bO,NO,kO,!1,null,null,null)),PO=MO.exports,UO=function(){var e=this,t=e._self._c;return t(mI["a"],{attrs:{timeout:e.timeout,top:!0,color:"primary"},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[e.canRetry&&"retry"===e.action?t(r["a"],e._b({staticClass:"mr-2",attrs:{color:"green",text:""},on:{click:e.retryAction}},"v-btn",a,!1),[e._v("\n      Tentar Novamente\n    ")]):e._e(),t(r["a"],e._b({attrs:{color:"red",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",a,!1),[e._v("\n      "+e._s(e.$t("snackbar.close"))+"\n    ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n  "+e._s(e.$t("snackbar."+e.message))+"\n  ")])},yO=[],$O={data:()=>({multiLine:!0,snackbar:!1,message:"",timeout:3e3,canRetry:!1,action:null,origin:null}),created(){this.$bus.on("open-snackbar",e=>{console.log("Snackbar data received:",e),this.snackbar=!1,this.message=e.message,this.canRetry=e.canRetry||!1,this.action=e.action||null,this.origin=e.origin||null,e.timeout?this.timeout=e.timeout:this.timeout=this.canRetry?8e3:3e3,this.$nextTick(()=>{this.snackbar=!0})})},destroyed(){this.$bus.off("open-snackbar")},methods:{retryAction(){this.snackbar=!1,"start_attendance"===this.origin&&this.$bus.emit("retry-start-attendance")}}},xO=$O,VO=Object(I["a"])(xO,UO,yO,!1,null,"0635fa22",null),GO=VO.exports,FO=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"50vw"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"attempt-modal-section"},[t(l["a"],{staticClass:"cert-card-section"},[t(c["c"],{staticClass:"cert-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("attendance.finish_attempt")))]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})]),t("div",{staticClass:"flex-container"},[t(Ni["a"],{staticClass:"textarea-data",attrs:{height:"100px",label:e.$t("patient.observations"),outlined:"","no-resize":""},model:{value:e.observation,callback:function(t){e.observation=t},expression:"observation"}})],1),t(c["a"],{staticClass:"buttons mt-n4"},[t(r["a"],{staticClass:"primary--text ml-n2 mr-3",attrs:{color:"white",height:"37px",width:"232px",disabled:e.loading,outlined:""},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("patient.cancel")))]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",disabled:e.disabled,width:"232px",loading:e.loading},on:{click:e.save}},[e._v(e._s(e.$t("patient.continue_save")))])],1)],1)],1)])],1)},BO=[],wO={mixins:[p],data(){return{dialog:!1,loading:!1,observation:""}},created(){this.$bus.on("open-attempt-modal",()=>{this.observation="",this.loading=!1,this.dialog=!0})},beforeDestroy(){this.$bus.off("open-attempt-modal")},methods:{close(){this.dialog=!1},nextCase(){console.log("[ATTEMPT MODAL] Buscando pr
rio de PG",start_date:"2019-12-12",end_date:"2019-12-12"}],isVisible:!1,start_date:(new Date).toString().substr(0,10),end_date:(new Date).toString().substr(0,10),menu1:!1,menu2:!1}},methods:{generateReport(){this.isVisible=!this.isVisible}}},SR=pR,CR=(a("8a9c"),Object(I["a"])(SR,hR,OR,!1,null,null,null)),TR=CR.exports,RR=function(){var e=this,t=e._self._c;return t("div",{staticClass:"controls-page mt-10"},["Gerente de agendas"!==e.user_role&&e.operationAccess?t("div",{staticClass:"table-container"},[t("div",{staticClass:"title"},[t("div",{staticClass:"control-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.access")))]),e._v(" "+e._s(e.$t("controls.operation"))+"\n            ")]),t("div",{staticClass:"combo"},[t(de["a"],{staticClass:"search-field",attrs:{heigth:"26px",placeholder:e.$t("controls.search"),outlined:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchOperational()}},model:{value:e.user_operational,callback:function(t){e.user_operational=t},expression:"user_operational"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"30px",width:"45px",color:"primary",tile:"",depressed:"",loading:e.loading},on:{click:function(t){return e.searchOperational()}}},[t(at["a"],{attrs:{color:"white",size:"20"}},[e._v("search")])],1)],1)]),t("TableOp")],1):e._e(),"Gerente de agendas"!==e.user_role&&e.medicalAccess?t("div",{staticClass:"table-container"},[t("div",{staticClass:"title"},[t("div",{staticClass:"control-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.access")))]),e._v(" "+e._s(e.$t("controls.medical"))+"\n            ")]),t("div",{staticClass:"combo"},[t(de["a"],{staticClass:"search-field",attrs:{"max-width":"150px",height:"26px",placeholder:e.$t("controls.search"),outlined:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMedical()}},model:{value:e.user_doctor,callback:function(t){e.user_doctor=t},expression:"user_doctor"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"30px",width:"45px",color:"primary",tile:"",depressed:"",loading:e.loading2},on:{click:function(t){return e.searchMedical()}}},[t(at["a"],{attrs:{color:"white",size:"20"}},[e._v("search")])],1)],1)]),t("TableDoctor")],1):e._e(),e._e(),e.externalAgentAccess?t("ScheduleExternalAgentList"):e._e()],1)},DR=[],gR=function(){var e=this,t=e._self._c;return t("div",[t($a["a"],{staticClass:"table mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-center",attrs:{width:"280"}},[e._v(e._s(e.$t("controls.name")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.department")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.leader")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.status")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.role")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.action")))])])]),e.loading?e._e():t("tbody",e._l(e.users,(function(a,n){return t("tr",{key:n},[t("td",[e._v(e._s(a.name))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.user_department))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.leader_name||"-"))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.user_status))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.user_role))]),t("td",{staticClass:"text-center"},[e.canEdit?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.editUser(a)}}},[t("span",{staticClass:"edit-op"},[e._v(e._s(e.$t("controls.edit")))])]):e._e()],1)])})),0)]},proxy:!0}])}),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):e._e(),e.totalPages>0&&!e.loading?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.prevPage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e(),t("div",{staticClass:"mb-10 mt-4"},[e.canCreate?t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",width:"282px",outlined:""},on:{click:function(t){return e.addNewOpAccess()}}},[t("span",{staticClass:"font-btn"},[e._v(e._s(e.$t("controls.add_op_btn")))])]):e._e()],1)],1)},LR=[],fR={mixins:[ve],data(){return{isVisible:!1,item:"operation",users:[],limit:10,offset:0,total:0,canEdit:!1,canCreate:!1,pagination:{pages:0,currentPage:1},loading:!1,data:null}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.operationUsers.update","manage.generalOperationUsers.update","manage.internalOperationUsers.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.operationUsers.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listUsers(),this.$bus.on("update-successful",()=>{this.$forceUpdate(),this.listUsers()}),this.$bus.on("operational-results",e=>{this.users=e.user_list,this.total=e.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}),this.$bus.on("user-created",()=>{this.listUsers()}),this.updateTable},beforeDestroy(){this.$bus.off("operational-results"),this.$bus.off("user-created"),this.listUsers()},methods:{addNewOpAccess(){this.$bus.emit("new-operational",this.item)},editUser(e){this.$bus.emit("edit-operational",e)},listUsers(){this.loading=!0;let e={user_type:"OPERATIONAL",limit:this.limit,offset:this.offset};be.listUsers(e).then(e=>{this.users=e.data.user_list,this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getPage(e){let t=1==e?this.offset:(e-1)*this.limit,a={limit:this.limit,offset:t,user_type:"OPERATIONAL"};be.listUsers(a).then(t=>{this.users=t.data.user_list,this.pagination.currentPage=e,this.total=t.data.total,this.pagination.pages=this.totalPages}).catch(e=>{console.error(e)})},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total},updateTable(){return this.listUsers()}}},NR=fR,kR=(a("6e53"),Object(I["a"])(NR,gR,LR,!1,null,null,null)),vR=kR.exports,bR=function(){var e=this,t=e._self._c;return t("div",[t($a["a"],{staticClass:"table mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-center",attrs:{width:"280"}},[e._v(e._s(e.$t("controls.name")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.department")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.status")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.role")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.action")))])])]),e.loading?e._e():t("tbody",e._l(e.users,(function(a,n){return t("tr",{key:n},[t("td",[e._v(e._s(a.name))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.user_department))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.user_status))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.user_role))]),t("td",{staticClass:"text-center"},[e.canEdit?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.editUser(a)}}},[t("span",{staticClass:"edit-user"},[e._v(e._s(e.$t("controls.edit")))])]):e._e()],1)])})),0)]},proxy:!0}])}),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{staticClass:"test",attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):e._e(),e.totalPages>0&&!e.loading?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.prevPage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e(),t("div",{staticClass:"mb-10 mt-4"},[e.canCreate?t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",width:"282px",outlined:""},on:{click:function(t){return e.addNewDocAccess()}}},[t("span",{staticClass:"btn-add"},[e._v(e._s(e.$t("controls.add_doc_btn")))])]):e._e()],1)],1)},MR=[],PR={mixins:[ve],data(){return{isVisible:!1,item:"doctor",users:[],limit:10,offset:0,total:0,canEdit:!1,canCreate:!1,pagination:{pages:0,currentPage:1},loading:!1}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.medicalUsers.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.medicalUsers.create","manage.generalMedicalUsers.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listUsers(),this.$bus.on("medical-results",e=>{this.users=e.user_list,this.total=e.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}),this.$bus.on("user-created",()=>{this.listUsers()}),this.$bus.on("update-successful",()=>{this.$forceUpdate(),this.listUsers()}),this.updateTable},beforeDestroy(){this.$bus.off("medical-results"),this.$bus.off("user-created"),this.updateTable},methods:{addNewDocAccess(){this.$bus.emit("new-doc-access",this.item)},listUsers(){this.loading=!0;let e={user_type:["MEDICAL","EXTERNAL_MEDICAL"].join(),limit:this.limit,offset:this.offset};be.listUsers(e).then(e=>{this.users=e.data.user_list,this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},editUser(e){this.$bus.emit("edit-operational",e)},getPage(e){let t=1==e?this.offset:(e-1)*this.limit,a={limit:this.limit,offset:t,user_type:["MEDICAL","EXTERNAL_MEDICAL"].join()};be.listUsers(a).then(t=>{this.users=t.data.user_list,this.pagination.currentPage=e,this.total=t.data.total,this.pagination.pages=this.totalPages}).catch(e=>{console.error(e)})},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)},accessItem(e){this.$bus.emit("edit-call-list",e)}},computed:{totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total},updateTable(){return this.listUsers()}}},UR=PR,yR=(a("e464"),Object(I["a"])(UR,bR,MR,!1,null,"fcaf33de",null)),$R=yR.exports,xR=function(){var e=this,t=e._self._c;return t("div",[t($a["a"],{staticClass:"table mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-center",attrs:{width:"280"}},[e._v(e._s(e.$t("controls.name")))]),t("th",{staticClass:"text-center",attrs:{width:"280"}},[e._v(e._s(e.$t("controls.location")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.status")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.role")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("controls.action")))])])]),t("tbody",e._l(e.users,(function(a,n){return t("tr",{key:n,class:a.is_colored?"colored":"normal"},[t("td",[e._v(e._s(a.name))]),t("td",[e._v(e._s(a.user_department_id))]),t("td",[e._v(e._s(a.user_status))]),t("td",[e._v(e._s(a.user_role_id))]),t("td",{staticClass:"text-center"},[t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"30px",color:"primary"},on:{click:function(t){return e.editUser(a)}}},[t("span",{staticClass:"btn-add-op"},[e._v(e._s(e.$t("controls.edit")))])])],1)])})),0)]},proxy:!0}])}),t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.prevPage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}),t("div",{staticClass:"mb-10 mt-4"},[t(r["a"],{attrs:{color:"#00B5E2","max-width":"282px",outlined:""},on:{click:function(t){return e.addNewExtAccess()}}},[t("span",{staticClass:"btn-add-op"},[e._v(e._s(e.$t("controls.add_ext_btn")))])])],1)],1)},VR=[],GR={data(){return{isVisible:!1,item:"external",users:[],limit:10,offset:0,total:0,pagination:{pages:0,currentPage:1}}},created(){this.listUsers()},methods:{addNewExtAccess(){this.$bus.emit("new-ext-access",this.item)},listUsers(){let e={user_type:"EXTERNAL"};be.listUsers(e).then(e=>{this.users=e.data.user_list,this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}).catch(e=>{console.error(e)})},editUser(e){this.$bus.emit("edit-operational",e)},getPage(e){let t=1==e?this.offset:(e-1)*this.limit,a={limit:this.limit,offset:t,user_type:"EXTERNAL"};be.listUsers(a).then(t=>{this.users=t.data.user_list,this.pagination.currentPage=e,this.total=t.data.total,this.pagination.pages=this.totalPages}).catch(e=>{console.error(e)})},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total}}},FR=GR,BR=(a("533e"),Object(I["a"])(FR,xR,VR,!1,null,"c8c198de",null)),wR=BR.exports,HR=function(){var e=this,t=e._self._c;return t("div",{staticClass:"schedule-external-agent-lists-tb"},[t("div",{staticClass:"d-flex justify-space-between mb-8"},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.access")))]),e._v(" "+e._s(e.$t("controls.schedule_external_agent"))+"\n        ")]),e.loading?e._e():t("div",{staticClass:"search"},[t(de["a"],{staticClass:"search-field",attrs:{height:"26px",placeholder:e.$t("controls.search"),"error-messages":e.searchListErrors,outlined:""},on:{blur:e.$v.searchParam.$touch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList.apply(null,arguments)}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"30px",width:"45px",color:"primary",tile:"",depresse:"",disabled:e.$v.searchParam.$invalid},on:{click:e.searchList}},[t(at["a"],{attrs:{color:"white",size:"20"}},[e._v("search")])],1)],1)]),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.items,page:e.pagination.currentPage,"items-per-page":e.limit,"no-data-text":e.$t("controls.noDataAvailable"),"hide-default-footer":""},on:{"update:page":function(t){return e.$set(e.pagination,"currentPage",t)}},scopedSlots:e._u([{key:"item.name",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(a.name))])]}},{key:"item.cpf",fn:function({item:e}){return[t("td",{staticClass:"text-center"},[t("the-mask",{attrs:{mask:["###.###.###-##"],value:e.cpf}})],1)]}},{key:"item.phone",fn:function({item:e}){return[t("td",{staticClass:"text-center"},[t("the-mask",{attrs:{mask:["+## (##) ####-####","+## (##) #####-####"],value:e.phone}})],1)]}},{key:"item.address",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(`${a.cep} - ${a.address} ${a.number}`))])]}},{key:"item.status",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(e.$t("status."+a.user_status.toLowerCase())))])]}},{key:"item.actions",fn:function({item:a}){return[e.canEdit?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.editScheduleExternalAgent(a)}}},[t("span",{staticClass:"action-button"},[e._v(e._s(e.$t("controls.edit")))])]):e._e()]}}])}),e.pagination.pageCount>1?t(_t["a"],{staticClass:"pagination",attrs:{"total-visible":e.limit,length:e.pagination.pageCount},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),t("div",{staticClass:"mb-10 mt-4"},[e.canCreate?t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",width:"282px",outlined:""},on:{click:function(t){return e.addScheduleExternalAgent()}}},[t("div",{staticClass:"btn-tx"},[t("span",{staticClass:"action-button"},[e._v(e._s(e.$t("controls.add_schedule_external_agent")))])])]):e._e()],1)])},qR=[],YR={listUserAgents(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.SCHEDULE_EXTERNAL_AGENT.LIST,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getUserAgent(e){return new Promise((t,a)=>{let n={user_id:e};C.a.post(R.ENDPOINTS.SCHEDULE_EXTERNAL_AGENT.GET,n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},createUserAgent(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.SCHEDULE_EXTERNAL_AGENT.CREATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},updateUserAgent(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.SCHEDULE_EXTERNAL_AGENT.UPDATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getUserAgentRoles(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.SCHEDULE_EXTERNAL_AGENT.ROLES,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>t(e.response.data.error.message||e.response.data.error.code))})}},jR={mixins:[ve],data(){return{loading:!1,searchParam:"",items:[],limit:10,offset:0,canEdit:!1,canCreate:!1,headers:[{text:this.$t("controls.name"),align:"start",value:"name"},{text:this.$t("controls.cpf"),align:"start",value:"cpf"},{text:this.$t("controls.phone"),align:"start",value:"phone"},{text:this.$t("controls.role"),align:"start",value:"user_role_name"},{text:this.$t("controls.status"),align:"start",value:"status"},{text:this.$t("controls.action"),align:"center",value:"actions",sortable:!1}],pagination:{pageCount:0,currentPage:1}}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.medicalUsers.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.medicalUsers.create","manage.generalMedicalUsers.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listScheduleExternalAgents(),this.$bus.on("empty-schedule-external-agent-search",()=>{this.listScheduleExternalAgents()}),this.$bus.on("update-schedule-external-agent-list",()=>{this.listScheduleExternalAgents()})},methods:{searchList(){if(this.offset=0,!this.searchParam)return this.listScheduleExternalAgents();this.loading=!0;let e={name:this.searchParam,limit:this.limit,offset:this.offset};YR.listUserAgents(e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.items=e.data.users_info}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},listScheduleExternalAgents(){this.loading=!0;let e={limit:this.limit,offset:this.offset};YR.listUserAgents(e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.items=e.data.users_info}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getPage(e){let t={limit:this.limit,offset:1==e?this.offset:(e-1)*this.limit};YR.listUserAgents(t).then(t=>{let a=t.data.total/this.limit;this.pagination.pageCount=a%this.limit==0?a:parseInt(a)+1,this.pagination.currentPage=e,this.items=t.data.users_info}).catch(e=>{console.error(e)})},addScheduleExternalAgent(){this.$bus.emit("new-schedule-external-agent","newScheduleExternalAgent")},editScheduleExternalAgent(e){this.$bus.emit("edit-schedule-external-agent",e)},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{searchListErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},KR=jR,ZR=(a("24dd"),Object(I["a"])(KR,HR,qR,!1,null,null,null)),QR=ZR.exports,JR={components:{TableOp:vR,TableDoctor:$R,TableExternal:wR,ScheduleExternalAgentList:QR},mixins:[ve],data(){return{isVisible:!1,user_operational:"",user_doctor:"",loading:!1,loading2:!1,user_type:"",user_role:this.$store.state.Data.User.info.role_info.role,operationAccess:!1,medicalAccess:!1,externalAgentAccess:!1}},created(){this.operationAccess=this.checkAccessesControlFuncionality(["manage.operationUsers.list","manage.operationUsers.get","manage.operationUsers.create","manage.operationUsers.update","manage.generalOperationUsers.update","manage.internalOperationUsers.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.medicalAccess=this.checkAccessesControlFuncionality(["manage.medicalUsers.list","manage.medicalUsers.get","manage.medicalUsers.create","manage.medicalUsers.update","manage.generalMedicalUsers.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.externalAgentAccess=this.checkAccessesControlFuncionality(["manage.externalScheduleUsers.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)},methods:{searchOperational(){this.loading=!0,this.user_type=["OPERATIONAL"];let e={name:this.user_operational,user_type:this.user_type};this.searchUsers(e)},searchMedical(){this.loading2=!0,this.user_type=["MEDICAL","EXTERNAL_MEDICAL"];let e={name:this.user_doctor,user_type:this.user_type};this.searchUsers(e)},searchUsers(e){let t={token:this.$store.state.Data.User.token,name:e.name,user_type:e.user_type,limit:10,offset:0};this.$store.dispatch(this.$consts.USER_ACTIONS.SEARCH_USERS,t).then(e=>{this.loading=!1,this.loading2=!1,(this.user_type.includes("MEDICAL")||this.user_type.includes("EXTERNAL_MEDICAL"))&&this.$bus.emit("medical-results",e.data),this.user_type.includes("OPERATIONAL")&&this.$bus.emit("operational-results",e.data)}).catch(e=>{this.loading=!1,this.loading2=!1})}}},WR=JR,XR=(a("a6d7"),Object(I["a"])(WR,RR,DR,!1,null,null,null)),zR=XR.exports,eD=function(){var e=this,t=e._self._c;return t("div",{staticClass:"other-controls mt-8"},["Gerente de agendas"!==e.user_role&&e.canAccessCallReasonsList?t("MyLists"):e._e(),e.canAccessAttendanceCenters?t("AttendanceCenterList"):e._e(),"Gerente de agendas"!==e.user_role&&e.canAccessCompanies?t("Company"):e._e(),"Gerente de agendas"!==e.user_role&&e.canAccessPayers?t("Payer"):e._e(),"Gerente de agendas"!==e.user_role&&e.canAccessCallReasons?t("Lists"):e._e()],1)},tD=[],aD=function(){var e=this;e._self._c;return e._e()},nD=[],iD={mixins:[ve],data(){return{loading:!1,searchParam:"",item:"callList",canEdit:!1,canCreate:!1,callList:[],total:null,offset:0,limit:10,headers:[{text:this.$t("controls.name"),align:"start",value:"name"},{text:this.$t("controls.client"),align:"start",value:"company_name"},{text:this.$t("controls.created_at"),align:"start",value:"created_at"},{text:this.$t("controls.action"),align:"center",value:"actions",sortable:!1}],pagination:{pageCount:0,currentPage:1}}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.internalCallReasons.update","manage.callReasons.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.internalCallReasons.create","manage.callReasons.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listCallList(),this.$bus.on("updated-call-list",e=>{this.callList=e}),this.$bus.on("updated-call-list-save",e=>{this.callList=e}),this.$bus.on("success",()=>{this.listCallList()}),this.$bus.emit("update-done",()=>{this.listCallList()}),this.$bus.on("update-list",()=>{this.listCallList()}),this.$bus.on("confirm-close-call-list",()=>{this.listCallList()})},beforeDestroy(){this.$bus.off("updated-call-list"),this.$bus.off("updated-call-list-save"),this.$bus.off("success"),this.$bus.off("update-done")},methods:{searchList(){if(this.offset=0,!this.searchParam)return this.listCallList();this.loading=!0;let e={token:this.$store.state.Data.User.token,search:this.searchParam,limit:this.limit,offset:this.offset,redux:!1};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_CALL_LIST,e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.callList=e.data.reason_list}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},listCallList(){this.loading=!0;let e={token:this.$store.state.Data.User.token,limit:this.limit,offset:this.offset};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_CALL_LIST,e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.callList=e.data.reason_list}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getPage(e){let t=this.$store.state.Data.User.token,a=1==e?this.offset:(e-1)*this.limit,n={token:t,limit:this.limit,offset:a};this.$store.dispatch(this.$consts.USER_ACTIONS.LIST_CALL_LIST,n).then(t=>{let a=t.data.total/this.limit;this.pagination.pageCount=a%this.limit==0?a:parseInt(a)+1,this.pagination.currentPage=e,this.callList=t.data.reason_list}).catch(e=>{console.error(e)})},addNewList(){this.$bus.emit("new-call-list",this.item)},accessItem(e){this.$bus.emit("edit-call-list",e)},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total},searchListErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},filters:{formatDate:function(e){let t=e.substr(8,2),a=e.substr(5,2),n=e.substr(0,4);return`${t}/${a}/${n}`}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},sD=iD,oD=(a("5711"),Object(I["a"])(sD,aD,nD,!1,null,null,null)),rD=oD.exports,lD=function(){var e=this,t=e._self._c;return t("div",{staticClass:"attendance-center-lists-tb"},[t("div",{staticClass:"d-flex justify-space-between mb-8"},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.lists")))]),e._v(" "+e._s(e.$t("controls.attendance_center_lists"))+"\n        ")]),e.loading?e._e():t("div",{staticClass:"search"},[t(de["a"],{staticClass:"search-field",attrs:{height:"26px",placeholder:e.$t("controls.search"),"error-messages":e.searchListErrors,outlined:""},on:{blur:e.$v.searchParam.$touch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList.apply(null,arguments)}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"30px",width:"45px",color:"primary",tile:"",depresse:"",disabled:e.$v.searchParam.$invalid},on:{click:e.searchList}},[t(at["a"],{attrs:{color:"white",size:"20"}},[e._v("search")])],1)],1)]),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.items,page:e.pagination.currentPage,"items-per-page":e.limit,"no-data-text":e.$t("controls.noDataAvailable"),"hide-default-footer":""},on:{"update:page":function(t){return e.$set(e.pagination,"currentPage",t)}},scopedSlots:e._u([{key:"item.contact_phone",fn:function({item:e}){return[t("td",{staticClass:"text-center"},[t("the-mask",{attrs:{mask:["+## (##) ####-####","+## (##) #####-####"],value:e.contact_phone}})],1)]}},{key:"item.address",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(`${a.cep} - ${a.address} ${a.number}`))])]}},{key:"item.status",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[e._v(e._s(e.$t("status."+a.status)))])]}},{key:"item.actions",fn:function({item:a}){return[e.canEdit?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.editAttendanceCenter(a)}}},[t("span",{staticClass:"action-button"},[e._v(e._s(e.$t("controls.edit")))])]):e._e()]}}])}),e.pagination.pageCount>1?t(_t["a"],{staticClass:"pagination",attrs:{"total-visible":e.limit,length:e.pagination.pageCount},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),t("div",{staticClass:"mb-10 mt-4"},[e.canCreate?t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",width:"282px",outlined:""},on:{click:function(t){return e.addAttendanceCenter()}}},[t("div",{staticClass:"btn-tx"},[t("span",{staticClass:"action-button"},[e._v(e._s(e.$t("controls.add_attendance_center")))])])]):e._e()],1)])},cD=[],dD={getAttendanceCenterInfo(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.ATTENDANCE_CENTER.GET,i={id:e};C.a.post(n,i,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getAttendanceCenters(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.ATTENDANCE_CENTER.LIST;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},upsertAttendanceCenters(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.ATTENDANCE_CENTER.UPSERT;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})}},mD={mixins:[ve],data(){return{loading:!1,searchParam:"",items:[],limit:10,offset:0,canCreate:!1,canEdit:!1,headers:[{text:this.$t("controls.name"),align:"start",value:"name"},{text:this.$t("controls.phone"),align:"start",value:"contact_phone"},{text:this.$t("controls.address"),align:"start",value:"address"},{text:this.$t("controls.status"),align:"start",value:"status"},{text:this.$t("controls.action"),align:"center",value:"actions",sortable:!1}],pagination:{pageCount:0,currentPage:1}}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.internalAttendanceCenters.update","manage.generalAttendanceCenters.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.internalAttendanceCenters.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listAttendanceCenter(),this.$bus.on("empty-attendance-center-search",()=>{this.listAttendanceCenter()}),this.$bus.on("update-attendance-center-list",()=>{this.listAttendanceCenter()})},methods:{searchList(){if(this.offset=0,!this.searchParam)return this.listAttendanceCenter();this.loading=!0;let e={search:this.searchParam,limit:this.limit,offset:this.offset};dD.getAttendanceCenters(e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.items=e.data.attendance_center}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},listAttendanceCenter(){this.loading=!0;let e={limit:this.limit,offset:this.offset};dD.getAttendanceCenters(e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.items=e.data.attendance_center}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},getPage(e){let t={limit:this.limit,offset:1==e?this.offset:(e-1)*this.limit};dD.getAttendanceCenters(t).then(t=>{let a=t.data.total/this.limit;this.pagination.pageCount=a%this.limit==0?a:parseInt(a)+1,this.pagination.currentPage=e,this.items=t.data.attendance_center}).catch(e=>{console.error(e)})},addAttendanceCenter(){this.$bus.emit("new-attendance-center","newAttendanceCenter")},editAttendanceCenter(e){this.$bus.emit("edit-attendance-center",e)},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.totalPages,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{searchListErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},validations:{searchParam:{minLength:Object(Ae["minLength"])(3)}}},uD=mD,AD=(a("c439"),Object(I["a"])(uD,lD,cD,!1,null,null,null)),_D=AD.exports,ED=function(){var e=this,t=e._self._c;return t("div",{staticClass:"company-tb"},[t("div",{staticClass:"d-flex justify-space-between mb-8"},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("controls.management")))]),e._v(" "+e._s(e.$t("controls.company2"))+"\n        ")]),e.loading?e._e():t("div",{staticClass:"search"},[t(de["a"],{staticClass:"search-field",attrs:{height:"26px",placeholder:e.$t("controls.search"),"error-messages":e.searchListErrors,outlined:""},on:{blur:e.$v.searchParam.$touch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList.apply(null,arguments)}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",attrs:{height:"30px",width:"45px",color:"primary",tile:"",depresse:"",disabled:e.$v.searchParam.$invalid},on:{click:e.searchList}},[t(at["a"],{attrs:{color:"white",size:"20"}},[e._v("search")])],1)],1)]),e.loading?t("div",{staticClass:"load"},[t(nt["a"],{attrs:{active:e.loading,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"table mb-2",attrs:{headers:e.headers,items:e.companies,page:e.pagination.currentPage,"items-per-page":e.limit,"no-data-text":e.$t("controls.noDataAvailable"),"hide-default-footer":""},on:{"update:page":function(t){return e.$set(e.pagination,"currentPage",t)}},scopedSlots:e._u([{key:"item.member_count",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[a.general_stats?t("span",[e._v("\n                        "+e._s(a.general_stats.member_count)+"\n                    ")]):e._e()])]}},{key:"item.last_updated",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[a.general_stats?t("span",[e._v("\n                        "+e._s(e._f("formatDate")(a.general_stats.last_updated))+"\n                    ")]):e._e()])]}},{key:"item.errors",fn:function({item:a}){return[t("td",{staticClass:"text-center"},[a.general_stats?t("span",{staticClass:"errors text-center"},[e._v("\n                        "+e._s(a.general_stats.member_count)+" "+e._s(e.$t("controls.inconsistencies"))+"\n                    ")]):e._e()])]}},{key:"item.actions",fn:function({item:a}){return[e.canEdit?t(r["a"],{staticClass:"white--text",attrs:{width:"78px",height:"26px",color:"primary"},on:{click:function(t){return e.editCompany(a)}}},[t("span",{staticClass:"add-company"},[e._v(e._s(e.$t("controls.edit")))])]):e._e()]}}])}),e.pagination.pageCount>1?t(_t["a"],{staticClass:"pagination",attrs:{"total-visible":e.limit,length:e.pagination.pageCount},on:{input:e.changePage,next:e.nextPage,previous:e.prevPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),t("div",{staticClass:"mb-10 mt-4"},[e.canCreate?t(r["a"],{staticClass:"t-btn",attrs:{color:"#00B5E2",width:"282px",outlined:""},on:{click:e.addCompany}},[t("div",{staticClass:"btn-tx"},[t("span",{staticClass:"add-company"},[e._v(e._s(e.$t("controls.add_company_btn")))])])]):e._e()],1)])},ID=[],hD={mixins:[ve],data(){return{loading:!1,searchParam:"",item:"company",companies:[],company_id:null,limit:10,offset:0,canEdit:!1,canCreate:!1,headers:[{text:this.$t("controls.company"),align:"start",value:"name"},{text:this.$t("controls.lives"),align:"start",value:"member_count"},{text:this.$t("controls.updated_at_base"),align:"start",value:"last_updated"},{text:this.$t("controls.errors"),align:"start",value:"errors"},{text:this.$t("controls.action"),align:"center",value:"actions",sortable:!1}],pagination:{pageCount:0,currentPage:1}}},created(){this.canEdit=this.checkAccessesControlFuncionality(["manage.companies.update","manage.internalCompanies.update"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.canCreate=this.checkAccessesControlFuncionality(["manage.companies.create"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.listCompany(),this.$bus.on("company-created",()=>{this.offset=0,this.listCompany()})},beforeDestroy(){this.$bus.off("company-created")},methods:{searchList(){if(this.offset=0,!this.searchParam)return this.listCompany();this.loading=!0;let e={name:this.searchParam,type:"COMPANY",limit:this.limit,offset:this.offset,redux:!1};be.memberSearch(e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.companies=e.data.company_list}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},listCompany(){this.loading=!0;let e={limit:this.limit,offset:this.offset,redux:!1};be.listCompany(e).then(e=>{let t=e.data.total/this.limit;this.pagination.pageCount=t%this.limit==0?t:parseInt(t)+1,this.pagination.currentPage=1,this.companies=e.data.company_list}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},addCompany(){this.$bus.emit("new-company",this.item),this.$bus.emit("no-edit")},editCompany(e){this.company_id=e,this.$bus.emit("edit-company",this.company_id)},getPage(e){let t=1==e?this.offset:(e-1)*this.limit,a={limit:this.limit,offset:t,redux:!1};be.listCompany(a).then(t=>{let a=t.data.total/this.limit;this.pagination.pageCount=a%this.limit==0?a:parseInt(a)+1,this.pagination.currentPage=e,this.companies=t.data.company_list}).catch(e=>{console.error(e)})},changePage(){this.getPage(this.pagination.currentPage)},prevPage(){1==this.pagination.currentPage||this.pagination.currentPage,this.getPage(this.pagination.currentPage)},nextPage(){this.pagination.currentPage,this.pagination.pageCount,this.pagination.currentPage,this.getPage(this.pagination.currentPage)}},computed:{searchListErrors(){const e=[];return this.$v.searchParam.$dirty?(!this.$v.searchParam.minLength&&e.push(this.$t("attendance.min_length")),e):e}},filters:{formatDate:function(e){if(e){let t=e.substr(8,2),a=e.substr(5,2),n=e.substr(0,4);return`${t}/${a}/${n}`}return"N
rio deve ser selecionado.")}}},Gl=Vl,Fl=(a("564b"),Object(I["a"])(Gl,$l,xl,!1,null,null,null)),Bl=Fl.exports,wl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"diagnosis"},[t("div",{staticClass:"diag-title"},[t("div",{staticClass:"diag-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.hypothesis")))]),e._v("\n      "+e._s(e.$t("attendance.diagnostic"))+"\n    ")])]),t("div",{staticClass:"mt-5"},[t(se["a"],{staticClass:"sign-input mb-n2",attrs:{"item-color":"primary",disabled:e.disabled,label:e.$t("attendance.signs_symptoms"),height:"37px",items:e.symptoms,"return-object":"","item-text":"name","item-value":"id","append-icon":"keyboard_arrow_down","error-messages":e.symptomErrors,outlined:""},on:{blur:function(t){return e.$v.selectedSymptom.$touch()},change:function(t){return e.getCidList()}},model:{value:e.selectedSymptom,callback:function(t){e.selectedSymptom=t},expression:"selectedSymptom"}}),t(se["a"],{staticClass:"sign-input",class:{"disabled-events":!e.selectedSymptom},attrs:{"item-color":"primary",label:e.$t("attendance.cid"),height:"37px",items:e.cidList,"return-object":"","item-text":"formattedName",disabled:e.disabled,"item-value":"id","append-icon":"keyboard_arrow_down",outlined:""},on:{change:e.selectCid},scopedSlots:e._u([{key:"selection",fn:function(a){return[t("span",{staticClass:"text-color"},[e._v(e._s(a.item.formattedName))])]}},{key:"item",fn:function(a){return[t("span",{staticClass:"primary--text"},[e._v(e._s(a.item.formattedName))])]}}]),model:{value:e.selectedCidId,callback:function(t){e.selectedCidId=t},expression:"selectedCidId"}}),t(se["a"],{staticClass:"sign-input mb-n2",class:{"disabled-events":!e.selectedCidId},attrs:{label:e.$t("attendance.ciap"),height:"37px",items:e.ciap2List,disabled:e.disabled,"return-object":"","item-text":"nameDisplay","item-value":"id","append-icon":"keyboard_arrow_down",outlined:""},model:{value:e.selectedCiap2,callback:function(t){e.selectedCiap2=t},expression:"selectedCiap2"}})],1)])},Hl=[],ql=a("7acb"),Yl=a("06df"),jl={props:["brickDetails"],data(){return{selectedSymptom:null,symptoms:[],rawCiap:ql,rawCid:Yl,disabled:!1,symptom_id:null,symptomInfo:null,groupCidList:[],selectedCidList:null,selectedGroupId:null,cidList:[],selectedCidId:null,ciap2List:[],selectedCiap2:null,formattedCidList:[],selectedCidName:"",name:"",isValid:!0,message:""}},created(){if(this.disabled=!1,(null!=this.$store.state.Data.Queue.incoming_queue&&"QUEUE"===this.$store.state.Data.Queue.incoming_queue.type||!0===this.$store.state.Data.CaseAttendance.history_mode)&&(this.disabled=!0),this.brickDetails&&this.brickDetails.emr_hipotese&&this.brickDetails.emr_hipotese.length>0){let e=this.brickDetails.emr_hipotese[0];this.brickDetails.emr_desfecho&&this.brickDetails.emr_desfecho.length>0&&this.brickDetails.emr_desfecho[0].schedule_return&&(this.disabled=!0),this.getSymptomList(),this.getCidList(),this.getCiap2List(),this.symptom_id=e.symptom.id,this.selectedSymptom=e.symptom,this.selectedCidList=e.cid_group,this.selectedCidId=e.cid,this.selectedCiap2=e.ciap,this.selectedCidName=e.cid.code+" - "+e.cid.name,this.cidList.forEach((e,t)=>{this.cidList[t].formattedName=e.code+" - "+e.name}),this.selectCid(this.selectedCidName)}else this.getSymptomList(),this.getCiap2List();this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},beforeDestroy(){this.disabled||this.$bus.off("request-save-data")},methods:{getSymptomList(){let e=this.$store.state.Data.User.token,t={token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.SYMPTOM_LIST,t).then(e=>{this.symptoms=e.data}).catch(e=>{})},getGroupCidList(e){let t=this.$store.state.Data.User.token,a={token:t,symptom_id:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GROUPCID_LIST,a).then(e=>{let t=[];e.data.forEach(e=>{e.nameDisplay=e.chapter+" - "+e.name,t.push(e)}),this.groupCidList=t}).catch(e=>{})},getCidList(){this.cidList=this.rawCid.data,this.cidList.forEach((e,t)=>{this.cidList[t].formattedName=e.code+" - "+e.name})},getCiap2List(){let e=[];this.rawCiap.data.ciap_2.forEach(t=>{t.nameDisplay=t.ciap+" - "+t.name,e.push(t)}),this.ciap2List=e},sendSaveData(){this.selectCid(this.selectedCidName),this.isValid=!0,this.message="",this.validatorBeforeSave();let e={brick_key:"emr_hipotese",brick_data:{symptom_id:null!=this.selectedSymptom?this.selectedSymptom.id:null,cid_id:null!=this.selectedCidId?this.selectedCidId.id:null,ciap_2_id:null!=this.selectedCiap2?this.selectedCiap2.id:null},isValid:this.isValid,message:this.message};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,e),this.$bus.emit("receive-brick-data",e)},validatorBeforeSave(){return null===this.selectedSymptom||null===this.selectedSymptom.id?(this.isValid=!1,void(this.message="Um sintoma deve ser selecionado")):null===this.selectedCidId||null===this.selectedCidId.id?(this.isValid=!1,void(this.message="Um CID deve ser selecionado")):void 0},selectCid(e){let t=e.formattedName?e.formattedName:e;this.$bus.emit("cid-selected",t)}},validations:{selectedSymptom:{required:Ae["required"]}},computed:{symptomErrors(){const e=[];return this.$v.selectedSymptom.$dirty?(!this.$v.selectedSymptom.required&&e.push(this.$t("access_controls.required")),e):e}}},Kl=jl,Zl=(a("c70c"),Object(I["a"])(Kl,wl,Hl,!1,null,null,null)),Ql=Zl.exports,Jl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"exam-results"},[t("div",{staticClass:"exam-title"},[t("div",{staticClass:"exam-title-text mb-2"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("attendance.results")))]),e._v(" "+e._s(e.$t("attendance.from_exams"))+"\n      ")])]),e._l(e.registeredExams,(function(a,n){return t("div",{key:n,staticClass:"d-flex"},[t($t["a"],{staticClass:"e-input1 mr-4",attrs:{label:e.$t("attendance.exam_name"),height:"37px",items:e.exams,"return-object":"","item-text":"name","append-icon":"keyboard_arrow_down",outlined:""},model:{value:a.exam_name,callback:function(t){e.$set(a,"exam_name",t)},expression:"exam.exam_name"}}),t(de["a"],{staticClass:"e-input2",attrs:{label:e.$t("attendance.result"),height:"37px",outlined:""},model:{value:a.result,callback:function(t){e.$set(a,"result","string"===typeof t?t.trim():t)},expression:"exam.result"}}),t("div",{staticClass:"delete-icon ml-6"},[t(at["a"],{staticClass:"del-icon",attrs:{size:"15",color:"white"},on:{click:function(t){return e.deleteExamResult(a)}}},[e._v("close")])],1),n>e.registeredExams.length-2&&!e.visible?t("div",{staticClass:"add-btn"},[t(r["a"],{attrs:{color:"blue",text:""},on:{click:function(t){return e.addField()}}},[e._v(e._s(e.$t("attendance.add")))])],1):e._e()],1)})),e.visible?t("div",{staticClass:"d-flex"},[t($t["a"],{staticClass:"e-input1 mr-4",attrs:{label:e.$t("attendance.exam_name"),height:"37px",items:e.exams,"return-object":"","item-text":"name","append-icon":"keyboard_arrow_down","error-messages":e.examErrors,outlined:""},on:{blur:function(t){return e.$v.selectedExam.$touch()}},model:{value:e.selectedExam,callback:function(t){e.selectedExam=t},expression:"selectedExam"}}),t(de["a"],{staticClass:"e-input2",attrs:{label:e.$t("attendance.result"),height:"37px","error-messages":e.resultErrors,outlined:""},on:{blur:function(t){return e.$v.result.$touch()}},model:{value:e.result,callback:function(t){e.result="string"===typeof t?t.trim():t},expression:"result"}}),t("div",{staticClass:"delete-icon ml-6"},[t(at["a"],{staticClass:"del-icon",attrs:{size:"15",color:"white"},on:{click:function(t){return e.deleteField()}}},[e._v("close")])],1),t("div",{staticClass:"add-btn"},[t(r["a"],{attrs:{color:"blue",text:""},on:{click:function(t){return e.addResult(e.result,e.selectedExam)}}},[e._v(e._s(e.$t("attendance.add")))])],1)],1):e._e()],2)},Wl=[],Xl={props:["brickDetails"],data(){return{exams:[],returnedResult:"",selectedExam:null,result:"",registeredExams:[],visible:!1,disabled:!1}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails.emr_resultado&&this.brickDetails.emr_resultado.length>0){let e=this.brickDetails.emr_resultado;this.registeredExams=e.exams||[],this.result=e.result}this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},methods:{addField(){this.visible=!0},addResult(e,t){this.$v.$touch(),this.$v.$invalid||(this.registeredExams.push({tests_id:10,result:e,exams:t}),this.$v.$reset(),this.result="",this.selectedExam=null)},deleteExamResult(e){let t=this.registeredExams.indexOf(e);-1!=t&&this.registeredExams.splice(t,1),0==this.registeredExams.length&&(this.visible=!0)},deleteField(){this.$v.$reset(),this.result="",this.visible=!1,0==this.registeredExams.length&&(this.visible=!0)},sendSaveData(){let e={brick_key:"emr_resultado",brick_data:{tests_id:this.registeredExams,result:this.result,exams:this.exams}};this.$bus.emit("receive-brick-data",e)}},validations:{result:{required:Ae["required"],minLength:Object(Ae["minLength"])(3)},selectedExam:{required:Ae["required"]}},computed:{resultErrors(){const e=[];return this.$v.result.$dirty?(!this.$v.result.required&&e.push(this.$t("access_controls.required")),!this.$v.result.minLength&&e.push(this.$t("access_controls.min_length")),e):e},examErrors(){const e=[];return this.$v.selectedExam.$dirty?(!this.$v.selectedExam.required&&e.push(this.$t("access_controls.required")),e):e}}},zl=Xl,ec=(a("6209"),Object(I["a"])(zl,Jl,Wl,!1,null,null,null)),tc=ec.exports,ac=function(){var e=this,t=e._self._c;return t("div",{staticClass:"member-pediatria-brick"},[t("div",{staticClass:"title-brick-doctor"},[t("div",{staticClass:"title-brick-doctor-text"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("pediatrics.title")))])])]),t(re["a"],{staticClass:"mt-5",attrs:{disabled:e.disabled}},[t(Xn["a"],{staticClass:"pa-0"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(de["a"],{attrs:{type:"text",label:e.$t("pediatrics.responsible_name"),"error-messages":e.responsibleNameeErrors,height:"37px",maxlength:"50",outlined:"",required:""},model:{value:e.form.responsible_name,callback:function(t){e.$set(e.form,"responsible_name","string"===typeof t?t.trim():t)},expression:"form.responsible_name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["###.##","##.##","#.##"],expression:"['###.##', '##.##', '#.##']"}],attrs:{type:"text",label:e.$t("pediatrics.child_weight"),"error-messages":e.weightErrors,height:"37px",outlined:"",required:""},model:{value:e.form.child_weight,callback:function(t){e.$set(e.form,"child_weight",t)},expression:"form.child_weight"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["#.##"],expression:"['#.##']"}],attrs:{type:"text",label:e.$t("pediatrics.child_height"),"error-messages":e.heightErrors,height:"37px",outlined:"",required:""},model:{value:e.form.child_height,callback:function(t){e.$set(e.form,"child_height",t)},expression:"form.child_height"}})],1)],1)],1)],1)],1)},nc=[],ic={props:["brickDetails"],data(){return{brickName:"emr_pediatra",disabled:!1,isFemale:!1,form:{responsible_name:"",child_weight:"",child_height:""},currentWeight:null,isValid:!0,message:null}},created(){!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.$store.state.Data.Patient.info.gender&&(this.isFemale="feminino"==this.$store.state.Data.Patient.info.gender.toLowerCase()),this.searchPregnantWeek=this.isFemale?"":null,this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()})},mounted(){this.brickDetails.emr_pediatra[0]?(this.brickDetails.emr_pediatra[0].responsible_name&&(this.form.responsible_name=this.brickDetails.emr_pediatra[0].responsible_name),this.brickDetails.emr_pediatra[0].child_weight&&(this.form.child_weight=this.brickDetails.emr_pediatra[0].child_weight),this.brickDetails.emr_pediatra[0].child_height&&(this.form.child_height=this.brickDetails.emr_pediatra[0].child_height)):(this.brickDetails.emr_pediatra.responsible_name&&(this.form.responsible_name=this.brickDetails.emr_pediatra.responsible_name),this.brickDetails.emr_pediatra.child_weight&&(this.form.child_weight=this.brickDetails.emr_pediatra.child_weight),this.brickDetails.emr_pediatra.child_height&&(this.form.child_height=this.brickDetails.emr_pediatra.child_height))},methods:{sendSaveData(){this.isValid=!0,this.message="",this.validacao(),this.$v.$touch();let e={...this.form,birthday_child:this.$store.state.Data.Patient.info.birthdate},t={brick_key:this.brickName,brick_data:e,isValid:this.isValid,message:this.message?this.$t("pediatrics.pediatricsProfileError"):""};this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.SET_BRICK,t),this.$bus.emit("receive-brick-data",t)},validacao(){""==this.form.responsible_name&&(this.form.responsible_name=null,this.isValid=!1,this.message=" Insira o nome do respons
rio!",digital_certification_expiration_time:"Seu login expira em: ",digital_certification_select_time_expiration:"Por gentileza, selecione uma das op
rio",email_invalid:"Verifique se o seu e-mail foi preenchido corretamente",login_error:"Email ou senha est
rio",reason:"Motivo"}};const fx={...Y$,...j$,...K$,...Z$,...Q$,...J$,...wi,...W$,...X$,...z$,...ex,...tx,...ax,...nx,...Lx,...ix,...sx,...ox,...rx,...lx,...cx,...dx,...mx,...ux,...Ax,..._x,...Ex,...Ix,...hx,...Ox,...px,...Sx,...Cx,...Tx,...Rx,...Dx,...gx};var Nx=fx;const kx={br:Nx};var vx=kx,bx={init(){let e="br";const t=new $$["a"]({locale:e,messages:vx});return t}};n["a"].use(F$.a,{id:"GTM-WQ9L7BR"});const Mx=Object.defineProperty(n["a"].prototype,"$consts",{get(){return R}}),Px=Object.defineProperty(n["a"].prototype,"$events",{get(){return events}});n["a"].config.productionTip=!1,n["a"].use(j.a,C.a),n["a"].use(y$["a"]),n["a"].use(fU.a),n["a"].use($$["a"]),n["a"].use(Mx),n["a"].use(Px),n["a"].use(V$.a),n["a"].use(w$.a),n["a"].use(new q$.a({debug:"false",connection:"https://beam.homolodoc.com.br"}));const Ux=a("c1df");a("6887"),n["a"].use(a("2ead"),{moment:Ux});const yx=bx.init();new n["a"]({vuetify:q,store:U$,router:QU,i18n:yx,sockets:{connect:function(){}},render:e=>e(k)}).$mount("#app")},5711:function(e,t,a){"use strict";a("0492")},"578c":function(e,t,a){"use strict";a("7f72")},"57a1":function(e,t,a){"use strict";a("adcc")},"57c7":function(e,t,a){},"57c9":function(e,t,a){},"582d":function(e,t,a){},"58b8":function(e,t,a){},"58c2":function(e,t,a){"use strict";a("c1a1")},"58e0":function(e,t,a){e.exports=a.p+"img/Grupo de m
rio",specialty:"Especialidade",department:"Departamento",phone:"Telefone",phone_mobile:"Celular",email:"E-mail",status:"Status",role:"Cargo",save:"Salvar",request_new_pwd:"Solicitar Nova Senha",success_message:"Dados atualizados com sucesso",about_me:"Sobre mim",tokens:"Tokens",invalid_image:'Imagem de perfil precisa ser do tipo ".jpeg" ou ".png".',graduation:{name:"Gradua
scara 2.1820cd1f.svg"},5911:function(e,t,a){"use strict";a("2674")},5936:function(e,t,a){},5957:function(e,t,a){"use strict";a("e573")},"5a2f":function(e,t,a){e.exports=a.p+"img/empty_avatar.c491dc1d.svg"},"5b30":function(e,t,a){},"5b93":function(e,t,a){"use strict";a("9bc7")},"5bd3":function(e,t,a){"use strict";a("3d7c")},"5bd5":function(e,t,a){e.exports=a.p+"img/ic_servico_inativo.5c122d14.svg"},"5c20":function(e,t,a){e.exports=a.p+"img/ic_sidebar_atender.80eb17ae.svg"},"5c3f":function(e,t,a){"use strict";a("de5e")},"5cac":function(e,t,a){"use strict";a("0a14")},"5cec":function(e,t,a){"use strict";a("be73")},"5d0d":function(e,t,a){"use strict";a("40d4")},"5d46":function(e,t,a){"use strict";a("0f0a")},"5ddc":function(e,t,a){"use strict";a("5498")},"5dfc":function(e,t,a){e.exports=a.p+"img/ic_senha_sucesso.99fc0671.svg"},"5e1e":function(e,t,a){"use strict";a("315d")},"5e6c":function(e,t,a){e.exports=a.p+"img/paciente.f38d94f0.svg"},"5f3f":function(e,t,a){"use strict";a("a1ce")},"5f56":function(e,t,a){"use strict";a("f3e1")},"5f70":function(e,t,a){"use strict";a("2a93")},"5ffb":function(e,t,a){"use strict";a("83bc")},6019:function(e,t,a){e.exports=a.p+"img/motivado.7ed70e5f.svg"},"601a":function(e,t,a){"use strict";a("c678")},"603b":function(e,t,a){"use strict";a("7466")},6123:function(e,t,a){},"613f":function(e,t,a){"use strict";a("d781")},6173:function(e,t,a){},"619f":function(e,t,a){},"61e4":function(e,t,a){e.exports=a.p+"img/full-screen-exit-svgrepo-com.eae6e973.svg"},"61ef":function(e,t,a){"use strict";a("1baa")},6209:function(e,t,a){"use strict";a("561a")},"622a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"21.384",height:"27.792",viewBox:"0 0 21.384 27.792"}},[t("path",{staticClass:"a",attrs:{d:"M1631.569,33.7a4.43,4.43,0,0,1-2.588-1.394,5.052,5.052,0,0,1-.974-1.862c-.092-.345-.1-1.722-.1-10.591,0-8.907.017-10.252.1-10.635a4.439,4.439,0,0,1,2.836-3.078l.527-.183h9.822l.436.21c.721.344,1.2.764,3.557,3.089,3.148,3.111,3.676,3.719,3.972,4.6.14.414.14.447.123,8.406l-.016,7.987-.161.468a4.383,4.383,0,0,1-2.164,2.551c-.947.495-.457.468-8.1.484-3.773,0-7.04-.016-7.266-.048Zm14.4-2.347a1.9,1.9,0,0,0,.715-.57c.479-.635.458-.194.458-8.272,0-7.093-.005-7.276-.135-7.486-.29-.479-.764-.559-3.422-.559-2.255,0-2.358-.017-2.654-.426-.145-.21-.15-.269-.188-2.631-.043-2.664-.064-2.8-.447-3.138l-.226-.2-4.251.022-4.252.016-.317.156a2.17,2.17,0,0,0-1.2,1.749c-.043.274-.059,4.316-.049,10.177l.022,9.714.188.4a2.109,2.109,0,0,0,1.389,1.222c.231.064,1.878.081,7.1.07l6.8-.011Zm-13.363-4.192a1.64,1.64,0,0,1-.387-.388,1.075,1.075,0,0,1,.414-1.458c.2-.108.63-.118,5.9-.118,5.613,0,5.689,0,5.92.139a1.077,1.077,0,0,1,.371,1.518c-.328.49.022.463-6.307.463h-5.683Zm.269-4.16a1.049,1.049,0,0,1-.662-1.529,1.418,1.418,0,0,1,.318-.376c.177-.135.3-.14,4.789-.156,3.127-.016,4.688,0,4.855.048a1.049,1.049,0,0,1,.651,1.259,1.111,1.111,0,0,1-.684.727c-.22.054-9.019.075-9.267.027Zm-.167-4.322a1.3,1.3,0,0,1-.608-.688,1.161,1.161,0,0,1,.468-1.2c.183-.134.253-.14,5.818-.156,3.692-.016,5.71,0,5.866.049a1.351,1.351,0,0,1,.468.307c.221.231.237.269.237.7,0,.419-.022.484-.2.678-.392.419-.107.4-6.237.4-4.5-.006-5.64-.022-5.807-.092Z",transform:"translate(-1627.904 -5.956)",fill:"#350165"}})])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"629c":function(e,t,a){"use strict";a("337f")},"62af":function(e,t,a){"use strict";a("044f")},"631e":function(e,t,a){},6355:function(e,t,a){"use strict";a("6771")},"635c":function(e,t,a){"use strict";a("9f56")},6360:function(e,t,a){},6371:function(e,t,a){"use strict";a("2db2")},6401:function(e,t,a){"use strict";a("d161")},6415:function(e,t,a){"use strict";a("c092")},"642d":function(e,t,a){},6510:function(e,t,a){},6553:function(e,t,a){},6582:function(e,t,a){e.exports=a.p+"img/edit.e9316ca3.svg"},"65c6":function(e,t,a){"use strict";a("4e23")},"66b4":function(e,t,a){e.exports=a.p+"img/circle-xmark.84674141.svg"},"66c4":function(e,t,a){"use strict";a("796b")},"66f2":function(e,t,a){e.exports=a.p+"img/ic_sidebar_perfil.3f13eef7.svg"},6712:function(e,t,a){},6771:function(e,t,a){},"67b5":function(e,t,a){},6816:function(e,t,a){"use strict";a("d78f")},6830:function(e,t,a){e.exports=a.p+"img/right-left-white.0edfc8f5.svg"},"68e2":function(e,t,a){},6934:function(e,t,a){e.exports=a.p+"img/ic_consulta_habilitar_audio.b4f40a7c.svg"},"693b":function(e,t,a){},"694f":function(e,t,a){"use strict";a("e3c0")},6978:function(e,t,a){"use strict";a("6daa")},"69ae":function(e,t,a){},"6a14":function(e,t,a){},"6a59":function(e,t,a){},"6aa6":function(e,t,a){"use strict";a("165b")},"6acc":function(e,t,a){},"6add":function(e,t,a){},"6bcd":function(e,t,a){},"6c4b":function(e,t,a){e.exports=a.p+"img/ic_perfil_meus_dados.6c537574.svg"},"6daa":function(e,t,a){},"6db7":function(e,t,a){},"6dee":function(e,t,a){},"6e53":function(e,t,a){"use strict";a("6173")},"6e5c":function(e,t,a){},"70c4":function(e,t,a){"use strict";a("dc7c")},"70cf":function(e,t,a){},"720f":function(e,t,a){"use strict";a("845e")},7222:function(e,t,a){},"72a7":function(e,t,a){"use strict";a("b92c")},"72e8":function(e,t,a){e.exports=a.p+"img/file-import.0d243da1.svg"},"733c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAuCAYAAAC8jpA0AAAAAXNSR0IArs4c6QAABppJREFUaAW1WWtsVEUU/uZuty+KUECkpS2IPIT6QGh5GiUhUKGtJhogSNAKbSACKkEEQ/iBaGL8xQ9BBAoKkdQqEE2XxEQTA2KRVkpFBNpSbKEFURQptS2ld/xm4ZZ93N07u9VJNjNzznfOfDv3zJmZewV6WLJRMAhwz5PAaECm012a4K8zKaHh1OalZueApOuQaKK8HtLwID/9WA+HBP1HXh7Bwl5xiJtLywUQYnooD2aM61xVyepUM96d0I2RqAPEHriNXcgZfKFbHkEjItKZeDkpATdXcdCVQqCPzjjXH8r49uy7L06zxUqUIEasx1Pp/CP6RZt0Nope5eNfz5ntr++eFhKtx/evNcw4n9kOdCCxEyJ+HXIHXg5U2fUNO6GvbAJe6J+NwkoG0qZICSs/fCK9Eusu/+rrM6gtsAhoO4ODFycF6WwEYUmPRcEIE7FVHHm8ja22KL75aoszWPSBNMvhaXzGCRuS9DgUjnbD/Z0QQmWEHpWOgX2TtB1I7MPBxnnh8LakFWEXcJghMTCcsZZOoq11REqGFlaBBFxMkSXhiAeRnojCNAPiUDTxa0esZXTaMTMxTn+mLSeKuKdhhtX1rQNJiy5gHxfPAF9QtG3m6fqat56Pfj1IsRdfXwzKVn6kmdbWMoYnREvS166zd8KJ6uJXekc1y5YjNXntXbutrlV35+lxWDzcJYxaSxFRLeVvEpwVmPsqUXzEz9Zzhdt8+3zK1OKa6KfT7QhjDmanfW7Bu0lzlku5COZYCq1aysPcPjZUoPgbLbyneQjQtZI23KgiKFLWI2/IA5aFl3Q0s8yd7v1KbF9hOYqo9jTkQQo1SXfPJE4OpJxL4p8pmDemDRhFTja+einF0qgJK0e5Q8ogjClMbVd9/YZtC1Fo6b2kOd3qxKZVpJTc07d9qAUOB8pNOwEZ8zhD5e9wMB/dTJQ1JKu+8RgWPcrHNNRHGbopcaASO4pDAyLU5Kee4Rl7kbaVYcxWWMMFkaNr1AW5TherjctL388wOaWFl3KmwhkCgo/IuTAsjhzHjtPOyCgQQmzStJqqcIxp8aCOgYTcooOLCpOMT2jXqmHrTXs8ZmCEBpgQ1w96uChQU9LbeFuo1rL0XBzpzR464B+x7ZwOrgeYei1bicFapLmR/N+EyVec1yItzEEGV26bM1je44zpIUIIvTG4uAz+bjgNx5PfvUNREO+E65leDtOyd4nrKjwu6YCTIfSc6jizw0jcbycOkt0STSQttI6jLri8iT3IyX8h+OqyutaN0XLVNvg0ScuTWmAguhOdjvPOjmVMveqpOxR5FnPFTbUj+h/aQ5gxroeNx+LcEOroxaWSd2gs0XIgb3M1OtBermVAEI+w7+litXGJF9bwEn2fFl4I72XD+Al7Wpn2SvWMMCYLRVu1sDogT+MTDIt3dKDkeAPJOKCwd+LI3KVlSBBv6kv4mmyVLj4kznPhYW7dX4TUByqELIHa7lm81y3VyELhL4xbvmPWKzz1bb2Jjte9T0rP5C7K07CQQ39AQa+7QqeWMQq5aTUK1b1iucm87WTmq+cfXBqL+FpeiIt85WHbnsYslDUeIuHdxEVAmOF7h7Dy3z3TqsN4PczHr3W+Vnir8GzCDUp+ykxUyT/fxFpWlK03eXnlHUMdAcRY1vnEZ1k22rWULYjl8XlmRrNlE2M1VG3CfMmQRjWJJ/rKndrEp5DYawpHwi3nVj9bw8Z4Er1jatVOnuz09OtDWCG6w0N1jqO4jlO/TLWjKYxzWfvmc7V/PpkZ/asw34F5J0Vexk5fkWr7kVaCCmz/iKv6Y9WOtHQMSj56beqYcZHahcDXwB3LBRtcgkgrSAV2FKg7YTA8vKR5wTS/cAuPDqNV70OknIWcQbZXMFvSyh3TWQ4X2PdhXAepWkem8L1dT4u8wo9Hk/g2KeRNJiRplX/5UnEG//FeXRq3eidEtIBt/Fbym+QEp69dIUkrh7wX/sNQWWBKk+GCP2wG8RPFX/rrdz9BJB2JjcjNyEZuaoOTmTphOZZLqKoegMwtMXB1MXllcWOJtTUSxs/XJo4caqsLJZRyG/Pw05iV8WUoSKDcb3MJVNr1M7G4XyKMN0h+RWA+Nw3RVFW6pp/fF1o7J7dluxATu5GL7XxoiL0mYtKWG36u6+uCe7mAnM6Zn2bJ21OSy09uXz7Z6gfUR7lzHoLp3oz81MYAnXY3atKBI/AMks19ezId9ruWNdxdt2H+KB4Jy3mkrABiGnRiNdBnqP6/GCLE99qcLoMAAAAASUVORK5CYII="},"735b":function(e,t,a){"use strict";a("1f5d")},"73ba":function(e,t,a){"use strict";a("619f")},7409:function(e,t,a){},7466:function(e,t,a){},7595:function(e,t,a){},"75bc":function(e,t,a){"use strict";a("a51a")},"766b":function(e,t,a){},7695:function(e,t,a){e.exports=a.p+"img/calendar-days.c8439be9.svg"},"76ae":function(e,t,a){"use strict";a("3b58")},"76c2":function(e,t,a){},"77f2":function(e,t,a){"use strict";a("b62b")},"78a8":function(e,t,a){},"78e4":function(e,t,a){e.exports=a.p+"img/ic_definir_acesso.496b108a.svg"},7909:function(e,t,a){e.exports=a.p+"img/otimista.ad09b4d7.svg"},"790a":function(e,t,a){},7938:function(e,t,a){e.exports=a.p+"img/ic_copiar.1c39a8e9.svg"},"796b":function(e,t,a){},"799f":function(e,t,a){},"7ac0":function(e,t,a){},"7acb":function(e){e.exports=JSON.parse('{"data":{"ciap_2":[{"id":1,"ciap":"A01","name":"Dor generalizada /m
scara 2.svg":"58e0","./Grupo1514.svg":"d808","./Icon - Visibility - Filled.svg":"85fe","./backoffice_ativo.svg":"5133","./backoffice_inativo.svg":"9791","./bar.png":"ad2f","./btn_play.svg":"a0ab","./calendar-days.svg":"7695","./chevron-down.svg":"d742","./circle-xmark.svg":"66b4","./clock.svg":"e0f8","./close.svg":"bf37","./custom_icons/Access":"5366","./custom_icons/Access.vue":"5366","./custom_icons/Attention":"1329","./custom_icons/Attention.vue":"1329","./custom_icons/Calendar":"2f8c","./custom_icons/Calendar.vue":"2f8c","./custom_icons/Calendar2":"45a1","./custom_icons/Calendar2.vue":"45a1","./custom_icons/Contract":"622a","./custom_icons/Contract.vue":"622a","./custom_icons/Delete":"06cd","./custom_icons/Delete.vue":"06cd","./custom_icons/Edit":"9730","./custom_icons/Edit.vue":"9730","./custom_icons/File":"02b8","./custom_icons/File.vue":"02b8","./custom_icons/Processing":"c856","./custom_icons/Processing.vue":"c856","./custom_icons/Save":"2b51","./custom_icons/Save.vue":"2b51","./custom_icons/Upload":"e044","./custom_icons/Upload.vue":"e044","./custom_icons/Warning":"118f","./custom_icons/Warning.vue":"118f","./edit.svg":"6582","./empty_avatar.svg":"5a2f","./end_attend.svg":"7aec","./file-import.svg":"72e8","./full-screen-exit-svgrepo-com.svg":"61e4","./full-screen-svgrepo-com.svg":"35b3","./google-recaptcha.png":"f649","./google-recaptcha@2x.png":"7edd","./health_history.svg":"3304","./hospital-user.svg":"b676","./how_do_you_feeling/colored/ansioso.svg":"bf46","./how_do_you_feeling/colored/calmo.svg":"56c5","./how_do_you_feeling/colored/desmotivado.svg":"16dd","./how_do_you_feeling/colored/feliz.svg":"8f4a","./how_do_you_feeling/colored/impaciente.svg":"566a","./how_do_you_feeling/colored/irritado.svg":"8094","./how_do_you_feeling/colored/motivado.svg":"6019","./how_do_you_feeling/colored/otimista.svg":"7909","./how_do_you_feeling/colored/paciente.svg":"5e6c","./how_do_you_feeling/colored/pessimista.svg":"a38e","./how_do_you_feeling/colored/relaxado.svg":"ca8e","./how_do_you_feeling/colored/triste.svg":"f9bf","./ic_atender.svg":"9691","./ic_atender_inativo.svg":"2a25","./ic_atender_paciente_ativo.svg":"4d41","./ic_atendimento_assumir.svg":"19f1","./ic_cancel.svg":"d9ed","./ic_consulta_dasabilitar_audio.svg":"7e5d","./ic_consulta_dasabilitar_video.svg":"d50a","./ic_consulta_habilitar_audio.svg":"6934","./ic_consulta_habilitar_video.svg":"7af4","./ic_copiar.svg":"7938","./ic_definir_acesso.svg":"78e4","./ic_download.svg":"3a53","./ic_editar_paciente.svg":"9b5d","./ic_form_excluir.svg":"47d2","./ic_grupo.svg":"cd4e","./ic_intervalo.svg":"31a9","./ic_link_externo.svg":"4e92","./ic_logo_apm.svg":"85d6","./ic_logo_notificacao.svg":"c95f","./ic_painel_acesso_ativo.svg":"198e","./ic_painel_acesso_inativo.svg":"4b14","./ic_painel_outro_ativo.svg":"984c","./ic_painel_outro_inativo.svg":"9607","./ic_painel_relatorio_ativo.svg":"9160","./ic_painel_relatorio_inativo.svg":"af58","./ic_perfil_hierarquico.svg":"26eb","./ic_perfil_meus_dados.svg":"6c4b","./ic_perfil_sair.svg":"01c9","./ic_perfil_sem_fonte.svg":"1c35","./ic_porta.svg":"b29e","./ic_processamento.svg":"0e9b","./ic_salvar.svg":"4917","./ic_senha_sucesso.svg":"5dfc","./ic_servico_ativo.svg":"cc0d","./ic_servico_inativo.svg":"5bd5","./ic_sidebar_atender.svg":"5c20","./ic_sidebar_calendar.svg":"1225","./ic_sidebar_coupons.svg":"100b","./ic_sidebar_highlight.svg":"4dd3","./ic_sidebar_perfil.svg":"66f2","./ic_sidebar_relatorio.svg":"d99e","./ic_teladoc.png":"733c","./ic_teladoc_o.svg":"ca74","./ic_tranfer.svg":"c643","./icon.png.png":"d9d8","./is_acesso_cliente_ativo.svg":"281d","./is_acesso_cliente_inativo.svg":"5623","./lgbtqa+_flag.svg":"92a7","./logo_sidebar_logo_teladoc.svg":"be8a","./logo_teladoc_loading.svg":"ccd4","./menu-down-outline.png":"8551","./menu-down.png":"9360","./menu-up-outline.png":"ac89","./menu-up.png":"015d","./pdf_icon.png":"ed1f","./reload.svg":"b318","./right-left-white.svg":"6830","./right-left.svg":"ce5a","./sort-down.svg":"dcb9","./start_attend.svg":"ad7d","./triangle-exclamation.svg":"fbc9","./warning_sign.svg":"dfbb"};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id="1771"},"17d5":function(e,t,a){},"17e4":function(e,t,a){},1866:function(e,t,a){"use strict";a("4c7e")},"194a":function(e,t,a){},"198e":function(e,t,a){e.exports=a.p+"img/ic_painel_acesso_ativo.aa3d0718.svg"},"19f1":function(e,t,a){e.exports=a.p+"img/ic_atendimento_assumir.6f06c01a.svg"},"19f4":function(e,t,a){"use strict";a("bc49")},"1b2a":function(e,t,a){"use strict";a("d541")},"1b5e":function(e,t,a){},"1baa":function(e,t,a){},"1bcf":function(e,t,a){"use strict";a("0c28")},"1c21":function(e,t,a){},"1c35":function(e,t,a){e.exports=a.p+"img/ic_perfil_sem_fonte.6ad43f1e.svg"},"1c8c":function(e,t,a){},"1c91":function(e,t,a){"use strict";a("d0ec")},"1d17":function(e,t,a){"use strict";a("67b5")},"1d75":function(e,t,a){"use strict";a("6712")},"1d95":function(e,t,a){"use strict";a("d674")},"1e7c":function(e,t,a){"use strict";a("369b")},"1ee6":function(e,t,a){},"1f0f":function(e,t,a){},"1f5d":function(e,t,a){},"20af":function(e,t,a){"use strict";a("39d1")},"20d2":function(e,t,a){"use strict";a("c3cd")},2195:function(e,t,a){},"21ec":function(e,t,a){"use strict";a("8adb")},2323:function(e,t,a){},"244b":function(e,t,a){"use strict";a("ee54")},"246e":function(e,t,a){"use strict";a("e2a2")},"24ba":function(e,t,a){},"24dc":function(e,t,a){},"24dd":function(e,t,a){"use strict";a("c23a")},2539:function(e,t,a){"use strict";a("5936")},2674:function(e,t,a){},"26c4":function(e,t,a){},"26eb":function(e,t,a){e.exports=a.p+"img/ic_perfil_hierarquico.a9bcc700.svg"},2742:function(e,t,a){"use strict";a("2ed0")},2797:function(e,t,a){},"27ba":function(e,t,a){"use strict";a("c088")},"27c5":function(e,t,a){},"281d":function(e,t,a){e.exports=a.p+"img/is_acesso_cliente_ativo.8db13a5a.svg"},2840:function(e,t,a){"use strict";a("138f")},"28e7":function(e,t,a){"use strict";a("24ba")},"294f":function(e,t,a){"use strict";a("e5ec")},2970:function(e,t,a){"use strict";a("fecc")},"297e":function(e,t,a){},"2a1f":function(e,t,a){"use strict";a("0fd6")},"2a25":function(e,t,a){e.exports=a.p+"img/ic_atender_inativo.af3ede23.svg"},"2a93":function(e,t,a){},"2ab5":function(e,t,a){"use strict";a("c1b9")},"2ae3":function(e,t,a){},"2b00":function(e,t,a){"use strict";a("0c6f")},"2b51":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"28.193",height:"26.1",viewBox:"0 0 28.193 26.1"}},[t("g",{attrs:{transform:"translate(0)",fill:"#fff"}},[t("path",{staticClass:"a",attrs:{d:"M1193.8,28.963a1.778,1.778,0,0,1-1.182-.838c-.221-.41-.2.548-.2-12.16s-.018-11.766.2-12.16a1.8,1.8,0,0,1,.758-.7c.443-.2-.222-.188,9.459-.188l8.794.018.3.051a6.359,6.359,0,0,1,1.884.787c.37.258,5.783,5.268,5.967,5.542a5.424,5.424,0,0,1,.739,1.643l.074.273.019,8.124c0,8.98.019,8.363-.2,8.774a1.8,1.8,0,0,1-.757.7c-.443.2.591.188-13.154.188-10.6,0-12.526-.018-12.692-.052Zm3.307-5.8a28.337,28.337,0,0,1,.074-3.848,1.75,1.75,0,0,1,.886-.991c.426-.206-.129-.188,8.444-.188,6.65,0,7.814,0,8,.034a1.725,1.725,0,0,1,1.33,1.145,28.269,28.269,0,0,1,.074,3.848v3.677h2.347V19.129l-.019-7.73-.111-.274c-.222-.582-.037-.376-2.993-3.13a29.964,29.964,0,0,0-2.919-2.6,3.343,3.343,0,0,0-.886-.29l-.13-.034-.018,3.728v3.728l-.074.17a1.8,1.8,0,0,1-1.349,1.061c-.149.018-2.144.034-5.635.034-4.637,0-5.431,0-5.634-.052a1.726,1.726,0,0,1-1.312-1.145,28.12,28.12,0,0,1-.074-3.831V5.088h-2.346V15.949c0,5.968,0,10.86.018,10.877s.536.016,1.165.016h1.163Zm16.443.41V20.31H1199.47v6.533h14.078Zm-5.063-12.006a.7.7,0,0,0,.333-.308c.018-.068.037-.991.037-2.906s-.019-2.857-.037-2.908a.7.7,0,0,0-.333-.308,37.775,37.775,0,0,0-3.954,0,.7.7,0,0,0-.333.308c-.018.051-.037.991-.037,2.908s.019,2.838.037,2.906a.7.7,0,0,0,.333.308,37.775,37.775,0,0,0,3.954,0Z",transform:"translate(-1192.412 -2.916)"}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"2ba1":function(e,t,a){},"2cf9":function(e,t,a){},"2db2":function(e,t,a){},"2e01":function(e,t,a){},"2e1c":function(e,t,a){},"2ed0":function(e,t,a){},"2f11":function(e,t,a){"use strict";a("3d66")},"2f45":function(e,t,a){},"2f4e":function(e,t,a){},"2f6c":function(e,t,a){"use strict";a("974c")},"2f8c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27",viewBox:"0 0 27 27",role:"presentation"}},[t("defs"),t("g",{attrs:{transform:"translate(-799 -75.694)",fill:"#5949a7"}},[t("path",{staticClass:"a",attrs:{d:"M818.065,102.637a6.861,6.861,0,0,1-5.6-4.73,7.591,7.591,0,0,1-.125-3.89,7.149,7.149,0,0,1,3.4-4.325,6.57,6.57,0,0,1,3.369-.811,6.853,6.853,0,0,1,6.738,5.493,6.626,6.626,0,0,1-.608,4.5,6.948,6.948,0,0,1-7.172,3.765Zm3.214-2.182a5.106,5.106,0,0,0,2.944-3.89,5.237,5.237,0,0,0-2.886-5.483,6.15,6.15,0,0,0-4.489-.058,5.962,5.962,0,0,0-2.317,2.1,5.389,5.389,0,0,0-.222,4.827,5.2,5.2,0,0,0,2.288,2.432,4.86,4.86,0,0,0,4.682.068Zm-2.906-3.8a.848.848,0,0,1,.55-1.467,11.867,11.867,0,0,0,2.056-.831c1.39-.666,1.689-.762,1.9-.647a.533.533,0,0,1,.1.821c-.077.067-.811.473-1.631.907a8.812,8.812,0,0,0-1.728,1.1.909.909,0,0,1-1.246.116ZM799,89.9V78.871h3.378v.483A2.876,2.876,0,0,0,804,81.786a3.136,3.136,0,0,0,2.452-.009,3.036,3.036,0,0,0,1.593-2.529v-.377H815l.135.734A2.837,2.837,0,0,0,817.37,82a2.916,2.916,0,0,0,3.437-2.587l.068-.54H824.1V84.18c0,4.228-.029,5.3-.154,5.232-.077-.048-.434-.27-.772-.492a3.3,3.3,0,0,0-.753-.4,4.789,4.789,0,0,1-.125-1.757V85.02l-10.715.029-10.705.029-.029,7.153-.039,7.153h11.072l.425.685.434.7-3.581.077c-1.969.039-5.058.077-6.864.087l-3.292.019Zm4.344,6.342V94.914h2.664l-.039,1.293-.029,1.3-1.3.029-1.293.039Zm4.7,0V94.914h2.5l.077.743c.048.406.087,1,.087,1.323v.589h-2.664Zm-4.7-4.045V90.937H806v2.529h-2.655Zm4.7,0V90.937h2.664v2.529h-2.664Zm0-3.986V86.95h2.664v2.539h-2.664Zm4.711,0V86.95h2.529v1.757l-.637.386a2.053,2.053,0,0,1-1.264.4h-.628Zm4.7-.772V86.95H820v.85h-1.072a7.681,7.681,0,0,0-1.274.068c-.154.058-.193-.02-.193-.425ZM804.28,80.782c-.753-.454-.965-1.052-.917-2.635.039-1.1.077-1.371.29-1.651a1.667,1.667,0,0,1,1.458-.8,1.837,1.837,0,0,1,1.631.792c.261.357.28.512.28,1.863,0,1.293-.029,1.506-.251,1.8a1.878,1.878,0,0,1-2.49.637Zm12.819.029c-.82-.435-.907-.676-.907-2.5V76.68l.511-.473a1.594,1.594,0,0,1,.84-.492c1.023-.058,1.574.164,1.96.782.222.357.251.6.251,1.854,0,1.3-.029,1.486-.27,1.853a1.839,1.839,0,0,1-2.385.608Z"}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"2f97":function(e,t,a){},"314d":function(e,t,a){},"315d":function(e,t,a){},"31a9":function(e,t,a){e.exports=a.p+"img/ic_intervalo.870034eb.svg"},"31ed":function(e,t,a){},"31fd":function(e,t,a){},3218:function(e,t,a){"use strict";a("993c")},"321e":function(e,t,a){},3298:function(e,t,a){"use strict";a("4819")},"32dd":function(e,t,a){},3304:function(e,t,a){e.exports=a.p+"img/health_history.9c80e5f2.svg"},"337f":function(e,t,a){},"33a4":function(e,t,a){},"33a6":function(e,t,a){"use strict";a("c18e")},"33db":function(e,t,a){"use strict";a("dc31")},"343c":function(e,t,a){"use strict";a("b5d6")},3455:function(e,t,a){},"35b3":function(e,t,a){e.exports=a.p+"img/full-screen-svgrepo-com.c3dba9e2.svg"},"35de":function(e,t,a){"use strict";a("eb33")},"369b":function(e,t,a){},3783:function(e,t,a){"use strict";a("9f3a")},"37fa":function(e,t,a){},3807:function(e,t,a){},3883:function(e,t,a){"use strict";a("9d00")},"39d1":function(e,t,a){},"3a53":function(e,t,a){e.exports=a.p+"img/ic_download.430c29d7.svg"},"3a8b":function(e,t,a){"use strict";a("0f01")},"3af5":function(e,t,a){},"3b09":function(e,t,a){"use strict";a("b49e")},"3b0f":function(e,t,a){"use strict";a("3455")},"3b58":function(e,t,a){},"3c7d":function(e,t,a){"use strict";a("26c4")},"3d06":function(e,t,a){"use strict";a("e075")},"3d5e":function(e,t,a){"use strict";a("adc8")},"3d66":function(e,t,a){},"3d7c":function(e,t,a){},"3d8f":function(e,t,a){},"3ee3":function(e,t,a){"use strict";a("6acc")},"3f10":function(e,t,a){"use strict";a("b115")},"3f93":function(e,t,a){"use strict";a("09ad")},"40c4":function(e,t,a){"use strict";a("3af5")},"40cc":function(e,t,a){"use strict";a("6bcd")},"40d4":function(e,t,a){},"417d":function(e,t,a){"use strict";a("f291")},"42bc":function(e,t,a){},4382:function(e,t,a){"use strict";a("17d5")},"439a":function(e,t,a){},"44bc":function(e,t,a){"use strict";a("4d25")},"44c2":function(e,t,a){},"44fb":function(e,t,a){"use strict";a("2f97")},4537:function(e,t,a){"use strict";a("e429")},"45a1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"27.233",height:"27.233",viewBox:"0 0 27.233 27.233"}},[t("path",{staticClass:"a",attrs:{d:"M2.5,26.7a2.772,2.772,0,0,1-.9-.328A3.154,3.154,0,0,1,.1,24.5L0,24.172V5.452l.115-.346a3.206,3.206,0,0,1,1.2-1.638,3.356,3.356,0,0,1,2.14-.562h.659l.022-.655a2.031,2.031,0,0,1,.6-1.664A2.008,2.008,0,0,1,6.07,0,2.119,2.119,0,0,1,7.436.581,2.175,2.175,0,0,1,8.046,2.3l.026.61.99-.011.986-.007.026-.644a2.012,2.012,0,0,1,.6-1.656A1.865,1.865,0,0,1,13.186.424a2.165,2.165,0,0,1,.8,1.894l.022.588L15,2.9l.99-.011.026-.662A2.011,2.011,0,0,1,16.286.99,1.922,1.922,0,0,1,17.529.063a1.509,1.509,0,0,1,.852,0,2.019,2.019,0,0,1,1.455,1.429,3.129,3.129,0,0,1,.067.822v.592h.551a3.516,3.516,0,0,1,1.53.275,3.105,3.105,0,0,1,1.731,1.991l.1.316V24.169l-.1.316a3.118,3.118,0,0,1-2.252,2.162l-.417.1-9.137,0c-7.414,0-9.185-.011-9.408-.06Zm18.772-1.9a1.419,1.419,0,0,0,.6-.6l.1-.19.011-8.262L22,7.484H1.816l.011,8.258L1.839,24l.1.19a1.31,1.31,0,0,0,.808.681c.093.022,4.072.033,9.245.03L21.08,24.9ZM3.484,20.261v-1.5H6.814v2.992H3.484Zm4.488,0v-1.5h3.379l-.011,1.489-.015,1.485-1.675.015-1.678.011v-1.5Zm4.518,1.466c-.015-.015-.026-.689-.026-1.5v-1.47H15.84v2.992H14.18c-.916,0-1.675-.007-1.69-.026Zm-9.006-4s0-.674,0-1.485l0-1.474,1.667-.015,1.671-.011v2.992H5.147c-.912.007-1.664,0-1.664-.007Zm4.488-1.481v-1.5h3.379l-.011,1.489-.015,1.485-1.675.015-1.678.011v-1.5Zm4.507,1.44c-.011-.03-.015-.7-.007-1.489l.011-1.429,1.678-.015,1.675-.011v2.992H14.168a7.631,7.631,0,0,1-1.69-.048Zm4.514-1.44v-1.5l1.675.011,1.678.015v2.948l-1.678.015-1.675.011ZM3.484,12.226v-1.5H6.814v2.992H3.484Zm4.5.011L8,10.752h3.331l.011,1.485.011,1.485H7.972Zm4.488,0,.011-1.485h3.331l.011,1.485.015,1.485H12.457Zm4.522-.011v-1.5l1.675.011,1.678.015V13.7l-1.678.015-1.675.011ZM6.517,6.4a1.114,1.114,0,0,0,.3-.339l.13-.227V3.826a8.01,8.01,0,0,0-.078-2.181.846.846,0,0,0-1.109-.469.785.785,0,0,0-.443.443,7.77,7.77,0,0,0-.082,2.192c0,2.188,0,2.181.249,2.449A.806.806,0,0,0,6.517,6.4Zm5.932,0a1.013,1.013,0,0,0,.3-.316l.123-.2.011-1.917c.019-2.2.007-2.3-.257-2.579a.823.823,0,0,0-1.366.22,8.173,8.173,0,0,0-.078,2.218c0,1.995,0,2.054.089,2.233a1.045,1.045,0,0,0,.528.454.909.909,0,0,0,.651-.112Zm5.929.011a.965.965,0,0,0,.409-.633c.06-.316.056-3.655,0-3.934a.845.845,0,0,0-1.012-.711.571.571,0,0,0-.4.234,1.133,1.133,0,0,0-.246.372,38.935,38.935,0,0,0,.019,4.172.835.835,0,0,0,1.236.5Z",transform:"translate(0 0)",fill:"#5949a7"}})])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"45c0":function(e,t,a){"use strict";a("ee1b")},"45d2":function(e,t,a){"use strict";a("a3f7")},4633:function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab4","./zh-hk.js":"49ab4","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id="4678"},"46c6":function(e,t,a){"use strict";a("693b")},4764:function(e,t,a){"use strict";a("33a4")},"47a9":function(e,t,a){},"47d2":function(e,t,a){e.exports=a.p+"img/ic_form_excluir.aad6b280.svg"},4819:function(e,t,a){},"48e2":function(e,t,a){"use strict";a("b885")},4917:function(e,t,a){e.exports=a.p+"img/ic_salvar.91c73532.svg"},"49ab":function(e,t,a){},"49df":function(e,t,a){"use strict";a("9bdf")},"4a18":function(e,t,a){"use strict";a("6db7")},"4b14":function(e,t,a){e.exports=a.p+"img/ic_painel_acesso_inativo.e9127046.svg"},"4b4f":function(e,t,a){"use strict";a("e632")},"4b6d":function(e,t,a){"use strict";a("80a8")},"4c7e":function(e,t,a){},"4c87":function(e,t,a){},"4d25":function(e,t,a){},"4d32":function(e,t,a){"use strict";a("1c21")},"4d41":function(e,t,a){e.exports=a.p+"img/ic_atender_paciente_ativo.3f68a6d5.svg"},"4dd3":function(e,t,a){e.exports=a.p+"img/ic_sidebar_highlight.8d70e748.svg"},"4e23":function(e,t,a){},"4e92":function(e,t,a){e.exports=a.p+"img/ic_link_externo.79098f3e.svg"},"4f6c":function(e,t,a){},5034:function(e,t,a){},"505b":function(e,t,a){"use strict";a("9d59")},5061:function(e,t,a){"use strict";a("6510")},5069:function(e,t,a){},5133:function(e,t,a){e.exports=a.p+"img/backoffice_ativo.b600a549.svg"},"51a7":function(e,t,a){"use strict";a("4c87")},"52a9":function(e,t,a){},"533e":function(e,t,a){"use strict";a("5349")},5349:function(e,t,a){},5365:function(e,t,a){"use strict";a("a762")},5366:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30.707",height:"24.9",viewBox:"0 0 30.707 24.9"}},[t("g",{attrs:{transform:"translate(-728.352 -86.54)"}},[t("path",{staticClass:"a",attrs:{d:"M744.335,110.8c0-1.692.846-2.764,3.1-3.893,2.388-1.2,2.614-1.617,1.6-2.915a3.514,3.514,0,0,1-.62-2.294,3.17,3.17,0,0,0-.32-1.711c-.394-.245-.413-3.291-.018-3.291a.687.687,0,0,1,.488.32,7.512,7.512,0,0,0,2.821.319c3.442,0,3.611.169,3.611,3.573,0,2.181-.113,2.746-.677,3.441-.639.828-.639.865-.075,1.486a9.5,9.5,0,0,0,2.238,1.41c1.73.827,2.576,1.937,2.576,3.385v.808h-7.353c-7.2,0-7.372-.019-7.372-.639Zm-11.9-4.532v-2.99h1.88v4.08h8.763v1.88H732.432Zm-4.08-6.074c0-1.279,1.109-2.52,3.009-3.366,2.05-.9,2.482-1.579,1.655-2.595a3.547,3.547,0,0,1-.6-2.181,4.139,4.139,0,0,0-.47-2.068c-.451-.6-.639-3.028-.263-3.4.113-.113.489.018.865.263a6.439,6.439,0,0,0,3.084.451c2.238,0,2.464.075,2.934.79.714,1.09.526,5.171-.3,6.055-.865.978-.4,1.73,1.824,2.84,1.485.752,2.125,1.278,2.5,2.068,1.015,2.125,1.3,2.05-6.864,2.05h-7.371Zm22.189-7.014-.094-1.956-4.306-.094-4.306-.075v-1.88h10.643v5.961h-.921c-.922,0-.922-.019-1.016-1.956Z",fill:"#5949a7"}})])])},i=[],s=a("2877"),o={},r=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports},"53f1":function(e,t,a){},5457:function(e,t,a){},5498:function(e,t,a){},"553b":function(e,t,a){"use strict";a("5069")},"561a":function(e,t,a){},5623:function(e,t,a){e.exports=a.p+"img/is_acesso_cliente_inativo.ee2a3131.svg"},"564b":function(e,t,a){"use strict";a("7dce")},"566a":function(e,t,a){e.exports=a.p+"img/impaciente.fbe975fa.svg"},"56bd":function(e,t,a){},"56c5":function(e,t,a){e.exports=a.p+"img/calmo.7d6b57f9.svg"},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),i=a("7496"),s=function(){var e=this,t=e._self._c;return t(i["a"],[t("router-view"),e.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")?t("session-modal",{attrs:{show:e.invalidSession},on:{"update:show":function(t){e.invalidSession=t},continue:e.continueSession,close:e.logoutSession}}):e._e()],1)},o=[],r=a("8336"),l=a("b0af"),c=a("99d9"),d=a("169a"),m=a("a797"),u=function(){var e=this,t=e._self._c;return t("div",[t(m["a"],{attrs:{value:e.show,fixed:""}}),t(d["a"],{attrs:{width:"500",persistent:"","hide-overlay":""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(l["a"],{staticClass:"dialog"},[t(c["c"],{staticClass:"card-title"},[t("div",{staticClass:"card-header d-flex justify-center align-center"},[e._v("\n          "+e._s(e.$t("home.session_modal.title"))+"\n        ")])]),t(c["b"],{staticClass:"mt-3 card-body text-center"},[e._v("\n        "+e._s(e.$t("home.session_modal.warning_1"))+"\n        "),t("strong",[e._v(e._s(e.$t("home.session_modal.warning_2")))]),e._v("\n        "+e._s(e.$t("home.session_modal.warning_3"))+"\n      ")]),t(c["a"],{staticClass:"d-flex justify-space-around pb-5"},[t(r["a"],{staticClass:"white--text",attrs:{color:"grey lighten-1",width:"160px"},on:{click:e.close}},[e._v("\n          "+e._s(e.$t("home.session_modal.btn_cancel"))+"\n        ")]),t(r["a"],{staticClass:"white--text",attrs:{color:"primary",width:"160px"},on:{click:e.confirm}},[e._v("\n          "+e._s(e.$t("home.session_modal.btn_continue"))+"\n        ")])],1)],1)],1)],1)},A=[],_={name:"SessionModal",props:{show:Boolean},methods:{confirm(){this.$emit("continue")},close(){this.$emit("close")}}},E=_,I=(a("b174"),a("2877")),h=Object(I["a"])(E,u,A,!1,null,"58949fc5",null),O=h.exports,p={methods:{isFeatureEnabled(e){const t=this.featureFlags;return!!t&&(t.key===e&&!0===t.value)}},computed:{featureFlags(){return this.$store.getters[this.$consts.FEATURE_FLAG_ACTIONS.GET_FEATURE_FLAGS]}}},S=a("bc3a"),C=a.n(S);const T={ENDPOINTS:{COMPANY_MANAGE_SEARCH:"https://api.homolodoc.com.br/manage/company/search",LOGIN:"https://api.homolodoc.com.br/Auth/login",FORGOT_PASSWORD:"https://api.homolodoc.com.br/Account/forgetPassword",SET_NEW_PASSWORD:"https://api.homolodoc.com.br/Account/changePassword",CHECK_CNPJ:"https://api.homolodoc.com.br/data/check",STATUS_ENTITY_LIST:"https://api.homolodoc.com.br/status/entity/list",LIST_PAYERS:"https://api.homolodoc.com.br/Payer/list",LIST_COMPANY:"https://api.homolodoc.com.br/Company/list",GET_COMPANY_BY_DOCUMENT:"https://api.homolodoc.com.br/Company/get/cnpj",GET_PAYER_BY_DOCUMENT:"https://api.homolodoc.com.br/Payer/get/cnpj",UPLOAD_LIVES:"https://api.homolodoc.com.br/User/data/check",GET_COMPANY:"https://api.homolodoc.com.br/Company/get",LIST_STATUS:"https://api.homolodoc.com.br/User/status",ALL_COMPANIES:"https://api.homolodoc.com.br/Company/all",LIST_ROLES:"https://api.homolodoc.com.br/User/role",LIST_ROLES_OPERATION:"https://api.homolodoc.com.br/User/role/operation",LIST_ROLES_DOCTOR:"https://api.homolodoc.com.br/User/role/doctor",LIST_SPECIALTIES:"https://api.homolodoc.com.br/User/speciality",LIST_ACTING:"https://api.homolodoc.com.br/user/occupations",LIST_PROFESSIONAL_COUNCIL:"https://api.homolodoc.com.br/professional/council/list",LIST_DEPARTMENTS:"https://api.homolodoc.com.br/User/department",USER_CREATE:"https://api.homolodoc.com.br/User/create",USER_UPDATE:"https://api.homolodoc.com.br/User/update",GET_TUSS_CODES:"https://api.homolodoc.com.br/tuss/codes",USER_UPDATE_PROFILE:"https://api.homolodoc.com.br/User/update/profile",LIST_USERS:"https://api.homolodoc.com.br/User/list",GET_USER:"https://api.homolodoc.com.br/User/get",GET_USER_TYPES:"https://api.homolodoc.com.br/User/get/types",GET_BLACKLIST:"https://api.homolodoc.com.br/blacklist/get",STREAM_START:"https://api.homolodoc.com.br/stream/start",NEW_CALL_LIST:"https://api.homolodoc.com.br/call/reason/upinsert",ASSET_CREATE:"https://api.homolodoc.com.br/asset/create",LIST_CALL_LIST:"https://api.homolodoc.com.br/call/reason/list",GET_CALL_LIST:"https://api.homolodoc.com.br/call/reason/info",DELETE_CALL_LIST:"https://api.homolodoc.com.br/call/reason/delete",CHECK_DUPLICATED_CPF:"https://api.homolodoc.com.br/User/check",NEW_PAYER:"https://api.homolodoc.com.br/Payer/create",SEARCH_USERS:"https://api.homolodoc.com.br/User/search",GET_PAYER:"https://api.homolodoc.com.br/Payer/get",UPDATE_PAYER:"https://api.homolodoc.com.br/Payer/update",UPLOAD_LIVES_FILE:"https://api.homolodoc.com.br/upload/beneficiary",SEARCH_MEMBERS:"https://api.homolodoc.com.br/Member/search",EXTERNAL_SEARCH_MEMBERS:"https://api.homolodoc.com.br/Member/external/search",DELETE_PAYER:"https://api.homolodoc.com.br/Payer/delete",PROGRAM_LIST:"https://api.homolodoc.com.br/Program/enumerate",COMPANY_CREATE:"https://api.homolodoc.com.br/Company/create",CHECK_UNIQUE_CNPJ:"https://api.homolodoc.com.br/cnpj/check",LIST_GROUPS:"https://api.homolodoc.com.br/CompanyGroup/enumerate",GROUP_UPDATE:"https://api.homolodoc.com.br/CompanyGroup/update",COMPANY_UPDATE:"https://api.homolodoc.com.br/Company/update",COMPANY_ENABLE_TOKEN:"https://api.homolodoc.com.br/Company/enable/token",DOCTOR_ENABLE_TOKEN:"https://api.homolodoc.com.br/doctor/set/token",DOCTOR_GET_TOKEN:"https://api.homolodoc.com.br/doctor/personal/token",GET_MEMBER:"https://api.homolodoc.com.br/attendance/member/get",GROUP_CREATE:"https://api.homolodoc.com.br/CompanyGroup/create",BENEFICIARY_STATUS:"https://api.homolodoc.com.br/upload/beneficiary/status",GET_PROGRAM_BY_COMPANY:"https://api.homolodoc.com.br/Program/getByCompany",GET_PROGRAM_BRICKS:"https://api.homolodoc.com.br/Program/get",GET_PROGRAM_DATA:"https://api.homolodoc.com.br/Program/get/data",GET_PROGRAM_BRICKS_DATA:"https://api.homolodoc.com.br/Program/get/info",GET_CALL_REASONS_COMPANY:"https://api.homolodoc.com.br/program/company/callreasons",GET_PROGRAM_BRICKS_DATA_HISTORY:"https://api.homolodoc.com.br/program/get/info/history",GET_PROGRAM_DETAILS:"https://api.homolodoc.com.br/program/get/details",GET_PROGRAM_SUBSCRIPTION_MODEL:"https://api.homolodoc.com.br/subscription/company/get",LIST_PROGRAMS:"https://api.homolodoc.com.br/program/list",LIST_PROGRAMS_ATTENDANCES_TOTAL:"https://api.homolodoc.com.br/programs/attendances/total",LIST_PROGRAMS_STATUS:"https://api.homolodoc.com.br/program/status/list",GET_SERVICE_TYPES:"https://api.homolodoc.com.br/tiss/service/types",GET_ACCIDENT_INDICATIONS:"https://api.homolodoc.com.br/tiss/service/accident_indication",LIST_PATIENT_GENERAL_STATE:"https://api.homolodoc.com.br/program/emr/general/state",LIST_PATIENT_BREATHING_PATTERN:"https://api.homolodoc.com.br/program/emr/breathing/pattern",SYMPTOM_LIST:"https://api.homolodoc.com.br/brick/symptom/list",GROUPCID_LIST:"https://api.homolodoc.com.br/brick/groupcid/list",CID_LIST:"https://api.homolodoc.com.br/brick/cid/list",CHARGES_LIST:"https://api.homolodoc.com.br/payment/list/charges",CIAP_LIST:"https://api.homolodoc.com.br/brick/ciap/list",BRICK_WALL:"https://api.homolodoc.com.br/brick/get/wall",LIST_REASON_STATUS:"https://api.homolodoc.com.br/call/status",CREATE_REASON_CALL:"https://api.homolodoc.com.br/call/insert",GET_REASON:"https://api.homolodoc.com.br/call/information",UPDATE_REASON_CALL:"https://api.homolodoc.com.br/call/update",CERTSIGN_AUTH:"https://api.homolodoc.com.br/User/pin/auth",DOCUMENT_CREATE:"https://api.homolodoc.com.br/User/document/create",DOCUMENT_CREATE_ASYNC:"https://api.homolodoc.com.br/User/document/async",LIST_REASON_LIST:"https://api.homolodoc.com.br/call/list",CREATE_EMERGENCY_PASS:"https://api.homolodoc.com.br/member/emergency/create",GET_EMERGENCY_PASS:"https://api.homolodoc.com.br/member/emergency/get",SAVE_EMERGENCY_PROGRAM:"https://api.homolodoc.com.br/program/emergency/add",UPDATE_EMERGENCY_PASS:"https://api.homolodoc.com.br/member/emergency/update",CREATE_ASO_PASS:"https://api.homolodoc.com.br/member/aso/create",GET_ASO_PASS:"https://api.homolodoc.com.br/member/aso/get",LIST_ASO_PASS:"https://api.homolodoc.com.br/Company/aso/list",GET_MEMBER_PROGRAMS:"https://api.homolodoc.com.br/program/member/get",GET_MEMBER_CONTACT_TIMES:"https://api.homolodoc.com.br/member/contactTimes",GET_CIVIL_STATES:"https://api.homolodoc.com.br/civilStates",GET_SCHOLARSHIPS:"https://api.homolodoc.com.br/scholarships",GET_DEFICIENCIES:"https://api.homolodoc.com.br/deficiencies",GET_DISABILITY:"https://api.homolodoc.com.br/member/deficiency/get",GET_PATIENT_HISTORIC:"https://api.homolodoc.com.br/case/list/history",GET_PATIENT:"https://api.homolodoc.com.br/patient/get",GET_MEMBER_HEALTH_HISTORY:"https://api.homolodoc.com.br/member/health/profile/get",GET_MEDICAL_CERTIFICATES:"https://api.homolodoc.com.br/member/attest/list",GET_LAST_MEDICAL_CERTIFICATE:"https://api.homolodoc.com.br/member/attest/latest",SAVE_MEMBER_HEALTH_HISTORY:"https://api.homolodoc.com.br/member/health/profile/save",PROFESSIONAL_ATTENDANCE:{LIST:"https://api.homolodoc.com.br/users/online"},CASE_ATTENDANCE:{CREATE:"https://api.homolodoc.com.br/case/create",GET:"https://api.homolodoc.com.br/queue/get/attendance",ADD:"https://api.homolodoc.com.br/case/attendance/add",ADD_MULTIPLE:"https://api.homolodoc.com.br/case/attendances/create",CANCEL:"https://api.homolodoc.com.br/attendance/queues/cancel",ACCEPTED:"https://api.homolodoc.com.br/attendance/queues/accepted",FINISH:"https://api.homolodoc.com.br/case/attendance/finish",NOT_SUCCESS:"https://api.homolodoc.com.br/case/attendance/insuccess",GET_CIDS:"https://api.homolodoc.com.br/program/get/all/cids",GET_CALL_REASON:"https://api.homolodoc.com.br/call/case/attendance/get",ATTEMPT_CALL:"https://api.homolodoc.com.br/attendance/queue/attempt",ATTEMPT_CALL_HISTORY:"https://api.homolodoc.com.br/attendance/get/attempts",REMOVE_ATTENDANCE_BOOKED:"https://api.homolodoc.com.br/case/attendance/remove/book",CANCEL_PROGRAM_ATTENDANCE:"https://api.homolodoc.com.br/program/attendance/cancel",PROGRAM_ATTENDANCE_ADD:"https://api.homolodoc.com.br/program/attendance/add",LIST_HISTORY:"https://api.homolodoc.com.br/case/attendances/list",ATTEND:"https://api.homolodoc.com.br/case/attendance/attend",GET_SKIP_REASONS:"https://api.homolodoc.com.br/skip/reasons",CREATE_SKIP_REASONS:"https://api.homolodoc.com.br/attendance/skip/reason",GET_EXIT_REASONS:"https://api.homolodoc.com.br/exit/reasons",CREATE_EXIT_REASONS:"https://api.homolodoc.com.br/case/attendance/exit-queue"},QUEUE_ENUMERATE:"https://api.homolodoc.com.br/Program/queue/enumerate",GET_ATTENDANCE_STATUS:"https://api.homolodoc.com.br/queue/get/attendance",LIST_USER_ATTENDANCE:"https://vanellope.homolodoc.com.br/user/attendance/search",LIST_USER_EXTERNAL_ATTENDANCE:"https://vanellope.homolodoc.com.br/user/external/attendance/search",LIST_ATTENDANCES:"https://vanellope.homolodoc.com.br/attendance/search",LIST_EXTERNAL_ATTENDANCES:"https://vanellope.homolodoc.com.br/attendance/external/search",LIST_QUEUE_ATTENDANCES:"https://vanellope.homolodoc.com.br/attendance/queues/search",ATTENDANCE_STATUS:"https://api.homolodoc.com.br/case/attendance/status",EVENT_EMIT:"https://api.homolodoc.com.br/socket/emit/event",INTERNAL_EVENT_EMIT:"https://api.homolodoc.com.br/internal/socket/event",CHANGE_ATTENDANCE_STATUS:"https://api.homolodoc.com.br/queue/status/change",TRANSFER_ATTENDANCE:"https://api.homolodoc.com.br/attendance/transfer",GET_CHAT:"https://api.homolodoc.com.br/chat/history",MEMBER_UPDATE:"https://api.homolodoc.com.br/member/update",GET_B2C_COMPANY:"https://api.homolodoc.com.br/Company/get/btc",SEND_SMS:"https://api.homolodoc.com.br/case/attendance/send/sms",SEND_PUSH:"https://api.homolodoc.com.br/case/attendance/send/push",CANCEL_ATTENDANCE:"https://api.homolodoc.com.br/case/attendance/cancel",GET_PAYMENT_STATEMENT:"https://api.homolodoc.com.br/payment/backoffice/statement?transaction_date_init={start_date}&transaction_date_end={finish_date}",LIST_PAYMENT_WITH_ERROR:"https://api.homolodoc.com.br/payment/backoffice/list",TRANSFER_PATIENT:"https://api.homolodoc.com.br/attendance/patient/transfer",GET_MEDICINE_INFO:"https://api.homolodoc.com.br/prescription/medication/search?q={med}",GET_DOSAGE_INFO:"https://api.homolodoc.com.br/prescription/dosage/structure",GET_CASE_ATTENDANCE_SCREENING:"https://api.homolodoc.com.br/case/attendance/screening",GET_WHATSAPP_HISTORY:"https://api.homolodoc.com.br/case/get/history/whatsapp",SEND_WHATSAPP:"https://api.homolodoc.com.br/case/send/whatsapp",CERTIFICATION_AUTH_CHECK:"https://api.homolodoc.com.br/certification/auth/check",LIST_FLAVOUR:"https://api.homolodoc.com.br/flavour/list",SET_DOCTOR_STREAM_CONNECTED:"https://api.homolodoc.com.br/stream/patient/update",CASE_ATTENDANCE_PRESCRIPTION_INIT:"https://api.homolodoc.com.br/case/attendance/prescription/init",CASE_ATTENDANCE_PRESCRIPTION_CLOSE:"https://api.homolodoc.com.br/case/attendance/prescription/close",CASE_ATTENDANCE_CANCEL_REASONS:"https://api.homolodoc.com.br/case/attedance/cancel/reasons",CASE_ATTENDANCES_NEWEST_PATIENT:"https://api.homolodoc.com.br/case/attendaces/newest/patient",CASE_LATERCOMER_CASE:"https://api.homolodoc.com.br/case/latercomer/case",CASE_ATTENDANCE_CHANGE_URGENCY:"https://api.homolodoc.com.br/attendance/change/urgency",ATTENDANCES_PROCCESS_CREATE:"https://api.homolodoc.com.br/attendances/proccess/create",CANCEL_CERTIFICATION_ATTENDANCE_RETURN_STEP:"https://api.homolodoc.com.br/cases/attendances/cancel-certification-return-step",SERVICE_QUEUE_HEADERS_GET:"https://api.homolodoc.com.br/service/queue/headers/get",SERVICE_QUEUE_HEADERS_GET_LEGACY:"https://api.homolodoc.com.br/service/queue/headers/get/legacy",TRANSFER_USER_LIST:"https://api.homolodoc.com.br/user/transfer/list",TRANSFER_USER_UPDATE:"https://api.homolodoc.com.br/case/attendance/user/transfer",VANELLOPE:{LIST_ATTENDANCES:"https://vanellope.homolodoc.com.br/attendance/search",LIST_USER_ATTENDANCE:"https://vanellope.homolodoc.com.br/user/attendance/search",LIST_QUEUE_ATTENDANCES:"https://vanellope.homolodoc.com.br/attendance/queues/search",LIST_EXTERNAL_ATTENDANCES:"https://vanellope.homolodoc.com.br/attendance/external/search",LIST_USER_EXTERNAL_ATTENDANCE:"https://vanellope.homolodoc.com.br/user/external/attendance/search",LIST_PENDING_DOCUMENTS:"https://vanellope.homolodoc.com.br/attendance/pending/documents/search",GET_ATTENDANCES_STATUS:"https://vanellope.homolodoc.com.br/attendance/status",GET_USER_ATTENDANCE_STATUS:"https://vanellope.homolodoc.com.br/user/attendance/status",GET_QUEUE_ATTENDANCES_STATUS:"https://vanellope.homolodoc.com.br/attendance/queues/status",GET_EXTERNAL_ATTENDANCES_STATUS:"https://vanellope.homolodoc.com.br/attendance/external/status",GET_USER_EXTERNAL_ATTENDANCE_STATUS:"https://vanellope.homolodoc.com.br/user/external/attendance/status",LIST_QUEUE_ATTENDANCES_V2:"https://vanellope.homolodoc.com.br/v2/attendance/queues/search",GET_ATTENDANCE_NEXT_STATUS:"https://vanellope.homolodoc.com.br/attendance/next/status",GET_ATTENDANCE_NEXT:"https://vanellope.homolodoc.com.br/attendance/next/attendance",ATTENDANCE_SCHEDULE_WARN:"https://vanellope.homolodoc.com.br/attendance/schedule/warn"},VOUCHERS:{COMPANY_VOUCHER_CREATE:"https://api.homolodoc.com.br/company/voucher/create",CHANGE_VOUCHER_CONFIG:"https://api.homolodoc.com.br/change/voucher/config",CHANGE_VOUCHER_STATUS:"https://api.homolodoc.com.br/change/voucher/status",GET_CASE_PRICE:"https://api.homolodoc.com.br/case/price",GET_VOUCHER_AVAILABLE:"https://api.homolodoc.com.br/get/voucher/available",GET_DISCOUNT_TYPE:"https://api.homolodoc.com.br/get/discount/type",GET_MEMBER_VOUCHERS:"https://api.homolodoc.com.br/member/get/vouchers",GET_MEMBER_VOUCHERS_VIVO:"https://api.homolodoc.com.br/voucher/list",GET_MEMBER_VOUCHERS_VIVO_VOUCHER_COUNT:"https://api.homolodoc.com.br/voucher/count",GET_MEMBER_VOUCHERS_BY_PROGRAM:"https://api.homolodoc.com.br/voucher/countByProgram",VOUCHER_EXISTENCE_CHECK:"https://api.homolodoc.com.br/voucher/existence/check",VOUCHER_DISCOUNT_TYPE_GET:"https://api.homolodoc.com.br/voucher/discount_type/get",VOUCHER_CREATE:"https://api.homolodoc.com.br/voucher/create",VOUCHER_UPDATE:"https://api.homolodoc.com.br/voucher/update",LIST:"https://api.homolodoc.com.br/voucher/list",STATUS_LIST:"https://api.homolodoc.com.br/voucher/status/list",USER_LIST:"https://api.homolodoc.com.br/voucher/users/list",UPDATE:"https://api.homolodoc.com.br/voucher/update"},ATTENDANCE_CENTER:{GET:"https://api.homolodoc.com.br/attendancecenter/get",LIST:"https://api.homolodoc.com.br/attendancecenter/list",UPSERT:"https://api.homolodoc.com.br/attendancecenter/upsert"},SCHEDULE_EXTERNAL_AGENT:{LIST:"https://api.homolodoc.com.br/user/agent/list",GET:"https://api.homolodoc.com.br/user/agent/get",CREATE:"https://api.homolodoc.com.br/user/agent/create",UPDATE:"https://api.homolodoc.com.br/user/agent/update",ROLES:"https://api.homolodoc.com.br/User/role/agents"},SCHEDULE:{USER_LIST:"https://api.homolodoc.com.br/schedule/user/list",USER_SLOTS:"https://api.homolodoc.com.br/schedule/user/slots",COMPANY_LIST:"https://api.homolodoc.com.br/schedule/company/list",ATENDANCE_CENTER_LIST:"https://api.homolodoc.com.br/schedule/attendance/center/list",USER_CENTER_SCHEDULE_LIST:"https://api.homolodoc.com.br/schedule/user/center/list",USER_COMPANY_SCHEDULE_LIST:"https://api.homolodoc.com.br/schedule/user/company/list",USER_GET:"https://api.homolodoc.com.br/schedule/user/get",USER_SAVE:"https://api.homolodoc.com.br/schedule/user/save",WEEKDAYS:"https://api.homolodoc.com.br/schedule/weekdays",SET_PRESENCE:"https://api.homolodoc.com.br/user/schedule/set/presence",GET_CANCEL_REASONS:"https://api.homolodoc.com.br/user/schedule/cancel/reason",VERIFY_USER_SCHEDULE_AVAILABILITY:"https://api.homolodoc.com.br/user/schedule/availability",SCHEDULE_ROLE_SLOTS_WEEKLY:"https://api.homolodoc.com.br/schedule/role/slots/weekly",SCHEDULES_VERIFY_SCHEDULER:"https://api.homolodoc.com.br/schedules/verify/scheduler",RESCHEDULES_BOOKED_CASE_ATTENDANCE:"https://api.homolodoc.com.br/case/attendance/booked/reschedule",RESCHEDULES_CASE_ATTENDANCE:"https://api.homolodoc.com.br/case/attendance/reSchedule",ATTENDANCE_PENDING:"https://api.homolodoc.com.br/schedule/attendance/pending",SCHEDULE_ATTENDANCE_IDENTIFIERS:"https://api.homolodoc.com.br/schedule/attendance/identifier/get",SCHEDULE_SLOTS:"https://api.homolodoc.com.br/schedule/slots",CHECK_DOUBLE_BOOKING:"https://api.homolodoc.com.br/check/doublebooking"},CHECK_ELIGIBILITY_SAO_CAETANO:"https://api.homolodoc.com.br/member/eligibility/scs",GET_ATTENDANCE_CLASSIFICATIONS:"https://api.homolodoc.com.br/attendance/urgencies",GET_ATTENDANCE_PRIORITIES:"https://api.homolodoc.com.br/attendance/priorities",GET_NURSE_HOURS:"https://api.homolodoc.com.br/attendance/nurse/hours",GET_ATT_CHANGE_TIMESTAMP:"https://api.homolodoc.com.br/queue/get/attendance/start_at",DYNAMIC_FIELD:{DROPDOWN:"https://api.homolodoc.com.br/dynamic_field/dropdown"},QUESTION:{GET:"https://api.homolodoc.com.br/questions/get"},IMC_CALCULATE:"https://api.homolodoc.com.br/imc/calculate",NUTRI:{GET_QUESTIONS:"https://api.homolodoc.com.br/questions/get",GET_RISK_RATING:"https://api.homolodoc.com.br/risk/calculate",GET_SPORT_RISK_RATING:"https://api.homolodoc.com.br/sport/risk/calculate"},GET_FREQUENCY_TIME_PERIOD:"https://api.homolodoc.com.br/frequency/time/period",FILTERED_DISEASES_LIST:"https://api.homolodoc.com.br/diseases/list",REGISTRATION_COOE:{LIST:"https://api.homolodoc.com.br/registration-code/list"},GET_SETTINGS:"https://api.homolodoc.com.br/get/settings",ENTITY:{CREATE:"https://api.homolodoc.com.br/entity/create",UPDATE:"https://api.homolodoc.com.br/entity/update",SEARCH:"https://api.homolodoc.com.br/entity/search"},STATE:{LIST:"https://api.homolodoc.com.br/state/list"},GET_THEMES:"https://api.homolodoc.com.br/themes",DIGITAL_CERTIFICATION:{USER_PIN_AUTH:"https://api.homolodoc.com.br/User/pin/auth",USER_TOKEN_CHECK:"https://api.homolodoc.com.br/user/token/check",USER_TOKEN_REMOVE:"https://api.homolodoc.com.br/user/token/remove"},SESSIONS:{SESSION_CREATE:"https://api.homolodoc.com.br/session/create",SESSION_CHECK:"https://api.homolodoc.com.br/session/check",SESSION_LOGOUT:"https://api.homolodoc.com.br/session/logout",SESSION_FORCE_LOGOUT:"https://api.homolodoc.com.br/session/force-logout"}},GENERAL_ACTIONS:{GET_ALL_CLASSIFICATIONS:"Data/General/getAllClassifications",GET_CLASSIFICATIONS:"Data/General/getClassifications",SET_CLASSIFICATIONS:"Data/General/setClassifications",SET_MINIMUMAGEPSYCHOLOGIST:"Data/General/setMinimumAgePsychologist",GET_PRIORITIES:"Data/General/getPriorities",SET_PRIORITIES:"Data/General/setPriorities",GET_CONTACT_TIMES:"Data/General/getContactTimes",SET_CONTACT_TIMES:"Data/General/setContactTimes",GET_CIVIL_STATES:"Data/General/getCivilStates",SET_CIVIL_STATES:"Data/General/setCivilStates",GET_SCHOLARSHIPS:"Data/General/getScholarships",SET_SCHOLARSHIPS:"Data/General/setScholarships",GET_DEFICIENCIES:"Data/General/getDeficiencies",SET_DEFICIENCIES:"Data/General/setDeficiencies",GET_DISABILITY:"Data/General/getDisability",SET_DISABILITY:"Data/General/setDisability",GET_SCHEDULE_ATTENDANCE_IDENTIFIERS:"Data/General/getScheduleAttendanceIdentifiers",SET_SCHEDULE_ATTENDANCE_IDENTIFIERS:"Data/General/setScheduleAttendanceIdentifiers",GET_NUMBER_OF_ATTENDANCES:"Data/General/getNumberOfAttendances",SET_NUMBER_OF_ATTENDANCES:"Data/General/setNumberOfAttendances",GET_LAST_ATTENDANCE_OWNER:"Data/General/getLastAttendanceOwner",SET_LAST_ATTENDANCE_OWNER:"Data/General/setLastAttendanceOwner"},VANELLOPE_ACTIONS:{GET_ATTENDANCES_STATUS:"Data/Vanellope/getAttendanceStatus",SET_ATTENDANCES_STATUS:"Data/Vanellope/setAttendanceStatus",GET_USER_ATTENDANCE_STATUS:"Data/Vanellope/getUserAttendanceStatus",SET_USER_ATTENDANCE_STATUS:"Data/Vanellope/setUserAttendanceStatus",GET_QUEUE_ATTENDANCES_STATUS:"Data/Vanellope/getAttendancesInQueueStatus",SET_QUEUE_ATTENDANCES_STATUS:"Data/Vanellope/setAttendancesInQueueStatus",GET_EXTERNAL_ATTENDANCES_STATUS:"Data/Vanellope/getExternalAttendanceStatus",SET_EXTERNAL_ATTENDANCES_STATUS:"Data/Vanellope/setExternalAttendanceStatus",GET_USER_EXTERNAL_ATTENDANCE_STATUS:"Data/Vanellope/getUserExternalAttendanceStatus",SET_USER_EXTERNAL_ATTENDANCE_STATUS:"Data/Vanellope/setUserExternalAttendanceStatus"},TRANSFER_ATTENDANCE_ACTIONS:{ADD_TRANSFER_INFORMATION:"Data/TransferAttendance/addTransferInformation",CLEAR_TRANSFER_INFORMATION:"Data/TransferAttendance/clearTransferInformation",DELETE_TRANSFER_INFORMATION:"Data/TransferAttendance/deleteTransferInformation"},FEATURE_FLAG_ACTIONS:{ADD_FEATURE_FLAG:"Data/FeatureFlag/addFeatureFlag",GET_FEATURE_FLAGS:"Data/FeatureFlag/getFeatureFlags",CLEAR_FEATURE_FLAGS:"Data/FeatureFlag/clearFeatureFlags"},PREFERENCES_ACTIONS:{ADD_PREFERENCE:"Data/Preferences/addPreference",CLEAR_PREFERENCE:"Data/FeatureFlag/clearPreference"},NUTRI:{GET_QUESTIONS:"Data/Nutri/getProgramQuestions",SET_ANSWER:"Data/Nutri/setAnswer",GET_RISK_RATING:"Data/Nutri/getRiskRating",GET_SPORT_RISK_RATING:"Data/Nutri/getSportRiskRating",SET_RISK:"Data/Nutri/setRisk",CLEAR:"Data/Nutri/clear"},USER_ACTIONS:{SET_TOKEN:"Data/User/setToken",SET_INFO:"Data/User/setInfo",CHECK_INACTIVITY:"Data/User/checkInactivity",REMEMBER_ME:"Data/User/rememberMe",GET_COMPANY_LOGO:"Data/User/getCompanyLogo",STREAM_START:"Data/User/streamStart",NEW_CALL_LIST:"Data/User/newCallList",ASSET_CREATE:"Data/User/assetCreate",LIST_CALL_LIST:"Data/User/listCallList",GET_CALL_LIST:"Data/User/getCallList",DELETE_CALL_LIST:"Data/User/deleteCallList",NEW_PAYER:"Data/User/newPayer",SEARCH_USERS:"Data/User/userSearch",GET_PAYER:"Data/User/getPayer",UPDATE_PAYER:"Data/User/updatePayer",DELETE_PAYER:"Data/User/deletePayer",PROGRAM_LIST:"Data/User/listPrograms",COMPANY_CREATE:"Data/User/createCompany",CHECK_UNIQUE_CNPJ:"Data/User/checkUniqueCnpj",GROUP_CREATE:"Data/User/createGroup",GROUP_UPDATE:"Data/User/updateGroup",COMPANY_UPDATE:"Data/User/updateCompany",GET_MEMBER:"Data/User/getMember",BENEFICIARY_STATUS:"Data/User/beneficiaryStatus",GET_PROGRAM_BY_COMPANY:"Data/User/getProgramByCompany",GET_PROGRAM_BRICKS:"Data/User/getProgramBricks",GET_PROGRAM_DATA:"Data/User/getProgramData",GET_PROGRAM_BRICKS_DATA:"Data/User/getProgramBricksData",GET_CALL_REASONS_COMPANY:"Data/User/getCallReasonsCompany",LIST_PATIENT_GENERAL_STATE:"Data/User/listPatientGeneralState",LIST_PATIENT_BREATHING_PATTERN:"Data/User/listPatientBreathingPattern",SYMPTOM_LIST:"Data/User/symptomList",GROUPCID_LIST:"Data/User/groupCidList",BRICK_WALL:"Data/User/brickWall",CID_LIST:"Data/User/cidList",CIAP_LIST:"Data/User/ciapList",LIST_REASON_STATUS:"Data/User/listReasonStatus",CREATE_REASON_CALL:"Data/User/createReasonCall",GET_REASON:"Data/User/getReasonCall",UPDATE_REASON_CALL:"Data/User/updateReasonCall",CERTSIGN_AUTH:"Data/User/certsignAuth",DOCUMENT_CREATE:"Data/User/documentCertify",LIST_REASON_LIST:"Data/User/listReasonList",CREATE_EMERGENCY_PASS:"Data/User/createEmergencyPass",GET_EMERGENCY_PASS:"Data/User/getEmergencyPassData",SAVE_EMERGENCY_PROGRAM:"Data/User/saveEmergencyProgram",UPDATE_EMERGENCY_PASS:"Data/User/updateEmergencyPass",CREATE_ASO_PASS:"Data/User/createAsoPass",GET_ASO_PASS:"Data/User/getAsoPass",LIST_ASO_PASS:"Data/User/listAsoByCompany",QUEUE_ENUMERATE:"Data/User/queueEnumerate",UPDATE:"Data/User/update",CHECK_CERTIFICATION_AUTH:"Data/User/certificationAuthCheck",LIST_FLAVOUR:"Data/User/listflavour",GET_MEMBER_HEALTH_HISTORY:"Data/User/getMemberHealthHistory",SAVE_MEMBER_HEALTH_HISTORY:"Data/User/saveMemberHealthHistory",SET_DOCTOR_STREAM_CONNECTED:"Data/User/setDoctorStreamConnected",GET_THEMES:"Data/User/getThemes",TRANSFER_USER_LIST:"Data/User/getTransferUserList",TRANSFER_USER_UPDATE:"Data/User/updateTransferUser"},BRICKS_ACTIONS:{TRIAGEM_ENFERMAGEM_ACTIONS:{SET_PREGNANT:"Data/Bricks/Triagem_enfermagem/setPregnant",SET_TRIAGEM:"Data/Bricks/Triagem_enfermagem/setTriagem",CLEAR_TRIAGEM:"Data/Bricks/Triagem_enfermagem/clearTriage"},CALL_REASONS_ACTIONS:{SET_CALL_REASONS:"Data/Bricks/CallReasons/setCallReasons",SET_SELECTED_CALL_REASONS:"Data/Bricks/CallReason/setSelectedCallReasons",UNSET_SELECTED_CALL_REASONS:"Data/Bricks/CallReason/unsetSelectedCallReasons",UNSET_ALL_SELECTED_CALL_REASONS:"Data/Bricks/CallReason/unsetAllSelectedCallReasons"},PROGRAM_ACTIONS:{SET_PROGRAM:"Data/Bricks/Programs/setProgram",SET_SELECTED_PROGRAM:"Data/Bricks/Programs/setSelectedProgram",UPDATE_SELECTED_PROGRAM:"Data/Bricks/Programs/updateSelectedProgram",UNSET_SELECTED_PROGRAM:"Data/Bricks/Programs/unsetSelectedProgram",UNSET_SELECTED_PROGRAMS:"Data/Bricks/Programs/unsetAll"},ATTENDANCE_BRICKS_ACTIONS:{SET_BRICK:"Data/Bricks/AttendanceBricks/setBrick",CLEAR_BRICK:"Data/Bricks/AttendanceBricks/clearBricks",REMOVE_BRICK:"Data/Bricks/AttendanceBricks/removeBrick"}},CASE_ATTENDANCE_ACTIONS:{CREATE:"Data/CaseAttendance/create",GET:"Data/CaseAttendance/get",ADD:"Data/CaseAttendance/add",FINISH:"Data/CaseAttendance/finish",CANCEL:"Data/CaseAttendance/cancel",ACCEPTED:"Data/CaseAttendance/accepted",SET:"Data/CaseAttendance/set",SET_IS_UNIMED_SOL:"Data/CaseAttendance/setIsUnimedSol",GET_CIDS:"Data/CaseAttendance/getCids",SET_HISTORY_MODE:"Data/CaseAttendance/setHistoryMode",NOT_SUCCESS:"Data/CaseAttendance/setNotSuccess",GET_CALL_REASON:"Data/CaseAttendance/getCallReason",ATTEMPT_CALL:"Data/CaseAttendance/attemptCall",ATTEMPT_CALL_HISTORY:"Data/CaseAttendance/attemptCallHistory",TRANSFER_PATIENT:"Data/CaseAttendance/transferPatient",SET_EMERGENCY_MEMBER:"Data/CaseAttendance/setEmergencyMember",GET_CASE_ATTENDANCE_SCREENING:"Data/CaseAttendance/getScreening",GET_WHATSAPP_HISTORY:"Data/CaseAttendance/getWhatsappHistory",SEND_WHATSAPP:"Data/CaseAttendance/sendWhatsapp",SET_SELECTED_STEP:"Data/CaseAttendance/setSeletedStep",CLEAR:"Data/CaseAttendance/clear",GET_CASE_ATTENDANCE_CANCEL_REASONS:"Data/CaseAttendance/getCaseAttendanceCancelReasons",REMOVE_ATTENDANCE_BOOKED:"Data/CaseAttendance/removeAttendanceBooked",CANCEL_PROGRAM_ATTENDANCE:"Data/CaseAttendance/cancelProgramAttendance",PROGRAM_ATTENDANCE_ADD:"Data/CaseAttendance/programAttendanceAdd",FILTERED_DISEASES_LIST:"Data/CaseAttendance/filteredDiseasesList",SET_DATETIME_START_ATTENDANCE:"Data/CaseAttendance/setDatetimeStartAttendance",ATTEND:"Data/CaseAttendance/attend",SET_HEADERS:"Data/CaseAttendance/setHeaders"},USERS_AVAILABILITY_ACTIONS:{SET:"Data/UsersAvailability/setInformation",DELETE:"Data/UsersAvailability/removeInformation"},PATIENT_ACTIONS:{SET:"Data/Patient/setPatient",SET_VOUCHERS:"Data/Patient/setPatientVouchers",SET_COMPANY:"Data/Patient/setPatientCompany",GET_PATIENT:"Data/Patient/getPatientInfo",GET_VOUCHERS:"Data/Patient/getPatientVouchers"},SCREENING_ACTIONS:{SET:"Data/Screening/setCompanyScreening",CLEAR:"Data/Screening/clearCompanyScreening"},SCREENING_REASONS_ACTIONS:{SET:"Data/Screening/setCompanyCallReasons",CLEAR:"Data/Screening/clearCompanyCallReasons"},COMPANY_ACTIONS:{SET:"Data/Company/setCompany",SET_GROUPS:"Data/Company/setGroups",SET_COMPANY_VOUCHERS:"Data/Company/setCompanyVouchers",CHANGE_FLAVOUR:"Data/Company/changeFlavour",CHANGE_FLAVOUR_INHERITANCE:"Data/Company/changeFlavourInheritance",CHANGE_NICK_NAME:"Data/Company/changeNickName"},QUEUE_ACTIONS:{SET_INCOMING_QUEUE:"Data/Queue/setIncomingQueue",CLEAR_INCOMING_QUEUE:"Data/Queue/clearIncomingQueue"},ATTENDANCE_HEADER_TYPES:{CLASSIFICATION:"classification",COMPANY_NAME:"company_name",PATIENT_NAME:"patient_name",DOCTOR_NAME:"doctor_name",CASE_ID:"case_id",CASE_ATTENDANCE_ID:"case_attendance_id",ATTEMPS_NUMBER:"attemps_number",ATTEMPT_NUMBER:"attempt_number",SLA:"sla",CONTACT_TIME:"contact_time",STATUS:"status",ATTENDANT_NAME:"attendant_name",REQUEST:"request",SCHEDULE:"schedule",ORIGIN:"origin",IS_SCHEDULE:"is_schedule",ACTION:"action"},QUEUE_ATTENDANCE_STATUS:{OPENED:1,TRANSFERRED_CASE:2,RECEIVED_TRANSFERRED_CASE:3,ATTENDED:4,ENDED:5,REOPENED:6,CREATED_NEW_CASE:7,EMERGENCY:8,ASO:9,B2C_OMV:10,B2C_OMA:11,ATTENDING:12,RESERVED:13,PATIENT_CANCELED:14,ATTENDANT_CANCELED:15,DOCTOR_PENDING:22,SCHEDULE_PENDING:24,PROCESSING_PAYMENT:25,GENERATING_DOCUMENTS:26,CERTIFICATION_PENDING:29},CASE_ATTENDANCE_CANCEL_REASON_STATUS:{PATIENT_DID_NOT_COME_TO_ATTENDANCE:1},CHANNEL_SOCKET_PREFIX:"tdoc_",SOCKET_EVENTS:{RESERVED_ATTENDANCE:"reserved_attendance",START_STREAM:"start_stream",FINISH_STREAM:"finish_stream",ACCEPTED_ATTENDANCE:"accepted_attendance",REJECTED_ATTENDANCE:"rejected_attendance",CANCELED_ATTENDANCE:"canceled_attendance",ATTENDANCE_LOCKED:"attendance_locked",ATTENDANCE_UNLOCKED:"attendance_unlocked"},SMS_TEMPLATES:{DOCTOR_FOUND:"attendance_doctor_found",STREAM_START:"attendance_stream_start",ATTENDANCE_CANCELED:"attendance_stream_cancelled",ATTENDANCE_REMINDER:"attendance_stream_warning",WARNING_AVAILABLE_PLAN:"warning_available_plan",WARNING_AVAILABLE_SPORTS_PLAN:"available_sports_plan",PROFESSIONAL_WAITING:"professional_waiting"},SETTINGS:{LISTTIMEOUT:18e4,EXTENDEDLISTTIMEOUT:3e5,MYLISTTIMEOUT:3e7,SOCKETTIMEOUT:3e5,ONLINEINTERVAL:3e5,AWAYINTERVAL:6e5,LISTTIMEOUTSPECIAL:3e5},SOCKET_STATUS:{ONLINE:"online",ATTENDING:"attending",AWAY:"away",OFFLINE:"offline"},SCHEDULE_CLICK_ACTIONS:{EDIT_EVENT:"EDIT_EVENT"},USER_ROLE_IDS:{ENFERMEIRA:1,MEDICO:2,NUTRICIONISTA:3,PERSONAL_TRAINER:4,ADMINISTRADOR:9,GERENTE_OPERACOES:20,LIDER_EQUIPE:21,COACH_ESPORTIVO:23,SUP_PROGRAM_SAUDE:24,SUP_TRIAGEM:25,TEC_ENFERMAGEM:26,PEDIATRA:39,CLINICO_GERAL:40,PSICOLOGO:41,GERENTE_PSICOLOGO:42,NUTRICIONISTA_RESTRITO:52,PERSONAL_TRAINER_RESTRITO:53,ENFERMEIRA_TUW:49,PSICOLOGO_RESTRITO:60,ENFERMAGEM_RECEPTIVA:49,NUTRICIONISTA_COMPLETO:72,ENFERMEIRO_OBSTRETA_RESTRITO:51,ENFERMEIRA_ATIVA_COMPLETO:80,TECNICO_ENFERMAGEM_RESTRITO:47,TECNICO_ENFERMAGEM_COMPLETO:77,PERSONAL_TRAINER_COMPLETO:71,ENFERMEIRA_ATIVO_RESTRITO:44,PSICOLOGO_COMPLETO:76,ENFERMEIRO_OBSTRETA_COMPLETO:74,SUPERVISOR_TUW:50,PSICOLOGO_TUTOR:61,GERENTE_PSICOLOGIA:62,MEDICO_RESTRITO:57,MEDICO_COMPLETO:75,MEDICO_SUPERVISOR:29,SUPERVISAO_MEDICO:58,DIRETOR_CLINICO:27},TELADOC_SPECIALITY_IDS:{PEDIATRA:55,PSICOLOGO:57,NUTRICIONISTA:59,COACH_ESPORTIVO:61,CLINICO_GERAL:63},TELADOC_ATTENDANCE_CENTER_IDS_BY_ROLE_ID:{3:10003,4:10004,40:1e4,41:10001},SPECIALITY_BY_PROGRAM:{"Psicologia por V
s\n            "+e._s(this.$moment(e.lastUpdateTimeStamp).format("HH:mm"))+"\n          ")]),t("span",{staticClass:"ml-2",on:{click:e.restartQueue}},[t("img",{staticClass:"ic-restart",attrs:{src:a("b318")}})])]):e._e(),"Tabs"==e.page?t("Tabs"):"Controls"==e.page?t("Controls"):"Coupons"==e.page?t("Coupons"):"Schedule"==e.page?t("Schedule"):e._e()],1),t("DigitalCertification")],1)])},X=[],z=a("a722"),ee=a("e449"),te=a("71d9"),ae=a("2a7f"),ne=function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu-container"},[t(te["a"],{attrs:{flat:"","min-height":"100%","max-width":"75px"}},[t(ae["a"],[t(z["a"],{staticClass:"items-top",attrs:{column:""}},[t("div",{staticClass:"sidemenu-logo"},[t("img",{staticClass:"sidebar-icons",attrs:{src:a("1771")("./"+e.companyLogo)}})]),e._l(e.items,(function(n){return n.hasAccess?t(r["a"],{key:n.name,staticClass:"btns",class:{"selected-menu-item":e.selectedItem==n.name},attrs:{text:""},on:{click:function(t){return e.menuItemClick(n.name)}}},[t("img",{staticClass:"sidebar-icons",attrs:{src:a("1771")("./"+n.icon)}}),t("span",{staticClass:"white--text texts"},[e._v(e._s(n.text))])]):e._e()}))],2),t(z["a"],{staticClass:"items-bottom",attrs:{column:""}},[t(ee["a"],{attrs:{"offset-x":"","nudge-right":"3px","nudge-top":"30px","allow-overflow":""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[t(r["a"],e._g({staticClass:"btns mb-4",attrs:{text:""}},n),[t("img",{staticClass:"sidebar-icons",attrs:{src:a("66f2")}}),t("span",{staticClass:"white--text texts"},[e._v(e._s(e.$t("sidebar_menu.profile")))]),t("span",{staticClass:"white--text texts"},[e._v(" "+e._s(e.version))])])]}}])},[t("div",{staticClass:"modal"},[t("div",{staticClass:"options"},[t(r["a"],{staticClass:"ml-3 mb-4",attrs:{text:"",color:"white",width:"131px"},on:{click:function(t){return e.openProfile()}}},[t("img",{attrs:{src:a("6c4b")}}),t("span",{staticClass:"pl-2 option"},[e._v(e._s(e.$t("sidebar_menu.my_data")))])]),t(r["a"],{staticClass:"logout-btn ml-3",attrs:{text:"",color:"white",width:"131px"},on:{click:function(t){return e.$bus.emit("logout")}}},[t("div",{staticClass:"icon"},[t("img",{attrs:{src:a("01c9")}})]),t("span",{staticClass:"option"},[e._v(e._s(e.$t("sidebar_menu.logout")))])])],1)])])],1)],1)],1),t("Profile"),t("InactivityKickModal"),t("CaseAttendanceSkipReasonSuccessModal")],1)},ie=[],se=a("c6a6"),oe=a("62ad"),re=a("4bd4"),le=a("adda"),ce=a("0fd9"),de=a("8654"),me=function(){var e=this,t=e._self._c;return t("div",{staticClass:"profile-page"},[t(d["a"],{attrs:{"max-width":"1167px"},model:{value:e.profileDialog,callback:function(t){e.profileDialog=t},expression:"profileDialog"}},[t(l["a"],{staticClass:"card-section",model:{value:e.userData,callback:function(t){e.userData=t},expression:"userData"}},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("profile.title")))]),t("div",{staticClass:"mb-3"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(re["a"],{staticClass:"pa-10"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"icon-section text-center"},[t(le["a"],{staticClass:"profile-placeholder",attrs:{src:e.preview||a("1c35"),loading:e.loading}}),t("div",{staticClass:"profile-buttons justify-center mb-4 mt-2"},[e.path?t(r["a"],{staticClass:"mr-3",attrs:{color:"red",text:""},on:{click:function(t){return e.removePhoto()}}},[t("span",{staticClass:"image-btns"},[e._v(e._s(e.$t("profile.remove")))])]):e._e(),t(r["a"],{attrs:{color:"blue",text:""},on:{click:function(t){return e.$refs.upload.click()}}},[t("span",{staticClass:"image-btns"},[e._v(e._s(e.$t("profile.add")))])]),t("input",{ref:"upload",attrs:{accept:"image/x-png, image/gif, image/jpeg, image/jpg",type:"file",id:"image",hidden:""},on:{change:function(t){return e.uploadImage()}}})],1)],1)])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("profile.name"),loading:e.loadingUser,height:"37px",outlined:"",disabled:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("profile.email"),loading:e.loadingUser,height:"37px",outlined:"",disabled:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{label:e.$t("profile.role"),loading:e.loadingUser,height:"37px",outlined:"",disabled:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{label:e.$t("profile.specialty"),loading:e.loadingUser,height:"37px",outlined:"",disabled:""},model:{value:e.specialty,callback:function(t){e.specialty=t},expression:"specialty"}})],1),e.apm?e._e():t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("profile.department"),loading:e.loadingUser,height:"37px",outlined:"",disabled:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1)],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],attrs:{label:e.$t("profile.phone"),"error-messages":e.phoneErrors,loading:e.loadingUser,height:"37px",outlined:""},on:{blur:function(t){return e.$v.phone.$touch()}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],attrs:{label:e.$t("profile.phone_mobile"),"error-messages":e.phoneMobileErrors,loading:e.loadingUser,height:"37px",outlined:""},on:{blur:function(t){return e.$v.phoneMobile.$touch()}},model:{value:e.phoneMobile,callback:function(t){e.phoneMobile=t},expression:"phoneMobile"}})],1),t(oe["a"],{attrs:{cols:"12",md:e.tokens.length>0?5:6}},[t(de["a"],{attrs:{label:e.$t("profile.about_me"),loading:e.loadingUser,height:"37px",outlined:""},model:{value:e.aboutMe,callback:function(t){e.aboutMe=t},expression:"aboutMe"}})],1),e.tokens.length>0?t(oe["a"],{attrs:{cols:"12",md:"1"}},[e.tokens.length>0?t(r["a"],{staticClass:"white--text",staticStyle:{width:"70px"},attrs:{color:"primary"},on:{click:e.toggleTokenModal}},[e._v("\n              "+e._s(e.$t("profile.tokens"))+"\n            ")]):e._e()],1):e._e()],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("profile.graduation.name"),"error-messages":e.graduationNameErrors,loading:e.loadingUser,height:"37px",outlined:""},on:{blur:function(t){return e.$v.graduationName.$touch()}},model:{value:e.graduationName,callback:function(t){e.graduationName=t},expression:"graduationName"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("profile.graduation.institution"),"error-messages":e.graduationInstitutionErrors,loading:e.loadingUser,height:"37px",outlined:""},on:{blur:function(t){return e.$v.graduationInstitution.$touch()}},model:{value:e.graduationInstitution,callback:function(t){e.graduationInstitution=t},expression:"graduationInstitution"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(se["a"],{attrs:{label:e.$t("profile.graduation.institution_state"),items:e.statesList,"error-messages":e.graduationInstitutionStateErrors,loading:e.loadingUser,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"37px",outlined:""},on:{blur:function(t){return e.$v.graduationInstitutionState.$touch()}},model:{value:e.graduationInstitutionState,callback:function(t){e.graduationInstitutionState=t},expression:"graduationInstitutionState"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(se["a"],{attrs:{label:e.$t("profile.graduation.registration_code_id"),items:e.councilList,disabled:!e.isAdmin,"item-text":"name","item-value":"id",height:"37px",outlined:""},model:{value:e.graduationregistrationCodeId,callback:function(t){e.graduationregistrationCodeId=t},expression:"graduationregistrationCodeId"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(de["a"],{attrs:{label:e.$t("profile.graduation.registration_code"),disabled:!e.isAdmin,height:"37px",outlined:""},model:{value:e.graduationRegistrationCode,callback:function(t){e.graduationRegistrationCode=t},expression:"graduationRegistrationCode"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(se["a"],{attrs:{label:e.$t("profile.graduation.registration_code_state"),items:e.statesList,disabled:!e.isAdmin,autocomplete:"just-stop","item-text":"name","item-value":"id",height:"37px",outlined:""},model:{value:e.graduationRegistrationCodeState,callback:function(t){e.graduationRegistrationCodeState=t},expression:"graduationRegistrationCodeState"}})],1)],1),e.invalidImageError?t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"phone-invalid"},[t("span",[e._v(e._s(e.$t("profile.invalid_image")))])])])],1):e._e(),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(r["a"],{staticClass:"white--text mb-5",attrs:{color:"primary",width:"100%",block:""},on:{click:function(t){return e.saveForm()}}},[t("img",{staticClass:"save-icon",attrs:{src:a("4917")}}),t("span",{staticClass:"new-pwd"},[e._v(e._s(e.$t("profile.save")))])])],1),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(r["a"],{attrs:{color:"blue",width:"100%",outlined:"",block:""},on:{click:function(t){return e.openRequestPassword()}}},[t("span",{staticClass:"new-pwd"},[e._v(e._s(e.$t("profile.request_new_pwd")))])])],1)],1)],1)],1)],1),t("ForgotPassword"),t(d["a"],{staticClass:"token-wrapper",staticStyle:{background:"white"},attrs:{width:"300px",height:"400px"},on:{click:e.toggleTokenModal},model:{value:e.displayTokens,callback:function(t){e.displayTokens=t},expression:"displayTokens"}},[t("div",{staticClass:"med-3 padded",staticStyle:{background:"white"}},e._l(e.tokens,(function(a){return t("p",{staticClass:"token-display"},[t("b",[e._v(e._s(a.company_name)+":")]),e._v(" "+e._s(a.token)+"\n      ")])})),0)])],1)},ue=[],Ae=a("b5ae"),_e=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"request-section"},[t(l["a"],{staticClass:"card-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v(e._s(e.$t("forgot_password.title")))]),t("div",{staticClass:"mb-3"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"modal-container"},[t(c["b"],{staticClass:"card-desc text-justify"},[e._v("\n                        "+e._s(e.$t("forgot_password.description"))+"\n                    ")]),t(de["a"],{staticClass:"email-input",attrs:{outlined:"",height:"37px",placeholder:e.$t("forgot_password.registered_email"),"error-messages":e.errorMessages},on:{blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}}),t(c["a"],{staticClass:"forgot-buttons"},[t(r["a"],{staticClass:"primary--text f-btn",attrs:{color:"white",height:"37px",width:"230px",outlined:""},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("forgot_password.cancel")))]),t(r["a"],{staticClass:"white--text f-btn",attrs:{color:"primary",height:"37px",width:"230px",loading:e.loading},on:{click:function(t){return e.requestNewPassword()}}},[e._v(e._s(e.$t("forgot_password.confirm")))])],1)],1)],1),t("ForgotConfirmation")],1)])],1)},Ee=[],Ie=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"615"},model:{value:e.dialogConfirm,callback:function(t){e.dialogConfirm=t},expression:"dialogConfirm"}},[t("div",[t(l["a"],{staticClass:"card-section"},[t(c["c"],{staticClass:"c-title"},[t("span",{staticClass:"m-title white--text font-weight-bold"},[e._v(e._s(e.$t("forgot_password.title")))]),t("div",{staticClass:"mb-3"},[t("img",{staticClass:"m-close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"icon-section"},[t("img",{staticClass:"success-icon",attrs:{src:a("5dfc")}})]),t(c["b"],{staticClass:"card-desc text-center"},[t("span",{staticClass:"success-msg"},[e._v(e._s(e.$t("forgot_password.success_message")))])]),t(c["a"],{staticClass:"justify-center"},[t(r["a"],{staticClass:"white--text",attrs:{color:"primary",height:"37px",width:"230px"},on:{click:function(t){return e.close()}}},[t("span",{staticClass:"btn-txt"},[e._v(e._s(e.$t("forgot_password.got_it")))])])],1)],1)],1)])],1)},he=[],Oe={data(){return{dialogConfirm:!1}},created(){this.$bus.on("forgot-confirm",e=>{this.dialogConfirm=e})},methods:{close(){this.dialogConfirm=!1}}},pe=Oe,Se=(a("af49"),Object(I["a"])(pe,Ie,he,!1,null,"4ca91559",null)),Ce=Se.exports,Te={login(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.LOGIN,e,{headers:{"Content-Type":"application/json"}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},forgotPassword(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.FORGOT_PASSWORD,e,{headers:{"Content-Type":"application/json"}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.code||e.response.data.error.message)})})},setNewPassword(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.SET_NEW_PASSWORD,e,{headers:{"Content-Type":"application/json"}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})}},Re={components:{ForgotConfirmation:Ce},data(){return{loading:!1,dialog:!1,dialogConfirm:!1,email:"",notFoundEmailError:!1,invalidEmailError:!1}},created(){this.$bus.on("dialog",e=>{this.dialog=e}),this.$bus.on("new-password",e=>{this.dialog=e})},methods:{close(){this.dialog=!1},checkSaveError(e){10102==e?this.notFoundEmailError=!0:this.invalidEmailError=!0,this.$v.email.$touch()},requestNewPassword(){if(this.$v.$touch(),this.$v.$invalid)return;this.loading=!0,this.notFoundEmailError=!1,this.invalidEmailError=!1;let e={email:this.email};Te.forgotPassword(e).then(e=>{this.email="",this.dialog=!1,this.dialogConfirm=!0,this.$bus.emit("forgot-confirm",this.dialogConfirm)}).catch(e=>{this.checkSaveError(e),console.error(e)}).finally(()=>{this.loading=!1})}},computed:{errorMessages(){const e=[];return this.$v.email.$dirty?(!this.$v.email.required&&e.push(this.$t("forgot_password.required")),!this.$v.email.email&&e.push(this.$t("forgot_password.invalid_email")),this.notFoundEmailError&&e.push(this.$t("forgot_password.email_not_found")),this.invalidEmailError&&e.push(this.$t("forgot_password.invalid_email")),e):e}},validations:{email:{email:Ae["email"],required:Ae["required"]}}},De=Re,ge=(a("b0d9"),Object(I["a"])(De,_e,Ee,!1,null,null,null)),Le=ge.exports,fe=a("c1df"),Ne=a.n(fe),ke={created(){},methods:{closeTabsHelper(e,t,a){let n={dialog:!0,item:t,data:e};this.$bus.emit(a,n)},persistTabs(e,t,a){return e=localStorage.setItem(a,JSON.stringify(t)),e},clearPhone(e){return e.replace(/[&\/\\#, +()$~%.'":*?<>{}-]/g,"")},formatPhoneFilter(e){let t="00",a="00",n="00000",i="0000";return e=e.replace(/[&\/\\#, +()$~%.'":*?<>{}-]/g,""),13===e.length&&(t=e.substr(0,2),e=e.slice(2,e.length),a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,5),e=e.slice(5,e.length),i=e),12===e.length&&(t=e.substr(0,2),e=e.slice(2,e.length),a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,4),e=e.slice(4,e.length),i=e),11===e.length?(a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,5),e=e.slice(5,e.length),i=e,`(${a}) ${n}-${i}`):10===e.length?(a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,4),e=e.slice(4,e.length),i=e,`(${a}) ${n}-${i}`):`+${t} (${a}) ${n}-${i}`},removePersistance(e){localStorage.removeItem(e)},addPersistance(e,t){localStorage.setItem(e,JSON.stringify(t))},clearArrays(e){return e=[],e},getTabsHelper(e,t){return e=JSON.parse(localStorage.getItem(t)),e},formatDateHelper(e){return this.$moment(e).format("DD-MM-YYYY")},formatDateWithHashHelper(e){const[t,a,n]=e.split("-");let i=`${n}/${a}/${t}`;return i},getRawCnpjHelper(e){return e.replace(/[-./\s]/g,"")},getRawPhoneHelper(e){return e?e.replace(/[-()+\s]/g,""):""},getRawBirthdateHelper(e){return e.replace(/[/\s]/g,"")},formatFrontendBirthdate(e){return e.replace(/[/]\s]/g,"-")},parseJsonRecursive(e){return e=JSON.parse(e),"string"===typeof e?this.parseJsonRecursive(e):e},getRawCpfHelper(e){return e.replace(/[-.\s]/g,"")},formatCpfHelper(e){let t=e.substr(0,3),a=e.substr(3,3),n=e.substr(6,3),i=e.substr(9,2),s=`${t}.${a}.${n}-${i}`;return s},formatPhoneHelper(e){if(10==e.length){let t=e.substr(0,2),a=e.substr(2,4),n=e.substr(6,4),i=`(${t})${a}-${n}`;return i}{let t=e.substr(0,2),a=e.substr(2,5),n=e.substr(7,4),i=`(${t})${a}-${n}`;return i}},generateSla(e){let t=Ne.a.tz(e,"utc"),a=Ne()(t.format("x")-Ne()().format("x")),n=a>0?"":"-",i=Math.abs(a/1e3/60/60),s=i.toFixed(2).split("."),o=parseInt(.6*s[1]),r=Math.floor(s[0]/24);return s[0]=s[0]%24,o<10&&(o="0"+o),s[0]<10&&(s[0]="0"+s[0]),0==r?n+s[0]+":"+o:n+r+"d "+s[0]+":"+o},getKeyByValue(e,t){return Object.keys(e).find(a=>e[a]===t)},gestationalWeeksHelper(){let e=1,t=[];while(e<43)t.push(e++);return t},setQuarterHelper(e){let t=0;return e<13?(t=1,t):e<27&&e>12?(t=2,t):(t=3,t)},setCounterHelper(){let e=1,t=[];while(e<11)t.push(e++);return t},formatDBDate(e){let t=Ne()(e).format("DD/MM/YYYY");return t},convertUtcOffset(e){this.$moment.tz.setDefault("America/Sao_Paulo");let t=this.$moment(e).utcOffset();return this.$moment(this.$moment(e).utcOffset(t)._d)},checkAccessesControlFuncionalityContains(e,t){let a=!1;return t.forEach(t=>{let n=t.key.includes(e);n&&(a=!0)}),a},checkAccessesControlFuncionality(e,t){let a=!1;return e.forEach(e=>{let n=t.find(t=>t.key===e);n&&(a=!0)}),a},checkAccessControlFuncionality(e,t){let a=t.find(t=>t.key===e);return!1!==a&&null!==a&&void 0!==a},isCpfValid(e){let t,a=0;if(e=e.replace(/[-.\s]/g,""),"00000000000"==e)return!1;for(let n=1;n<=9;n++)a+=parseInt(e.substring(n-1,n))*(11-n);if(t=10*a%11,10!=t&&11!=t||(t=0),t!=parseInt(e.substring(9,10)))return!1;a=0;for(let n=1;n<=10;n++)a+=parseInt(e.substring(n-1,n))*(12-n);return t=10*a%11,10!=t&&11!=t||(t=0),t==parseInt(e.substring(10,11))},removeNullProperties(e){for(let t in e)null!==e[t]&&void 0!==e[t]||delete e[t];return e},hasSocialName(e){let t=e.patient_info,a=e.member?e.member[0]:null;return t&&t.social_name||a&&a.social_name}}},ve=ke,be={userCreate(e){return new Promise((t,a)=>{e.speciality_id&&e.speciality_id,e.company_ids&&e.company_ids,e.program_ids&&e.program_ids,e.phone&&e.phone,e.phone_mobile&&e.phone_mobile,e.themas&&e.themas,C.a.post(R.ENDPOINTS.USER_CREATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},userUpdate(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.USER_UPDATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},memberUpdate(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.MEMBER_UPDATE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getUser(e){return new Promise((t,a)=>{let n={user_id:e};C.a.post(R.ENDPOINTS.GET_USER,n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),a(e.response.data.error||e.response.data.error.code)})})},getUserTypes(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.GET_USER_TYPES,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response)})})},getTussCodes(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.GET_TUSS_CODES,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response)})})},getUserBlackList(){return new Promise((e,t)=>{let a={entity_type:"users"};C.a.post(R.ENDPOINTS.GET_BLACKLIST,a,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{401===e.status&&this.$bus.emit("logout-without-token",{expiredToken:!0}),t(e.response)})})},listUsers(e){return new Promise((t,a)=>{e.user_type&&e.user_type,e.limit&&e.limit,e.offset&&e.offset,C.a.post(R.ENDPOINTS.LIST_USERS,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},checkCnpj(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.CHECK_CNPJ,e,{headers:{"Content-Type":"application/json"}}).then(e=>{t(e.data)}).catch(e=>{a(response.data.message||response.data.return)})})},listPayers(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.LIST_PAYERS,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listCompany(e){return new Promise((t,a)=>{if(e.redux){let e=window.localStorage.getItem("companies");e&&t(JSON.parse(e))}C.a.post(R.ENDPOINTS.LIST_COMPANY,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{window.localStorage.setItem("companies",JSON.stringify(e.data)),t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},memberSearch(e){return new Promise((t,a)=>{let n=new FormData;e.limit&&n.append("limit",e.limit),e.offset&&n.append("offset",e.offset),e.redux&&n.append("redux",e.redux),e.type&&n.append("filters[type]",e.type),e.name&&n.append("filters[name]",e.name),e.birthdate&&n.append("filters[birthdate]",e.birthdate),e.company_id&&n.append("filters[company_id]",parseInt(e.company_id,10)),C.a.post(R.ENDPOINTS.SEARCH_MEMBERS,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},memberExternalSearch(e){return new Promise((t,a)=>{let n=new FormData;e.limit&&n.append("limit",e.limit),e.offset&&n.append("offset",e.offset),e.type&&n.append("filters[type]",e.type),e.name&&n.append("filters[name]",e.name),e.user_id&&n.append("filters[user_id]",e.user_id),e.birthdate&&n.append("filters[birthdate]",e.birthdate),e.company_id&&n.append("filters[company_id]",parseInt(e.company_id,10)),C.a.post(R.ENDPOINTS.EXTERNAL_SEARCH_MEMBERS,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getCompanyByDocument(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_COMPANY_BY_DOCUMENT,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getPayerByDocument(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_PAYER_BY_DOCUMENT,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},uploadLivesFile(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.UPLOAD_LIVES_FILE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listStatus(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.LIST_STATUS,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listRoles(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.LIST_ROLES,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listOperationRoles(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.LIST_ROLES_OPERATION,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listDoctorRoles(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.LIST_ROLES_DOCTOR,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listSpecialties(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.LIST_SPECIALTIES,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listOccupations(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.LIST_ACTING,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listCouncil(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.LIST_PROFESSIONAL_COUNCIL,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},listDepartments(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.LIST_DEPARTMENTS,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},checkDuplicatedCpf(e){return new Promise((t,a)=>{let n={cpf:e};C.a.post(R.ENDPOINTS.CHECK_DUPLICATED_CPF,n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},enableToken(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.COMPANY_ENABLE_TOKEN,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},doctorEnableToken(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.DOCTOR_ENABLE_TOKEN,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},doctorGetToken(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.DOCTOR_GET_TOKEN,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listProfessionals(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.PROFESSIONAL_ATTENDANCE.LIST;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},userUpdateProfile(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.USER_UPDATE_PROFILE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})}},Me={list(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.REGISTRATION_COOE.LIST,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})}},Pe={components:{ForgotPassword:Le},mixins:[ve],data(){return{isAdmin:!1,loading:!1,loadingUser:!1,displayTokens:!1,profileDialog:!1,forgotDialog:!1,userData:"",path:"",valid:!1,preview:"",name:null,email:null,role:null,roleId:null,specialty:null,department:null,file:null,hasNewImage:!1,hasDeletedImage:!1,cpf:"",tokens:[],phone:"",phoneMobile:"",invalidImageError:!1,apm:!1,aboutMe:"",graduationName:"",graduationInstitution:"",graduationInstitutionState:"",graduationregistrationCodeId:"",graduationRegistrationCode:"",graduationRegistrationCodeState:"",councilList:[],statesList:this.$consts.MEDICAL_CONTROL_USER_STATES}},created(){this.$bus.on("profile-open",e=>{this.profileDialog=e}),this.isAdmin=this.checkAccessesControlFuncionalityContains("almight",this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.getUser(),this.getUserCouncil()},beforeDestroy(){this.$bus.emit("profile-close",!0)},methods:{close(){this.$bus.emit("profile-close",!0),this.profileDialog=!1;let e=document.getElementById("image");e.value="",this.getUser()},openRequestPassword(){this.forgotDialog=!0,this.$bus.emit("new-password",this.forgotDialog),this.profileDialog=!1,this.getUser()},toggleTokenModal(){this.displayTokens=!this.displayTokens},getTokens(){this.tokens=[];let e={cpf:this.cpf.replace(/[&\/\\#, +()$~%.'":*?<>{}-]/g,"")};be.doctorGetToken(e).then(e=>{this.tokens=e.data}).catch(e=>{console.error(e)}).finally(e=>{this.tokenModal=!1})},getUser(){this.loadingUser=!0;let e=this.$store.state.Data.User.info.user_info.id;be.getUser(e).then(e=>{this.userData=e.data,this.roleId=this.userData.role_info.role_id,this.cpf=this.userData.user_info.cpf,this.path=this.userData.user_info.image_path,this.name=this.userData.user_info.name,this.email=this.userData.user_info.email,this.specialty=this.userData.user_info.speciality,this.department=this.userData.department_info.name,this.aboutMe=this.userData.user_info.about_me,this.userData.user_graduation&&(this.graduationName=this.userData.user_graduation.name,this.graduationInstitution=this.userData.user_graduation.institution,this.graduationInstitutionState=this.userData.user_graduation.institution_state?this.statesList[this.userData.user_graduation.institution_state-1]:null,this.graduationregistrationCodeId=this.userData.user_info.professional_council_id,this.graduationRegistrationCodeState=this.userData.user_info.state,this.graduationRegistrationCode=this.userData.user_info.registration),this.userData.user_info.companies&&this.userData.user_info.companies.forEach(e=>{"virtual_clinic"===e.company_type_name&&(this.apm=!0)}),this.role=this.userData.role_info.role,this.phone=this.userData.user_info.phone?this.formatPhoneFilter(this.userData.user_info.phone):"",this.phoneMobile=this.userData.user_info.phone_mobile?this.formatPhoneFilter(this.userData.user_info.phone_mobile):"",this.preview=this.path,this.getTokens()}).catch(e=>{console.error(e)}).finally(()=>{this.loadingUser=!1})},getUserCouncil(){be.listCouncil().then(e=>{this.councilList=e.data}).catch(e=>{console.error(e)})},uploadImage(){if(this.file=event.target.files[0],!this.file||"image/jpeg"!=this.file.type&&"image/png"!=this.file.type)return!1;this.preview=URL.createObjectURL(this.file),this.invalidImageError=!1,this.hasNewImage=!0},removePhoto(){this.invalidImageError=!1,this.hasDeletedImage=!0,this.path="",this.preview=""},saveForm(){if(this.$v.$touch(),this.$v.$invalid)return;if(this.loading)return;this.loading=!0,this.invalidImageError=!1;let e={user_id:this.$store.state.Data.User.info.user_info.id,user_info:{phone:this.phone,phone_mobile:this.phoneMobile,about_me:this.aboutMe,user_role_id:this.roleId,user_graduation:{name:this.graduationName,institution:this.graduationInstitution,institution_state:this.graduationInstitutionState}}};if(this.isAdmin&&(e.user_info.professional_council_id=this.graduationregistrationCodeId,e.user_info.registration=this.graduationRegistrationCode,e.user_info.state=this.graduationRegistrationCodeState),Object.keys(e.user_info.user_graduation).forEach(t=>{null===e.user_info.user_graduation[t]&&delete e.user_info.user_graduation[t]}),0===Object.values(e.user_info.user_graduation).length&&delete e.user_info.user_graduation,this.hasNewImage){if("image/jpeg"!=this.file.type&&"image/png"!=this.file.type)return this.invalidImageError=!0;{let t={token:this.$store.state.Data.User.token,file:this.file};this.$store.dispatch(this.$consts.USER_ACTIONS.ASSET_CREATE,t).then(t=>{this.path=t.data[this.file.name].completeUrl,this.preview=this.path,this.userUpdate(e)}).catch(e=>{this.loading=!1,console.error(e)})}}else this.hasDeletedImage?(this.path="",this.preview="",this.userUpdate(e)):this.userUpdate(e)},userUpdate(e){e.user_info.image_path=this.path,be.userUpdateProfile(e).then(e=>{this.user_id=e.data.user_info.id,this.graduationInstitutionState=e.data.user_graduation.institution_state,this.graduationRegistrationCode=e.data.user_info.registration,this.graduationregistrationCodeId=e.data.user_info.professional_council_id,this.graduationRegistrationCodeState=e.data.user_info.state,this.hasDeletedImage=!1,this.hasNewImage=!1,this.$bus.emit("open-snackbar",{message:"profile_success_message"}),this.$bus.emit("profile-close",!0),this.getUser()}).catch(e=>{this.$bus.emit("open-snackbar",{message:"profile_error_message"}),console.error(e)}).finally(()=>{this.loading=!1})}},computed:{phoneErrors(){const e=[];return this.$v.phone.$dirty?(!this.$v.phone.minLength&&e.push(this.$t("patient_modal.invalid_phone")),e):e},phoneMobileErrors(){const e=[];return this.$v.phoneMobile.$dirty?(!this.$v.phoneMobile.minLength&&e.push(this.$t("patient_modal.invalid_phone_mobile")),e):e},graduationNameErrors(){const e=[];return this.$v.graduationName.$dirty?(!this.$v.graduationName.required&&e.push(this.$t("access_controls.required")),e):e},graduationInstitutionErrors(){const e=[];return this.$v.graduationInstitution.$dirty?(!this.$v.graduationInstitution.required&&e.push(this.$t("access_controls.required")),e):e},graduationInstitutionStateErrors(){const e=[];return this.$v.graduationInstitutionState.$dirty?(!this.$v.graduationInstitutionState.required&&e.push(this.$t("access_controls.required")),e):e}},validations:{phone:{minLength:Object(Ae["minLength"])(18)},phoneMobile:{minLength:Object(Ae["minLength"])(19)},graduationName:{required:Object(Ae["requiredIf"])((function(){return this.graduationInstitution||this.graduationInstitutionState}))},graduationInstitution:{required:Object(Ae["requiredIf"])((function(){return this.graduationName||this.graduationInstitutionState}))},graduationInstitutionState:{required:Object(Ae["requiredIf"])((function(){return this.graduationName||this.graduationInstitution}))}}},Ue=Pe,ye=(a("d141"),Object(I["a"])(Ue,me,ue,!1,null,null,null)),$e=ye.exports,xe=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{staticClass:"inactivity-kick-modal",attrs:{width:"601",height:"225",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text",domProps:{innerHTML:e._s(e.$t("attendance.inactivity_kick_modal.title"))}})]),t("div",{staticClass:"close"},[e.loading?e._e():t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(l["a"],{staticClass:"inactivity-kick-modal pa-10"},[t("div",{staticClass:"inactivity-kick-modal-description-container"},[t("p",{staticClass:"inactivity-kick-modal-description-color ma-0",domProps:{innerHTML:e._s(e.$t("attendance.inactivity_kick_modal.description"))}})]),t("div",{staticClass:"inactivity-kick-modal-card-container-btn mt-10"},[t(r["a"],{staticClass:"inactivity-kick-modal-btn-attribuites inactivity-kick-modal-btn-confirm",attrs:{disabled:e.loading,color:"#5949A7"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.inactivity_kick_modal.accept")))])],1)])],1)],1)],1)},Ve=[],Ge={getPatientHistoric(e){return new Promise((t,a)=>{var n=new FormData;n.append("search",e.search),n.append("member_id",e.member_id),n.append("program_id",e.program_id),n.append("limit",e.limit),n.append("offset",e.offset),C.a.post(R.ENDPOINTS.GET_PATIENT_HISTORIC,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getStatus(e){return new Promise((t,a)=>{var n=new FormData;n.append("case_attendance_id",e.case_attendance_id),C.a.post(R.ENDPOINTS.ATTENDANCE_STATUS,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},get(e){return new Promise((t,a)=>{var n=new FormData;n.append("case_attendance_id",e.case_attendance_id),C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.GET,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},changeStatus(e){return new Promise((t,a)=>{var n=new FormData;n.append("case_attendance_id",e.case_attendance_id),n.append("status",e.status),e.hasOwnProperty("finish_case")&&n.append("finish_case",e.finish_case),C.a.post(R.ENDPOINTS.CHANGE_ATTENDANCE_STATUS,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},transferAttendance(e){return new Promise((t,a)=>{var n=new FormData;n.append("case_attendance_id",e.case_attendance_id),n.append("user_id",e.user_id),C.a.post(R.ENDPOINTS.TRANSFER_ATTENDANCE,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},cancelProgramAttendance(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.CANCEL_PROGRAM_ATTENDANCE,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},programAttendanceAdd(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.CASE_ATTENDANCE.PROGRAM_ATTENDANCE_ADD,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},roleCanAccess(e,t){if("MEDICAL"===e)switch(t){case R.QUEUE_ATTENDANCE_STATUS.ENDED:case R.QUEUE_ATTENDANCE_STATUS.PATIENT_CANCELED:case R.QUEUE_ATTENDANCE_STATUS.ATTENDANT_CANCELED:case R.QUEUE_ATTENDANCE_STATUS.ATTENDED:return!1;default:return!0}else{if("OPERATIONAL"!==e)return"SUPER_ADMIN"===e;switch(t){case R.QUEUE_ATTENDANCE_STATUS.ATTENDED:case R.QUEUE_ATTENDANCE_STATUS.OPENED:return!0;default:return!1}}},getInvalidData(e){if(null==e||0===e.length)return[];let t=[];for(let a in e)!1===e[a].isValid&&t.push(e[a]);return t},cancelAttendance(e){return new Promise((t,a)=>{var n=new FormData;n.append("case_attendance_id",e.case_attendance_id),n.append("reason",e.reason_cancel),n.append("case_attendance_cancel_reason_id",e.case_attendance_cancel_reason_id),n.append("datetime_start_attendance",e.datetime_start_attendance),n.append("canceled_on_tdoc",1),C.a.post(R.ENDPOINTS.CANCEL_ATTENDANCE,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},getAttendanceScreening(e){return new Promise((t,a)=>{var n=new FormData;n.append("case_attendance_id",e.case_attendance_id),C.a.post(R.ENDPOINTS.GET_CASE_ATTENDANCE_SCREENING,n,{headers:{"Content-Type":"multipart/form-data",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>a(e.response.data.error.message||e.response.data.error.code))})},initPrescriptionAttendance(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCE_PRESCRIPTION_INIT;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},caseAttendancesNewestPatient(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCES_NEWEST_PATIENT;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},createCaseLaterComer(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_LATERCOMER_CASE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},changeAttendanceUrgency(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCE_CHANGE_URGENCY;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},attendancesProccessCreate(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.ATTENDANCES_PROCCESS_CREATE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},cancelCertificationAttendanceReturnStep(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CANCEL_CERTIFICATION_ATTENDANCE_RETURN_STEP;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getCids(){return new Promise((e,t)=>{let a=R.ENDPOINTS.CASE_ATTENDANCE.GET_CIDS;C.a.post(a,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error.message||e.response.data.error.code)})})},listHistory(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCE.LIST_HISTORY;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},filteredDiseasesList(){return new Promise((e,t)=>{let a=R.ENDPOINTS.CID_LIST;C.a.post(a,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error.message||e.response.data.error.code)})})},caseAttendanceAddMultiple(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCE.ADD_MULTIPLE;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},scheduleAttendancePending(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.ATTENDANCE_PENDING;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},checkDoublebooking(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.SCHEDULE.CHECK_DOUBLE_BOOKING;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},attend(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCE.ATTEND;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getSkipReasons(){return new Promise((e,t)=>{let a=R.ENDPOINTS.CASE_ATTENDANCE.GET_SKIP_REASONS;C.a.get(a,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error.message||e.response.data.error.code)})})},createSkipReasons(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCE.CREATE_SKIP_REASONS;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},getExitReasons(){return new Promise((e,t)=>{let a=R.ENDPOINTS.CASE_ATTENDANCE.GET_EXIT_REASONS;C.a.get(a,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error.message||e.response.data.error.code)})})},createExitReasons(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.CASE_ATTENDANCE.CREATE_EXIT_REASONS;C.a.post(n,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})}},Fe={components:{},props:["attendance"],data(){return{dialog:!1,loading:!1}},created(){this.$bus.on("open-inactivity-kick-modal",()=>{this.dialog=!0,this.changeStatus()})},beforeDestroy(){this.$bus.off("open-inactivity-kick-modal")},methods:{close(){this.dialog=!1},changeStatus(){this.loading=!0;let e={case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.OPENED};Ge.changeStatus(e).then(e=>{this.removeTransfer()}).catch(e=>{console.error(e)})},removeTransfer(){let e={case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,user_id:null};Ge.transferAttendance(e).then(e=>{this.$bus.emit("socket-doctor-connected-status",!1),this.$bus.emit("close-transfered-snackbar"),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.CLEAR),localStorage.removeItem("attendance.original_doctor_"+this.$store.state.Data.CaseAttendance.info.case_attendance_id),this.$bus.emit("close-stream"),this.$bus.emit("toggle-edit-history",!1),this.$bus.emit("confirm-close-patient-dialog",this.$store.state.Data.CaseAttendance.info),this.$bus.emit("socket-doctor-connected-status",!1),this.$bus.emit("ended-attendance"),this.loading=!1}).catch(e=>{console.error(e)})}}},Be=Fe,we=(a("a2dd"),Object(I["a"])(Be,xe,Ve,!1,null,"4a71df42",null)),He=we.exports,qe=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{staticClass:"case-attendance-skip-reason-success-modal",attrs:{width:"601",height:"245",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text",domProps:{innerHTML:e._s(e.$t("attendance.case_attendance_skip_reason_success_modal.title"))}})]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37"),"v-if":!e.loading},on:{click:function(t){return e.close()}}})])]),t(l["a"],{staticClass:"case-attendance-skip-reason-success-modal pa-10"},[t("div",{staticClass:"case-attendance-skip-reason-success-modal-description-container"},[t("p",{staticClass:"case-attendance-skip-reason-success-modal-description-color ma-0",domProps:{innerHTML:e._s(e.$t("attendance.case_attendance_skip_reason_success_modal.description"))}})]),t("div",{staticClass:"case-attendance-skip-reason-success-modal-card-container-btn mt-10"},[t(r["a"],{staticClass:"case-attendance-skip-reason-success-modal-btn-attribuites case-attendance-skip-reason-success-modal-btn-confirm",attrs:{color:"#5949A7",disabled:e.loading},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.case_attendance_skip_reason_success_modal.accept")))])],1)])],1)],1)],1)},Ye=[],je={listAttendances(e){return new Promise((t,a)=>{e.filter&&-1!=e.filter.indexOf("null")&&delete e.filter;let n=R.ENDPOINTS.VANELLOPE.LIST_ATTENDANCES;if(e&&Object.values(e).length>0){let t=new URLSearchParams(e);e.order&&(t.delete("order"),t.append("order[column]",e.order.column),t.append("order[order_type]",e.order.order_type)),n=`${n}?${new URLSearchParams(t).toString()}`}C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listUserAttendances(e){return new Promise((t,a)=>{e.filter&&-1!=e.filter.indexOf("null")&&delete e.filter;let n=R.ENDPOINTS.VANELLOPE.LIST_USER_ATTENDANCE;if(e&&Object.values(e).length>0){let t=new URLSearchParams(e);e.order&&(t.delete("order"),t.append("order[column]",e.order.column),t.append("order[order_type]",e.order.order_type)),n=`${n}?${new URLSearchParams(t).toString()}`}C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listQueueAttendances(e){return new Promise((t,a)=>{e.filter&&-1!=e.filter.indexOf("null")&&delete e.filter;let n=R.ENDPOINTS.VANELLOPE.LIST_QUEUE_ATTENDANCES;if(e&&Object.values(e).length>0){let t=new URLSearchParams(e);e.order&&(t.delete("order"),t.append("order[column]",e.order.column),t.append("order[order_type]",e.order.order_type)),n=`${n}?${new URLSearchParams(t).toString()}`}C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listQueueAttendancesV2(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VANELLOPE.LIST_QUEUE_ATTENDANCES_V2;if(e&&Object.values(e).length>0){let t=new URLSearchParams(e);e.order&&(t.delete("order"),t.append("order[sorting]",e.order.column),t.append("order[order_type]",e.order.order_type)),e.filter&&(t.delete("filter"),"vencimento_period"==e.filter.field?(t.append("filter[field]",e.filter.field),t.append("filter[start_at]",e.filter.start_at),t.append("filter[end_at]",e.filter.end_at)):(t.append("filter[field]",e.filter.field),t.append("filter[value]",e.filter.value))),n=`${n}?${new URLSearchParams(t).toString()}`}C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listExternalAttendances(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VANELLOPE.LIST_EXTERNAL_ATTENDANCES;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listUserExternalAttendances(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VANELLOPE.LIST_USER_EXTERNAL_ATTENDANCE;e&&Object.values(e).length>0&&(n=`${n}?${new URLSearchParams(e).toString()}`),C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},listPendingDocuments(e){return new Promise((t,a)=>{e.filter&&-1!=e.filter.indexOf("null")&&delete e.filter;let n=R.ENDPOINTS.VANELLOPE.LIST_PENDING_DOCUMENTS;if(e&&Object.values(e).length>0){let t=new URLSearchParams(e);e.order&&(t.delete("order"),t.append("order[column]",e.order.column),t.append("order[order_type]",e.order.order_type)),n=`${n}?${new URLSearchParams(t).toString()}`}C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.message)})})},getAttendanceStatus(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VANELLOPE.GET_ATTENDANCES_STATUS,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},getUserAttendanceStatus(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VANELLOPE.GET_USER_ATTENDANCE_STATUS,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},getAttendancesInQueueStatus(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VANELLOPE.GET_QUEUE_ATTENDANCES_STATUS,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},getExternalAttendanceStatus(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VANELLOPE.GET_EXTERNAL_ATTENDANCES_STATUS,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},getUserExternalAttendanceStatus(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VANELLOPE.GET_USER_EXTERNAL_ATTENDANCE_STATUS,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},getAttendanceNext(){return new Promise((e,t)=>{C.a.get(R.ENDPOINTS.VANELLOPE.GET_ATTENDANCE_NEXT,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})},getAttendanceNextStatus(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VANELLOPE.GET_ATTENDANCE_NEXT_STATUS;n=`${n}?${new URLSearchParams(e).toString()}`,C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},attendanceScheduleWarn(e){return new Promise((t,a)=>{let n=R.ENDPOINTS.VANELLOPE.ATTENDANCE_SCHEDULE_WARN;n=`${n}?${new URLSearchParams(e).toString()}`,C.a.get(n,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})}},Ke={eventEmit(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.EVENT_EMIT,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error.message||e.response.data.error.code)})})},internalEventEmit(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.INTERNAL_EVENT_EMIT,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response)})})}},Ze={data(){return{dialog:!1,loading:!1}},created(){this.$bus.on("open-case-attendance-skip-reason-success-modal",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-case-attendance-skip-reason-success-modal")},methods:{close(){this.loading||(this.loading=!0,console.log("[SKIP MODAL] Iniciando fechamento e busca de pr
tica rapidamente progressiva","created_at":"2020-04-03 23:48:57.224578","updated_at":"2020-04-03 23:48:57.227045"},{"id":996,"cid_group_id":14,"code":"N02","name":"Hemat
")]),t("span",{staticClass:"davygrey--text mr-2"},[e._v(e._s(`${a.Label}, ${a.Posologia}`))]),a.UsoContinuo?t("span",{staticClass:"davygrey--text"},[e._v("\n              "+e._s(e.$t("prescription.continuous_use"))+"\n            ")]):e._e()])})),1):e._e(),!e.showAllMedications&&e.filteredMedications.length>=e.itensToShow?t(r["a"],{staticClass:"px-1",attrs:{color:"blue",text:""},on:{click:function(t){e.showAllMedications=!e.showAllMedications}}},[e._v("\n          (...) "+e._s(e.$t("general.show_more"))+"\n        ")]):e._e()],1)],1)],1)],1)},dc=[],mc=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"600",height:"367px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header mb-5"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v("\n            "+e._s(e.$t("attendance.title_inform_patient_phone"))+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.handleClose()}}})])]),t(re["a"],[t(Xn["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(##) #####-####"],expression:"['(##) #####-####']"}],attrs:{"error-messages":e.phoneErrors,label:e.$t("attendance.cellphone"),height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.patientPhone.$touch()}},model:{value:e.patientPhone,callback:function(t){e.patientPhone=t},expression:"patientPhone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(r["a"],{staticClass:"confirm-button",attrs:{color:"primary",block:""},on:{click:function(t){return e.saveData()}}},[t("span",{staticClass:"save-text"},[e._v(e._s(e.$t("attendance.confirm")))])])],1)],1)],1)],1)],1)],1)],1)},uc=[],Ac={name:"ModalInformPatientPhone",data(){return{dialog:!1,patientPhone:null}},computed:{phoneErrors(){const e=[];return this.$v.patientPhone.$dirty?(!this.$v.patientPhone.required&&e.push(this.$t("attendance.required")),!this.$v.patientPhone.minLength&&e.push(this.$t("attendance.min_length_phone")),e):e}},mounted(){this.$bus.on("open-modal-inform-patient-phone",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-modal-inform-patient-phone")},methods:{saveData(){if(this.$v.$touch(),this.$v.$invalid)return;this.$bus.emit("prescription-informed-patient-phone",this.patientPhone);let e=this.$store.state.Data.User.token,t={member_info:{phone:"55"+this.patientPhone.toString()},member_id:this.$store.state.Data.Patient.info.member_id?this.$store.state.Data.Patient.info.member_id:this.$store.state.Data.Patient.info.id,token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.UPDATE,t).then(e=>{this.$bus.emit("patient-doc-update",{member_id:t.member_id})}).catch(e=>{console.error(e)}).finally(()=>{this.close()})},close(){this.dialog=!1}},validations:{patientPhone:{required:Ae["required"],minLength:Object(Ae["minLength"])(15)}}},_c=Ac,Ec=(a("7f06"),Object(I["a"])(_c,mc,uc,!1,null,"ec51d140",null)),Ic=Ec.exports,hc=function(){var e=this,t=e._self._c;return t(ce["a"],{staticClass:"prescription-modal-nexodata",attrs:{justify:"center"}},[t(d["a"],{attrs:{fullscreen:"","hide-overlay":"",transition:"fade-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(te["a"],{staticClass:"px-5",attrs:{height:"56px",color:"primary"}},[t("div",{staticClass:"prescription-header d-flex justify-space-between"},[t("img",{staticClass:"sidebar-icons",attrs:{height:"38px",src:a("1771")("./"+e.companyLogo)}}),t(r["a"],{attrs:{icon:"",dark:""},on:{click:e.close}},[t(at["a"],{staticClass:"close-icon",attrs:{color:"white"}},[e._v("close")])],1)],1)]),e.formatedUrl?t(l["a"],{staticClass:"container"},[t("iframe",{staticClass:"prescription",attrs:{src:e.formatedUrl,name:"prescriptionIframe"}})]):e._e()],1)],1)},Oc=[],pc={name:"ModalPrescription",props:["url"],data(){return{dialog:!1,iframeKey:"prescriptionIframe"}},computed:{formatedUrl(){return this.url.includes("https")?this.url:this.url.replace("http","https")},companyLogo(){return this.$store.getters[this.$consts.USER_ACTIONS.GET_COMPANY_LOGO]}},mounted(){this.$bus.on("open-modal-prescription",()=>{this.dialog=!0}),window.addEventListener("message",e=>{e.data&&"prescricao"==e.data.type&&(this.$bus.emit("request-prescription-save",e.data),this.close())})},beforeDestroy(){this.$bus.off("open-modal-prescription")},methods:{close(){this.dialog=!1}}},Sc=pc,Cc=(a("f746"),Object(I["a"])(Sc,hc,Oc,!1,null,"d0efc05e",null)),Tc=Cc.exports,Rc=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{width:"680",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],{staticClass:"text-center"},[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v("\n            "+e._s(e.header)+"\n          ")])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),e.body?t("p",{staticClass:"davygrey--text ma-0 pt-10 px-10 text-left"},[e._v("\n        "+e._s(e.body)+"\n      ")]):e._e(),t("div",{staticClass:"d-flex px-10 py-14 justify-space-between"},[t(r["a"],{attrs:{color:"davygrey",outlined:"",width:"290"},on:{click:e.close}},[e._v("\n          "+e._s(e.$t("general.no"))+"\n        ")]),t(r["a"],{attrs:{color:"davygrey",dark:"",width:"290"},on:{click:e.confirm}},[e._v("\n          "+e._s(e.yesText||e.$t("general.yes"))+"\n        ")])],1)],1)],1)],1)},Dc=[],gc={name:"TwoButtonsConfirmationModal",props:["header","body","yesText","onConfirm"],data(){return{dialog:!1}},created(){this.$bus.on("open-two-buttons-confirmation-modal",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-two-buttons-confirmation-modal")},methods:{close(){this.dialog=!1},confirm(){this.$emit("onConfirm"),this.close()}}},Lc=gc,fc=(a("893c"),Object(I["a"])(Lc,Rc,Dc,!1,null,"f325cb12",null)),Nc=fc.exports,kc={props:["brickDetails"],mixins:[ve],components:{ModalInformPatientPhone:Ic,ModalPrescription:Tc,TwoButtonsConfirmationModal:Nc},data(){return{brickName:"emr_prescription",disabled:!1,hasUnimedSus:!1,itensToShow:5,patientInfo:null,showAllExams:!1,showAllMedications:!1,prescriptionBearerToken:null,prescription:{loading:!1,error:!1,patientPhone:null,attendanceUrl:null,id:null,documents:null,medications:[],manualMedications:[],exams:[],certificate:null},prescriptionTokens:{}}},created(){if(!0===this.$store.state.Data.CaseAttendance.history_mode&&(this.disabled=!0),this.brickDetails&&this.brickDetails[this.brickName]&&this.brickDetails[this.brickName].length>0){let e=this.brickDetails[this.brickName][0];(e.prescription_id||1==this.$store.state.Data.CaseAttendance.history_mode)&&(this.prescription.id=e.prescription_id,this.prescription.documents=e.documents?this.parseJsonRecursive(e.documents):null,this.prescription.medications=e.medications&&this.parseJsonRecursive(e.medications)||[],this.prescription.manualMedications=e.manual_medications&&this.parseJsonRecursive(e.manual_medications)||[],this.prescription.exams=e.exams&&this.parseJsonRecursive(e.exams)||[],this.prescription.certificate=e.certificate?this.parseJsonRecursive(e.certificate):null)}let e=void 0===this.$store.state.Data.CaseAttendance.info.case_attendance_id?this.$store.state.Data.CaseAttendance.info.id:this.$store.state.Data.CaseAttendance.info.case_attendance_id;Ge.get({case_attendance_id:e}).then(e=>{this.hasUnimedSus=e.data.is_unimed_sol||JSON.parse(window.localStorage.getItem("case_attendance_is_unimed_sol"))}).catch(e=>{console.log("ded")}),this.$bus.on("prescription-informed-patient-phone",e=>{this.prescription.patientPhone=this.clearPhone(e),this.initCasePrescription()}),this.$bus.on("prescription-reset",e=>{this.resetPrescription()}),this.$bus.on("request-prescription-save",e=>{this.prescription.id=e.idPrescricao,this.prescription.documents=e.Documentos,this.prescription.medications=e.Medicamentos||e.Itens,this.prescription.manualMedications=e.MedicamentosManuais||e.ItensManuais,this.prescription.exams=e.Exames,this.prescription.certificate=e.Atestado,e.Atestado&&"foi orientado a permanecer em repouso hoje"==e.Atestado.Texto&&(this.prescription.certificate.Periodo=1)}),this.$bus.on("request-save-data",e=>{this.disabled||this.sendSaveData()}),this.getPatient()},beforeDestroy(){this.resetPrescription(),this.$bus.off("prescription-informed-patient-phone"),this.disabled||this.$bus.off("request-save-data")},methods:{getPatient(){let e={token:this.$store.state.Data.User.token,member_id:this.$store.state.Data.Patient.info.id,emergency_member:!!this.$store.state.Data.Patient.info.emergency_pass};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_MEMBER,e).then(e=>{this.patientInfo=e.data.member_info}).catch(e=>{console.error(e)})},openUnimedSus(){window.open("https://sol.unimedbh.com.br/","_blank")},cancelPrescription(){this.$bus.emit("open-two-buttons-confirmation-modal")},resetPrescription(){this.prescriptionBearerToken=null,this.prescriptionTokens={},this.prescription={loading:!1,error:!1,patientPhone:null,attendanceUrl:null,id:null,documents:null,medications:[],manualMedications:[],exams:[],certificate:null}},initCasePrescription(){this.patientInfo=this.$store.state.Data.Patient.info,this.$store.state.Data.CaseAttendance.info.member&&this.$store.state.Data.CaseAttendance.info.member.length>0&&(this.patientInfo={phone:this.$store.state.Data.CaseAttendance.info.member[0].phone||this.$store.state.Data.CaseAttendance.info.member[0].phone_optional});let e=this.patientInfo.phone||this.prescription.patientPhone;if(!e||e.length<11)return this.$bus.emit("open-modal-inform-patient-phone");this.prescription.loading=!0;let t=this.$store.state.Data.User.info.user_info,a=(this.$store.state.Data.CaseAttendance.info.company_info,{Medico:{Nome:t.name,Documento:t.cpf,RegistroProfissional:{Numero:t.crm||"",Conselho:"CRM",UF:t.state||""}},Paciente:{TelefoneCelular:13==e.length?e.substring(2):e,Endereco:null},Estabelecimento:{Nome:"Teladoc Health",CNES:"0677086",Endereco1:"Av. Engenheiro Lu
utica",what_goals_within_psychotherapy_to_be_achieved:"Quais objetivos dentro psicoterapia a serem alcan
vel cancelar ainda.")},toggleDoctorAudio(){this.paudio=!this.paudio,this.$bus.emit("toggleDoctorAudio",this.paudio)},toggleDoctorVideo(){this.pvideo=!this.pvideo,this.$bus.emit("toggleDoctorVideo",this.pvideo)},toggleFullScreen(){this.fullscreen=!this.fullscreen},fullscreenChange(e){this.fullscreen=e},getCredentials(e){let t={program_id:e||this.$store.state.Data.CaseAttendance.info.program_id,token:this.$store.state.Data.User.token,case_attendance_id:this.caseAttendanceId||this.caseAttendanceId};this.$store.dispatch(this.$consts.USER_ACTIONS.STREAM_START,t).then(e=>{this.sessionId=e.data.auth_details.session_id,this.token=e.data.auth_details.token,this.apiKey=e.data.auth_details.api_key,this.session=LA.a.initSession(this.apiKey,this.sessionId),this.$bus.emit("update-session",this.session),this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.SET_DATETIME_START_ATTENDANCE,this.$moment().format("YYYY-MM-DD HH:mm:s")),this.session.connect(this.token,e=>{e?console.log("error",e):this.initStream()}),Ke.eventEmit({channel_name:this.$consts.CHANNEL_SOCKET_PREFIX+this.caseAttendanceId,event_name:this.$consts.SOCKET_EVENTS.START_STREAM,event:{status:this.getKeyByValue(this.$consts.QUEUE_ATTENDANCE_STATUS,this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDING),doctor_id:this.$store.state.Data.User.info.user_info.id}}).then(()=>{ZI.sendSMS({company_id:this.item.company_id,case_attendance_id:this.caseAttendanceId,template:this.$consts.SMS_TEMPLATES.STREAM_START})})}).catch(e=>{this.$destroy(),console.log("error",e)})},initStream(){this.session.on("streamCreated",e=>{this.streams.push(e.stream),this.refresh+=1}),this.session.on("streamDestroyed",e=>{e.preventDefault();const t=this.streams.indexOf(e.stream);t>-1&&this.streams.splice(t,1)})},errorHandler(e){console.log("error",e)}},mounted(){window.addEventListener("resize",this.handleResize),this.setupOverlayObserver()},computed:{caseAttendanceId(){return this.$store.state.Data.CaseAttendance.caseAttendanceId||this.$store.state.Data.CaseAttendance.info.case_attendance_id},isSchedule(){return this.$store.state.Data.CaseAttendance.info.is_schedule||!1}}},WI=JI,XI=(a("82ee"),Object(I["a"])(WI,TI,RI,!1,null,null,null)),zI=XI.exports,eh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cancel-component"},[t(r["a"],{staticClass:"cancel-btn mt-10",attrs:{color:"blue",width:"100%",outlined:"",block:"",disabled:!e.canCancel},on:{click:function(t){return e.cancelAttendance()}}},[t(at["a"],{attrs:{size:"18",color:"blue"}},[e._v("warning")]),t("span",{staticClass:"cancel-text"},[e._v("\n      "+e._s(e.$t("attendance.cancel_appointment"))+"\n    ")])],1),t("CancelAttendanceModal",{attrs:{inAttendance:"true",saveType:e.saveType}})],1)},th=[],ah=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cancel-attend"},[t(d["a"],{attrs:{"max-width":"636px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("div",{staticClass:"cancel-mod-section"},[t(l["a"],{staticClass:"c-cancel-section"},[t(c["c"],{staticClass:"c-title white--text"},[t("span",{staticClass:"title"},[e._v("\n            "+e._s(e.$t("attendance.cancel_reason"))+"\n          ")]),t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){e.dialog=!1}}})]),e.cancel_reasons&&e.cancel_reasons.length>0?t("div",{staticClass:"reasons-section"},[t($t["a"],{attrs:{items:e.cancel_reasons,label:e.$t("attendance.select_attendance_cancel_reason"),disabled:e.loadingReasons,loading:e.loadingReasons,"item-text":"label",height:"37px","return-object":"","hide-details":"",outlined:""},on:{change:function(t){return e.checkReasonTextEnable()}},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1):e._e(),t(c["b"],{staticClass:"card-desc text-justify mb-n2",class:{"disabled-layer":!e.editable}},[e._v("\n          "+e._s(e.$t("attendance.cancel_label"))+"\n        ")]),t("div",{staticClass:"textarea-section mb-n3",class:{"disabled-layer":!e.editable}},[t(Ni["a"],{staticClass:"cancel-text",attrs:{readonly:!e.editable,disabled:!e.editable,label:e.$t("attendance.cancel_reason"),height:"94px","no-resize":"",outlined:""},model:{value:e.reason_cancel,callback:function(t){e.reason_cancel=t},expression:"reason_cancel"}})],1),t(c["a"],{staticClass:"int-button"},[t(r["a"],{staticClass:"canc-bt mr-2",attrs:{color:"primary",height:"37px",width:"247px",outlined:""},on:{click:e.close}},[e._v("\n            "+e._s(e.caseAttendanceId?e.$t("attendance.back"):e.$t("attendance.cancel_back"))+"\n          ")]),t(r["a"],{staticClass:"canc-bt white--text",attrs:{loading:e.loading,disabled:e.disableCancel||e.loading||!e.acl_can_cancel,color:"primary",height:"37px",width:"247px"},on:{click:e.cancelAttendance}},[e._v("\n            "+e._s(e.saveType&&"DEFAULT"!=e.saveType?e.$t("attendance.end_confirm"):e.$t("attendance.cancel_confirm"))+"\n          ")])],1)],1)],1)])],1)},nh=[],ih={props:["inAttendance","saveType"],mixins:[ve,p],data(){return{dialog:!1,loading:!1,loadingReasons:!1,caseAttendanceId:null,reason_cancel:"",reason:{},cancel_reasons:[],cancel_permissions:["attendance.cancelAttendance.update","attendance.companyCancelAttendance.update","attendance.holderCancelAttendance.update","attendance.userSelfCancelAttendance.update","attendance.programCancelAttendance.update","attendance.internalCancelAttendance.update"],can_cancel:!0,acl_can_cancel:!1,editable:!1,triage:!1,fromQueue:!1}},created(){this.$bus.on("open-tabs-cancel-attendance-modal",e=>{this.caseAttendanceId=e,this.dialog=!0,this.triage=!1,this.fromQueue=!1}),this.$bus.on("cancel-attendance-modal-in-triage",()=>{this.triage=!0}),this.$bus.on("cancel-attendance-modal-in-queue",()=>{this.fromQueue=!0}),this.$bus.on("open-cancel-attendance-modal-attendance-"+(this.inAttendance||"false"),()=>{this.caseAttendanceId=this.$store.state.Data.CaseAttendance.caseAttendanceId||this.$store.state.Data.CaseAttendance.info.case_attendance_id,this.dialog=!0}),this.$bus.on("started-stream",()=>{this.can_cancel=!0});const e=this.$store.state.Data.User.info.role_info.funcionality_privilegies.map(e=>e.key);this.cancel_permissions.forEach(t=>{e.includes(t)&&(this.acl_can_cancel=!0)}),this.getCancelReasons()},beforeDestroy(){this.$bus.off("open-cancel-attendance-modal-attendance-"+(this.inAttendance||"false")),this.$bus.off("started-stream")},methods:{checkReasonTextEnable(){this.editable="others"===this.reason.name},getCancelReasons(){this.loadingReasons=!0,this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.GET_CASE_ATTENDANCE_CANCEL_REASONS,{}).then(e=>{e&&(e.forEach((t,a)=>e[a].label=this.$t("attendance.reason_"+t.name)),this.cancel_reasons=e)}).catch(()=>console.error("[CANCEL MODAL] Erro ao buscar motivos de cancelamento")).finally(()=>this.loadingReasons=!1)},close(){this.fromQueue&&this.$bus.emit("restart-queue-update"),this.dialog=!1,this.fromQueue=!1,this.reason={},this.editable=!1,this.reason_cancel="",this.caseAttendanceId=null,this.triage=!1},nextCase(){console.log("[CANCEL MODAL] Buscando pr
vel",enable_company_token_title_1:"Controle",enable_company_token_title_2:"de token externo",enable:"Habilitar",disable:"Desabilitar",token_warning:"Essa 
ximo atendimento:",e),this.$bus.emit("open-snackbar",{message:"error_fetching_next_case",origin:"attempt_modal"}),this.$bus.emit("toggle-loading",!1)})},save(){this.loading||(this.loading=!0,Ge.get({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).then(e=>{if(1==e.data.current_step&&e.data.doctor_id!=this.$store.state.Data.User.info.user_info.id)return console.log("[INSUCESS REASON] INCEPTION.  Attendance is in step one up does not belongs this user"),this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),void this.close();this.$bus.emit("toggle-loading",!0);const t=this.$store.state.Data.User.token,a=this.$store.state.Data.CaseAttendance.info,n={token:t,case_attendance_id:a.case_attendance_id,user_id:this.$store.state.Data.User.info.user_info.id,step:a.program_step,attempt_action:"ADD",bricks:JSON.stringify({conclusao_atendimento:{attendance_complete_successfully:!1,observation:this.observation}})};try{this.$store.dispatch(this.$consts.CASE_ATTENDANCE_ACTIONS.ATTEMPT_CALL,n),this.$bus.emit("open-snackbar",{message:"attempt_add"}),Ge.changeStatus({case_attendance_id:a.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.OPENED}).then(()=>{this.$bus.emit("cancel-attendance");const e=this.$consts.NUTRITIONAL_PROGRAM.includes(a.program_id),t=this.$consts.SPORTIVE_PROGRAM.includes(a.program_id);e||t||!this.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")||setTimeout(()=>{this.nextCase()},1500),localStorage.removeItem("attendance.original_doctor_"+a.case_attendance_id),this.close()}).catch(e=>{"user_dont_have_permission_to_change_status_from_attending_of_attendance_that_they_are_not_responsable"==e&&(this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),this.close())})}catch(i){console.error("[ATTEMPT MODAL] Erro ao registrar tentativa:",i),this.$bus.emit("open-snackbar",{message:"error_saving_attempt"})}finally{this.loading=!1,this.$bus.emit("toggle-loading",!1)}}))}},computed:{disabled(){return 0===this.observation.length},featureEnabled(){return this.isFeatureEnabled}}},HO=wO,qO=(a("45c0"),Object(I["a"])(HO,FO,BO,!1,null,"13cf50e8",null)),YO=qO.exports,jO=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{attrs:{"max-width":"50vw"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("schedule.scheduling")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"calendar-modal"},[e.loadingCalendar?t("div",{staticClass:"calendar d-flex justify-center"},[t(nt["a"],{staticClass:"align-self-center",attrs:{indeterminate:"",color:"primary"}})],1):t("CalendarView",{attrs:{sendUserId:!0,canEditSchedules:!1,hasSlotIcons:!1,preSelectedCompany:e.userCompany,preSelectedSpeciality:e.userSpecialty,preSelectedAttendanceCenter:!0,handleClickEvent:e.scheduleClick,handleFittingEvent:e.scheduleFitting,programInformation:e.programInformation,lockPastDate:!0}})],1)],1),t(d["a"],{attrs:{"max-width":"35vw"},model:{value:e.scheduleDialog,callback:function(t){e.scheduleDialog=t},expression:"scheduleDialog"}},[t("div",{staticClass:"schedule-modal"},[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"large white--text"},[e._v(e._s(e.$t("schedule.confirm_schedule_title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.closeSchedule()}}})])]),t("div",{staticClass:"calendar-modal"},[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("schedule.patient_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.patient_name))])])])],1),e.attendance.fitting?t(ce["a"],[e.attendance.fitting?t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{label:e.$t("schedule.schedule_date"),"error-messages":e.fittingDateErrors,placeholder:"DD/MM/YYYY",height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.fittingDate.$touch()}},model:{value:e.fittingDateFormated,callback:function(t){e.fittingDateFormated=t},expression:"fittingDateFormated"}},"v-text-field",n,!1),a))]}}],null,!1,3090298094),model:{value:e.fittingDatePicker,callback:function(t){e.fittingDatePicker=t},expression:"fittingDatePicker"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedDate,locale:"pt-br"},on:{input:function(t){e.fittingDatePicker=!1}},model:{value:e.form.fittingDate,callback:function(t){e.$set(e.form,"fittingDate",t)},expression:"form.fittingDate"}})],1)],1):e._e(),t(oe["a"],{attrs:{cols:"12",md:"12"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px","offset-y":"",lazy:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({attrs:{type:"tel",label:e.$t("schedule.schedule_time"),"error-messages":e.fittingTimeErrors,height:"37px",readonly:"",outlined:"",required:""},on:{blur:function(t){return e.$v.form.fittingTime.$touch()}},model:{value:e.form.fittingTime,callback:function(t){e.$set(e.form,"fittingTime",t)},expression:"form.fittingTime"}},"v-text-field",n,!1),a))]}}],null,!1,295642022),model:{value:e.fittingTimePicker,callback:function(t){e.fittingTimePicker=t},expression:"fittingTimePicker"}},[e.dialog?t(Go["a"],{attrs:{"header-color":"primary",format:"24hr",scrollable:""},on:{input:function(t){e.fittingTimePicker=!1}},model:{value:e.form.fittingTime,callback:function(t){e.$set(e.form,"fittingTime",t)},expression:"form.fittingTime"}}):e._e()],1)],1)],1):t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("schedule.schedule_time")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.$moment(e.attendance.date).format("DD/MM/YYYY HH:mm")))])])])],1),t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"d-flex flex-row"},[t("p",{staticClass:"title-data"},[e._v(e._s(e.$t("schedule.agent_name")+": "))]),t("p",{staticClass:"text-data ml-1"},[e._v(e._s(e.attendance.doctor_name))])])])],1)],1)],1),e.loading?e._e():t("div",{staticClass:"buttons-panel"},[t(r["a"],{staticClass:"white--text btn",attrs:{color:"primary",disabled:e.loading},on:{click:e.handleConfirm}},[e._v("\n        "+e._s(e.$t("schedule.confirm_schedule"))+"\n      ")]),t(r["a"],{staticClass:"btn",attrs:{outlined:"",color:"#350165"},on:{click:e.handleCancel}},[e._v("\n        "+e._s(e.$t("schedule.choose_other"))+"\n      ")])],1)])],1)},KO=[],ZO={components:{CalendarView:ji},data(){return{dialog:!1,loading:!1,loadingCalendar:!1,scheduleDialog:!1,fittingDatePicker:!1,fittingTimePicker:!1,userCompany:1,userSpecialty:null,programInformation:null,form:{fittingDate:"",fittingTime:""},attendance:{date:"",attendance_center_name:"",doctor_name:"",patient_name:""},program:null}},created(){this.$bus.on("open-schedule-modal",e=>{this.userCompany=this.$store.state.Data.CaseAttendance.info.company_id,this.loadingCalendar=!0,this.program=e,this.userSpecialty=this.$consts.SPECIALITY_BY_PROGRAM[this.$store.state.Data.CaseAttendance.info.program_information[0].name],this.dialog=!0;let t={company_id:this.$store.state.Data.CaseAttendance.info.company_id,redux:!0};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BY_COMPANY,t).then(e=>{let t=e.data.find(e=>e.program_id==this.$store.state.Data.CaseAttendance.info.program_id).program_info;this.programInformation={...t,...this.$store.state.Data.CaseAttendance.info.program_information[0]}}).catch(e=>{console.error(e),this.close()}).finally(()=>{this.loadingCalendar=!1})})},beforeDestroy(){this.$bus.off("open-schedule-modal")},methods:{close(){this.dialog=!1},closeSchedule(){this.attendance={},this.scheduleDialog=!1},handleConfirm(e){if(this.loading)return;if(this.loading=!0,this.attendance.fitting){if(this.$v.$touch(),this.$v.$invalid)return;this.attendance.date=`${this.form.fittingDate} ${this.form.fittingTime}`}this.$bus.emit("request-save-data");let t=this.$store.state.Data.Bricks.AttendanceBricks.bricks;"string"===typeof t&&(t=JSON.parse(t)),delete t.nutricional_care["attendance_date"],delete t.nutricional_care["current_weight"],delete t.nutricional_care["observations"],delete t.nutricional_care["weight_loss"];let a=t.nutrition_plan_upload||null;delete t["nutrition_plan_upload"];let n=this.$moment(this.attendance.date).utc(),i={fitting:this.attendance.fitting,due_date:n.format("YYYY-MM-DD"),due_time:n.format("HH:mm:ss"),program_id:this.program,user_schedule_id:this.attendance.chosenSchedule,member_id:this.$store.state.Data.CaseAttendance.info.patient_info.id,doctor_id:this.attendance.chosenDoctor,attendant_id:this.$store.state.Data.User.info.user_info.id,user_id:this.attendance.chosenDoctor,company_id:this.$store.state.Data.CaseAttendance.info.company_id,case_id:this.$store.state.Data.CaseAttendance.info.case_id,is_aso:this.$store.state.Data.CaseAttendance.info.is_aso,bricks:JSON.stringify(t)};Ge.programAttendanceAdd(i).then(e=>{let t=!0;if(a){let e=a.files&&a.files.length>0||a.filename&&a.fileUrl;t=a&&a.need_plan&&!e}t?Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.DOCTOR_PENDING,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}):Ge.changeStatus({status:this.$consts.QUEUE_ATTENDANCE_STATUS.ATTENDED,case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}),this.$bus.emit("close-stream"),this.$bus.emit("end-session"),this.$bus.emit("request-save-data"),this.$store.dispatch(this.$consts.BRICKS_ACTIONS.ATTENDANCE_BRICKS_ACTIONS.CLEAR_BRICK),this.$bus.emit("restart-queue-update"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("open-snackbar",{message:"attendance_finish"})}).catch(e=>{console.error(e),e&&e.length>0&&"No availability available"==e&&this.$bus.emit("open-snackbar",{message:"No availability available"})}).finally(()=>{this.scheduleDialog=!1,this.dialog=!1,this.loading=!1})},handleCancel(e){this.scheduleDialog=!1},scheduleClick(e){this.attendance={},this.attendance.fitting=!1,this.attendance.date=e.event.start,this.attendance.attendance_center=e.chosenAttendanceCenter,this.attendance.doctor_name=e.chosenAgentName,this.attendance.patient_name=this.$store.state.Data.CaseAttendance.info.patient_info.name,this.attendance.chosenSchedule=e.chosenSchedule,this.attendance.chosenDoctor=e.chosenAgent,this.scheduleDialog=!0},scheduleFitting(e){this.attendance={},this.attendance.fitting=!0,this.attendance.date=e.fittingDate,this.attendance.attendance_center=e.attendance_center_id,this.attendance.doctor_name=e.doctor_name,this.attendance.patient_name=this.$store.state.Data.CaseAttendance.info.patient_info.name,this.attendance.chosenSchedule=e.schedule_id,this.attendance.chosenDoctor=e.doctor_id,this.scheduleDialog=!0},confirmSchedule(){},formattedDate(e){return e?this.$moment(e).format("DD/MM/YYYY"):""}},computed:{fittingDateFormated(){return this.form.fittingDate?this.$moment(this.form.fittingDate).format("DD/MM/YYYY"):""},fittingDateErrors(){const e=[];return this.attendance.fitting&&this.$v.form.fittingDate.$dirty?(!this.$v.form.fittingDate.required&&e.push(this.$t("schedule.required")),e):e},fittingTimeErrors(){const e=[];return this.attendance.fitting&&this.$v.form.fittingTime.$dirty?(!this.$v.form.fittingTime.required&&e.push(this.$t("schedule.required")),e):e}},validations:{form:{fittingDate:{required:Ae["required"]},fittingTime:{required:Ae["required"]}}}},QO=ZO,JO=(a("82aa"),Object(I["a"])(QO,jO,KO,!1,null,"07cdb56a",null)),WO=JO.exports,XO=function(){var e=this,t=e._self._c;return t("div",{staticClass:"insucess-component"},[t(r["a"],{staticClass:"cancel-btn mt-10",attrs:{color:"blue",width:"100%",diabled:!e.canInsucess,outlined:"",block:""},on:{click:function(t){return e.insucess()}}},[t(at["a"],{attrs:{size:"18",color:"blue"}},[e._v("phone")]),t("span",{staticClass:"cancel-text"},[e._v(" "+e._s(e.$t("attendance.insucess_appointment")))])],1)],1)},zO=[],ep={data(){return{canInsucess:!1}},created(){let e=this.$store.state.Data.CaseAttendance.info.program_id,t=this.$store.state.Data.User.info.user_info.programs;this.canInsucess=!1,t&&t.length>0&&t.forEach(t=>{e==t.id&&!0===t.insucess&&(this.canInsucess=!0)})},methods:{insucess(){this.$bus.emit("open-attempt-modal")}}},tp=ep,ap=(a("46c6"),Object(I["a"])(tp,XO,zO,!1,null,"16d9cc12",null)),np=ap.exports,ip=function(){var e=this,t=e._self._c;return e.snackbar?t("div",{staticClass:"transfered-snackbar py-5 px-3"},[t("div",{staticClass:"alert-container mb-3"},[t("img",{staticClass:"mr-2 alert-icon",attrs:{src:a("fbc9")}}),t("p",{staticClass:"alert-text"},[e._v(e._s(e.$t("attendance.transfer_snackbar.attention")))])]),t("div",{staticClass:"transfer-description-container mb-4"},[t("p",{staticClass:"transfer-description"},[e._v(e._s(e.$t("attendance.transfer_snackbar.description")))])]),e._m(0),t("div",{staticClass:"transfer-username-container mb-2"},[t("p",{staticClass:"transfer-username-text"},[e._v(e._s(e.username))])]),e._m(1)]):e._e()},sp=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"limiter-container mb-2"},[t("div",{staticClass:"limiter-line"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"limiter-container"},[t("div",{staticClass:"limiter-line"})])}],op={data:()=>({snackbar:!1,username:""}),created(){this.$bus.on("open-transfered-snackbar",e=>{this.snackbar=!1,this.username=e.username,this.snackbar=!0}),this.$bus.on("close-transfered-snackbar",()=>{this.username="",this.snackbar=!1,this.$bus.off("open-transfered-snackbar")})},destroyed(){this.$bus.off("open-transfered-snackbar"),this.$bus.off("close-transfered-snackbar")}},rp=op,lp=(a("ed4d"),Object(I["a"])(rp,ip,sp,!1,null,"e832feba",null)),cp=lp.exports,dp=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{staticClass:"case-attendance-skip-reason-confirmation-modal",attrs:{width:"601",height:"225",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text",domProps:{innerHTML:e._s(e.$t("attendance.case_attendance_skip_reason_confirmation_modal.title"))}})]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(l["a"],{staticClass:"case-attendance-skip-reason-confirmation-modal pa-10"},[t("div",{staticClass:"case-attendance-skip-reason-confirmation-modal-description-container"},[t("p",{staticClass:"case-attendance-skip-reason-confirmation-modal-description-color ma-0",domProps:{innerHTML:e._s(e.$t("attendance.case_attendance_skip_reason_confirmation_modal.description"))}})]),t("div",{staticClass:"case-attendance-skip-reason-confirmation-modal-card-container-btn mt-10"},[t(r["a"],{staticClass:"case-attendance-skip-reason-confirmation-modal-btn-attribuites case-attendance-skip-reason-confirmation-modal-btn-cancel",attrs:{color:"#FFFFFF"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.case_attendance_skip_reason_confirmation_modal.cancel")))]),t(r["a"],{staticClass:"case-attendance-skip-reason-confirmation-modal-btn-attribuites case-attendance-skip-reason-confirmation-modal-btn-confirm",attrs:{color:"#5949A7"},on:{click:function(t){return e.nextModal()}}},[e._v(e._s(e.$t("attendance.case_attendance_skip_reason_confirmation_modal.accept")))])],1)])],1)],1)],1)},mp=[],up={components:{},data(){return{dialog:!1}},created(){this.$bus.on("open-case-attendance-skip-reason-confirmation-modal",()=>{this.dialog=!0})},beforeDestroy(){this.$bus.off("open-case-attendance-skip-reason-confirmation-modal")},methods:{close(){this.$bus.emit("attendance-start-commands-lock",!1),this.$bus.emit("resume-inactive-timer"),this.dialog=!1},nextModal(){this.$bus.emit("toggle-loading",!0),this.$bus.emit("attendance-start-commands-displayable",!1),this.$bus.emit("open-case-attendance-skip-reason-selection-modal"),this.dialog=!1}}},Ap=up,_p=(a("8fe6"),Object(I["a"])(Ap,dp,mp,!1,null,"3fd63ce3",null)),Ep=_p.exports,Ip=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],{staticClass:"case-attendance-skip-reason-selection-modal",attrs:{width:"695",height:"807",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text",domProps:{innerHTML:e._s(e.$t("attendance.case_attendance_skip_reason_selection_modal.title"))}})]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(l["a"],{staticClass:"case-attendance-skip-reason-selection-modal px-10 py-5"},[t("div",{staticClass:"case-attendance-skip-reason-selection-modal-description-container"},[t("p",{staticClass:"case-attendance-skip-reason-selection-modal-description-color ma-0",domProps:{innerHTML:e._s(e.$t("attendance.case_attendance_skip_reason_selection_modal.description"))}})]),t("div",{staticClass:"case-attendance-skip-reason-selection-modal-selection-container"},[t(Qs["a"],{model:{value:e.skipReasonId,callback:function(t){e.skipReasonId=t},expression:"skipReasonId"}},e._l(e.options,(function(a){return t("div",[t("div",{staticClass:"case-attendance-skip-reason-selection-container"},[t("div",{staticClass:"px-2 mb-4",class:{"case-attendance-skip-reason-selection-modal-radio-unselected":e.skipReasonId!=a.id,"case-attendance-skip-reason-selection-modal-radio-selected":e.skipReasonId==a.id,"case-attendance-skip-reason-selection-modal-radio-container":9!=a.id,"case-attendance-skip-reason-selection-modal-radio-container-smaller mr-4":9==a.id}},[t(Zs["a"],{attrs:{label:e.$t("attendance.case_attendance_skip_reason_selection_modal."+a.name),value:a.id}})],1),9==a.id?t(de["a"],{staticClass:"case-attendance-skip-reason-selection-modal-textfield",class:{"case-attendance-skip-reason-selection-modal-opacity":9!=e.skipReasonId},attrs:{readonly:9!=e.skipReasonId,outlined:"",placeholder:e.$t("attendance.case_attendance_skip_reason_selection_modal.type_here"),width:"402px",height:"51px"},model:{value:e.justify,callback:function(t){e.justify="string"===typeof t?t.trim():t},expression:"justify"}}):e._e()],1)])})),0)],1),t("div",{staticClass:"case-attendance-skip-reason-selection-modal-selection-container"},[e.optionsLoading?t(Dn["a"],{attrs:{indeterminate:""}}):e._e()],1),t("div",{staticClass:"case-attendance-skip-reason-selection-modal-card-container-btn"},[t(r["a"],{staticClass:"case-attendance-skip-reason-selection-modal-btn-attribuites case-attendance-skip-reason-selection-modal-btn-cancel",attrs:{color:"#FFFFFF"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("attendance.case_attendance_skip_reason_selection_modal.cancel")))]),t(r["a"],{staticClass:"case-attendance-skip-reason-selection-modal-btn-attribuites case-attendance-skip-reason-selection-modal-btn-confirm",attrs:{color:"#5949A7",disabled:!e.skipReasonId||9==e.skipReasonId&&e.justify.length<3},on:{click:function(t){return e.saveSkipReason()}}},[e._v(e._s(e.$t("attendance.case_attendance_skip_reason_selection_modal.accept")))])],1)])],1)],1)],1)},hp=[],Op={components:{},data(){return{dialog:!1,optionsLoading:!0,options:[],skipReasonId:null,justify:"",creatingSkipReasonLoading:!1}},created(){this.$bus.on("open-case-attendance-skip-reason-selection-modal",()=>{this.dialog=!0}),this.getSkipReasons()},beforeDestroy(){this.$bus.off("open-case-attendance-skip-reason-selection-modal")},methods:{getSkipReasons(){Ge.getSkipReasons().then(e=>{this.options=e.data}).finally(()=>{this.optionsLoading=!1})},saveSkipReason(){this.$bus.emit("toggle-loading",!0),this.creatingSkipReasonLoading||(this.creatingSkipReasonLoading=!0,Ge.get({case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id}).then(e=>{if(1==e.data.current_step&&e.data.doctor_id!=this.$store.state.Data.User.info.user_info.id)return console.log("[SKIP REASON] INCEPTION. Attendance is in step one up does not belongs this user"),this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),void this.close();let t={case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,skip_reason_id:this.skipReasonId};9==this.skipReasonId&&(t.other_reason=this.justify),Ge.createSkipReasons(t).then(e=>{this.changeStatus()}).catch(e=>{console.error(e),this.creatingSkipReasonLoading=!1,this.$bus.emit("toggle-loading",!1)})}))},changeStatus(){let e={case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,status:this.$consts.QUEUE_ATTENDANCE_STATUS.OPENED};Ge.changeStatus(e).then(e=>{this.removeTransfer()}).catch(e=>{"user_dont_have_permission_to_change_status_from_attending_of_attendance_that_they_are_not_responsable"==e&&(this.$bus.emit("close-stream"),this.$bus.emit("close-temp-data-tab"),this.$bus.emit("restart-queue-update"),this.close())})},removeTransfer(){let e={case_attendance_id:this.$store.state.Data.CaseAttendance.info.case_attendance_id,user_id:this.$store.state.Data.User.info.user_info.id};Ge.transferAttendance(e).then(e=>{this.creatingSkipReasonLoading=!1,this.$bus.emit("attendance-start-commands-displayable",!0),this.$bus.emit("open-case-attendance-skip-reason-success-modal"),this.dialog=!1}).catch(e=>{console.error(e)})},close(){this.$bus.emit("attendance-start-commands-displayable",!0),this.$bus.emit("attendance-start-commands-lock",!1),this.$bus.emit("resume-inactive-timer"),this.dialog=!1}}},pp=Op,Sp=(a("7fae"),Object(I["a"])(pp,Ip,hp,!1,null,"51d5d2a9",null)),Cp=Sp.exports,Tp=function(){var e=this,t=e._self._c;return e.debugMode?t("div",{staticClass:"inactivity-timer-absolution"},[t("p",{staticClass:"inactivity-timer-text"},[e._v(" "+e._s(e.formattedTime)+" ")])]):e._e()},Rp=[],Dp={data:()=>({timeout:0,warning:0,currentTime:0,intervalId:null,paused:!1,debugMode:!1,env:["devadoc.com.br","testadoc.com.br","homolodoc.com.br","localhost"]}),created(){console.log("Timer Criado"),this.timeout=this.$store.state.Data.Preferences.INACTIVITY_TIMER,this.warning=this.$store.state.Data.Preferences.INACTIVITY_FIRST_WARNING,this.debugMode=this.env.includes(window.location.hostname),this.$bus.on("start-inactive-timer",()=>{clearInterval(this.intervalId),this.intervalId=null,this.timeout=this.$store.state.Data.Preferences.INACTIVITY_TIMER,this.warning=this.$store.state.Data.Preferences.INACTIVITY_FIRST_WARNING,this.debugMode=this.env.includes(window.location.hostname),this.currentTime=this.timeout,this.startCountdown()}),this.$bus.on("pause-inactive-timer",()=>{this.pauseCountdown()}),this.$bus.on("resume-inactive-timer",()=>{this.$store.dispatch("Data/General/setInceptionChecker",{value:!0}),this.resumeCountdown()}),this.$bus.on("cancel-inactive-timer",()=>{this.cancelCountdown()})},beforeDestroy(){console.log("Timer destru
ximo atendimento:",e),this.$bus.emit("open-snackbar",{message:"error_fetching_next_case",origin:"save_modal"}),this.$bus.emit("toggle-loading",!1)})),this.disabled=!1,this.dialogCertification=!1},closeCertification(){this.confirmedCloseCertification?(this.$bus.emit("stop-access-attandance-load"),this.pin="",this.whatsapp=!1,this.brickSaveError="",this.$v.$reset(),this.dialogCertification=!1,this.confirmedCloseCertification=!1):(this.confirmedCloseCertification=!0,this.dialogCertification=!1)},returnModalCertification(){this.confirmedCloseCertification=!1,this.dialogCertification=!0},cancelCertificationAttendance(e){this.loading=!0,Ge.cancelCertificationAttendanceReturnStep({case_attendance_id:e}).then().catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})}},validations:{pin:{required:Ae["required"]}},computed:{...Object(K["b"])("Data/CaseAttendance",{certificationPending:"getCertificationPending"}),...Object(K["b"])("Data/DigitalCertification",{tokenAccess:"getAccessToken"}),featureEnabled(){return this.isFeatureEnabled}}},Gn=Vn,Fn=(a("fbe4"),Object(I["a"])(Gn,Tn,Rn,!1,null,null,null)),Bn=Fn.exports,wn={components:{EmergencyIcon:Ut,DeficiencyIdentifierBars:Zt,SaveAttendanceModal:Bn},mixins:[ve],data(){return{loading:!1,loadingGeneration:!1,loadingHeaders:!1,enableButton:!1,case_id:null,data:null,hover:null,increment:!1,columnSafe:null,count:0,specialty:null,order:[],headers:[],attendances:[],pagination:{pages:0,currentPage:1},total:0,pages:0,limit:10,offset:0,filter:null,timeoutRef:null,disableLiveReload:!1,collapsedView:!1}},created(){this.$bus.on("restart-queue-update",()=>{this.resumeQueue()}),this.$bus.on("stop-queue-update",this.pauseQueue),this.$bus.on("stop-access-attandance-load",()=>{this.loadingGeneration=!1}),this.enableButton=this.checkAccessesControlFuncionality(["documentQueue.doctor.list"],this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.getHeaders()},mounted(){this.listPendingDocuments()},beforeDestroy(){this.$bus.off("stop-access-attandance-load"),clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingGeneration=!1},methods:{getHeaders(){this.loadingHeaders=!0,Qt.getServiceQueueHeader().then(e=>{this.headers=e.data.map(e=>(e.align="center",e.sortable=e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.SLA||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.STATUS||e.header==this.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION,e))}).catch(e=>{console.error(e)}).finally(()=>{this.loadingHeaders=!1})},setHeaderHover(e=null){this.hover=e},hasHeaderType(e){return this.headers.find(t=>t.header==e)},resumeQueue(e=!0){clearTimeout(this.timeoutRef),this.loadingGeneration=!1,this.disableLiveReload=!1,this.$bus.emit("ended-attendance"),e?this.realTimelistPendingDocuments():(this.loadingGeneration=!1,this.timeoutRef=setTimeout(()=>{this.realTimelistPendingDocuments()},this.$consts.SETTINGS.MYLISTTIMEOUT))},pauseQueue(){clearTimeout(this.timeoutRef),this.disableLiveReload=!0,this.loadingGeneration=!1},formatDate(e){let t=Number.isInteger(e.due_date)?e.due_date:this.convertUtcOffset(`${e.due_date.split(" ")[0]} ${e.due_time}`).unix();return this.$moment.unix(t).tz(Intl.DateTimeFormat().resolvedOptions().timeZone).format("DD/MM/YYYY HH:mm")},generateDocuments(e){this.pauseQueue(),this.case_id=e.case_id,this.loadingGeneration=!0,e.due_date=this.$moment.unix(e.due_date).format("YYYY-MM-DD"),e.due_time=this.$moment.unix(e.due_time).format("HH:mm:ss"),e.generate_documents=!0,e.hasToken=this.tokenAccess,this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,e),this.$bus.emit("save-doctor-attendance",e)},generateCase(e){if(null==e.bricks||0===e.bricks.length||null==e.bricks.emr_desfecho||0===e.bricks.emr_desfecho.length){if(null==e.bricks.triagem_generica_enfermagem||0===e.bricks.triagem_generica_enfermagem.length)return"";if(e.bricks.triagem_generica_enfermagem.length>0){let t=Object.keys(e.bricks.triagem_generica_enfermagem)[0],a=e.bricks.triagem_generica_enfermagem[t],n=null===a.program_brick_options_id?[]:a.program_brick_options_id[0],i=this.options.find(e=>e.id===n);return null==i||0===i.length?"":i.name}}let t=[];for(let a in e.bricks.emr_desfecho[0])!0===e.bricks.emr_desfecho[0][a]&&t.push(a);return t.length>0?t[0]:"no_prescription"},changePage(){this.getPage(this.pagination.currentPage)},getPage(e){1!=e?this.pauseQueue():this.resumeQueue(!1),this.loading=!0,this.offset=1==e?0:(e-1)*this.limit;let t={limit:this.limit,offset:this.offset};this.order.column&&this.order.order_type&&(t.order=this.order),je.listPendingDocuments(t).then(t=>{this.attendances=[];let a=t.data.attendances;a.forEach(e=>{e.canCertify=!1,this.$store.state.Data.User.info.user_info.programs&&this.$store.state.Data.User.info.user_info.programs.length>0&&this.$store.state.Data.User.info.user_info.programs.forEach(t=>{e.program_id==t.id&&(e.canCertify=t.certify_document)}),this.attendances.push(e)}),this.pagination.currentPage=e,this.total=t.data.total,this.pages=this.totalPages,this.pagination.pages=this.totalPages}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})},listPendingDocuments(){clearTimeout(this.timeoutRef);var e=this;this.loading=!0;let t={limit:this.limit,offset:0};this.order.column&&this.order.order_type&&(t.order=this.order),je.listPendingDocuments(t).then(e=>{this.attendances=[];let t=e.data.attendances;t.forEach(e=>{e.canCertify=!1,this.$store.state.Data.User.info.user_info.programs&&this.$store.state.Data.User.info.user_info.programs.length>0&&this.$store.state.Data.User.info.user_info.programs.forEach(t=>{e.program_id==t.id&&(e.canCertify=t.certify_document)}),this.attendances.push(e)}),this.total=e.data.total,this.pagination.pages=this.totalPages,this.pagination.currentPage=1}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistPendingDocuments()},this.$consts.SETTINGS.MYLISTTIMEOUT))})},realTimelistPendingDocuments(){clearTimeout(this.timeoutRef);var e=this;let t={limit:this.limit,offset:this.offset};this.order.column&&this.order.order_type&&(t.order=this.order),je.listPendingDocuments(t).then(e=>{this.attendances=[];let t=e.data.attendances;t.forEach(e=>{e.canCertify=!1,this.$store.state.Data.User.info.user_info.programs&&this.$store.state.Data.User.info.user_info.programs.length>0&&this.$store.state.Data.User.info.user_info.programs.forEach(t=>{e.program_id==t.id&&(e.canCertify=t.certify_document)}),this.attendances.push(e)}),this.total=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e),401==e.code&&this.$bus.emit("logout")}).finally(()=>{this.loadingGeneration=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{e.realTimelistPendingDocuments()},this.$consts.SETTINGS.MYLISTTIMEOUT))})},orderingPendingDocuments(e,t){this.columnSafe!=e&&(this.columnSafe=e,this.increment=!1,this.count=0),"ASC"!=t||this.increment?this.increment&&this.count<2?(this.count++,this.orderingQueue(this.columnSafe,"DESC")):(this.count=0,this.order=[],this.hover=null,this.increment=!1,this.listPendingDocuments()):(this.increment=!0,this.count++,this.orderingQueue(this.columnSafe,"ASC"))},orderingQueue(e,t){clearTimeout(this.timeoutRef),this.order.column=e,this.order.order_type=t,this.pagination.currentPage=1;var a=this;this.loading=!0;let n={limit:this.limit,offset:0};this.order.column&&this.order.order_type&&(n.order=this.order),je.listPendingDocuments(n).then(e=>{this.attendances=[];let t=e.data.attendances;t.forEach(e=>{e.canCertify=!1,this.$store.state.Data.User.info.user_info.programs&&this.$store.state.Data.User.info.user_info.programs.length>0&&this.$store.state.Data.User.info.user_info.programs.forEach(t=>{e.program_id==t.id&&(e.canCertify=t.certify_document)}),this.attendances.push(e)}),this.total=e.data.total,this.$bus.emit("list-update",(new Date).valueOf())}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,clearTimeout(this.timeoutRef),this.disableLiveReload||(this.timeoutRef=setTimeout(()=>{a.realTimelistPendingDocuments()},this.$consts.SETTINGS.LISTTIMEOUT))})},formatContactTimeText(e){let t=e.name?this.$t("patient_modal."+e.name):"",a=e.start_time&&e.end_time?`(${this.$moment(e.start_time).format("HH:mm")} ${this.$t("patient_modal.to")} ${this.$moment(e.end_time).format("HH:mm")})`:"";return`${t} ${a}`}},computed:{...Object(K["b"])("Data/DigitalCertification",{renewTimeExpires:"getExpiresIn",tokenAccess:"getAccessToken"}),patientName(){return e=>{let t=e.patient_info,a=e.member?e.member[0]:null;return t&&t.social_name?t.social_name:a&&a.social_name?a.social_name:t&&t.name?t.name:a&&a.name?a.name:""}},totalPages(){return this.total>1?Math.ceil(this.total/this.limit):this.total}}},Hn=wn,qn=(a("0408"),Object(I["a"])(Hn,Sn,Cn,!1,null,"7cb5946c",null)),Yn=qn.exports,jn={mixins:[ve],components:{DocumentosPendentes:Yn},data(){return{canAccess:!1,collapsedView:!1}},created(){let e=["SUPER_ADMIN","MEDICAL"];this.canAccess=e.includes(this.$store.state.Data.User.info.user_info.user_type),this.canAccess||(this.canAccess=this.checkAccessesControlFuncionality(["documentQueue.doctor.list","documentQueue.manage.list"],this.$store.state.Data.User.info.role_info.funcionality_privilegies))},methods:{collapseToggle(){this.collapsedView=!this.collapsedView}}},Kn=jn,Zn=(a("a3e6"),Object(I["a"])(Kn,On,pn,!1,null,null,null)),Qn=Zn.exports,Jn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-section"},[t("div",{staticClass:"search-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.locate")))]),e._v("\n    "+e._s(e.$t("attendance.patient"))+"\n  ")]),t(ce["a"],{staticClass:"mb-5 search-selects"},[t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(se["a"],{staticClass:"s-selects f-btns",attrs:{label:e.$t("attendance.client_name"),items:e.companies,"search-input":e.searchCompanies,"item-text":e.companyName,loading:e.loadingCompanies,disable:e.needCompanies,"item-value":"id","return-object":"",height:"37px","hide-details":"",outlined:"",clearable:""},on:{"update:searchInput":function(t){e.searchCompanies=t},"update:search-input":function(t){e.searchCompanies=t},click:e.enableCompanySearch},model:{value:e.selectedCompany,callback:function(t){e.selectedCompany=t},expression:"selectedCompany"}})],1),t(oe["a"],{attrs:{cols:"12",md:"3"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"217px","hide-details":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(de["a"],e._g(e._b({staticClass:"birthdate f-btns",attrs:{label:e.$t("attendance.birthday"),placeholder:"DD/MM/YYYY","hide-details":"",height:"37px",readonly:"",outlined:""},on:{click:function(t){e.date=null}},model:{value:e.birthdateFormated,callback:function(t){e.birthdateFormated=t},expression:"birthdateFormated"}},"v-text-field",n,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(yt["a"],{attrs:{"title-date-format":e.formattedBirthdate,max:e.$moment().format("YYYY-MM-DD"),locale:"pt-br"},on:{input:function(t){e.menu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),t(oe["a"],{staticClass:"search-container",attrs:{cols:"12",md:"6"}},[t(de["a"],{staticClass:"search-field f-btns",attrs:{placeholder:e.$t("attendance.search_hint"),height:"37px","error-messages":e.searchErrors,clearable:"",outlined:"","hide-details":""},on:{"click:clear":function(t){return e.clear()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()},blur:function(t){return e.$v.searchParam.$touch()}},model:{value:e.searchParam,callback:function(t){e.searchParam="string"===typeof t?t.trim():t},expression:"searchParam"}}),t(r["a"],{staticClass:"search-btn",class:{"disabled-events":!e.searchField},attrs:{height:"auto",width:"45px",color:"primary",tile:"",depressed:"",loading:e.searching},on:{click:function(t){return e.search()}}},[t(at["a"],{attrs:{color:"white",size:"16"}},[e._v("search")])],1)],1)],1),e.selectObligatory?t("div",{staticClass:"company-invalid"},[t("span",[e._v(e._s(e.$t("attendance.company_should_be_select")))])]):e._e(),e.results?t("div",{staticClass:"search-results"},[t($a["a"],{staticClass:"table mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.patient")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.cpf")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.birthday")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.kinship")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.client")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.contractee")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.group")))]),t("th",{staticClass:"text-left"},[e._v(e._s(e.$t("attendance.internal_name")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("attendance.status")))]),t("th",{staticClass:"text-center"},[e._v(e._s(e.$t("attendance.action")))])])]),t("tbody",e._l(e.users,(function(n,i){return n.top_hierarchy_member_id&&e.openedHierarchy!=n.top_hierarchy_member_id?e._e():t("tr",{key:i},[t("td",[t("div",{staticClass:"d-flex align-center"},[!n.top_hierarchy_member_id&&n.relationship&&n.relationship.length>0?t("div",[e.openedHierarchy&&e.openedHierarchy===n.list_id?e.openedHierarchy&&e.openedHierarchy==n.list_id?t(at["a"],{attrs:{color:"primary",height:"25px",width:"25px"},on:{click:e.closeHierarchy}},[e._v("\n                    mdi-minus\n                  ")]):e._e():t(at["a"],{attrs:{color:"primary",height:"25px",width:"25px"},on:{click:function(t){return e.openHierarchy(n.list_id)}}},[e._v("\n                    mdi-plus\n                  ")])],1):e._e(),t("span",{staticClass:"item-txt flex-grow-1",class:{"pl-7":n.top_hierarchy_member_id}},[e._v("\n                  "+e._s(n.social_name||n.name)+"\n                ")]),t("div",{staticClass:"d-inline-flex"},[n.social_name?t("div",{staticClass:"d-inline-flex ml-1"},[t("img",{attrs:{src:a("92a7")}})]):e._e(),n.vip||n.disabilities?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.vip,deficiencyIds:n.disabilities}}):e._e()],1)])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(e._f("formatCpfFilter")(n.cpf)))])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(e._f("formatBirthdate")(n.birthdate)))])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(n.hierarchy_name))])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(e.getCompanyName(n)))])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(n.contractee_name))])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(n.group_name))])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(n.internal_name))])]),t("td",{staticClass:"text-left"},[t("span",{staticClass:"item-txt"},[e._v(e._s(e.$t("attendance."+(n.status_name?n.status_name.toLowerCase():"unknown"))))])]),t("td",{staticClass:"text-center"},[t(r["a"],{staticClass:"white--text",attrs:{width:"90px",height:"26px",color:"primary",loading:e.loadingAttend},on:{click:function(t){return e.access(n)}}},[t("img",{staticClass:"ic-btn",attrs:{src:a("b29e")}}),t("span",{staticClass:"btn-text ml-2"},[e._v("\n                  "+e._s(e.$t("attendance.access"))+"\n                ")])])],1)])})),0)]},proxy:!0}],null,!1,1795471066)}),t("div",[e.totalPages>0&&!e.loading?t(_t["a"],{staticClass:"pagination",attrs:{length:e.totalPages,"total-visible":"10"},on:{input:function(t){return e.changePage()},next:function(t){return e.nextPage()},previous:function(t){return e.prevPage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e()],1),t("div",{staticClass:"mb-10 mt-4 s-buttons"},[!e.externalMedical&&e.canCreateEmergencyAttendance?t(r["a"],{staticClass:"mr-4 f-btns",attrs:{color:"#00B5E2",width:"255px",outlined:""},on:{click:function(t){return e.emergencyPass()}}},[t("div",{staticClass:"custom"},[t("span",{staticClass:"btn-text font-weight-normal"},[e._v("\n            "+e._s(e.$t("attendance.emergency_pass"))+"\n          ")])])]):e._e(),!e.externalMedical&&e.canCreateASOAttendance?t(r["a"],{staticClass:"f-btns mr-4",attrs:{color:"#00B5E2",width:"255px",outlined:""},on:{click:function(t){return e.asoPass()}}},[t("div",{staticClass:"custom2"},[t("span",{staticClass:"btn-text font-weight-normal"},[e._v("\n            "+e._s(e.$t("attendance.aso_pass"))+"\n          ")])])]):e._e(),e.externalMedical?e._e():t(r["a"],{staticClass:"f-btns",attrs:{color:"#00B5E2",width:"255px",outlined:""},on:{click:function(t){return e.saoCaetanoPass()}}},[t("div",{staticClass:"custom2"},[t("span",{staticClass:"btn-text font-weight-normal"},[e._v("\n            "+e._s(e.$t("attendance.eligibility_sao_caetano"))+"\n          ")])])])],1)],1):e._e(),t("AsoPass"),t("EmergencyPass"),t("SaoCaetanoPass"),t("CaseAttendanceScheduledModal")],1)},Wn=[],Xn=a("a523"),zn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"aso-modal"},[t(d["a"],{attrs:{width:"615"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("aso.title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t(re["a"],{staticClass:"pa-5"},[t(Xn["a"],[t(ce["a"],[t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{attrs:{label:e.$t("aso.patient"),"error-messages":e.nameErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.formattedDate,transition:"scale-transition","offset-y":"","min-width":"217px",required:""},on:{"update:returnValue":function(t){e.formattedDate=t},"update:return-value":function(t){e.formattedDate=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],attrs:{label:e.$t("aso.birthdate"),"error-messages":e.birthdateErrors,height:"37px",outlined:"",required:""},on:{change:function(t){return e.formatBirthdate(e.formattedDate)},blur:function(t){return e.handleBirthdate()}},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},a))]}}]),model:{value:e.due,callback:function(t){e.due=t},expression:"due"}},[t(yt["a"],{attrs:{max:e.today,width:"255px","no-title":"",scrollable:""},model:{value:e.birthdate,callback:function(t){e.birthdate=t},expression:"birthdate"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.due=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueDate()}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1)],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],attrs:{label:e.$t("aso.cpf"),"error-messages":e.cpfErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.checkCpf()}},model:{value:e.cpf,callback:function(t){e.cpf=t},expression:"cpf"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],attrs:{label:e.$t("aso.phone"),"error-messages":e.phoneErrors,height:"37px",outlined:"",required:""},on:{blur:function(t){return e.$v.phone.$touch()}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t($t["a"],{attrs:{items:e.gender,"error-messages":e.selectedGenderErrors,label:e.$t("aso.gender"),"return-object":"","item-text":"name","item-value":"id",height:"37px","append-icon":"keyboard_arrow_down",outlined:"",required:""},on:{blur:function(t){return e.$v.selectedGender.$touch()}},model:{value:e.selectedGender,callback:function(t){e.selectedGender=t},expression:"selectedGender"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(se["a"],{attrs:{items:e.companies,"search-input":e.searchCompanies,label:e.$t("aso.client"),"error-messages":e.clientErrors,"item-text":e.companyName,loading:e.loadingCompanies,"item-value":"id","return-object":"",height:"37px","append-icon":"keyboard_arrow_down",outlined:"",required:""},on:{"update:searchInput":function(t){e.searchCompanies=t},"update:search-input":function(t){e.searchCompanies=t},change:function(t){return e.listCompanyGroups()},blur:function(t){return e.$v.client.$touch()}},model:{value:e.client,callback:function(t){e.client=t},expression:"client"}})],1),t(oe["a"],{attrs:{cols:"12",md:"6"}},[t(se["a"],{attrs:{items:e.companyGroups,label:e.$t("aso.group"),"error-messages":e.groupsErrors,disabled:e.loadingGroups||!e.client,loading:e.loadingGroups,"return-object":"","item-text":"name","item-value":"id",height:"37px","append-icon":"keyboard_arrow_down",outlined:"",required:""},on:{blur:function(t){return e.$v.group.$touch()}},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}})],1)],1)],1)],1),e.invalidInfoError?t("div",{staticClass:"submit-error"},[e._v("\n        "+e._s(e.$t(e.errorMessage))+"\n      ")]):e._e(),t("div",{staticClass:"d-flex justify-center pb-8"},[t(r["a"],{staticClass:"white--text",attrs:{disabled:e.loading,loading:e.loading,color:"primary",width:"252px",height:"37px"},on:{click:function(t){return e.openPatientProfile()}}},[e._v("\n          "+e._s(e.$t("aso.generate"))+"\n        ")])],1)],1)],1)],1)},ei=[],ti={getCompany(e){return new Promise((t,a)=>{C.a.post(R.ENDPOINTS.GET_COMPANY,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},getGroups(e){return new Promise((t,a)=>{e.company_id=parseInt(e.company_id,10),C.a.post(R.ENDPOINTS.LIST_GROUPS,e,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(e=>{t(e.data.data)}).catch(e=>{a(e.response.data.error||e.response.data.error.code)})})},allCompanies(){return new Promise((e,t)=>{C.a.post(R.ENDPOINTS.ALL_COMPANIES,null,{headers:{"Content-Type":"application/json",token:window.sessionStorage.getItem("token")}}).then(t=>{e(t.data)}).catch(e=>{t(e.response.data.error||e.response.data.error.code)})})}},ai={mixins:[ve],data(){return{loading:!1,loadingGroups:!1,loadingCompanies:!1,searchTimeout:null,searchCompanies:"",dialog:!1,items:[],name:null,cpf:null,phone:null,gender:["Masculino","Feminino"],client:null,group:null,birthdate:null,formattedDate:null,due:null,companies:[],companyGroups:[],selectedGender:"Masculino",today:this.$moment().format("YYYY-MM-DD"),asoId:null,isEdit:!1,invalidCpfError:!1,invalidBirthdate:!1,invalidInfoError:!1,errorMessage:"access_controls.information_inconsistent"}},created(){this.$bus.on("aso-dialog",e=>{this.dialog=e}),this.$bus.on("edit-aso-pass",e=>{this.dialog=e.dialog,this.isEdit=!0,this.getPatientDataToEdit(e)})},methods:{close(){this.dialog=!1},listCompanyGroups(){if(!this.client)return;this.group=null,this.loadingGroups=!0;let e={company_id:this.client.id};ti.getGroups(e).then(e=>{this.companyGroups=e.group_list}).catch(e=>{console.error(e)}).finally(()=>{this.loadingGroups=!1})},openPatientProfile(){if(this.$v.$touch(),this.invalidCpfError=!1,this.invalidInfoError=!1,this.$v.$invalid)return;this.loading=!0;let e=this.$store.state.Data.User.token,t={company_id:this.client.id,token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_CALL_REASONS_COMPANY,t).then(e=>{this.$store.dispatch(this.$consts.SCREENING_REASONS_ACTIONS.SET,{screeningProgram:e.data});let t,a={token:this.$store.state.Data.User.token,name:this.name,cpf:this.getRawCpfHelper(this.cpf),phone:this.getRawPhoneHelper(this.phone),company_id:this.client.id,group_id:this.group.id,gender:this.selectedGender,birthdate:this.birthdate};this.$store.dispatch(this.$consts.USER_ACTIONS.CREATE_ASO_PASS,a).then(e=>{let n={is_aso:!0,birthdate:a.birthdate,company_id:a.company_id,group_id:a.group_id,id:e.data.member_id,gender:a.gender,phone:a.phone,cpf:a.cpf,name:a.name,companies:"",company_name:"",company_nickname:"",contact_time:"",email:"",is_transgender:"",phone_optional:"",social_name:"",type:""};this.$store.dispatch(this.$consts.USER_ACTIONS.GET_PROGRAM_BY_COMPANY,{company_id:a.company_id}).then(e=>{e.data.forEach(e=>{e.program_info.is_screening&&"COMPANY"===e.program_info.type&&(t=e)}),t&&0!==Object.keys(t).length?(a.company={id:a.company_id,name:a.company_name},this.$store.dispatch(this.$consts.PATIENT_ACTIONS.SET,n),this.$store.dispatch(this.$consts.SCREENING_ACTIONS.SET,{screeningProgram:t,programs:e.data}),this.dialog=!1,this.$bus.emit("open-triage-page",n),this.$bus.emit("is-aso",n)):this.$bus.emit("open-snackbar",{message:"no_company_screening"})}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1})}).catch(e=>{this.loading=!1,console.error(e),this.checkSaveError(e.message)})}).catch(e=>{console.error(e)})},checkSaveError(e){if(this.invalidInfoError=e.includes("patient_information_are_not_consistent")||e.includes("The name or birthdate of this pacient is not consistent with our database."),this.invalidInfoError)return this.errorMessage="access_controls.information_inconsistent",void this.$v.cpf.$touch();this.invalidInfoError=e.includes("This patient already exists on this company"),this.invalidInfoError&&(this.errorMessage="access_controls.user_exists_in_company",this.$v.cpf.$touch())},saveDueDate(){this.formatDueDate(),this.$refs.menu.save(this.formattedDate)},formatDueDate(){if(this.birthdate){const[e,t,a]=this.birthdate.split("-");return this.formattedDate=`${a}/${t}/${e}`,this.formattedDate}},handleBirthdate(){this.$v.formattedDate.$touch()},formatBirthdate(e){if(this.formattedDate){const[t,a,n]=this.formattedDate.split("/");let i=Ne()(new Date,"DD/MM/YYYY").diff(Ne()(this.formattedDate,"DD/MM/YYYY"),"days");!i||i<0?(this.invalidBirthdate=!0,this.formattedDate=e):(this.invalidBirthdate=!1,this.birthdate=`${n}-${a}-${t}`,this.$refs.menu.save(this.formattedDate))}},listCompanies(e=null){let t=window.localStorage.getItem("companies");if(t&&(t=JSON.parse(t)),t)return void(this.companies=t.data.company_list);this.loadingCompanies=!0;let a={redux:!0};e&&(a.filters={name:e}),this.searchTimeout=setTimeout(()=>{be.listCompany(a).then(e=>{this.companies=e.data.company_list}).catch(e=>{console.error(e)}).finally(()=>{this.loadingCompanies=!1})},400)},companyName(e){return e.nick_name?`${e.id} (${e.nick_name}) - ${e.name}`:`${e.id} - ${e.name}`},getPatientDataToEdit(e){this.name=e.name,this.cpf=this.formatCpfHelper(e.cpf),this.phone=this.formatPhoneHelper(e.phone),this.birthdate=e.birthdate,this.client=e.client,this.selectedGender=e.selectedGender,this.asoId=e.id,this.formatDueDate()},checkCpf(){this.invalidCpfError=!this.isCpfValid(this.cpf),this.invalidCpfError&&this.$v.cpf.$touch()},handleSubmit(){this.isEdit?this.updateAsoPass():this.openPatientProfile()},updateAsoPass(){if(this.$v.$touch(),!this.$v.$invalid){let e=this.$store.state.Data.User.token,t={id:this.asoId,name:this.name,cpf:this.getRawCpfHelper(this.cpf),phone:this.getRawPhoneHelper(this.phone),company_id:this.client.id,group_id:this.group.id,gender:this.selectedGender,birthdate:this.birthdate,token:e};this.$store.dispatch(this.$consts.USER_ACTIONS.UPDATE_ASO_PASS,t).then(e=>{this.dialog=!1,this.$bus.emit("send-edited-aso-data",t)}).catch(e=>{console.error(e)})}}},computed:{birthdateErrors(){const e=[];return this.$v.formattedDate.$dirty?(this.$v.formattedDate.required||(e.push(this.$t("access_controls.required")),this.invalidBirthdate=!1),this.invalidBirthdate&&e.push(this.$t("patient.invalid_birthdate")),e):e},selectedGenderErrors(){const e=[];return this.$v.selectedGender.$dirty?(!this.$v.selectedGender.required&&e.push(this.$t("access_controls.required")),e):e},nameErrors(){const e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push(this.$t("access_controls.required")),e):e},cpfErrors(){const e=[];return this.$v.cpf.$dirty?(!this.$v.cpf.required&&e.push(this.$t("access_controls.required")),!this.$v.cpf.minLength&&e.push(this.$t("access_controls.min_length")),this.invalidCpfError&&e.push(this.$t("access_controls.invalid_cpf")),e):e},phoneErrors(){const e=[];return this.$v.phone.$dirty?(!this.$v.phone.required&&e.push(this.$t("access_controls.required")),!this.$v.phone.minLength&&e.push(this.$t("access_controls.min_length")),e):e},clientErrors(){const e=[];return this.$v.client.$dirty?(!this.$v.client.required&&e.push(this.$t("access_controls.required")),e):e},groupsErrors(){const e=[];return this.$v.group.$dirty?(!this.$v.group.required&&e.push(this.$t("access_controls.required")),e):e}},watch:{searchCompanies(e){clearTimeout(this.searchTimeout),this.listCompanies(e)}},validations:{formattedDate:{required:Ae["required"]},selectedGender:{required:Ae["required"]},name:{required:Ae["required"]},cpf:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},phone:{required:Ae["required"],minLength:Object(Ae["minLength"])(14)},birthdate:{required:Object(Ae["requiredIf"])((function(){return!this.formattedDate}))},client:{required:Ae["required"]},group:{required:Object(Ae["requiredIf"])((function(){return this.client&&this.companyGroups.length>0}))}}},ni=ai,ii=(a("2a1f"),Object(I["a"])(ni,zn,ei,!1,null,null,null)),si=ii.exports,oi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emergency-modal"},[t(d["a"],{attrs:{width:"615",height:"367px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l["a"],[t(c["c"],{staticClass:"header"},[t("div",{staticClass:"card-header"},[t("span",{staticClass:"white--text"},[e._v(e._s(e.$t("emergency.title")))])]),t("div",{staticClass:"close"},[t("img",{staticClass:"close-btn",attrs:{src:a("bf37")},on:{click:function(t){return e.close()}}})])]),t("div",{staticClass:"fields"},[t("div",{staticClass:"row1"},[t("div",{staticClass:"list-container"},[t(de["a"],{staticClass:"aso-fields ml-5",attrs:{"error-messages":e.nameErrors,height:"37px",label:e.$t("aso.patient"),outlined:""},on:{blur:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(ee["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.formattedDate,transition:"scale-transition","offset-y":"","min-width":"217px"},on:{"update:returnValue":function(t){e.formattedDate=t},"update:return-value":function(t){e.formattedDate=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(de["a"],e._g({directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"birth-field ml-4",attrs:{label:e.$t("aso.birthdate"),height:"37px","error-messages":e.birthdateErrors,outlined:""},on:{change:function(t){return e.formatBirthdate(e.formattedDate)},blur:function(t){return e.$v.formattedDate.$touch()}},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},a))]}}]),model:{value:e.due,callback:function(t){e.due=t},expression:"due"}},[t(yt["a"],{attrs:{max:e.today,width:"255px","no-title":"",scrollable:""},model:{value:e.birthdate,callback:function(t){e.birthdate=t},expression:"birthdate"}},[t("div",{staticClass:"flex-grow-1"}),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.due=!1}}},[e._v(e._s(e.$t("external_controls.cancel")))]),t(r["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.saveDueDate()}}},[e._v(e._s(e.$t("external_controls.ok")))])],1)],1)],1),e.invalidBirthdate?t("div",{staticClass:"date-error mt-n5"},[t("span",[e._v(e._s(e.$t("patient.invalid_birthdate")))])]):e._e(),t("div",{staticClass:"row2"},[t("div",{staticClass:"list-container"},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],staticClass:"aso-fields",attrs:{"error-messages":e.cpfErrors,id:"cpf",height:"37px",label:e.$t("aso.cpf"),outlined:""},on:{blur:function(t){return e.$v.cpf.$touch()}},model:{value:e.cpf,callback:function(t){e.cpf=t},expression:"cpf"}})],1),t("div",{staticClass:"list-container"},[t(de["a"],{directives:[{name:"mask",rawName:"v-mask",value:["+## (##) ####-####","+## (##) #####-####"],expression:"['+## (##) ####-####', '+## (##) #####-####']"}],staticClass:"aso-fields ml-4",attrs:{id:"phone","error-messages":e.phoneErrors,height:"37px",label:e.$t("aso.phone"),outlined:""},on:{blur:function(t){return e.$v.phone.$touch()}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)]),t("div",{staticClass:"row3"},[t("div",{staticClass:"list-container"},[t($t["a"],{staticClass:"aso-fields",attrs:{"error-messages":e.selectedGenderErrors,items:e.gender,height:"37px",label:e.$t("aso.gender"),"append-icon":"keyboard_arrow_down",outlined:""},on:{blur:function(t){return e.$v.selectedGender.$touch()}},model:{value:e.selectedGender,callback:function(t){e.selectedGender=t},expression:"selectedGender"}})],1),t("div",{staticClass:"list-container"},[t(se["a"],{staticClass:"aso-fields ml-4",attrs:{items:e.companies,"error-messages":e.clientErrors,"search-input":e.searchCompanies,"item-text":e.companyName,label:e.$t("aso.client"),loading:e.loadingCompanies,"item-value":"id","return-object":"",height:"37px","append-icon":"keyboard_arrow_down",outlined:""},on:{"update:searchInput":function(t){e.searchCompanies=t},"update:search-input":function(t){e.searchCompanies=t},change:function(t){return e.listCompanyGroups()},blur:function(t){return e.$v.client.$touch()}},model:{value:e.client,callback:function(t){e.client=t},expression:"client"}})],1)]),t("div",{staticClass:"row4"},[t("div",{staticClass:"list-container"},[t(se["a"],{attrs:{items:e.companyGroups,label:e.$t("aso.group"),"error-messages":e.groupsErrors,disabled:e.loadingGroups||!e.client,loading:e.loadingGroups,"return-object":"","item-text":"name","item-value":"id",height:"37px","append-icon":"keyboard_arrow_down",outlined:"",required:""},on:{blur:function(t){return e.$v.group.$touch()}},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}})],1)])]),null!=e.submitError?t("div",{staticClass:"submit-error"},[e._v(e._s(e.submitError))]):e._e(),t("div",{staticClass:"confirm"},[t(r["a"],{staticClass:"white--text btn mb-8",attrs:{color:"primary",width:"225px",height:"37px"},on:{click:function(t){return e.handleSubmit()}}},[e._v(e._s(e.$t("aso.generate")))])],1)],1)],1)],1)},ri=[],li={mixins:[ve],data(){return{loadingCompanies:!1,searchTimeout:null,searchCompanies:"",dialog:!1,items:[],name:null,cpf:null,birthdate:null,phone:null,gender:["Masculino","Feminino"],selectedGender:null,due:null,formattedDate:null,isEdit:!1,companies:[],companyGroups:[],loadingGroups:!1,group:null,client:null,emergencyId:null,today:this.$moment().format("YYYY-MM-DD"),invalidBirthdate:!1,submitError:null,screening:!0,transferPatient:!1,errorTable:{this_person_already_exists_as_member:"Usu
ximo atendimento:",e),this.$bus.emit("toggle-loading",!1)}).finally(()=>{this.loading=!1,console.log("[SKIP MODAL] Finalizado processo de fechamento.")}))}}},Qe=Ze,Je=(a("b689"),Object(I["a"])(Qe,qe,Ye,!1,null,"8653ecc2",null)),We=Je.exports,Xe={name:"Sidebar",components:{InactivityKickModal:He,Profile:$e,CaseAttendanceSkipReasonSuccessModal:We},mixins:[ve],data(){return{selectedItem:"",items:[],data:"",dialog:!1,active:!1,name:"",profileDialog:!1,checkbox:!1,access_flags:{},enable_navigation:!0,version:"1.0.0.3.16"}},computed:{companyLogo(){return this.$store.getters[this.$consts.USER_ACTIONS.GET_COMPANY_LOGO]}},created(){let e=localStorage.getItem("last-version");e&&e==this.version||(localStorage.setItem("last-version",this.version),window.location.reload(!0)),this.access_flags.CONTROLES=this.checkAccessesControlFuncionality(["manage.internalAttendanceCenters.create","manage.internalAttendanceCenters.update","manage.generalAttendanceCenters.update","manage.reports.list","manage.reports.get","manage.operationUsers.list","manage.operationUsers.get","manage.operationUsers.create","manage.operationUsers.update","manage.medicalUsers.list","manage.medicalUsers.get","manage.medicalUsers.create","manage.medicalUsers.update","manage.companies.create","manage.companies.update","manage.internalCompanies.update","manage.payers.create","manage.payers.update","manage.internalPayers.create","manage.internalPayers.update","manage.callReasons.create","manage.callReasons.update","manage.callReasons.delete","manage.financialReports.get","availability.user.list","manage.generalOperationUsers.update","manage.internalOperationUsers.update","manage.generalMedicalUsers.create","manage.internalScheduleUsers.create","manage.generalAttendanceCenter.delete","manage.internalCompanies.delete","manage.payer.delete","manage.internalPayers.delete","manage.internalCallReasons.create","manage.internalCallReasons.update","manage.internalCallReasons.delete","manage.internalProfessionalOnline.list","manage.internalProgramStatus.list","manage.internalAttendanceCenters.delete"],this.$store.state.Data.User.info.role_info.funcionality_privilegies);const t=[this.$consts.USER_ROLE_IDS.ENFERMAGEM_RECEPTIVA,this.$consts.USER_ROLE_IDS.ENFERMEIRO_OBSTRETA_RESTRITO,this.$consts.USER_ROLE_IDS.ENFERMEIRA_ATIVA_COMPLETO,this.$consts.USER_ROLE_IDS.TECNICO_ENFERMAGEM_RESTRITO,this.$consts.USER_ROLE_IDS.TECNICO_ENFERMAGEM_COMPLETO,this.$consts.USER_ROLE_IDS.ENFERMEIRA_ATIVO_RESTRITO,this.$consts.USER_ROLE_IDS.TEC_ENFERMAGEM,this.$consts.USER_ROLE_IDS.ENFERMEIRO_OBSTRETA_COMPLETO,this.$consts.USER_ROLE_IDS.SUPERVISOR_TUW];this.access_flags.SCHEDULE=this.checkAccessesControlFuncionalityContains("schedule",this.$store.state.Data.User.info.role_info.funcionality_privilegies)&&!t.includes(this.$store.state.Data.User.info.role_info.role_id),this.access_flags.ATENDER=this.checkAccessesControlFuncionalityContains("attendanceQueue",this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.access_flags.ATENDER||(this.access_flags.ATENDER=this.checkAccessesControlFuncionality(["memberSearch.general.list"],this.$store.state.Data.User.info.role_info.funcionality_privilegies)),this.access_flags.COUPONS=this.checkAccessesControlFuncionalityContains("manage.giftCard",this.$store.state.Data.User.info.role_info.funcionality_privilegies),this.selectedItem=localStorage.getItem("lastPage"),this.selectedItem||(this.access_flags.ATENDER?this.selectedItem="Tabs":this.access_flags.CONTROLES?this.selectedItem="Controls":this.access_flags.SCHEDULE?this.selectedItem="Schedule":this.access_flags.COUPONS&&(this.selectedItem="Coupons")),this.items=[{name:"Tabs",path:"/atender",hasAccess:this.access_flags.ATENDER,text:this.$t("sidebar_menu.attend"),icon:"ic_sidebar_atender.svg"},{name:"Schedule",path:"/schedule",hasAccess:this.access_flags.SCHEDULE,text:this.$t("sidebar_menu.schedule"),icon:"ic_sidebar_calendar.svg"},{name:"Controls",path:"/controls",hasAccess:this.access_flags.CONTROLES,text:this.$t("sidebar_menu.controls"),icon:"ic_sidebar_relatorio.svg"},{name:"Coupons",path:"/coupons",hasAccess:this.access_flags.COUPONS,text:this.$t("sidebar_menu.coupons"),icon:"ic_sidebar_coupons.svg"}],this.$bus.on("profile-close",()=>{this.profileDialog=!1}),this.$bus.on("is-attending",()=>{this.enable_navigation=!1}),this.$bus.on("ended-attendance",()=>{this.enable_navigation=!0})},methods:{menuItemClick(e){this.selectedItem=e,"Profile"!=e&&this.open(e)},open(e){localStorage.setItem("lastPage",e),this.data=e,this.$bus.emit("page",this.data)},openProfile(){this.profileDialog=!0,this.$bus.emit("profile-open",this.profileDialog)}}},ze=Xe,et=(a("d27e"),Object(I["a"])(ze,ne,ie,!1,null,null,null)),tt=et.exports,at=a("132d"),nt=a("490a"),it=a("71a3"),st=a("c671"),ot=a("fe57"),rt=a("aac8"),lt=a("3a2f"),ct=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabs-main mt-4"},[t("snackbar"),[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}],staticClass:"loading-container"},[t(nt["a"],{attrs:{indeterminate:"",color:"primary",size:"64"}}),t("p",{staticClass:"mt-4"},[e._v("Carregando...")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showLoading,expression:"!showLoading"}]},[t(ot["a"],[t(it["a"],{on:{click:function(t){return e.changeTab({tab:0,list:"attend"})}}},[t("span",{staticClass:"tab-title"},[e._v(e._s(e.$t("attendance.attendance_list")))])]),e._l(e.persistentTabs,(function(a,n){return e.active_triage?t(it["a"],{key:"pat-"+n,attrs:{id:"patient"},on:{click:function(t){return e.changeTab({tab:n,list:"patient",name:a.social_name?a.social_name:a.name})}}},[t("span",{staticClass:"tab-title"},[e._v("\n          "+e._s(e.$t("attendance.current_attendance"))+" "+e._s(a.social_name?a.social_name:a.name)+"\n        ")]),t("span",{staticClass:"ml-2 tab-title",on:{click:function(t){return e.closeTab(a)}}},[e._v("x")])]):e._e()})),e._l(e.persistentDocTabs,(function(a,n){return e.active_triage?e._e():t(it["a"],{key:"doc-pat-"+n,attrs:{id:"doc-patient"},on:{click:function(t){return e.changeTab({tab:n,list:"doctor-patient",name:a.social_name?a.social_name:a.name})}}},[t("span",{staticClass:"tab-title"},[e._v("\n          "+e._s(e.$t("attendance.current_attendance"))+" "+e._s(a.social_name?a.social_name:a.name)+"\n        ")]),e.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")?e._e():t("span",{staticClass:"ml-2 tab-title",on:{click:function(t){return e.closeTab(a)}}},[e._v("x")])])})),e._l(e.persistentEmergencyTabs,(function(a,n){return t(it["a"],{key:"emergency-"+n,attrs:{id:"emergency"},on:{click:function(t){return e.changeTab({tab:n,list:"emergency-pass"})}}},[t("span",{staticClass:"tab-title"},[e._v("\n          "+e._s(e.$t("attendance.current_attendance"))+" "+e._s(a.social_name?a.social_name:a.name)+"\n        ")]),t("span",{staticClass:"ml-2 tab-title",on:{click:function(t){return e.closeEmergencyTab(a)}}},[e._v("x")])])})),e._l(e.persistentAsoTabs,(function(a,n){return t(it["a"],{key:"aso-"+n,attrs:{id:"aso"},on:{click:function(t){return e.changeTab({tab:n,list:"aso-pass"})}}},[t("span",{staticClass:"tab-title"},[e._v("\n          "+e._s(e.$t("attendance.current_attendance"))+" "+e._s(a.social_name?a.social_name:a.name)+"\n        ")]),t("span",{staticClass:"ml-2 tab-title",on:{click:function(t){return e.closeAsoTab(a)}}},[e._v("x")])])}))],2),t(rt["a"],{model:{value:e.active_tab,callback:function(t){e.active_tab=t},expression:"active_tab"}},[t("TransferAttendanceModal"),t("ConfirmationModal"),e.isVirtualClinic?e._e():t(st["a"],[e.specialist?e._e():t("div",[t("Search"),e.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")?t("div",[t("TabsNews")],1):t("div",[t("FilaDocumentosPendentes"),e.canAccessPrograms?t("FilaMeusAtendimentos",{attrs:{items:e.items}}):e._e(),t("div",{staticClass:"divider"}),e.canAccessPrograms?t("FilaAtendimentos",{attrs:{items:e.items}}):e._e(),e.canAccessOtherPrograms?t("FilaAtendimentosOperacional",{attrs:{items:e.items}}):e._e()],1)],1),e.specialist?t("div",[t("Search"),e.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")?t("div",[t("TabsNews")],1):t("div",[t("FilaDocumentosPendentes"),e.canAccessPrograms?t("FilaMeusAtendimentos",{attrs:{items:e.items}}):e._e(),t("div",{staticClass:"divider"}),e.canAccessPrograms?t("FilaAtendimentos",{attrs:{items:e.items}}):e._e(),e.canAccessOtherPrograms?t("FilaAtendimentosOperacional",{attrs:{items:e.items}}):e._e()],1)],1):e._e()]),e.isVirtualClinic?t(st["a"],[t("ExternalSearch"),e.featureEnabled("FEATURE_AUTO_SERVICE_QUEUE")?t("div",[t("TabsNews")],1):t("div",[t("FilaMeusAtendimentosExterno",{attrs:{items:e.items}}),t("div",{staticClass:"divider"}),t("FilaAtendimentosExterno",{attrs:{items:e.items}})],1)],1):e._e()],1),null==e.active_tab?t("div",{staticClass:"patient-name-tab mb-8 mt-8 d-flex justify-space-between"},[null==e.active_emergency_tab&&null==e.active_aso_tab?t("div",[t("div",{staticClass:"patient-info-container"},[t("div",{staticClass:"info-row"},[t("div",{staticClass:"info-item"},[e.patientInfo.vip?t(lt["a"],{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:n}){return[t(l["a"],e._g(e._b({staticClass:"bar",staticStyle:{height:"18px",width:"6px","z-index":"9999"},attrs:{color:e.$consts.DISABILITY_AND_VIP_COLORS.VIP}},"v-card",n,!1),a))]}}],null,!1,970784777)},[t("span",[e._v(e._s(e.$t("deficiency_and_vip.vip")))])]):e._e(),t("span",{staticClass:"font-weight-bold patient-name"},[e._v("\n                "+e._s(e.$t("attendance.social_name"))+":\n              ")]),t("span",{staticClass:"patient-name text-capitalize"},[e._v("\n                "+e._s(e.patientInfo&&e.patientInfo.social_name?e.patientInfo.social_name.toLowerCase():e.patientInfo&&e.patientInfo.name?e.patientInfo.name.toLowerCase():"")+"\n              ")]),e.patientInfo&&e.patientInfo.social_name?t("img",{staticClass:"flag-icon",attrs:{src:a("92a7"),alt:"LGBTQIA+ Flag"}}):e._e()],1),e.patientInfo&&e.patientInfo.deficiency_ids?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:!1,deficiencyIds:e.patientInfo.deficiency_ids}}):e._e(),t("div",{staticClass:"divider-vertical"}),t("div",{staticClass:"info-item"},[t("span",{staticClass:"font-weight-bold patient-name small"},[e._v("\n                "+e._s(e.$t("attendance.patient"))+":\n              ")]),t("span",{staticClass:"patient-name small text-capitalize"},[e._v("\n                "+e._s(e.patientInfo&&e.patientInfo.name?e.patientInfo.name.toLowerCase():"")+"\n              ")])])],1),t("div",{staticClass:"info-row"},[e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.program_information&&!e.active_history?t("div",{staticClass:"info-item info-box"},[e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.program_information&&e.specialPrograms.includes(e.getCaseAttendanceHeaders.program_information[0].id)?t(at["a"],{attrs:{size:"20",color:Object.values(e.$consts.CLASSIFICATION_COLORS)[e.getCaseAttendanceHeaders.urgency_level||0]}},[e._v("\n                  fiber_manual_record\n                ")]):e._e(),t("span",{staticClass:"font-weight-bold patient-name small"},[e._v("\n                "+e._s(e.$t("attendance.program"))+":\n              ")]),t("span",{staticClass:"patient-name small text-capitalize"},[e._v("\n                "+e._s(e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.program_information?e.getCaseAttendanceHeaders.program_information[0].name:"")+"\n                "),e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.is_schedule?t("span",{staticClass:"font-weight-bold patient-name small"},[e._v("\n                "+e._s(e.$t("attendance.schedule_time_tabs"))+":\n                "+e._s(e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.due_time?e.getLocalTime(e.getCaseAttendanceHeaders.due_time):"")+"\n                ")]):t("span",{staticClass:"font-weight-bold patient-name small"},[e._v("\n                "+e._s(e.$t("attendance.schedule_time_tabs2"))+":\n                "+e._s(e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.due_time?e.getFormattedDateTime(e.getCaseAttendanceHeaders.due_date,e.getCaseAttendanceHeaders.due_time):"")+"\n                ")])])],1):e._e(),e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.company_name?t("div",{staticClass:"info-item info-box"},[t("span",{staticClass:"font-weight-bold patient-name small"},[e._v("\n                "+e._s(e.$t("attendance.client_tabs"))+":\n              ")]),t("span",{staticClass:"patient-name small text-capitalize"},[e._v("\n                "+e._s(e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.company_name?e.getCaseAttendanceHeaders.company_name.toLowerCase():"")+"\n              ")])]):e._e(),e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.company_name?t("div",{staticClass:"info-item info-box"},[t("span",{staticClass:"font-weight-bold patient-name small"},[e._v("\n                "+e._s(e.$t("attendance.contractee_tabs"))+":\n              ")]),e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.triage?t("span",{staticClass:"patient-name small text-capitalize"},[e._v("\n                "+e._s(e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.contractee_name?e.getCaseAttendanceHeaders.contractee_name.toLowerCase():"")+"\n              ")]):e._e(),e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.company_info?t("span",{staticClass:"patient-name small text-capitalize"},[e._v("\n                "+e._s(e.getCaseAttendanceHeaders&&e.getCaseAttendanceHeaders.company_info&&e.getCaseAttendanceHeaders.company_info.contractee_name?e.getCaseAttendanceHeaders.company_info.contractee_name.toLowerCase():"")+"\n              ")]):e._e()]):e._e()])])]):e._e()]):e._e(),t(ot["a"],[null==e.active_tab?t(it["a"],{attrs:{id:"spat"},on:{click:function(t){return e.changeSubTab({item:"pat"})}},model:{value:e.active_sub_tab,callback:function(t){e.active_sub_tab=t},expression:"active_sub_tab"}},["pat"==e.display?t(le["a"],{staticClass:"c-icons mr-2",attrs:{src:a("4d41")}}):e._e(),"pat"!=e.display?t(le["a"],{staticClass:"c-icons mr-2 disabled-icon",attrs:{src:a("4d41")}}):e._e(),t("span",{staticClass:"tab-title"},[e._v(e._s(e.$t("attendance.attend_patient")))])],1):e._e(),null==e.active_tab&&null==e.active_emergency_tab&&0==e.is_emergency?t(it["a"],{directives:[{name:"show",rawName:"v-show",value:e.tmpShow,expression:"tmpShow"}],on:{click:function(t){return e.changeSubTab({item:"health-hist"})}}},["health-hist"==e.display?t(le["a"],{staticClass:"c-icons mr-2",attrs:{src:a("3304")}}):e._e(),"health-hist"!=e.display?t(le["a"],{staticClass:"c-icons mr-2 disabled-icon",attrs:{src:a("3304")}}):e._e(),t("span",{staticClass:"tab-title"},[e._v(e._s(e.$t("attendance.health_history")))]),e.isEditingHealthHistory?t(at["a"],{attrs:{size:"16",color:"orange"}},[e._v("warning")]):e._e()],1):e._e(),null==e.active_tab?t(it["a"],{directives:[{name:"show",rawName:"v-show",value:e.tmpShow,expression:"tmpShow"}],on:{click:function(t){return e.changeSubTab({item:"hist"})}},model:{value:e.active_sub_tab,callback:function(t){e.active_sub_tab=t},expression:"active_sub_tab"}},["hist"==e.display?t(le["a"],{staticClass:"c-icons mr-2",attrs:{src:a("cc0d")}}):e._e(),"hist"!=e.display?t(le["a"],{staticClass:"c-icons mr-2 disabled-icon",attrs:{src:a("cc0d")}}):e._e(),t("span",{staticClass:"tab-title"},[e._v(e._s(e.$t("attendance.attend_history")))])],1):e._e(),null==e.active_tab?t("div",{staticClass:"condition"},[t("span",{staticClass:"p-condition"},[e._v(e._s(e.$t("attendance.condition")))]),t("span",{staticClass:"cond-status"},[e._v(" "+e._s(e.$t("attendance.in_monitoring")))])]):e._e()],1),null!=e.active_emergency_tab?t("div",{staticClass:"patient-name mb-4 mt-n8"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.patient")))]),t("span",{},[e._v(e._s(e.emergencyPatient))]),e._v("\n        ("+e._s(e.$t("patient.emergency_pass"))+")\n      ")]):e._e(),null!=e.active_aso_tab?t("div",{staticClass:"patient-name mb-4 mt-n8"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("patient.patient")))]),t("span",[e._v(e._s(e.asoPatient))]),e._v("\n        ("+e._s(e.$t("patient.aso_pass"))+")\n      ")]):e._e(),e.active_triage&&null==e.active_tab?t(rt["a"],{model:{value:e.active_sub_tab,callback:function(t){e.active_sub_tab=t},expression:"active_sub_tab"}},e._l(e.persistentTabs,(function(a,n){return t(st["a"],{key:n},[t("PatientMain",{directives:[{name:"show",rawName:"v-show",value:"pat"==e.display&&!1===e.active_history,expression:"display == 'pat' && active_history === false"}],attrs:{item:a}}),t("HealthHistory",{directives:[{name:"show",rawName:"v-show",value:"health-hist"==e.display,expression:"display == 'health-hist'"}],attrs:{item:a}}),"hist"==e.display?t("HistoryTabs",{attrs:{item:a}}):e._e()],1)})),1):e._e(),e.active_triage?e._e():t(rt["a"],{attrs:{id:"patt"},model:{value:e.active_doc_tab,callback:function(t){e.active_doc_tab=t},expression:"active_doc_tab"}},e._l(e.persistentDocTabs,(function(a,n){return t(st["a"],{key:n},[t("DoctorPatientMain",{directives:[{name:"show",rawName:"v-show",value:"pat"==e.display&&!1===e.active_history,expression:"display == 'pat' && active_history === false"}],attrs:{item:a}}),t("HealthHistory",{directives:[{name:"show",rawName:"v-show",value:"health-hist"==e.display,expression:"display == 'health-hist'"}],attrs:{item:a}}),"hist"==e.display?t("HistoryTabs",{attrs:{item:a}}):e._e()],1)})),1),t(rt["a"],{model:{value:e.active_emergency_tab,callback:function(t){e.active_emergency_tab=t},expression:"active_emergency_tab"}},e._l(e.persistentEmergencyTabs,(function(e,a){return t(st["a"],{key:a},[t("EmergencyPatient",{attrs:{item:e}})],1)})),1),t(rt["a"],{model:{value:e.active_aso_tab,callback:function(t){e.active_aso_tab=t},expression:"active_aso_tab"}},e._l(e.persistentAsoTabs,(function(a,n){return t(st["a"],{key:n},[t("PatientMain",{attrs:{item:a,ASOCompany:e.chosenASOCompany}})],1)})),1)],1),t("TabModal"),t("CloseTabConfirmation"),t("LeaveAttendanceAlert"),t("CancelAttendanceModal",{attrs:{inAttendance:"false"}}),t("DocumentsAsyncWarningModal")]],2)},dt=[],mt=function(){var e=this,t=e._self._c;return e.canAccess?t("div",[t("div",{staticClass:"my-attend"},[t("div",{staticClass:"mine-title"},[t("span",{staticClass:"font-weight-bold mr-1"},[e._v(e._s(e.$t("attendance.my")))]),e._v("\n      "+e._s(e.$t("attendance.attendances"))+"\n      "),t(r["a"],{staticClass:"collapse-btn",attrs:{height:"22px",color:"primary",tile:""},on:{click:e.collapseToggle}},[e.collapsedView?e._e():t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("015d")}}),e.collapsedView?t("img",{staticClass:"mr-1 c-icon",attrs:{src:a("9360")}}):e._e()])],1),e._l(e.programs,(function(a,n){return e.collapsedView?e._e():t("div",{key:a.id},[t("MeusAtendimentos",{attrs:{program_info:a,programId:a.id}})],1)}))],2)]):e._e()},ut=[],At=a("8fea"),_t=a("891e"),Et=function(){var e=this,t=e._self._c;return e.program_info&&e.program_info.id?t("div",[e.collapsedView?e._e():t("div",[t("div",{staticClass:"pt-1 mt-10 mb-4"},[t("span",{staticClass:"mine-subtitle"},[e._v(e._s(e.$t("attendance.pending_mine")))]),t("span",{staticClass:"speciality"},[e._v("("+e._s(e.program_info.name)+")")])]),t("TabsListsFilterSearch",{attrs:{listName:"USER_ATTENDANCE",collapsedView:e.collapsedView,handleChangeInfluence:e.changeInfluence,handleChangeSearch:e.changeSearch}}),e.loading||e.loadingHeaders?t("div",{staticClass:"ld-icon"},[t(nt["a"],{attrs:{active:e.loading||e.loadingHeaders,indeterminate:"",color:"primary",size:"28",width:"2"}})],1):t("div",[t(At["a"],{staticClass:"mine-table",attrs:{headers:e.headers,items:e.attendances,"hide-default-header":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function({props:a}){return[t("tr",e._l(a.headers,(function(a){return t("th",[a.sortable?t("button",{staticClass:"header-button d-flex justify-center",class:[e.hover==a.header||e.order.column==a.header?"px-2":"px-4"],on:{click:function(t){return e.orderingAttendancesQueue(a.header,"ASC")},mouseover:function(t){return e.setHeaderHover(a.header)},mouseleave:function(t){return e.setHeaderHover(null)}}},[t(at["a"],{directives:[{name:"show",rawName:"v-show",value:e.hover==a.header||e.order.column==a.header,expression:"\n                    hover == itemHeader.header || order.column == itemHeader.header\n                  "}],attrs:{small:""}},[e._v("\n                  "+e._s(e.order.order_type&&"DESC"==e.order.order_type?"arrow_downward":"arrow_upward")+"\n                ")]),e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")],1):t("div",{staticClass:"px-2"},[e._v("\n                "+e._s(e.$t("attendance."+a.translation))+"\n              ")])])})),0)]}},{key:"item",fn:function(n){return[t("tr",{class:{"colored-latercomer":n.item.is_parent,colored:e.isExpired(n.item.sla)&&!n.item.is_parent,normal:!e.isExpired(n.item.sla)&&!n.item.is_parent}},[e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CLASSIFICATION)?t("td",[t(at["a"],{attrs:{size:"20",color:Object.values(e.$consts.CLASSIFICATION_COLORS)[n.item.urgency_level||0]}},[e._v("\n                fiber_manual_record\n              ")])],1):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.COMPANY_NAME)?t("td",[t("span",{staticClass:"tb-items"},[n.item.company_info&&(n.item.company_info.nick_name||n.item.company_info.name)?t("div",[e._v("\n                  "+e._s(n.item.company_info.nick_name||n.item.company_info.name)+"\n                ")]):n.item.company_name?t("div",[e._v("\n                  "+e._s(n.item.company_name)+"\n                ")]):e._e()])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.PATIENT_NAME)?t("td",[t("span",{staticClass:"tb-items d-flex"},[t("span",{staticClass:"flex-grow-1"},[e._v("\n                  "+e._s(e.patientName(n.item))+"\n                  "),t("EmergencyIcon",{attrs:{isEmergency:n.item.emergency_pass}})],1),t("div",{staticClass:"d-inline-flex"},[e.hasSocialName(n.item)?t("div",{staticClass:"d-inline-flex ml-1"},[t("img",{attrs:{src:a("92a7")}})]):e._e(),n.item.patient_info?t("DeficiencyIdentifierBars",{staticClass:"ml-1",attrs:{isVip:n.item.patient_info.vip,deficiencyIds:n.item.patient_info.disabilities}}):e._e()],1)]),n.item.is_new?t("span",{staticClass:"new"},[e._v("\n                ("+e._s(e.$t("attendance.new"))+")\n              ")]):e._e()]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.IS_SCHEDULE)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.is_schedule?e.$t("attendance.yes"):e.$t("attendance.no"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CASE_ATTENDANCE_ID)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.case_attendance_id)+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPS_NUMBER)||e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTEMPT_NUMBER)?t("td",{staticClass:"text-center"},[t("p",[e._v(e._s(n.item.attempts))]),t("span",{staticClass:"tb-items"},[e._v("\n                 "+e._s(e.getLastAttemptDate(n.item))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.SLA)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(e.formatDate(n.item))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.CONTACT_TIME)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.patient_info?e.formatContactTimeText(n.item.patient_info.contact_time):"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.STATUS)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.status?e.$t("status."+n.item.status.toLowerCase()):"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.REQUEST)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items",class:{free:"expert_referral"===e.generateCase(n.item)||"network_expert_referral"===e.generateCase(n.item),pass_out:"expert_referral"!==e.generateStatus(n.item.sla)&&"network_expert_referral"!==e.generateCase(n.item)}},[e._v("\n                "+e._s(e.generateCase(n.item)?e.$t("attendance."+e.generateCase(n.item)):"")+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ORIGIN)?t("td",{staticClass:"text-center"},[t("span",{staticClass:"tb-items"},[e._v(e._s(n.item.program_information[0].name))])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ATTENDANT_NAME)?t("td",[t("span",{staticClass:"tb-items"},[e._v("\n                "+e._s(n.item.attendant_info?n.item.attendant_info.name:e.$t("attendance.no_one"))+"\n              ")])]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.DOCTOR_NAME)?t("td",[null!=n.item.doctor_id?t("span",{staticClass:"tb-items"},[e._v("\n               "+e._s(n.item.doctor_info.name)+"\n              ")]):e._e(),null==n.item.doctor_id&&null!=n.item.attendant_id?t("span",{staticClass:"tb-items"},[e._v("\n               "+e._s(n.item.attendant_info.name)+"\n              ")]):e._e(),null==n.item.doctor_id&&null==n.item.attendant_id?t("span",{staticClass:"tb-items blue--text"},[e._v("\n                "+e._s(e.$t("attendance.no_one"))+"\n              ")]):e._e()]):e._e(),e.hasHeaderType(e.$consts.ATTENDANCE_HEADER_TYPES.ACTION)?t("td",{staticClass:"action-container d-flex py-2"},[t("div",{staticClass:"table-meus-atendimentos-buttons d-flex"},[e.canAttend?t(r["a"],{staticClass:"white--text font-btn toggleAttend mb-2",attrs:{width:"100px",height:"26px",color:"primary","data-attend-id":n.item.id,loading:e.loadingAttend,disabled:e.disableButton(n.item)&&e.canAttend||!n.item.enable_attend_button},on:{click:function(t){return e.attend(n.item)}}},[t("img",{staticClass:"mr-2 c-icon",attrs:{src:a("9691")}}),e._v("\n                  "+e._s(e.$t("attendance.attend"))+"\n                ")]):e._e(),e.canCancel?t(r["a"],{staticClass:"font-btn mr-n6",attrs:{width:"100px",height:"26px",color:"primary",loading:e.loadingAttend,disabled:e.loadingAttend,outlined:""},on:{click:function(t){return e.cancel(n.item.case_attendance_id)}}},[t("img",{staticClass:"mr-2 b-icon",attrs:{src:a("d9ed")}}),e._v("\n                  "+e._s(e.$t("attendance.cancel"))+"\n                ")]):e._e()],1),t("div",{staticClass:"ml-2"},[e.canTransfer?t("transfer-button",{attrs:{program:e.program_info,case_attendance_id:n.item.case_attendance_id,company_id:null}}):e._e()],1)]):e._e()])]}}],null,!1,3271149859)})],1),e.totalPages>0?t(_t["a"],{staticClass:"pagination mt-2",attrs:{length:e.totalPages},on:{input:function(t){return e.changePage()}},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}}):e._e(),t("TransferMine")],1)]):e._e()},It=[],ht=a("7f45"),Ot=a.n(ht);n["a"].filter("formatCpfFilter",e=>{let t=e.substr(0,3),a=e.substr(3,3),n=e.substr(6,3),i=e.substr(9,2);return`${t}.${a}.${n}-${i}`}),n["a"].filter("formatCnpjFilter",e=>e.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")),n["a"].filter("formatPhoneFilter",e=>{if(!e)return"";let t="00",a="00",n="00000",i="0000";return e=e.replace(/[&\/\\#, +()$~%.'":*?<>{}-]/g,""),13===e.length&&(t=e.substr(0,2),e=e.slice(2,e.length),a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,5),e=e.slice(5,e.length),i=e),12===e.length&&(t=e.substr(0,2),e=e.slice(2,e.length),a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,4),e=e.slice(4,e.length),i=e),11===e.length?(a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,5),e=e.slice(5,e.length),i=e,`(${a}) ${n}-${i}`):10===e.length?(a=e.substr(0,2),e=e.slice(2,e.length),n=e.substr(0,4),e=e.slice(4,e.length),i=e,`(${a}) ${n}-${i}`):`+${t} (${a}) ${n}-${i}`}),n["a"].filter("formatDateFilter",e=>{if(!e)return"N
